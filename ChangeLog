2018-08-05  Morten Welinder  <terra@gnome.org>

	* tests/test-quad.c: Try to make the tests work a bit better for
	the excess-precision case, i.e., x86 in 32-bit mode.

2018-08-03  Morten Welinder  <terra@gnome.org>

	* goffice/goffice.c (libgoffice_init): Use g_type_ensure to avoid
	giving the compiler any good ideas about removing calls.

2018-07-13  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_distrib/gog-boxplot.c (gog_box_plot_view_render): do
	not display whiskers when there are only ouliers outside of the box. Fixes
	#345.

2018-05-17  Morten Welinder  <terra@gnome.org>

	* goffice/app/go-plugin.c (go_plugins_shutdown): Avoid hash order
	dependency.

2018-05-10  Morten Welinder  <terra@gnome.org>

	* goffice/app/file.c (go_file_saver_for_file_name): Pick the most
	capable saver if multiple are possible.

2018-05-07  Morten Welinder <terra@gnome.org>

	* configure.ac: Post-release bump.

2018-05-07  Morten Welinder <terra@gnome.org>

	* Release 0.10.41

2018-05-06  Morten Welinder  <terra@gnome.org>

	* goffice/graph/gog-axis.c (axis_format_value): When using General
	format, limit precision to 9-10 digits.  If you need more, use a
	specific format, but you are probably doing something wrong
	anyway.  This avoids graph ticks of the form "1.10000000000002".

2018-04-29  Morten Welinder <terra@gnome.org>

	* configure.ac: Post-release bump.

2018-04-29  Morten Welinder <terra@gnome.org>

	* Release 0.10.40

2018-04-19  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-font-sel.c (gfs_screen_changed): Set a minimum
	size for the family name picker so it's wide enough for 95% of the
	possible values.  (That leaves room for 5% of families with crazy
	names, just in case.)

2018-04-18  Morten Welinder  <terra@gnome.org>

	* goffice/app/go-doc.c (go_doc_finalize): Plug leak.

2018-04-06  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-optionmenu.c (go_option_menu_update_contents):
	Handle markup.
	(go_option_menu_init): Add a bit of space between label and
	separator so they don't touch.

2018-03-25  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-file.c (go_file_get_modtime): New function.

2018-03-14  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-quad.c (go_quad_start): Allocate memory before
	we change fpu state.  Seee bug #794115.

2018-03-13  Morten Welinder <terra@gnome.org>

	* configure.ac: Post-release bump.

2018-03-13  Morten Welinder <terra@gnome.org>

	* Release 0.10.39

2018-03-06  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-math.c (do_sinpil): Improve accuracy of
	fallback.

2018-02-14  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-image.c (goc_image_draw): don't try to display an image
	with nul size.
	* goffice/utils/go-emf.c (go_emf_lineto): create a path if necessary instead
	of returning an error.

2017-12-28  Morten Welinder <terra@gnome.org>

	* configure.ac: Post-release bump.

2017-12-28  Morten Welinder <terra@gnome.org>

	* Release 0.10.38

2017-12-11  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-rotation-sel.c (cb_rotate_changed): Signal a
	style change, not just an object invalidation.

2017-12-10  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/goffice-gtk.c (go_style_context_from_selector):
	Import from Gnumeric (in turn from gtk+).

2017-12-05  Morten Welinder  <terra@gnome.org>

	* tests/constants.c (main): Improve checking if double math
	produces the right values for direct and inverse.

	* goffice/gtk/goffice-gtk.c (_go_gtk_widget_add_css_provider):
	Install the css provider screen-wide.

2017-12-02  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-rotation-sel.c (cb_rotate_canvas_realize): Use
	css for styling.
	* goffice/gtk/go-3d-rotation-sel.c (cb_rotate_canvas_realize): Ditto.

2017-12-01  Morten Welinder <terra@gnome.org>

	* configure.ac: Post-release bump.

2017-12-01  Morten Welinder <terra@gnome.org>

	* Release 0.10.37

2017-11-18  Morten Welinder <terra@gnome.org>

	* configure.ac: Post-release bump.

2017-11-18  Morten Welinder <terra@gnome.org>

	* Release 0.10.36

2017-10-30  Jean Brefort  <jean.brefort@normalesup.org>

	* docs/reference/Makefile.am: fix documentation build with recent gtk-doc.
	[#788710]
	* goffice/goffice.c:

2017-10-23  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_surface/xl-surface.c (xl_contour_plot_build_matrix): fix
	rendering.

2017-10-23  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_surface/xl-surface.c (xl_xyz_series_init): don't show these
	series in the legend. [#788861]

2017-10-02  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_surface/gog-xyz-surface.c
	(gog_xyz_surface_plot_build_matrix): don't crash if X or Y values are
	missing. [#788437]

2017-08-03  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-format.c (printf_engineering): fix engineering format.
	[#785669]

2017-07-06  Morten Welinder <terra@gnome.org>

	* configure.ac: Post-release bump.

2017-07-06  Morten Welinder <terra@gnome.org>

	* Release 0.10.35

2017-05-17  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-quad.c (go_quad_mul12): Avoid unnecessary
	overflow when splitting a number into two parts.

2017-03-20  Morten Welinder <terra@gnome.org>

	* configure.ac: Post-release bump.

2017-03-20  Morten Welinder <terra@gnome.org>

	* Release 0.10.34

2017-03-17  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_format_new_from_XL): Cache also
	rich-text formats.

2017-01-29  Morten Welinder <terra@gnome.org>

	* configure.ac: Post-release bump.

2017-01-29  Morten Welinder <terra@gnome.org>

	* Release 0.10.33

2017-01-23  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_barcol/gog-line.c : fix evaluation of regression curves
	for area plots. [#777334]

2017-01-22  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-object.c (gog_object_clear_parent): fix add child menu
	in graph guru. [#777336]

2016-12-05  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis-line.c (role_grid_line_major_can_add):
	reimplement major grids for discrete axes. [#775624].

2016-11-16  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-libxml-extras.c: fix long double support condition.
	[#774439]

2016-11-02  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-legend.c (cb_render_elements): allow box plots look
	like bar plots in legends. [#773825]
	* plugins/plot_distrib/gog-boxplot.c (gog_box_plot_class_init): ditto.

2016-10-02  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_render_general): Fix warning.
	(go_format_get_details): Avoid pango_trom_string.

	* goffice/math/go-matrix.c (go_quad_matrix_dump): Fix printf
	argument.  (Somehow magically worked -- on x86 at least.)

2016-08-20  Morten Welinder <terra@gnome.org>

	* configure.ac: Post-release bump.

2016-08-20  Morten Welinder <terra@gnome.org>

	* Release 0.10.32

2016-08-17  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-regression.c (go_linear_regression_leverage):
	Plug leak.

2016-06-29  Morten Welinder <terra@gnome.org>

	* configure.ac: Post-release bump.

2016-06-29  Morten Welinder <terra@gnome.org>

	* Release 0.10.31

2016-06-17  Morten Welinder <terra@gnome.org>

	* configure.ac: Post-release bump.

2016-06-17  Morten Welinder <terra@gnome.org>

	* Release 0.10.30

2016-05-26  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-color-scale.c (gog_color_scale_set_property),
	(gog_color_scale_get_property): properly save and load the reference to
	the axis. [#766829]

2016-05-06  Morten Welinder <terra@gnome.org>

	* configure.ac: Post-release bump.

2016-05-06  Morten Welinder <terra@gnome.org>

	* Release 0.10.29

2016-05-04  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-canvas.c: fix doc.
	* goffice/utils/go-style.c (go_style_apply_theme),
	(go_style_gradient_sax_save), (go_style_fill_sax_save),
	(go_style_sax_load_fill_pattern),
	(go_style_sax_load_fill_gradient), (go_style_persist_sax_save),
	(go_style_is_auto): really implement all auto flags.

2016-04-29  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-item.c (cb_hierarchy_changed): make css work again with
	gtk+-3.20.

2016-04-24  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis.c (gog_axis_view_size_allocate): fix an infinite
	loop condition. [#765480]

2016-04-17  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_xy/gog-xy.c (gog_xy_view_render): do not load invalid data
	labels in XYcolor plots. [#765155]

2016-03-24  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-complex.c (go_complex_sqrt): Avoid extreme-case
	unnecessary overflow.
	(go_complex_div): Avoid extreme-case unnecessary overflow and
	marginally improve accuracy.

2016-03-22  Morten Welinder <terra@gnome.org>

	* configure.ac: Post-release bump.

2016-03-22  Morten Welinder <terra@gnome.org>

	* Release 0.10.28

2016-03-11  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_distrib/gog-histogram.c
	(gog_histogram_plot_series_update): avoid issues with -INFINITY as well.

2016-03-10  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_distrib/gog-histogram.c
	(gog_histogram_plot_series_update): don't take nans and infinite into
	account when evaluating automatic bins. [#763446]

2016-03-09  Morten Welinder  <terra@gnome.org>

	* tests/constants.c (print_bits): Fix bit pattern rounding past
	the break.

2016-03-05  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-complex.c (go_complex_sqrt): Fix accuracy of
	real component when argument is very near the negative real axis.
	(go_complex_tan): Improve accuracy.
	(go_complex_ln): Improve accuracy near unit circle.

2016-02-23  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-complex.c (go_complex_powx): Expose the power
	function with separate return value for powers of 2.

2016-02-16  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-complex.c: Make a boxed type for the benefit of
	introspection.

2016-02-08  Morten Welinder  <terra@gnome.org>

	* configure.ac: Require C99.  Fix handling of $CC that includes
	options.  Don't check for yacc and lex.

2016-02-06  Morten Welinder <terra@gnome.org>

	* configure.ac: Post-release bump.

2016-02-06  Morten Welinder <terra@gnome.org>

	* Release 0.10.27

2016-02-06  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-complex.c (go_complex_from_polar_pi): Make this
	public.

2016-02-02  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-complex.c (go_complex_powl): Fix real case
	accuracy.
	(go_complex_div): Avoid intermediate underflow when possible.

2016-01-29  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis.c (gog_axis_view_size_allocate): fixed axis
	line children allocation, see #760675, comments 5-7.

2016-01-28  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis-line.c: add title to axis lines. [#760675]
	* goffice/graph/gog-axis.c : ditto.

2016-01-12  Jean Brefort  <jean.brefort@normalesup.org>

	* docs/reference/goffice-0.10-sections.txt: add missing declarations.
	* goffice/data/go-data-simple.c (go_data_scalar_str_new_copy),
	(go_data_vector_val_new_copy), (go_data_vector_str_new_copy): new
	functions for introspection.
	* goffice/data/go-data-simple.h: ditto.
	* goffice/graph/gog-series.c: add an annotation.

2016-01-11  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/app/go-plugin.c: add introspection annotations.
	* goffice/goffice.c (libgoffice_init): initialise GOPluginLoaderModule
	class to allow plugins initialization through introspection.
	* goffice/graph/gog-object.c:  add an introspection annotation.
	* goffice/math/go-cspline.c: typo.

2016-01-01 Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* utils/go-format.c (go_format_output_date_to_odf): write
	gnm:am-suffix and gnm:pm-suffix attributes instead of the 
	gnm:style attribute for number:style

2016-01-01 Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* utils/go-format.c (go_format_output_date_to_odf): write
	gnm:style attribute of number:style

2015-12-28  Morten Welinder <terra@gnome.org>

	* configure.ac: Post-release bump.

2015-12-28  Morten Welinder <terra@gnome.org>

	* Release 0.10.26

2015-12-25  Morten Welinder <terra@gnome.org>

	* configure.ac: Post-release bump.

2015-12-25  Morten Welinder <terra@gnome.org>

	* Release 0.10.25

2015-12-14  Morten Welinder  <terra@gnome.org>

	* goffice/graph/gog-axis-line.c (gog_tool_move_bound_init): Use
	gog_axis_map_get_real_extents here, see bug #684886.

2015-12-01  Morten Welinder  <terra@gnome.org>

	* goffice/app/go-plugin.c (go_plugin_read): Plug leak.

2015-09-20  Morten Welinder <terra@gnome.org>

	* configure.ac: Post-release bump.

2015-09-20  Morten Welinder <terra@gnome.org>

	* Release 0.10.24

2015-09-05  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_surface/gog-xyz-surface.c
	(gog_xyz_matrix_plot_build_matrix): don't access NULL values. [#754590]

2015-08-24  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-path.c (goc_path_prepare_draw): fix bounds and distance
	in RTL mode. [#753963]
	* goffice/canvas/goc-rectangle.c (goc_rectangle_prepare_draw): ditto.

2015-08-01  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_render_general): Also try the
	shortest representation when we're barely width limited.

2015-07-28  Morten Welinder <terra@gnome.org>

	* configure.ac: Post-release bump.

2015-07-28  Morten Welinder <terra@gnome.org>

	* Release 0.10.23

2015-07-26  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_render_general): Try the shortest
	representation when we're not width limited.  Fixes #752839.
	Also handle sign and shape when using shortest.

2015-07-10  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis.c (gog_axis_metrics_from_str): fix a
	paste error.  Fixes #752223.

2015-07-08  Morten Welinder  <terra@gnome.org>

	* plugins/reg_logfit/gog-logfit.c (gog_log_fit_curve_update):
	Survive missing y_val.  Fixes Redhat #1240470.

2015-07-04  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-object.c (gog_object_document_changed): check args
	types. Fix #751925.

2015-06-22  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_radar/gog-radar.c (gog_rt_view_render): protect against wrong
	series element index. [#751272]

2015-06-21  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis-color-map.c (color_map_load_from_uri): do not
	free the GsfXMLInDoc* twice.

2015-06-21  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_surface/xl-surface.c (get_y_vector): skip invalid series.
	[#751257]

2015-06-21  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_xy/gog-xy.c (gog_xy_view_render): protect against wrong
	series element index. [#751256]

2015-06-20  Morten Welinder  <terra@gnome.org>

	* goffice/graph/gog-grid-line.c (gog_grid_line_radial_render):
	Survive missing parameters.

	* goffice/graph/gog-chart-map.c (null_map_2D): Zero output
	variables.

2015-06-19  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_barcol/gog-barcol.c (gog_barcol_view_render): protect
	against wrong series number. [#751059]
	* plugins/plot_barcol/gog-dropbar.c (gog_dropbar_view_render):
	* plugins/plot_barcol/gog-line.c (gog_line_view_render):

2015-06-18  Morten Welinder  <terra@gnome.org>

	* goffice/app/go-doc.c (go_doc_image_fetch): Sanity check image
	type.

	* goffice/graph/gog-object-xml.c (gogo_start): Sanity check object
	type.

	* goffice/graph/gog-plot-engine.c (gog_plot_new_by_name)
	(gog_trend_line_new_by_name): Sanity check type name.

2015-06-17  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-object.c (gog_object_get_child_by_role): protect against
	NULL argument. [#750860]

2015-06-12  Morten Welinder  <terra@gnome.org>

	* goffice/app/io-context.c (ioc_finalize): Plug leak.

2015-06-01  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis-color-map.c (gog_axis_color_map_prep_sax): don't
	free the xml doc twice.

2015-05-31  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_format_parse_number_new_1):
	Prevent ABR.

2015-05-27  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-style.c (go_style_set_cairo_line): Plug leak.

2015-05-17  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_format_output_simple_to_odf):
	Taking a wild guess that result should have been initialized to
	TRUE.

	* configure.ac (set_more_warnings): clang fix from gnumeric.

	* goffice/math/go-quad.c (go_quad_start): Initialize constants via
	non-const objects.  See bug #749463.

2015-05-16  Morten Welinder  <terra@gnome.org>

	* goffice/graph/gog-theme.c (theme_load_from_uri): Avoid double
	unref on exit.

2015-05-14  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-pixbuf.c (go_pixbuf_finalize): Plug leak.

2015-05-12  Morten Welinder  <terra@gnome.org>

	* goffice/graph/gog-renderer.c (gog_renderer_get_pixbuf): Handle
	degenerate image size.
	(gog_renderer_export_image): Limit size to shield cairo.  Fixes #749274.

2015-05-09  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_format_parse): Don't read beyond
	global variable's end.  [#749167]

2015-05-06  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-pixbuf.c (go_pixbuf_save): don't save when no data is
	available [see #748493, comments 13 to 16]

2015-05-04  Morten Welinder  <terra@gnome.org>

	* goffice/graph/gog-axis.c (axis_format_value): Allow caller to
	handling scaling.
	(map_linear_calc_ticks): Handling scaling so we can control
	rounding errors in ticks.

2015-05-04  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis.c (axis_format_value),
	(gog_axis_set_property), (gog_axis_get_property),
	(gog_axis_class_init), (gog_axis_init): add a display factor to scale
	axis ticks labels. [#748295]

2015-04-28  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-image.c (go_image_type_for_format): disable metafiles
	support when there is no screen. [#748493]

2015-04-16  Morten Welinder <terra@gnome.org>

	* configure.ac: Post-release bump.

2015-04-16  Morten Welinder <terra@gnome.org>

	* Release 0.10.22

2015-04-15  Morten Welinder  <terra@gnome.org>

	* plugins/plot_barcol/gog-minmax.c (gog_minmax_plot_class_init):
	Use GSF_PARAM_STATIC.

2015-04-13  Morten Welinder  <terra@gnome.org>

	* plugins/plot_pie/gog-pie.c (gog_ring_plot_class_init): Persist
	the center size.

2015-04-13  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/data/go-data-simple.c (go_data_scalar_val_new): ensure that
	go_data_has_value() returns TRUE if there is a valid number.

2015-04-12  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis.c (cb_enable_dim): make manual scale really manual
	even if it matches the auto value. [#700599]

2015-04-11  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-math.c (go_atan2pi): Simplify.
	(go_atanpi, go_cotpi): New functions.

2015-04-03  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-pattern.c (go_pattern_create_cairo_pattern):
	Don't use 8x8 bitmaps for patterns.  Draw all patterns with cairo.
	(create_direct_pattern): Improve semi-circles rendering.

2015-04-02  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-pattern.c (go_pattern_create_cairo_pattern): Do
	2 colour translations instead of 64.  Split submethods into
	separate functions.
	(svg_pattern): Fix scaling.

2015-04-01  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-renderer.c (_get_marker_surface),
	(gog_renderer_draw_marker), (_free_marker_data): auto fill color made
	transparent for opened markers (x, +, and *). [#691025]
	* goffice/graph/gog-theme.c (map_marker): ditto.
	* goffice/gtk/go-marker-selector.c (go_marker_palette_render_func),
	(go_marker_selector_set_shape), (go_marker_selector_set_auto_fill): ditto.
	* goffice/gtk/go-marker-selector.h: ditto.
	* goffice/utils/go-marker.c (go_marker_is_closed_shape): ditto.
	* goffice/utils/go-marker.h: ditto.
	* goffice/utils/go-style.c (cb_marker_fill_color_changed),
	(marker_init): ditto.

2015-03-31  Morten Welinder  <terra@gnome.org>

	* goffice/graph/gog-object-xml.c (gog_dtd): Remove duplicate node.

2015-03-31  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis.c (make_dim_editor),
	(cb_polar_unit_changed), (gog_axis_populate_editor): update circular axis
	bounds after a unit change. [#746738]

2015-03-28  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_xy/gog-xy.c (gog_xy_view_render): protect colored xy and
	bubble plots against NULL z values.

2015-03-25  Morten Welinder  <terra@gnome.org>

	* plugins/plot_radar/gog-radar.c (gog_rt_plot_update): Handle log
	radial axis better.
	(gog_polar_plot_axis_get_bounds): Ditto.

2015-03-24  Morten Welinder  <terra@gnome.org>

	* plugins/plot_barcol/gog-1.5d.c (gog_plot1_5d_axis_get_bounds):
	Use gog_axis_is_zero_important.  Avoid underflow.
	(gog_plot1_5d_update): Use gog_axis_data_get_bounds.

	* goffice/graph/gog-axis.c (gog_axis_is_zero_important): New
	function.

2015-03-20  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-math.c (_go_math_init): generate positive nan.

2015-03-19  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis-line.c (axis_line_point): fix selection of
	axes using only part of the plot area. [#746456]

2015-03-19  Morten Welinder  <terra@gnome.org>

	* plugins/plot_barcol/gog-1.5d.c (gog_plot1_5d_axis_get_bounds):
	Use 0% as format instead of the ill-defined default which happens
	to be 0.00% -- and that makes no sense here.

2015-03-13  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-line.c (goc_line_draw):

2015-03-12  Morten Welinder  <terra@gnome.org>

	* goffice/graph/gog-axis.c (gog_axis_data_get_bounds): New
	function.

	* plugins/plot_xy/gog-xy.c (gog_2d_plot_update): Use
	gog_axis_data_get_bounds.

2015-03-10  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_surface/gog-matrix.c (gog_matrix_view_render): fix
	rendering of matrix plots with a discrete axis.
	* plugins/plot_surface/gog-xyz.c (gog_xyz_plot_axis_get_bounds): ditto.

2015-03-10  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis-line.c (axis_line_get_bbox),
	(axis_line_render): ensure that ticks on limits are not hidden
	because of rounding errors.

2015-03-06  Johannes Deutsch  <j_deutsch@web.de>

	* goffice/canvas/goc-line.c (goc_line_draw): do not draw the line
	over the arrow head at start. [#745736]

2015-03-04  Morten Welinder <terra@gnome.org>

	* configure.ac: Post-release bump.

2015-03-04  Morten Welinder <terra@gnome.org>

	* Release 0.10.21

2015-03-03  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-canvas.c (goc_canvas_draw): clip each
	rectangle before drawing. [#744076]

2015-03-01  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-pixbuf.c (go_pixbuf_create_pixbuf): Avoid
	critical when loading fails.
	(go_pixbuf_load_attr): Plug leak.

2015-02-28  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-image.c (go_image_get_info): New function.

2015-02-28  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-image.c (go_image_new_from_data): ensure that GOPixbuf
	keeps the original data around. [#745297]
	* goffice/utils/go-pixbuf.c: ditto.
	* goffice/utils/go-pixbuf.h: ditto.

2015-02-27  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-pixbuf.c (go_pixbuf_load_data): Set
	->data_length.

	* goffice/utils/go-image.c (go_image_new_from_data): If no image
	data is given, create an unknown image placeholder.

2015-02-24  Morten Welinder  <terra@gnome.org>

	* goffice/graph/gog-series-labels.c (gog_data_label_finalize):
	Plug leak.
	(role_data_label_post_add): Plug leak.
	(gog_series_labels_finalize): Plug leak.

	* goffice/graph/gog-axis-line.c
	(gog_axis_base_get_crossed_axis_type): Make this public.
	(gog_axis_base_get_crossed_axis_for_plot): New function -- when we
	know the plot we can pick the desired axis.

2015-02-20  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-pattern-selector.c (go_pattern_tooltip_func): New
	function.

	* goffice/gtk/go-gradient-selector.c (go_gradient_tooltip_func):
	New function.

2015-02-17  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-style.c (go_style_set_font_desc): Doc fix.

	* goffice/utils/go-pattern.c (go_pattern_get_svg_path): Plug leak.

2015-02-16  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-style.c (cb_font_changed): Set auto_font.
	(go_style_apply_theme): Apply font theming.
	(go_style_font_sax_save): Only save font when not auto.
	(go_style_sax_load_font): Be fairly smart about reading files
	created prior to this fix.
	(go_style_is_auto): Include auto_font and auto_color.
	(go_style_line_sax_save, go_style_gradient_sax_save)
	(go_style_text_layout_sax_save): Use sufficient precision.

2015-02-14  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-line.c (go_arrow_equal): New function.

	* goffice/gtk/go-arrow-sel.c (go_arrow_sel_set_arrow): Use
	go_arrow_equal.

2015-02-12  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-line.c: Use 0.0, not G_MINDOUBLE, to make cairo
	produce dots.  That seems to be the documented way to do it.

2015-02-11  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/math/go-rangefunc.c (go_range_increasing),
	(go_range_decreasing): ignore nans. [#744200]

2015-02-11  Morten Welinder  <terra@gnome.org>

	* goffice/canvas/goc-arc.c (prepare_draw_arrow): Protect oval
	drawing against invalid sizes.

	* goffice/canvas/goc-line.c (goc_line_draw): Avoid overflow.
	Round a bit more consistently.
	(draw_arrow): Use go_arrow_draw.

	* goffice/utils/go-line.c (go_arrow_draw): Only draw oval heads
	when sizes are positive.

	* goffice/gtk/go-font-sel.c (GOFontSelClass): Fix base class.

	* goffice/utils/go-line.c (go_arrow_draw): New function extracted
	from Gnumeric.

2015-02-07 Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* graph/gog-chart-map.c: protect against missing data

2015-02-07  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-regression.c (go_linear_solve_multiple):
	Initialize regres.  Why didn't the compiler warn about that?

2015-02-04  Morten Welinder <terra@gnome.org>

	* configure.ac: Post-release bump.

2015-02-04  Morten Welinder <terra@gnome.org>

	* Release 0.10.20

2015-02-04  Morten Welinder  <terra@gnome.org>

	* plugins/plot_barcol/gog-line.c (gog_line_series_init_style):
	Don't wipe out marker colours just because the shape auto.

	* plugins/plot_barcol/gog-minmax.c (gog_minmax_series_init_style): Ditto.

	* plugins/plot_xy/gog-xy-minmax.c
	(gog_xy_minmax_series_init_style): Ditto.

2015-01-26  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/reg_linear/gog-lin-reg.c: ensure that the dims number is correct
	in all cases. [see #743507]
	* plugins/reg_linear/gog-lin-reg.h: ditto.
	* plugins/reg_linear/gog-polynom-reg.c: ditto.

2015-01-23  Morten Welinder <terra@gnome.org>

	* configure.ac: Post-release bump.

2015-01-23  Morten Welinder <terra@gnome.org>

	* Release 0.10.19

2015-01-21  Morten Welinder  <terra@gnome.org>

	* goffice/graph/gog-object.c (gog_object_add_by_role): Only
	consider this explicitly_typed_role if the child type is not the
	default.

2015-01-19  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis.c (gog_axis_class_init): fixed typo in default map
	name.
	* goffice/graph/gog-guru.ui: allow the window to be maximized. [see #742897]

2015-01-17  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-rotation-sel.c (cb_rotate_changed): Avoid
	rounding errors by using go_cospi and go_sinpi.

2015-01-16  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_distrib/gog-histogram.c
	(gog_histogram_plot_series_update): don't loose any data when using
	automatic bins. [#742996]

2015-01-14  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/reg_linear/gog-lin-reg.c (gog_lin_reg_curve_update): protect
	against missing data. [#742859]
	* plugins/reg_logfit/gog-logfit.c (gog_log_fit_curve_update): ditto.
	* plugins/smoothing/gog-moving-avg.c (gog_moving_avg_update): ditto.

2015-01-11  Jean Brefort  <jean.brefort@normalesup.org>

	* libgoffice.pc.in: add missing libraries to Requires.private.

2015-01-09  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-action-combo-pixmaps.c
	(go_action_combo_pixmaps_create_menu_item): Use make_icon.

2015-01-08  Morten Welinder  <terra@gnome.org>

	* goffice/canvas/goc-widget.c (goc_offscreen_box_unrealize): Undo
	the embedder part of realization too.

2015-01-08  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis-line.c (gog_axis_line_get_ticks): don't return
	invalid ticks.

2015-01-08  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis-line.c: allow custom ticks and grid lines for axis
	lines. [#600482]
	* goffice/graph/gog-axis-line.h: ditto.
	* goffice/graph/gog-axis-prefs.ui: ditto.
	* goffice/graph/gog-axis.h: ditto.
	* goffice/graph/gog-chart.c: ditto.
	* goffice/graph/gog-grid-line.c: ditto.

2015-01-07  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis.c: fix axis title position when at high coordinate.

2015-01-07  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/data/go-data-impl.h: add GO_DATA_HAS_VALUE to GODataFlags.
	* goffice/data/go-data.c: new go_data_has_value().
	* goffice/data/go-data.h: ditto.
	* goffice/graph/gog-series.c: don't use a data vector with no valid value.
	[#741910]
	* plugins/plot_xy/gog-xy.c: protect against NULL y vector.

2015-01-07  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-canvas.c (goc_canvas_draw): implement native scrolling.
	[#741394]

2015-01-06  Morten Welinder  <terra@gnome.org>

	* goffice/canvas/goc-widget.c (goc_offscreen_box_realize): Only
	make window composited if the screen is.  See bug 741455.

2015-01-04  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/goffice-gtk.c (update_preview_cb): Fix flags
	argument of gtk_icon_theme_load_icon.
	(go_gtk_widget_render_icon_pixbuf): New function.

	* goffice/gtk/go-action-combo-pixmaps.c (make_icon): Use
	go_gtk_widget_render_icon_pixbuf.
	* goffice/gtk/go-action-combo-color.c (make_icon): Ditto.

2015-01-02  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/goffice-gtk.c (go_gtk_button_build_with_stock): Make
	this work with icon names.

2014-12-31  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-glib-extras.c (go_guess_encoding): Lean a bit
	heavier on libxml's encoding guess instead of g_get_charset which
	may be a bit random.

2014-12-29  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/goffice-gtk.h (go_gtk_builder_new_internal): Remove.
	Anyone crazy enough to use that deserves the pain.

2014-12-28  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/goffice-gtk.c (go_gtk_builder_load_internal):
	Actually handle the claimed data: prefix.

	* goffice/gtk/go-color-palette.c: Avoid GtkColorSelDialog which is
	_gone_ from current gtk+.  Use GtkColorChooserWidget instead.
	* goffice/gtk/go-color-selector.c: Ditto.

2014-12-26  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-action-combo-pixmaps.c (make_icon): Handle a
	stock_id which is really an icon name.

2014-12-25  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-action-combo-stack.c (cb_reconfig): Simplify
	using gtk_action_create_icon which also handled named icons.

2014-12-15  Morten Welinder  <terra@gnome.org>

	* plugins/plot_distrib/gog-histogram.c
	(gog_histogram_plot_view_render): Cleanup.  Avoid warnings.  Avoid
	unneccesary overflow.

2014-12-06  Morten Welinder  <terra@gnome.org>

	* goffice/canvas/goc-canvas.c (goc_canvas_draw): Plug leak.
	(_goc_canvas_remove_item): New function.  Use of this fixes
	several crashes.

	* goffice/canvas/goc-group.c (goc_group_remove_child): Don't mess
	directly with the canvas' members here.  Tell the canvas that
	child is gone.
	(goc_group_add_child): If the canvas changes, tell the old canvas
	that child is gone.

	* goffice/canvas/goc-item.c (goc_item_dispose): Don't mess
	directly with the canvas' members here.

2014-11-26  Jean Brefort  <jean.brefort@normalesup.org>

	reviewed by: <delete if not using a buddy>

	* goffice/graph/gog-axis.c (gog_axis_view_padding_request),
	(gog_axis_view_size_allocate): Move the titles with the axis when some other
	axis has an offset. [#684777]

2014-11-21  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis-line.c (gog_axis_base_init_style): allow rotation
	of axis line labels. [#740198]

2014-10-27  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-canvas.c (goc_canvas_draw),
	(goc_canvas_finalize), (goc_canvas_init), (goc_canvas_invalidate),
	(goc_canvas_invalidate_region): add new goc_canvas_invalidate_region().
	* goffice/canvas/goc-canvas.h: ditto.

2014-09-27  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-combo-box.c (cb_state_flags_change): Don't use
	deprecated signal and functions.

2014-09-25  Morten Welinder <terra@gnome.org>

	* configure.ac: Post-release bump.

2014-09-25  Morten Welinder <terra@gnome.org>

	* Release 0.10.18

2014-09-12  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-text.c (go_anchor_type_get_type),
	(goc_text_prepare_draw), (goc_text_draw): add baseline anchor values.
	* goffice/utils/go-emf.c (go_emf_dc_free), (go_emf_settextalign),
	(go_emf_savedc), (go_emf_selectobject), (go_emf_bitblt),
	(go_emf_extcreatefontindirectw), (go_emf_exttextouta),
	(go_emf_exttextoutw), (go_emf_parse): partial implementation of text
	support.
	* goffice/utils/goffice-utils.h: add baseline anchor values.

2014-08-28  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/data/go-data-simple.c (go_data_vector_str_load_values),
	(go_data_vector_str_get_value): don't pass NULL to g_strtod(). [#735555]

2014-08-27 Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/graph/gog-axis-color-map.c (save_name_cb): don't skip
	encoding on user entered names

2014-08-19  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis-color-map.c (gog_axis_color_map_save): better
	file mode, (color_maps_load_from_dir): don't check the mime type as it
	seems not so reliable, just check the extension. [#735007]

2014-08-18  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis-color-map.c (gog_axis_color_map_save): create
	$HOME/.goffice/colormaps if needed. [#735008]

2014-08-10  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-style.c (cb_pattern_type_activate),
	(cb_brightness_changed), (cb_gradient_type_changed),
	(cb_fill_type_changed), (cb_font_color_changed),
	(cb_angle_changed): fixed more auto style issues. [see Debian #757611]

2014-07-28  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-combo-color.c
	(go_combo_color_set_color_internal): Copy the pixbuf and set it
	back onto the image.  An ABI change in gtk means that changes no
	longer take effect right away if we just change the image's pixbuf
	directly.  Fixes #733350.

2014-07-25  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-style.c (cb_outline_size_changed),
	(cb_line_size_changed): fixed persistence of line width.

2014-07-20  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis.c (gog_axis_init): center ticks by default.
	* goffice/graph/gog-renderer.c (_draw_rotated_shape): add a missing
	cairo_restore() call.

2014-07-19  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-trend-line.c (gog_trend_line_init_style): fix another
	theme support issue.

2014-07-19  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-grid-line.c (gog_grid_line_init_style): fix theme
	support. [#733403]

2014-06-09  Morten Welinder <terra@gnome.org>

	* configure.ac: Post-release bump.

2014-06-09  Morten Welinder <terra@gnome.org>

	* Release 0.10.17

2014-05-30  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-math.c (_go_math_init): Ensure test is locale
	independent.

2014-05-29  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/Makefile.am: new GoUnit objects.
	* goffice/goffice.c (libgoffice_shutdown): ditto.
	* goffice/graph/gog-axis.c: Add control for 3D plots axes lengths. [#694746]
	* goffice/graph/gog-axis.h: ditto.
	* goffice/graph/gog-chart.c (gog_chart_view_3d_process): ditto.
	* goffice/utils/goffice-utils.h: new GoUnit objects.
	* goffice/utils/go-unit.c: ditto.
	* goffice/utils/go-unit.h: ditto.

2014-05-23  Morten Welinder <terra@gnome.org>

	* configure.ac: Post-release bump.

2014-05-23  Morten Welinder <terra@gnome.org>

	* Release 0.10.16

2014-05-10  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-style.c (go_style_get_marker): Constify.

2014-05-10  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-graph.c (gog_graph_view_render): don't crash when
	selecting the 3d box.

2014-05-08  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-style.c (go_style_sax_load_line): Read
	auto-width.
	(go_style_line_sax_save): Save auto_width.  Don't save width when
	auto_width.
	(go_style_apply_theme): Apply font color.
	(go_style_font_sax_save): Save auto_color and auto_font (but see
	comments).
	(go_style_sax_load_font): Read auto-color.

	* goffice/graph/gog-axis.c (map_linear_calc_ticks): Keep values as
	integers as long as possible.

2014-05-08  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-line.c: restore dashes with dots.

2014-05-07  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-3d-box.c (gog_3d_box_class_init): add a view class for
	the 3d box to support data that are view dependent.
	* goffice/graph/gog-3d-box.h: ditto.
	* goffice/graph/gog-axis-line.c (xyz_process): change gog_chart_map_3d_new()
	signature to suppor the new view class.
	* goffice/graph/gog-chart-map-3d.c (xyz_map_3D_to_view),
	(gog_chart_map_3d_new), (gog_chart_map_3d_free): ditto.
	* goffice/graph/gog-chart-map-3d.h: ditto.
	* goffice/graph/gog-chart.c (gog_chart_view_3d_process): ditto.
	* goffice/graph/gog-grid-line.c (gog_grid_line_xyz_render): ditto.
	* goffice/graph/gog-grid.c (gog_grid_view_xyz_render): ditto.
	* plugins/plot_surface/gog-surface.c (gog_surface_view_render): ditto.

2014-05-07  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-3d-box.c (cb_g3d_update),
	(gog_3d_box_populate_editor): fixed criticals.

2014-05-03  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/gtk/go-graph-widget.c (idle_handler): don't use GDK_THREADS_*.
	[728793]

2014-04-30  Morten Welinder <terra@gnome.org>

	* configure.ac: Post-release bump.

2014-04-30  Morten Welinder <terra@gnome.org>

	* Release 0.10.15

2014-04-29  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-dtoa.c (fmt_fp): Fix FMR.
	(go_dtoa): Speed up shortest-representation.

2014-04-28  Morten Welinder  <terra@gnome.org>

	* tests/test-format.c (test_general_format): Simple test for
	shortest-representation.

	* goffice/utils/go-format.c (go_render_general): When we have
	infinite room, just use go_dtoa to get the shortest
	representation.

	* goffice/math/go-dtoa.c (go_dtoa): Improve short-representation
	handling.

2014-03-24 Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_output_number_element_to_odf):
	add arguments, change all callers and output gnm:min-integer-chars
	(go_format_output_number_to_odf): handle the difference between ? and #

2014-04-23  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/goffice-graph.h: add expand fields to GogPosition.
	* goffice/graph/gog-graph.c (gog_graph_class_init): make charts expand.
	* goffice/graph/gog-label.c (gog_text_view_render): fix alignment.
	* goffice/graph/gog-object.c (gog_object_get_manual_allocation): take expand
	field into account. [#728752]

2014-04-22  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-dtoa.c (go_dtoa): Mostly implement the
	shortest-version flag.

	* goffice/graph/gog-object-xml.c (gog_object_write_property_sax):
	Properly handle float/double properties.

	* goffice/utils/go-format.c (go_format_output_number_to_odf):
	Handle TOK_REPEATED_CHAR.

2014-04-21  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_format_output_number_to_odf):
	Improve phase detection.

2014-04-20  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_format_output_number_to_odf):
	Handle text formats here too.  That might not seem logical, but a
	text format really just has an "@" instead of some combination of
	0/#/?; all the other parts are handled identically.

2014-04-19  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_format_output_number_to_odf):
	Handle invisible characters again.

2014-04-17  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-object.c (gog_object_get_manual_allocation): use
	available space when position is manual but size is automatic. [#728391]

2014-04-16  Morten Welinder  <terra@gnome.org>

	* goffice/graph/gog-view.c (gog_view_size_request): Zero
	requisition before calling virtual method.  All callers expect
	this.

2014-04-15  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-file.c (go_filename_simplify): Fix argument
	type for g_lstat.

	* goffice/app/go-plugin.c (get_file_state_as_string): Use g_stat,
	not raw stat.

	* goffice/utils/go-style.c (go_style_marker_sax_save): Don't
	output (meaningless) values for things that are "auto".
	(go_style_line_sax_save): Ditto.

2014-04-14  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-dtoa.c (fmt_fp): Portability improvement.

2014-04-14  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-graph.c (gog_graph_class_init): explicitly allow manual
	charts size. [728134]
	* goffice/graph/gog-object.c (gog_object_get_manual_allocation): take
	manual size flags into account.

2014-04-13  Morten Welinder  <terra@gnome.org>

	* goffice/graph/gog-object.c (cb_manual_size_changed): Use a
	canonical gboolean as argument to gtk_widget_set_visible.
	(cb_update_editor): Ditto.

2014-04-13  Morten Welinder <terra@gnome.org>

	* configure.ac: Post-release bump.

2014-04-13  Morten Welinder <terra@gnome.org>

	* Release 0.10.14

2014-04-11  Morten Welinder  <terra@gnome.org>

	* goffice/canvas/goc-canvas.c (goc_canvas_realize)
	(goc_canvas_unrealize): Install these as class methods, not
	signals.

2014-04-10  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-dtoa.c: When building with
	!GOFFICE_WITH_LONG_DOUBLE, don't use go_finitel.  Just assume we
	have isfinite.

	* goffice/canvas/goc-item.c (cb_hierarchy_changed): Renamed from
	cb_parent_changed.
	(goc_item_get_style_context): Also watch ::canvas.

2014-04-09  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_render_general): Drop a decimal by
	double-rounding the decimal string unless the string ends in '5'.

	* goffice/math/go-dtoa.c (go_dtoa): Improve long-double handling.

2014-04-07  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-dtoa.c (fmt_fp): Three fixes from musl.  (One we
	already had.)

	* goffice/app/go-plugin.c (go_plugin_db_deactivate_plugin_list):
	Another leak fix.
	(go_plugins_get_available_plugins): Introspection fix.

2014-04-04  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-dtoa.c (go_dtoa): New function.
	(fmt_fp): Fix buffer overrun.  Hit "%.3E" for 999999999.

	* goffice/utils/go-format.c: Use go_dtoa extensively.

2014-04-02  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_format_output_number_to_odf): Also
	flush string on '#' and '?'.

	* goffice/math/go-math.c (go_fake_round): Fix problem for 2^51 and
	like integers.
	(go_fake_roundl): Ditto, although for different set of numbers.
	(go_rint): Just use rint.

	* tests/test-format.c: New test program.

	* goffice/utils/go-format.c (go_format_output_conditional_to_odf):
	Use go_ascii_dtoa.
	(_go_number_format_init): Remove unused beyond_precision.

	* goffice/math/go-math.c (go_ascii_dtoa): New function.

2014-04-01  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_format_output_conditional_to_odf):
	Only use last condition as default if it is implicit.  If that in
	turn means we have no default, use General.

2014-04-01  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-rectangle.c (goc_rectangle_draw): always call
	cairo_restore().

2014-03-31  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_format_output_number_to_odf):
	Remove remaining cond_part references.  Handle embedded text.

2014-03-30  Morten Welinder  <terra@gnome.org>

	* goffice/graph/gog-plot-engine.c
	(gog_trend_line_service_deactivate): Plug leak.
	(gog_plot_type_service_deactivate): Ditto.

	* goffice/app/go-plugin.c (go_plugin_db_deactivate_plugin_list):
	Retry failed deactivations as long as we make progress.  (Some
	plugins depend on others.)

2014-03-28  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_format_parse_color): Implement
	numbered colours instead of just parsing them.

2014-03-27  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_format_output_general_to_odf):
	Match what LO does for "General".
	(go_format_output_date_to_odf, go_format_output_to_odf): Make sure
	we don't accidentally output a non-character token as-if it was a
	single character.

2014-03-26  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_format_output_conditional_to_odf):
	Don't make up a number format with nothing but maps in it.  LO
	doesn't really like that.
	(go_format_output_simple_to_odf): New argument keep_open controls
	whether to close the outermost xml tag.
	(odf_output_color): New function.  Use this for all odf fornat
	colour output.

2014-03-25  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_format_output_to_odf): Handle
	conditional formats.
	(go_format_output_simple_to_odf): New function extracted from
	go_format_output_to_odf.
	(go_format_output_conditional_to_odf): New function.

2014-03-20 Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_odf_style_map): fix format
	prefix strings

2014-03-20 Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_odf_style_map): figure
	out the correct number of digits to use for condition values

2014-03-18  Morten Welinder <terra@gnome.org>

	* Release 0.10.13

2014-03-18  Morten Welinder <terra@gnome.org>

	* configure.ac: Post-release bump.

2014-03-17  Morten Welinder  <terra@gnome.org>

	* goffice/graph/gog-child-button.c
	(build_addition_process_children): Renamed from
	build_addition_process_childs.  Plug leak.

	* goffice/canvas/goc-canvas.c (goc_canvas_dispose): Dispose of
	->root instead of simply clearing it.

	* goffice/canvas/goc-item.c (goc_item_dispose): Dispose of style
	context, if we have one.

2014-03-16  Morten Welinder  <terra@gnome.org>

	* goffice/canvas/goc-polyline.c (goc_polyline_distance): Don't
	save and restore style->width.  Code was changed four years ago to
	copy the style.  And restoring after the _unref is bad.

	* goffice/canvas/goc-polygon.c (goc_polygon_distance): Ditto.

	* goffice/math/go-math.c (_go_math_init): Add test for buggy math
	library (probably caused by compiler bug).

2014-03-15  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-pango-extras.c (go_pango_translate_here): Plug
	leak.

2014-03-15  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-canvas.c (goc_canvas_dispose): fix criticals
	related to style contexts destruction.

2014-03-15  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-canvas.c (goc_canvas_init): really accept
	leave_notify events. [#668103][see also #706659]

2014-03-14 Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_output_number_to_odf): write
	any started number.

2014-03-12  Morten Welinder  <terra@gnome.org>

	* goffice/app/go-conf-gsettings.c (go_conf_load_str_list): Don't
	reverse the order of elements.  Fixes #698630.

2014-03-09 Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_output_number_to_odf): write
	invisible characters but also write blank for LO and friends

2014-03-06 Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_output_scientific_number_to_odf):
	don't skip

2014-03-06 Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_output_number_to_odf): write
	invisible characters; add argument
	(go_format_output_to_odf): adjust call to go_format_output_number_to_odf

2014-03-06  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-file.c (go_file_open): use GsfInputHTTP for URLs
	starting with "http://" or "https://". [see #724970]

2014-03-05  Jean Brefort  <jean.brefort@normalesup.org>

	* configure.ac: add test for lsm_itex_to_mathml
	* plugins/lasem/component.c: use a local copy of lsm_itex_to_mathml and
	friend when not available. [#725693]
	* mmlitex/Makefile.am: remove extra DESTDIR. Patch from Julian
	Sikorski. [#725684]

2014-03-03  Morten Welinder <terra@gnome.org>

	* configure.ac: Post-release bump.

2014-03-03  Morten Welinder <terra@gnome.org>

	* Release 0.10.12

2014-03-03  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/gtk/go-rotation-sel.c: fixed parent class.

2014-02-19  Jean Brefort  <jean.brefort@normalesup.org>

	* Makefile.am: add new mmlitex subdir.
	* configure.ac: need libxslt.
	* goffice/Makefile.am: add new files.
	* goffice/component/go-component.c: fix data cleaning issues.
	* goffice/graph/gog-equation.c: use the new GoMathEditor widget.
	* goffice/gtk/go-font-sel.c: add go_font_sel_get_color().
	* goffice/gtk/go-font-sel.h: ditto.
	* goffice/gtk/go-math-editor.c: new math editor widget.
	* goffice/gtk/go-math-editor.h: ditto.
	* goffice/gtk/go-rotation-sel.c: use GtkGrid as parent.
	* goffice/gtk/goffice-gtk.h: add the new GoMathEditor widget.
	* goffice/utils/go-mml-to-itex.c: new MathML to ITEX convertor.
	* goffice/utils/go-mml-to-itex.h: ditto.
	* goffice/utils/goffice-utils.h: ditto.
	* mmlitex/Makefile.am: ditto.
	* mmlitex/README: ditto.
	* mmlitex/cmarkup.xsl: ditto.
	* mmlitex/entities.xsl: ditto.
	* mmlitex/glayout.xsl: ditto.
	* mmlitex/mmlitex.xsl: ditto.
	* mmlitex/scripts.xsl: ditto.
	* mmlitex/tables.xsl: ditto.
	* mmlitex/tokens.xsl: ditto.
	* plugins/Makefile.am: new math equations component.
	* plugins/lasem/Makefile.am: ditto.
	* plugins/lasem/component.c: ditto.
	* plugins/lasem/plugin.xml.in: ditto.

2014-02-16  Morten Welinder <terra@gnome.org>

	* configure.ac: Post-release bump.

2014-02-16  Morten Welinder <terra@gnome.org>

	* Release 0.10.11

2014-02-11  Morten Welinder <terra@gnome.org>

	* configure.ac: Post-release bump.

2014-02-11  Morten Welinder <terra@gnome.org>

	* Release 0.10.10

2014-02-07  Morten Welinder  <terra@gnome.org>

	* goffice/graph/gog-axis.c (dt_add): && --> ||.  Fixes bug 723820.

2014-01-31  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-action-combo-pixmaps.c (cb_toolbar_reconfigured):
	Redo all icons here.

	* goffice/gtk/go-combo-color.c (go_combo_color_set_icon): New
	function.

	* goffice/gtk/go-combo-pixmaps.c
	(go_combo_pixmaps_clear_elements): New function.

	* goffice/gtk/go-action-combo-pixmaps.c (make_icon): Simplify
	sizing.

	* goffice/gtk/go-action-combo-color.c
	(go_action_combo_color_create_tool_item): Handle reconfiguration
	of the toolbar the item is in.
	(make_icon): Simplify sizing.

	* goffice/gtk/go-action-combo-stack.c
	(go_action_combo_stack_create_tool_item): Handle reconfiguration
	of the toolbar the item is in.

2014-01-17  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis-line.c (gog_axis_base_set_property),
	(gog_axis_base_class_init): always save the axis position. [#722402]

2014-01-06  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-graph.c (goc_graph_do_tooltip): fix compiler warning.
	[#721004]

2013-12-30  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_render_general): If we're not
	width-limited, add an extra digit if we don't round-trip properly.
	Fix dropping of ".00000".

2013-12-23  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-quad.c (go_quad_atan2_special): Do quarters too.

2013-12-18  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-quad.c (go_quad_sin, go_quad_sinpi)
	(go_quad_asin, go_quad_cos, go_quad_cospi, go_quad_acos): New
	functions.

	* goffice/math/go-complex.c (go_complex_from_polar_pi): Use
	go_sinpi and go_cospi.
	(go_complex_angle_pi): Use go_atan2pi.
	(go_complex_pow): Improve accuracy.

	* goffice/math/go-math.c (go_sinpi, go_cospi, go_tanpi): New
	functions.

2013-12-17  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-math.c (go_add_epsilon, go_sub_epsilon): Base
	upon C99's nextafter.

	* tests/test-quad.c (floor_tests): Test asin and acos.

	* goffice/math/go-quad.c (go_quad_acos, go_quad_asin): new
	functions.

	* goffice/math/go-complex.c (go_complex_from_polar_pi)
	(go_complex_angle_pi): Handle diagonals too.

2013-12-16  Morten Welinder  <terra@gnome.org>

	* tests/test-quad.c (main): Test hypot.

	* goffice/math/go-quad.c: Fix the on-axis case.  *Sigh*

2013-12-13  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_radar/gog-radar.c (gog_rt_series_update): fix elements
	number in polar plot series. [#720355]

2013-12-12  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-complex.c (go_complex_pow): Improve prevention
	of intermediate overflow.

2013-12-12  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_distrib/gog-boxplot.c
	(gog_box_plot_axis_get_bounds): fix crasher [#720310],
	(gog_box_plot_view_render): fix valgrind warning.

2013-12-07  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-font-sel.c (update_preview_after_face_change)
	(go_font_sel_set_style): Fix enum confusion.

2013-12-05  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-quad.c (go_quad_pi): New constant.
	(go_quad_log, go_quad_atan2, go_quad_atan2pi): New functions.

	* tests/test-quad.c (main): Check value of go_quad_2pi.
	Test go_quad_atan2.

2013-12-04  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-complex.c (go_complex_pow): Fix class over
	premature overflow problems.

2013-12-02  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-guru.ui:fix graph guru appearance when used with
	gtk+-3.10. [#719681]

2013-11-28  Morten Welinder <terra@gnome.org>

	* configure.ac: Post-release bump.

2013-11-28  Morten Welinder <terra@gnome.org>

	* Release 0.10.9

2013-11-19  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-pixbuf.c (go_pixbuf_load_attr): Handle crazy
	rowstride.  Attempt at a fix for #712663.

2013-11-10  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-quad.c (pi_hex_digits, ...): Keep one copy only,
	not one per type.

2013-11-04  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-quad.c (go_quad_pow, go_quad_exp)
	(go_quad_expm1, go_quad_floor): new functions.

	* goffice/math/go-quad.h (go_quad_one, go_quad_pi, go_quad_e)
	(go_quad_ln2, go_quad_sqrt2, go_quad_euler): Supply a handful of
	useful constants at high accuracy.

2013-10-07  Morten Welinder <terra@gnome.org>

	* configure.ac: Post-release bump.

2013-10-07  Morten Welinder <terra@gnome.org>

	* Release 0.10.8

2013-10-04  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-optionmenu.c (go_option_menu_set_menu): When a
	new menu is set, clear the selected item.  [#709438]

2013-10-01  Morten Welinder  <terra@gnome.org>

	* goffice/Makefile.am (ALL_HDRS): We also need goffice.h

	* goffice/gtk/go-font-sel-dialog.c (go_font_sel_dialog_new):
	Actually implement.

	* goffice/Makefile.am (goffice.def): Don't export go_plugin_init
	and go_plugin_shutdown (which are prototyped because modules may
	defined them).
	(ALL_HDRS): Export gtk related headers too.

	* goffice/utils/go-styled-object.h: Remove
	go_styled_object_is_filled which isn't implemented.

2013-10-01  Jean Brefort  <jean.brefort@normalesup.org>

	* docs/reference/goffice-0.10-sections.txt: never redefine GtkJustfication,
	use GoJustification instead. [#709007]
	* goffice/graph/gog-axis-line.c (axis_line_render),
	(axis_circle_render): ditto.
	* goffice/graph/gog-color-scale.c (gog_color_scale_view_render): ditto.
	* goffice/graph/gog-label.c (gog_label_set_property),
	(gog_label_get_property), (gog_label_init), (gog_text_view_render): ditto.
	* goffice/graph/gog-legend.c (cb_render_elements): ditto.
	* goffice/graph/gog-renderer.c (gog_renderer_draw_gostring),
	(gog_renderer_draw_text): ditto.
	* goffice/graph/gog-renderer.h: ditto.
	* plugins/plot_distrib/gog-histogram.c
	(gog_histogram_plot_view_render): ditto.

2013-09-26  Morten Welinder  <terra@gnome.org>

	* goffice/goffice.h: Don't check glib version when macro check
	will do.

2013-09-23  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/smoothing/gog-exp-smooth.c (gog_exp_smooth_update): protect
	against missing x values. [#708562]
	* plugins/smoothing/gog-moving-avg.c (gog_moving_avg_update): ditto.

2013-09-21  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-chart.c (gog_chart_axis_set_assign): do not remove
	extra axes after adding a plot. [#708292]

2013-09-20  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-color-scale.c (gog_color_scale_view_render): ensure that
	the scale doe not extend outside of its bounding box, especially when axis
	settings are wrong or missing.
	* goffice/gtk/go-combo-box.c: make gtk-doc happy.

2013-09-19  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/Makefile.am: add subdir-objects option.

2013-09-01  Morten Welinder <terra@gnome.org>

	* configure.ac: Post-release bump.

2013-09-01  Morten Welinder <terra@gnome.org>

	* Release 0.10.7

2013-08-27  Morten Welinder <terra@gnome.org>

	* configure.ac: Post-release bump.

2013-08-27  Morten Welinder <terra@gnome.org>

	* Release 0.10.6

2013-08-23  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_barcol/gog-line.c (gog_line_view_render): always allocate
	enough room for points. [#706663]

2013-08-20  Morten Welinder  <terra@gnome.org>

	* goffice/canvas/goc-canvas.c (goc_canvas_draw): Fix redraw issues
	for gtk+ 3.9 and up.  Patch from Alexander Larsson <alexl@redhat.com>
	in bug 703124.

2013-08-19  Morten Welinder <terra@gnome.org>

	* configure.ac: Post-release bump.

2013-08-19  Morten Welinder <terra@gnome.org>

	* Release 0.10.5

2013-08-17  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_surface/gog-xyz-surface.c
	(gog_xyz_matrix_plot_build_matrix),
	(gog_xyz_surface_plot_build_matrix): fix third axis range evaluation. See
	bug 705913, comment 23.

2013-08-15  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_xy/gog-xy-dropbar.c (gog_xy_dropbar_plot_update): fixed x/y
	confusion.
	* plugins/plot_xy/gog-xy-minmax.c (gog_xy_minmax_plot_update): ditto,
	(gog_xy_minmax_plot_finalize), (gog_xy_minmax_plot_class_init): unref the
	formats. See bug 705913, comment 6.
	* plugins/plot_xy/plot-types.xml.in: fixed min max plots types.

2013-08-15  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_surface/gog-xyz.c (gog_xyz_plot_update_3d),
	(gog_xyz_plot_get_x_vals), (gog_xyz_plot_get_y_vals): fixed memory leaks.

2013-08-14  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_surface/gog-contour.c (gog_contour_view_render): don't crash
	if there is no color is used. [#705913]

2013-08-11  Morten Welinder  <terra@gnome.org>

	* goffice/utils/formats.c (_go_format_builtins)
	(_go_format_currencies): Change from variabless to functions.
	Improve C standard compliance in the process.

2013-08-09  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-graph.c: fix build without gtk.
	* goffice/graph/gog-renderer.h: ditto.
	* goffice/utils/go-editor.c (go_editor_add_page): ditto.
	* goffice/utils/go-image.c (go_image_draw_fb),
	(go_image_get_pixbuf_fb), (go_image_new_from_data): ditto and fix crash
	when drawing a fallback image without gtk (from ssconvert). [#705677]

2013-08-05  Jean Brefort  <jean.brefort@normalesup.org>

	* docs/reference/goffice-0.10-sections.txt: make gtk-doc happy.
	* goffice/graph/gog-chart-map.c (xy_make_path_step): remove an unneeded
	lineto instruction.
	* goffice/math/go-matrix.c: make gtk-doc happy.
	* goffice/utils/go-path.c (go_path_add_points),
	(go_path_interpret_full), (go_path_copy),
	(go_path_copy_restricted), (go_path_append): two new functions and sanitize
	a few others.
	* goffice/utils/go-path.h: new functions.
	* plugins/plot_barcol/gog-line.c (gog_line_view_get_data_at_point),
	(gog_line_view_render):, (gog_line_view_class_init): implement
	get_data_at_point for area and line plots and fix rendring of stacked area
	plots. [#627277][#689661][#705034]
	* plugins/plot_xy/gog-xy.c (gog_xy_view_get_data_at_point): minor
	optimization.

2013-08-02  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_xy/gog-bubble-prefs.ui: fix area vs diameter selection.
	[#705312]

2013-07-30 Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_output_to_odf): watch for conditions
	without format

2013-07-28  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-pixbuf.c (go_pixbuf_save),
	(go_pixbuf_load_data), (go_pixbuf_draw): fix more out of memory issues.
	[#705005]

2013-07-20  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-pixbuf.c (go_pixbuf_load_data): use g_try_malloc instead
	of g_malloc to avoid crashes. [#704560]

2013-07-18  Jean Brefort  <jean.brefort@normalesup.org>

	reviewed by: <delete if not using a buddy>

	* goffice/canvas/goc-ellipse.c (goc_ellipse_distance): fixed.
	* goffice/canvas/goc-path.c (goc_path_distance): fixed distance evaluation.
	[#704391]
	* goffice/canvas/goc-text.c (goc_text_set_property),
	(goc_text_prepare_draw), (goc_text_update_bounds),
	(goc_text_distance), (goc_text_draw), (goc_text_style_changed),
	(goc_text_class_init): fixed text position. [#704391]
	* goffice/canvas/goc-text.h: ditto.

2013-07-17  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-emf.c (go_emf_new_from_data), (go_emf_parse): protect
	against missing data. [#704311]

2013-07-15  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-regression.c (go_linear_regression_leverage):
	Prescale.

2013-07-11  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/component/goffice-component.h: move includes outside of
	G_BEGIN_DECLS/G_END_DECLS.

2013-07-10  Morten Welinder <terra@gnome.org>

	* configure.ac: Post-release bump.

2013-07-10  Morten Welinder <terra@gnome.org>

	* Release 0.10.4

2013-07-10  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-image.c (go_image_get_thumbnail),
	(go_image_get_pixbuf), (go_image_get_scaled_pixbuf),
	(go_image_set_name), (go_image_get_width), (go_image_get_height): protect
	against invalid image argument [#703949]

2013-07-09  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-regression.c (general_linear_regression):
	Restore initialization of N2.  Prescale x values.

2013-07-08  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-pixbuf.c (go_pixbuf_save),
	(go_pixbuf_load_data), (go_pixbuf_draw): avoid writing to a NULL buffer.

2013-07-08  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-pixbuf.c (go_pixbuf_load_data): fix loading of image with
	invalid size or data. [#703740]

2013-07-05 Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/app/go-doc.c (load_image): check for NULL attrs

2013-07-05  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/app/go-doc.c (go_doc_image_fetch): make it more secure.

2013-06-25  Morten Welinder <terra@gnome.org>

	* configure.ac: Post-release bump.

2013-06-25  Morten Welinder <terra@gnome.org>

	* Release 0.10.3

2013-06-24  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-graph.c (gog_graph_finalize): destroy all sources.
	[#702887]
	* goffice/graph/gog-theme.c (gog_theme_get_color_map),
	(gog_theme_set_name), (gog_theme_set_description), (gog_theme_dup),
	(gog_theme_edit): check the argument type.

2013-06-22  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-label.c (gog_text_view_natural_size),
	(gog_text_view_class_init): implement natural_size().
	* goffice/utils/go-pattern.c (go_pattern_create_cairo_pattern): fix build.

2013-06-22  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-pattern.c (go_pattern_get_pattern),
	(go_pattern_create_cairo_pattern): don't use an invalid pattern.
	[see #702833]
	* goffice/utils/go-style.c (go_style_set_cairo_line): ditto.

2013-06-18  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-guru.ui: set a minimal size. [#699473]

2013-06-13  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-data-set.c (gog_dataset_dims),
	(gog_dataset_get_dim), (gog_dataset_set_dim): protect against a NULL set.
	(see #702126).

2013-06-10  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_surface/gog-matrix.c (gog_matrix_view_render): ensure that
	the plot is always rendered.

2013-06-10  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_surface/gog-xyz-surface-prefs.c
	(cb_missing_as_changed), (gog_xyz_surface_plot_pref): fixed "missing as"
	combo box.
	* plugins/plot_surface/gog-xyz-surface.c
	(gog_xyz_matrix_plot_build_matrix),
	(gog_xyz_surface_plot_build_matrix),
	(gog_xyz_surface_plot_set_property): force update when bins change.
	* plugins/plot_surface/gog-xyz-surface.h: make two halper functions public.

2013-06-09  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis.c (gog_axis_get_color_scale): make public.
	* goffice/graph/gog-axis.h: ditto.
	* goffice/graph/gog-chart.c: ensure that contour plot slices don't appear in
	legend when a color scale is used.
	* plugins/plot_surface/chart_contour_2_2.svg: new pixmaps.
	* plugins/plot_surface/chart_matrix_1_1.svg: ditto.
	* plugins/plot_surface/chart_matrix_1_2.svg: ditto.
	* plugins/plot_surface/chart_matrix_1_3.svg: ditto.
	* plugins/plot_surface/chart_surface_2_3.svg: ditto.
	* plugins/plot_surface/Makefile.am: new files.
	* plugins/plot_surface/gog-contour.c: make compatible with XY plots.
	* plugins/plot_surface/gog-contour.h: ditto.
	* plugins/plot_surface/gog-matrix.c: new matrix plots. [#657918][#680806]
	* plugins/plot_surface/gog-matrix.h:
	* plugins/plot_surface/gog-surface.c: make compatible with XY plots.
	* plugins/plot_surface/gog-xyz-surface-prefs.c: ditto.
	* plugins/plot_surface/gog-xyz-surface-prefs.ui: ditto.
	* plugins/plot_surface/gog-xyz-surface.c: add new plot types.
	* plugins/plot_surface/gog-xyz-surface.h: ditto.
	* plugins/plot_surface/gog-xyz.c: ditto.
	* plugins/plot_surface/gog-xyz.h: ditto.
	* plugins/plot_surface/matrix.xpm: new pixmap
	* plugins/plot_surface/plot-types.xml.in: add new plot types.
	* plugins/plot_surface/plugin.xml.in: ditto.
	* plugins/plot_surface/xl-surface.c: make compatible with XY plots.

2013-06-03  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-label.c (gog_reg_eqn_populate_editor): allow regression
	equation frame to rotate with text. [#701546]

2013-05-31  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-color-scale.c
	(gog_color_scale_set_orientation), (position_fill_cb),
	(position_changed_cb), (direction_changed_cb),
	(gog_color_scale_set_property), (gog_color_scale_class_init),
	(gog_color_scale_view_size_request),
	(gog_color_scale_view_size_allocate),
	(gog_color_scale_view_render), (gog_color_scale_view_class_init): allow
	color scales to have titles. [#688595]
	* goffice/graph/gog-label.c (gog_text_init_style): ditto.

2013-05-22  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/goffice.c (libgoffice_init): fixed warnings.
	* goffice/graph/gog-view.h: ditto.
	* goffice/gtk/go-combo-box.h: ditto.
	* goffice/math/go-R.h: ditto.
	* goffice/utils/go-glib-extras.c: ditto.

2013-05-21  Morten Welinder  <terra@gnome.org>

	* goffice/goffice.c (libgoffice_init): Install the unknown_image
	icon here.

2013-05-13  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-svg.c: Try another variant of previous fix.

2013-05-12  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-regression.c (general_linear_regression): Take
	threshold argument.  All callers changed.  Detect and mark
	degenerate dimensions; adjust degrees-of-freedom accordingly.
	Compute coefficient variances in a way that negatives can be ruled
	out.

	* goffice/math/go-matrix.c (go_quad_matrix_dump): New function for
	debugging.
	(go_quad_qr_determinant): Move the determinant computation here.
	(go_quad_qr_mark_degenerate): New function.
	(go_quad_matrix_back_solve, go_quad_matrix_fwd_solve): Handle
	degenerate dimensions.

2013-05-11  Morten Welinder  <terra@gnome.org>

	* goffice/component/go-component.c: Fix issue with librsvg includes.
	* goffice/utils/go-svg.c: Ditto.  Fixes #695167.

2013-05-03  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-regression.c (go_matrix_pseudo_inverse): Improve
	algorithm.

2013-05-03  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/Makefile.am: add new UI file.
	* goffice/goffice.c (libgoffice_init): implement color scales.
	* goffice/graph/goffice-graph.h: ditto.
	* goffice/graph/gog-axis-color-map.c: ditto.
	* goffice/graph/gog-axis-color-map.h: ditto.
	* goffice/graph/gog-axis.c: ditto.
	* goffice/graph/gog-axis.h: ditto.
	* goffice/graph/gog-chart.c: ditto.
	* goffice/graph/gog-color-scale-prefs.ui: new UI file.
	* goffice/graph/gog-color-scale.c: implement color scales.
	* goffice/graph/gog-color-scale.h: ditto.
	* goffice/graph/gog-object.c: fix manual size issues.
	* goffice/graph/gog-renderer.c (gog_renderer_draw_color_map): new
	function.
	* goffice/graph/gog-renderer.h: ditto.
	* goffice/graph/gog-theme.c (build_predefined_themes): add color scale.
	* goffice/graph/gog-view.c (gog_view_size_allocate_real): fix
	manual size issues.
	* plugins/plot_surface/gog-contour.c
	(gog_contour_plot_foreach_elem): don't crash when inverting the
	pseudo-3d axis.
	* plugins/plot_surface/gog-xyz-prefs.c: add an option to not show
	the colors in the legend.
	* plugins/plot_surface/gog-xyz-prefs.ui: ditto.

2013-04-30  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-regression.c (go_matrix_pseudo_inverse): New
	function.

2013-04-26  Morten Welinder <terra@gnome.org>

	* configure.ac: Post-release bump.

2013-04-26  Morten Welinder <terra@gnome.org>

	* Release 0.10.2

2013-04-26  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/gtk/go-font-sel.c (gfs_screen_changed): ensure a full
	initialization of all fields in the font selector. [#698867]

2013-04-25  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-series.c (gog_series_populate_editor): hide the skip
	invalid checkbox for line and area plots.
	* plugins/plot_barcol/gog-line.c (gog_line_view_render): fixed skip invalid
	test.

2013-04-24  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-series-prefs.ui: fix interpolation selector.
	* goffice/graph/gog-series.c (gog_series_set_property),
	(cb_line_interpolation_changed), (gog_series_populate_editor): ditto.
	* goffice/utils/go-style.c (outline_init):
	* plugins/plot_barcol/gog-1.5d.c (go_plugin_init): add new area series type.
	* plugins/plot_barcol/gog-line.c: implement interpolation in line and area
	plots. [#698534]
	* plugins/plot_barcol/gog-line.h: ditto.

2013-04-24  Morten Welinder  <terra@gnome.org>

	* goffice/canvas/goc-widget.c (goc_offscreen_box_size_allocate):
	Clip crazy height/width to avoid program crash.

2013-04-19  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-action-combo-color.c
	(go_action_combo_color_create_tool_item): Show arrow only in
	horizontal mode.

	* goffice/gtk/go-combo-pixmaps.c (cb_preview_clicked): If arrow
	isn't shown, just pop up the choices.

	* goffice/gtk/go-action-combo-pixmaps.c
	(go_action_combo_pixmaps_create_tool_item): Show arrow only in
	horizontal mode.

	* goffice/gtk/go-combo-box.c (go_combo_box_class_init): Install
	"title" and "show-arrow" properties.

2013-04-18  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-combo-box.c (go_combo_box_dispose): Rename from
	go_combo_box_destroy and hooked up accordingly.

	* goffice/gtk/go-combo-pixmaps.c (go_combo_pixmaps_init): Keep a
	ref to grid.
	(go_combo_pixmaps_screen_changed): Install as class handler, not
	explicit signal.
	(go_menu_pixmaps_add_element): Remove workaround for gtk+ 2.16
	bug.

2013-04-17  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-renderer.c (gog_renderer_export_image): don't cache
	markers when exporting to svg until things are fixed in cairo
	(https://bugs.freedesktop.org/show_bug.cgi?id=63633). [#698162]

2013-04-16  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/goffice-gtk.c (go_gtk_file_sel_dialog): Don't use
	hack post gtk+ 3.4.

2013-04-16  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-editor.c (go_editor_add_page): add a reference to the
	widget when not using a scrolled window. Avoids unrefing a disposed object.
	[#698150]

2013-04-16  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-item.c (goc_item_set_transform): fix test. [#698101]
	* goffice/utils/go-editor.c (go_editor_new): initialize
	GOEditor::use_scrolled. [#698102]

2013-04-15  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_xy/gog-xy.c (gog_xy_view_render): fixed style in scatter plot
	after a valid but with invisible line series. [#698057]

2013-04-07  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-style.c (font_init): show the font face selector.
	[#697243]

2013-03-30  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/component/go-component.c (go_component_set_property),
	(go_component_get_property), (go_component_finalize),
	(go_component_class_init), (go_component_init),
	(go_component_duplicate), (go_component_set_inline),
	(go_component_get_inline), (go_component_set_use_font_from_app),
	(go_component_get_use_font_from_app): new property and functions.
	* goffice/component/go-component.h: ditto.

2013-03-29  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-object.c (gog_object_get_editor): force pages inside a
	scrolled window.
	* goffice/utils/go-editor.c (go_editor_add_page),
	(go_editor_set_store_page), (go_editor_set_use_scrolled_window): make the
	scrolled window optional. [#696825]
	* goffice/utils/go-editor.h:

2013-03-27  Morten Welinder  <terra@gnome.org>

	* goffice/canvas/goc-widget.c (goc_widget_connect_signals): Plug
	leak.
	(goc_widget_set_widget): Properly disconnect signals.

2013-03-27  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-widget.c (goc_widget_connect_signals),
	(goc_widget_set_widget): connetc the signals to all widgets including those
	 inside a container. [#696533]

2013-03-27  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-widget.c (goc_widget_distance): fixed distance
	evaluation. This ensure that the cursor is correctly updated.

2013-03-27  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/gtk/go-format-sel.ui: fix currency selector visibility. [#696647]

2013-03-26  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-pattern.c (go_pattern_is_solid): Handle greys.

	* goffice/canvas/goc-group.c (goc_group_add_child): Only notify of
	canvas changes when the canvas actually does change.

	* goffice/canvas/goc-item.c (goc_item_get_style_context): Track
	parent changes.

2013-03-25  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-item.c (goc_item_draw),
	(goc_item_draw_region): simplify.

2013-03-25  Morten Welinder  <terra@gnome.org>

	* goffice/canvas/goc-item.c (goc_item_get_style_context): Avoid
	3.4 dependency.

2013-03-25  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_barcol/gog-dropbar.c (gog_dropbar_view_render): one more
	uninitialized value issue fixed.

2013-03-25  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_barcol/gog-barcol.c (gog_barcol_view_render): don't use
	uninitialized values. [#696569]

2013-03-25  Morten Welinder  <terra@gnome.org>

	* goffice/canvas/goc-polyline.c (goc_polyline_draw): Fix cairo
	save stack imbalance.

2013-03-23  Morten Welinder  <terra@gnome.org>

	* goffice/canvas/goc-item.c (goc_item_get_style_context): New
	function.

2013-03-22  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-optionmenu.c (go_option_menu_position): Plug
	leak.

2013-03-21  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-optionmenu.c (go_option_menu_build): New
	function.

	* goffice/gtk/go-font-sel.c: Add underline support.

2013-03-20  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-optionmenu.c (go_option_menu_set_history): Plug
	leak.
	(go_option_menu_get_menu): New function.

	* goffice/gtk/go-font-sel.c: Add color group.
	(go_font_sel_set_color): Add is_default argument and make this
	public.

	* goffice/gtk/go-color-group.c (go_color_group_finalize): Don't
	leak the hash.

	* goffice/gtk/go-combo-color.c (go_combo_color_class_init): Fix
	type of first argument of color_changed signal.  Fixes #696022.

2013-03-20  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-ellipse.c (goc_ellipse_prepare_draw),
	(goc_ellipse_update_bounds), (goc_ellipse_distance),
	(goc_ellipse_draw): fixed line width.
	* goffice/canvas/goc-path.c (goc_path_prepare_draw),
	(goc_path_update_bounds), (goc_path_draw): fixed line width and position
	in RTL canvas.
	* goffice/canvas/goc-polygon.c (goc_polygon_prepare_path),
	(goc_polygon_update_bounds), (goc_polygon_distance),
	(goc_polygon_draw): ditto.
	* goffice/canvas/goc-polyline.c (goc_polyline_prepare_draw),
	(goc_polyline_draw): ditto.
	* goffice/canvas/goc-rectangle.c (goc_rectangle_prepare_draw),
	(goc_rectangle_update_bounds), (goc_rectangle_draw): fixed line width.
	* goffice/canvas/goc-styled-item.c
	(goc_styled_item_set_cairo_line),
	(goc_styled_item_get_scale_line_width),
	(goc_styled_item_set_scale_line_width): new helper functions.
	* goffice/canvas/goc-styled-item.h: ditto.

2013-03-20  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-font-sel.c (reload_faces): Use
	go_font_sel_set_style to restore user's choice, not string
	matching on face name.  Fixes #696168.

2013-03-19  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-arc.c (goc_arc_prepare_draw): make item
	transform work.
	* goffice/canvas/goc-canvas.c (button_press_cb): typo.
	* goffice/canvas/goc-circle.c (goc_circle_draw),
	(goc_circle_update_bounds): make item transform work.
	* goffice/canvas/goc-component.c (goc_component_draw),
	(goc_component_update_bounds): ditto.
	* goffice/canvas/goc-ellipse.c (goc_ellipse_prepare_draw): ditto.
	* goffice/canvas/goc-group.c (goc_group_cairo_transform): ditto.
	* goffice/canvas/goc-image.c (goc_image_draw): ditto.
	* goffice/canvas/goc-item.c (goc_item_draw),
	(goc_item_draw_region), (_goc_item_transform): ditto.
	* goffice/canvas/goc-item.h: ditto.
	* goffice/canvas/goc-line.c (goc_line_update_bounds),
	(goc_line_draw): ditto.
	* goffice/canvas/goc-path.c (goc_path_prepare_draw):
	* goffice/canvas/goc-pixbuf.c (goc_pixbuf_update_bounds),
	(goc_pixbuf_draw): ditto.
	* goffice/canvas/goc-polygon.c (goc_polygon_update_bounds),
	(goc_polygon_draw): ditto.
	* goffice/canvas/goc-polyline.c (goc_polyline_prepare_draw): ditto.
	* goffice/canvas/goc-rectangle.c (goc_rectangle_prepare_draw): ditto.
	* goffice/canvas/goc-text.c (goc_text_prepare_draw),
	(goc_text_update_bounds), (goc_text_distance), (goc_text_draw): ditto.
	* goffice/utils/go-emf.c (go_emf_movetoex), (go_emf_exttextoutw):
	start work on text support.

2013-03-18  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-font-sel.c (reload_families): Add more observed.
	(my_get_face_name): Go a little crazy with resolving aliases and
	typos.

2013-03-17  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-optionmenu.c (go_option_menu_button_press): Focus
	on click if button is set to do that.

2013-03-16  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/goffice-gtk.c (go_gtk_grid_remove_row): New
	function.

2013-03-14  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-font-sel.c (gfs_fill_font_name_list): Implement
	font filtering.

	* goffice/gtk/go-font-sel-dialog.c: Just delegate to GOFontSel.
	(gfsd_init): Set a title.

	* goffice/gtk/go-font-sel.c: Implement the GtkFontChooser
	interface.

	* goffice/gtk/go-font-sel-dialog.c (gfsd_get_property)
	(gfsd_set_property): Partially implement.

	* goffice/gtk/go-font-sel.c (gfs_class_init): Default show-style
	to FALSE.
	(go_font_sel_set_style): Make this public and use pango type args.
	(go_font_sel_set_sample_attributes): Handle super and subscript.
	(go_font_sel_get_font_desc): New function.

	* goffice/gtk/goffice-gtk.c (go_gtk_widget_replace): New function.

	* goffice/utils/go-pango-extras.c (go_pango_measure_string): Move
	from goffice/gtk/goffice-gtk.c

	* goffice/gtk/go-font-sel.c (gfs_class_init): Add constructor
	since we depend on construction parameters.

2013-03-13  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-font-sel.c (go_font_sel_get_font): Make it clear
	that this doesn't work and hasn't done so for a while.
	(gfs_class_init): Use proper widget hierarchy.

	* goffice/gtk/go-optionmenu.c (go_option_menu_init): Be nice and
	mark composite child.

2013-03-12  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-optionmenu.c (go_option_menu_position): Simplify
	and make it work for menu items that aren't check items.
	(go_option_menu_select_item): Make public.

	* goffice/utils/go-glib-extras.c (go_slist_create): Constify.

2013-03-10  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-regression.c: Bring a blunt clue bat to the
	attention of gtk-doc.
	* goffice/math/go-cspline.c: ditto.

	* goffice/math/go-cspline.c (go_csplinel_get_type): Fix reversed
	conditionals.

	* goffice/app/file.c (GOFileOpener): Add property getters and
	setters.  Add interactive property.
	* goffice/app/file.c (GOFileSaver): Add interactive property.

2013-03-09  Morten Welinder <terra@gnome.org>

	* configure.ac: Post-release bump.

2013-03-09  Morten Welinder <terra@gnome.org>

	* Release 0.10.1

2013-03-09  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-emf.c (go_emf_new_from_file),
	(go_emf_new_from_data), (go_emf_parse): Load imege size fro the data.

2013-03-08  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-arc.c (goc_arc_draw): removed an extra cairo_save().
	* goffice/utils/go-emf.c (go_emf_fillpath),
	(go_emf_strokeandfillpath), (go_emf_polypolygon16): Fixed fill rule.

2013-03-07  Morten Welinder  <terra@gnome.org>

	* goffice/canvas/goc-ellipse.c (goc_ellipse_distance): Avoid C++
	comment.
	* goffice/canvas/goc-group.c (goc_group_distance): Ditto.
	* goffice/canvas/goc-path.c (goc_path_distance): Ditto.
	* goffice/canvas/goc-rectangle.c (goc_rectangle_distance): Ditto.
	* goffice/utils/go-emf.c (go_emf_load_data): Ditto.

	* goffice/canvas/goc-arc.c (goc_arc_prepare_draw): Avoid C++
	comment and rewrite arc type handling.

2013-03-07  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-emf.c (go_emf_polypolygon),
	(go_emf_setpolyfillmode), (go_emf_selectobject), (go_emf_ellipse),
	(go_emf_rectangle), (go_emf_extcreatepen): more fixes.

2013-03-06  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-emf.c (go_emf_ellipse), (go_emf_rectangle),
	(go_emf_roundrect), (_go_emf_arc), (go_emf_arc), (go_emf_chord),
	(go_emf_pie): implement more primitives.

2013-03-06  Jean Brefort  <jean.brefort@normalesup.org>

	* tests/pie-demo.c (main): fix deprecation issues.

2013-03-05  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis.c (gog_axis_populate_editor): show the format page.

2013-03-04  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-style.c (text_layout_init): show the widget.

2013-03-03  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-combo-pixmaps.c (go_menu_pixmaps_add_element):
	Add extra tooltip argument.

	* goffice/gtk/go-color-palette.c (go_color_palette_make_menu): Add
	tooltip for menu mode too.  Fixes #695032.

2013-02-28  Morten Welinder  <terra@gnome.org>

	* configure.ac: remove the DISABLE_DEPRECATED defines even from
	development versions.  We now get the information through gcc
	warnings.

2013-02-26  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_barcol/gog-barcol.c (gog_barcol_view_render): make data
	labels position independant on scale. [#694731]
	* plugins/plot_xy/gog-xy.c (gog_xy_view_render): ditto.

2013-02-24  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-styled-object.c (gog_style_new): returns GogStyle* to
	avoid confuse introspection.
	* goffice/graph/gog-styled-object.h: ditto.

2013-02-23  Morten Welinder  <terra@gnome.org>

	* */*.c: Avoid G_OBJECT casts for g_object_ref and g_object_unref.

2013-02-21  Morten Welinder  <terra@gnome.org>

	* goffice/app/go-plugin-service.c
	(go_plugin_service_resource_read_xml): Fix potential free of
	random memory.

2013-02-21  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-regression.c (general_linear_regression): Drop
	the memset.  The constructor does it and with ref-counting it
	doesn't work.

2013-02-20  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/component/go-component.c (go_component_build_snapshot): always
	return an initialized value. [#694231]
	* plugins/plot_barcol/gog-line.c (gog_line_view_render): do not use invalid
	values. [#694232]

2013-02-17  Morten Welinder  <terra@gnome.org>

	* configure.ac (set_more_warnings): Improve support for clang.

2013-02-16  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-regression.c (general_linear_regression): memset
	the right size.

2013-02-15  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-selector.c (go_selector_new): Remove check for
	gtk 2.8.x or later.

	* goffice/gtk/goffice-gtk.c (go_gtk_builder_load): We no longer
	need the dead kitten for GtkGrid.
	* goffice/graph/gog-label.c (gog_label_populate_editor): Ditto.

2013-02-14  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-color-selector.c (cb_color_dialog_response): Kill
	warning.

2013-02-14  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-object-xml.c (gog_object_write_property_sax): back to
	GogStyle to preserve compatibility.
	* goffice/graph/gog-styled-object.c (gog_styled_object_class_init): ditto.
	* goffice/graph/gog-styled-object.h: don't deprecate gog_style_new().

2013-02-14  Jean Brefort  <jean.brefort@normalesup.org>

	* configure.ac: bump Gtk+ requirement to 3.2.0.

2013-02-14  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-object-xml.c (gog_object_write_property_sax): always
	save a GogStyle for compatibility.
	* goffice/graph/gog-styled-object.c (gog_styled_object_class_init): use
	GOStyle for style property.
	* others: replaced all GtkTable uses.

2013-02-07  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-regression.c (back_solve): Fix infinite loop.

2013-01-30  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis.c (gog_axis_populate_editor): do not show the
	rotation button for axes other than circular.

2013-01-29  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis-prefs.ui: add a user interface for discrete
	circular axis rotation.
	* goffice/graph/gog-axis.c (gog_axis_populate_editor): ditto.
	* goffice/graph/gog-plot.c (gog_plot_populate_editor): add a user interface
	for radar and polar plots axis selection. [#692803]

2013-01-24  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-regression.c (go_linear_regression_leverage):
	Fix cleanup.
	(QRH): Fix cleanup in the error case.

2013-01-22  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-series-labels.c (gog_series_labels_class_init): really
	accept a label offset larger than 10.

2013-01-22  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-regression.c (go_linear_solve_multiple): New
	function extracted from go_linear_solve.

2013-01-17  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-regression.c (QRH): Make qdet argument optional.
	(back_solve, fwd_solve): New functions extracted from and used
	throughout.
	(go_linear_regression_leverage): New function.

2013-01-16  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-smoothed-curve.c
	(gog_smoothed_curve_parent_changed): call parent class
	implementation.  Fix crash after deleting a named smoothed
	curve. [#691796]

2013-01-15  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-spectre.c (create_file): Helper to make sure
	entire contents gets written to temporary file.
	(go_spectre_load_data): Use create_file.
	(go_spectre_new_from_data): Use create_file.

2013-01-15  Jean Brefort  <jean.brefort@normalesup.org>

	* configure.ac: renamed configure.in and update obsolete macros.
	* configure.in: ditto.

2013-01-14  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-series-labels.c (used_selection_changed_cb):
	don't add an extra separator at start of the format string.
	[#691704]

2013-01-13  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-regression.c (QRH): New QR decomposition code
	based on Householder matrices.
	(QR, LUPDecomp, rescale, backsolve): Remove.
	(go_linear_solve, go_matrix_determinant): Base on QR
	decomposition.

2013-01-08  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-regression.c (QR): Fix debug code.

2013-01-01  Morten Welinder  <terra@gnome.org>

	* goffice/graph/gog-chart-map.c (polar_make_path_step): Remove
	unused variables.
	* goffice/math/go-regression.c (general_linear_regression): Ditto.
	* goffice/graph/gog-guru.c (cb_key_press_event): Ditto.
	* goffice/gtk/go-locale-sel.c (ls_get_property, ls_set_property):
	Ditto.

2012-12-18  Morten Welinder <terra@gnome.org>

	* configure.in: Post-release bump.

2012-12-18  Morten Welinder <terra@gnome.org>

	* Release 0.10.0

2012-12-11  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/component/go-component.c (go_component_set_font): make it return
	TRUE when size changed.
	* goffice/component/go-component.h: ditto.

2012-12-03  Jean Brefort  <jean.brefort@normalesup.org>

	* configure.in: rquire lasem >= 0.4.1.
	* goffice/Makefile.am: add goffice-debug.h.
	* goffice/goffice-debug.h: new private header.
	* goffice/app/go-plugin.c: moved debug declarations to goffice-debug.h.
	* goffice/app/go-plugin.h: ditto.
	* goffice/graph/goffice-graph.h: ditto.
	* goffice/graph/gog-axis.c: ditto.
	* goffice/graph/gog-object.c: ditto.
	* goffice/graph/gog-renderer.c: ditto.
	* goffice/graph/gog-view.c: ditto.

2012-11-29  Morten Welinder <terra@gnome.org>

	* configure.in: Post-release bump.

2012-11-29  Morten Welinder <terra@gnome.org>

	* Release 0.9.91

2012-11-26  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/Makefile.am: add two new .ui files.
	* goffice/app/go-plugin.c: use GO_R_OK.
	* goffice/component/go-component.c: constify an argument.
	* goffice/component/go-component.h: ditto.
	* goffice/graph/gog-axis-color-map-prefs.ui: add a title.
	* goffice/graph/gog-axis-color-map.c: add gog_color_map_delete().
	* goffice/graph/gog-axis-color-map.h: ditto.
	* goffice/graph/gog-theme-editor.ui: theme editor user interface.
	* goffice/graph/gog-theme.c: new code to edit themes.
	* goffice/graph/gog-theme.h: ditto.
	* goffice/graph/new-theme-prefs.ui: ditto.
	* goffice/gtk/goffice-gtk.c: use GO_W_OK.
	* goffice/utils/go-file.h: define GO_X_OK and friends.

2012-11-25  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/gtk/go-locale-sel.c: fixed typos in locales list. [#688977]

2012-11-16  Morten Welinder <terra@gnome.org>

	* configure.in: Post-release bump.

2012-11-16  Morten Welinder <terra@gnome.org>

	* Release 0.9.90

2012-11-15 Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_str_delocalize): delocalize
	"\ " to " "

2012-11-14  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-renderer.c (gog_renderer_get_pixbuf),
	(_gsf_gdk_pixbuf_save), (gog_renderer_export_image): removed ifdef
	GOFFICE_WITH_GTK around gdk_pixbuf calls.

2012-11-12  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-theme.c (theme_loaded): fixed series style.
	* plugins/plot_pie/gog-pie.c (gog_pie_view_render): fixed a leak.

2012-11-12  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-style.c (go_style_init): adjust bevel limit.

2012-11-11  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-theme.c (elem_start), (parse_done_cb),
	(gog_theme_prep_sax): avoid warnings when loading a known theme,
	(gog_theme_fillin_style): fix auto fields.

2012-11-10  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-emf.c (go_dib_create_pixbuf_from_data): read 24 bits
	images.

2012-11-10  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis-color-map.c:
	* goffice/graph/gog-theme.c (gog_theme_set_name),
	(gog_theme_set_description), (gog_theme_dup), (gog_theme_edit): prepare for
	theme edition.
	* goffice/graph/gog-theme.h: ditto.
	* goffice/utils/go-emf.c (go_emf_parse): do not crash when loading an .xls
	file with an embedded EMF. [#688047]

2012-11-10 Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_output_scientific_number_element_to_odf):
	add argument
	(go_format_output_scientific_number_to_odf): fix checking for literal E

2012-11-09 Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* office/gtk/go-format-sel.c (cb_force_exponent_sign_toggle): new
	(fmt_dialog_enable_widgets): add widget and handle F_FORCE_EXPONENT_SIGN_BUTTON
	(nfs_init): add widget and connect cb_force_exponent_sign_toggle
	* goffice/gtk/go-format-sel.ui: add checkbox
	* goffice/utils/go-format.c (go_format_generate_scientific_str): use
	exponent_sign_forced
	(go_format_details_init): initialize exponent_sign_forced
	(go_format_get_details): determine exponent_sign_forced
	* goffice/utils/go-format.h: add exponent_sign_forced field to details

2012-11-09 Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_execute): fix placement of minus sign

2012-11-09 Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_parse): use 32 bits for the locale

2012-11-08  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis-color-map.c (color_map_load_from_uri): cosmetic
	changes.
	* goffice/graph/gog-graph.c (gog_graph_populate_editor): use Id instead
	of name to list themes.
	* goffice/graph/gog-theme.c (gog_theme_sax_save),
	(gog_theme_registry_lookup), (theme_load_from_uri): make embedded theme
	saving really work.

2012-11-07  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-graph-prefs.ui: add a button to save an embedded
	theme.
	* goffice/graph/gog-graph.c (cb_theme_changed), (save_theme_cb),
	(gog_graph_populate_editor): ditto.
	* goffice/graph/gog-theme.c (gog_theme_save_to_home_dir): new function,
	(gog_theme_registry_get_theme_names), (theme_load_from_uri): fix a
	locale related issue.
	* goffice/graph/gog-theme.h: ditto.

2012-11-06  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/app/go-doc.c (go_doc_write), (load_color_map),
	(load_theme), (go_doc_read): serialize custom themes.
	* goffice/graph/gog-axis-color-map.c (gog_axis_color_map_write),
	(gog_axis_color_map_save), (gog_axis_color_map_persist_init),
	(_gog_axis_color_maps_shutdown): cosmetic changes.
	* goffice/graph/gog-graph.c (gog_graph_get_property),
	(gog_graph_populate_editor), (gog_graph_sax_save),
	(gog_graph_prep_sax), (gog_graph_persist_init), (theme_loaded_cb),
	(gog_graph_set_theme): serialize custom themes.
	* goffice/graph/gog-theme.c (gog_theme_set_property),
	(gog_theme_get_property), (gog_theme_element_free),
	(gog_theme_finalize), (gog_theme_class_init), (gog_theme_init),
	(save_name_cb), (save_desc_cb), (save_elem_cb),
	(save_series_style_cb), (gog_theme_build_uri),
	(gog_theme_sax_save), (gog_theme_save), (theme_start),
	(name_start), (name_end), (desc_end), (gog_theme_add_element),
	(elem_start), (color_map_start), (theme_loaded), (parse_done_cb),
	(gog_theme_prep_sax), (gog_theme_persist_init),
	(gog_theme_find_element), (gog_theme_new), (gog_theme_get_id),
	(gog_theme_get_description), (gog_theme_get_resource_type),
	(gog_theme_registry_lookup), (build_predefined_themes),
	(theme_load_from_uri), (_gog_themes_shutdown):
	* goffice/graph/gog-theme.h: ditto.
	* goffice/utils/go-style.c (go_style_force_auto),
	(go_style_clear_auto): ditto.
	* goffice/utils/go-style.h: ditto.
	* goffice/utils/goffice-utils.c: ditto.
	* goffice/utils/goffice-utils.h: ditto.

2012-11-05  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/app/go-doc.c (go_doc_write), (load_color_map),
	(go_doc_save_resource): simplify.
	* goffice/app/go-doc.h: ditto.
	* goffice/graph/gog-axis-color-map-prefs.ui: only save a modified map.
	* goffice/graph/gog-axis-color-map.c
	(gog_axis_color_map_set_property),
	(gog_axis_color_map_get_property), (gog_axis_color_map_class_init),
	(save_name_cb), (build_uri), (gog_axis_color_map_write),
	(color_stop_start), (map_start), (name_start), (name_end),
	(color_stops_cmp), (gog_axis_color_map_save), (color_map_loaded),
	(parse_done_cb), (gog_axis_color_map_prep_sax),
	(gog_axis_map_persist_init),
	(gog_axis_color_map_get_resource_type),
	(gog_axis_color_map_set_name), (gog_axis_color_map_dup),
	(update_snapshots), (gog_axis_color_map_edit),
	(gog_axis_color_map_from_colors), (gog_axis_color_map_get_from_id),
	(_gog_axis_color_maps_init), (_gog_axis_color_maps_shutdown): implement
	color map duplication.
	* goffice/graph/gog-axis-color-map.h: ditto.
	* goffice/graph/gog-axis-prefs.ui: ditto.
	* goffice/graph/gog-axis.c (gog_axis_sax_save): save a color map loaded
	from a document, (color_map_dup_cb), (color_map_save_cb),
	(color_map_changed_cb), (gog_axis_populate_editor): color map duplication.
	* goffice/graph/gog-theme.c (build_predefined_themes),
	(theme_load_from_uri): ditto.
	* goffice/utils/go-persist.c: fix includes.
	* goffice/utils/goffice-utils.c (go_resource_type_get_type): add new enum.
	* goffice/utils/goffice-utils.h: ditto.

2012-11-04  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis-color-map-prefs.ui: make it functional.
	* goffice/graph/gog-axis-color-map.c (gog_axis_color_map_finalize),
	(gog_axis_color_map_get_snapshot), (gog_axis_color_map_save),
	(gog_axis_color_map_compare), (update_snapshots), (erase_cb),
	(define_cb), (bin_changed_cb), (gog_axis_color_map_edit),
	(gog_axis_color_map_from_colors), (color_map_loaded),
	(color_map_load_from_uri), (_gog_axis_color_maps_init): implement the
	creation of a new color map.
	* goffice/graph/gog-axis.c (gog_axis_set_property),
	(color_map_new_cb), (gog_axis_populate_editor): ditto.

2012-11-04  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-guru.c (cb_graph_guru_delete_item): select another
	child with the same type when one exists instead of the parent. [#687102]

2012-11-03  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/Makefile.am: add goffice-utils.c.
	* goffice/app/go-doc.c (go_doc_finalize), (go_doc_write),
	(load_color_map), (go_doc_read), (go_doc_save_color_map): save and load
	used color maps.
	* goffice/app/go-doc.h: ditto.
	* goffice/graph/gog-axis-color-map.c (gog_axis_color_map_finalize),
	(gog_axis_color_map_init), (gog_axis_color_map_get_id),
	(gog_axis_color_map_from_colors), (save_name_cb),
	(gog_axis_color_map_write), (color_stop_start), (map_start),
	(name_start), (name_end), (color_map_loaded),
	(color_map_load_from_uri), (parse_done_cb),
	(gog_axis_color_map_sax_push_parser),
	(gog_axis_color_map_get_from_id), (_gog_axis_color_maps_init): ditto.
	* goffice/graph/gog-axis-color-map.h: ditto.
	* goffice/graph/gog-axis.c (gog_axis_prep_sax),
	(gog_axis_sax_save), (gog_axis_set_property),
	(gog_axis_get_property), (gog_axis_persist_init): ditto.
	* goffice/utils/goffice-utils.h: new uuid generator copied from
	telepathy-gabble.
	* goffice/utils/goffice-utils.c: new file.

2012-11-01  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/Makefile.am:  add new ui file.
	* file goffice/app/go-doc.c: add support for color maps.
	* file goffice/app/go-doc.h: ditto.
	* file goffice/app/goffice-app.h: ditto.
	* file goffice/goffice.h: ditto.
	* file goffice/graph/goffice-graph.h: ditto.
	* goffice/graph/gog-axis-color-map-prefs.ui: new ui file.
	* goffice/graph/gog-axis-color-map.c: new functions.
	* goffice/graph/gog-axis-color-map.h: ditto.
	* goffice/graph/gog-axis-prefs.ui: allow for color map changes.
	* goffice/graph/gog-axis.c: ditto.
	* goffice/graph/gog-color-scale.c: minor update.
	* goffice/graph/gog-graph.c: make sure we can access the GODoc when loading.
	* goffice/graph/gog-graph.h: ditto.
	* goffice/graph/gog-object-xml.c: ditto.
	* goffice/graph/gog-object.c: ditto.
	* goffice/graph/gog-theme.c: minor update.
	* plugins/plot_surface/gog-contour.c: interpolate colors when using a color
	map with less colors than there are levels.

2012-10-28  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-regression.c (go_regression_stat_destroy): Plug
	leak.

	* goffice/app/go-conf-gsettings.c (go_conf_free_node): Plug leak.
	(go_conf_get_node): Plug leak.

	* goffice/graph/gog-theme.c (gog_theme_finalize): Get rid of ->dcm
	too.

2012-10-28  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/Makefile.am: new objects.
	* goffice/graph/goffice-graph.h: ditto.
	* goffice/graph/gog-axis.c (gog_axis_init_style), (gog_axis_init),
	(gog_axis_get_color_map): add a color map to GogAxis.
	* goffice/graph/gog-axis.h: ditto.
	* goffice/graph/gog-axis-color-map.c: new objects.
	* goffice/graph/gog-axis-color-map.h: ditto.
	* goffice/graph/gog-color-scale.c: ditto.
	* goffice/graph/gog-color-scale.h: ditto.
	* goffice/graph/gog-theme.c (map_area_series_solid_default),
	(map_area_series_solid_guppi), (build_predefined_themes),
	(theme_load_from_uri), (_gog_themes_init), (_gog_themes_shutdown),
	(gog_theme_get_color_map): add two color maps to themes.
	* goffice/graph/gog-theme.h: ditto.
	* plugins/plot_surface/gog-contour.c
	(gog_contour_plot_foreach_elem), (gog_contour_view_render): use
	GogAxisColorMap API for color plots.
	* plugins/plot_xy/gog-xy.c (gog_2d_plot_update): fixed warning,
	(gog_xy_view_render), (gog_xy_series_populate_editor): ditto for contour
	plots.


2012-10-27  Morten Welinder  <terra@gnome.org>

	* goffice/graph/gog-axis-line.c (axis_line_get_bbox): Improve
	padding.  Fixes #686473.  Patch by Jean.

2012-10-20  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-image.c (goc_image_draw): fix image clipping. [#686490]

2012-10-20  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-label.c (gog_text_view_size_request),
	(gog_text_view_render): fix rotated frames position.
	* goffice/gtk/go-rotation-sel.c (cb_rotate_changed),
	(cb_rotate_canvas_realize), (set_rot_from_point),
	(go_rotation_sel_new), (go_rotation_sel_new_full): optionally support
	-180° to 180° as allowed by GOStyle.
	* goffice/gtk/go-rotation-sel.h: ditto.
	* goffice/gtk/go-rotation-sel.ui: minor layout fix.
	* goffice/utils/go-style.c (text_layout_init): use a full circle rotation
	selector.

2012-10-19  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-label.c (gog_text_view_render):

2012-10-19  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-legend.c (cb_render_elements): restore pixel aligned
	lines. [#686476]

2012-10-10  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-style.h: add some more auto fields.

2012-10-05  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-legend.c (cb_render_elements): don't draw a marker
	when not needed. [#685484]

2012-10-04  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis.c (gog_axis_populate_editor): don't show the
	span tab for axes which don't support it. [#685405]

2012-10-04  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis-line.c (axis_line_render): fixed axis handles
	positions. [#684886]

2012-10-02  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/app/go-doc-impl.h: make image buffer really private.
	* goffice/app/go-doc.c (go_doc_finalize), (go_doc_init),
	(go_doc_init_write), (go_doc_init_read), (go_doc_write),
	(go_doc_save_image), (load_image), (load_image_data),
	(go_doc_end_read), (go_doc_image_fetch): ditto.

2012-10-01  Jean Brefort  <jean.brefort@normalesup.org>

	reviewed by: <delete if not using a buddy>

	* goffice/graph/gog-series-labels-prefs.ui:
	* goffice/graph/gog-series-labels.c (gog_data_label_class_init):

2012-09-28  Emmanuel Pacaud <emmanuel@gnome.org>

	* goffice/graph/gog-equation.c: remove creation of goffice.mml.

2012-09-27  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-series-labels-prefs.ui: allow multiple selection.
	* goffice/graph/gog-series-labels.c (used_selection_changed_cb),
	(add_cb), (remove_cb), (gog_series_labels_update): fixed crash after gtk+
	behavior change. [#684889]

2012-09-27   Chris Leonard  <cjlhomeaddress@gmail.com>

	* goffice/gtk/go-locale-sel.c: updated locales. [#682749]

2012-09-26  Jean Brefort  <jean.brefort@normalesup.org>

	* configure.in: automatically use lasem when present.

2012-09-23  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis.c (map_linear_auto_bound): fix scale when data
	differ are nearly identical. [#684599]

2012-09-20  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_distrib/gog-histogram.c
	(gog_histogram_plot_view_render): clip drawing to the plot area. [#684195]

2012-09-15  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_distrib/gog-histogram.c
	(gog_histogram_plot_series_update): don't crash when no valid data is
	available. [#684047]

2012-09-13  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_xy/Makefile.am: add XYMinMax plot. [#683493]
	* plugins/plot_xy/chart_minmax_1_3.svg: new icon.
	* plugins/plot_xy/chart_minmax_1_4.svg:
	* plugins/plot_xy/chart_minmax_2_3.svg:
	* plugins/plot_xy/chart_minmax_2_4.svg:
	* plugins/plot_xy/gog-xy.c (go_plugin_init): register xy-minmax types.
	* plugins/plot_xy/gog-xy-minmax.c: Scattered MinMax plot implementation.
	(gog_xy_minmax_view_render), (gog_xy_minmax_view_class_init):
	* plugins/plot_xy/gog-xy-minmax.h:
	* plugins/plot_xy/plot-types.xml.in: register new plot type.
	* plugins/plot_xy/plugin.xml.in: ditto.

2012-09-11 Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_output_to_odf): try to improve
	ODF export of unidentified formats.

2012-09-09  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-equation.c (gog_equation_update): fix warning,
	(gog_equation_init): intialize the lasem document style.
	* goffice/utils/go-style.c (go_style_persist_prep_sax): cosmetic.

2012-09-06  Morten Welinder <terra@gnome.org>

	* configure.in: Post-release bump.

2012-09-06  Morten Welinder <terra@gnome.org>

	* Release 0.9.6

2012-09-02  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-path.c (go_path_new_from_odf_enhanced_path): return NULL
	when the path is empty.

2012-09-02  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis.c (gog_axis_view_padding_request): accept an
	axis which parent is not a chart.
	* goffice/utils/go-path.c (go_path_new_from_odf_enhanced_path): commented.
	* goffice/utils/go-path.h: removed unused diirections.

2012-08-28  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-path.c (goc_path_prepare_draw),
	(goc_path_draw): fixed fill rule usage.
	* goffice/utils/go-path.c (parse_value), (emit_function_8),
	(_path_arc), (go_path_arc_degrees), (go_path_arc_full),
	(go_path_quadrant), (go_path_new_from_odf_enhanced_path): import arcs
	and friends from ODF enhanced paths.

2012-08-27  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-path.c (skip_spaces), (skip_comma_and_spaces),
	(parse_value), (parse_values), (emit_function_2),
	(emit_function_6), (emit_function_8), (emit_quadratic),
	(go_path_new_from_svg), (go_path_new_from_odf_enhanced_path): accept
	variables in ODF enhanced paths.

2012-08-26  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-path.c (go_path_arc_degrees),
	(go_path_arc_to_degrees), (go_path_svg_move_to),
	(go_path_svg_line_to), (go_path_svg_curve_to), (go_path_svg_close),
	(go_path_to_svg), (go_path_new_from_svg),
	(go_path_new_from_odf_enhanced_path): enhanced odf paths support.

2012-08-20  Jean Brefort  <jean.brefort@normalesup.org>

	* docs/reference/goffice-docs.xml: fixed a few more doc issues.
	* goffice/graph/gog-styled-object.c (gog_styled_object_class_init): ditto.
	* goffice/utils/go-cairo.c (go_cairo_emit_svg_path): use
	go_path_new_from_svg().
	* goffice/utils/go-path.c (go_path_scale),
	(go_path_new_from_svg), (go_path_new_from_odf_enhanced_path): new functions.
	* goffice/utils/go-path.h: ditto.

2012-08-16  Jean Brefort  <jean.brefort@normalesup.org>

	* configure.in: requires libgsf-1 >= 1.14.23 for introspection.
	* docs/reference/goffice-docs.xml: fixed documentation warnings.
	* all others: ditto.

2012-08-15  Chris Leonard  <cjlhomeaddress@gmail.com>

	* goffice/gtk/go-format-sel.c: add comments for translators to SI units
	names. [#681813]

2012-08-15  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_surface/gog-contour.c (gog_contour_view_render): fix a crash
	for infinite values. [#841840]

2012-08-14  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_xy/gog-bubble-prefs.ui: one more 3d->3D.

2012-08-14  Quentin Glidic <sardemff7+gnome@sardemff7.net>
	* goffice/utils/go-spectre.c (go_spectre_load_data): fix build with
	libspectre. [#681846]

2012-08-13  Jean Bréfort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-plot-impl.h: removed unused field in GogPlotDesc.
	* goffice/graph/gog-plot.c (gog_plot_class_init): 3d -> 3D. [#681777]
	* plugins/plot_barcol/gog-1.5d.c (gog_plot1_5d_class_init): ditto.
	* plugins/plot_pie/gog-pie.c (gog_pie_plot_class_init): ditto.
	* plugins/plot_xy/gog-xy.c (gog_bubble_plot_class_init): ditto.

2012-08-11  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/Makefile.am: changed the build system.
	* goffice/app/Makefile.am: removed.
	* goffice/canvas/Makefile.am: removed.
	* goffice/component/Makefile.am: removed.
	* goffice/data/Makefile.am: removed.
	* goffice/graph/Makefile.am: removed.
	* goffice/gtk/Makefile.am: removed.
	* goffice/math/Makefile.am: removed.
	* goffice/utils/Makefile.am: removed.
	* goffice/utils/go-gdk-pixbuf.c: new file.
	* goffice/utils/go-gdk-pixbuf.h: ditto.
	* all others: fix introspection and gtk-doc warnings.

2012-08-04  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/app/Makefile.am: new GoView class for use in file openers and
	savers.
	* goffice/app/file-priv.h: ditto.
	* goffice/app/file.c: ditto.
	* goffice/app/file.h: ditto.
	* goffice/app/go-app.h: ditto.
	* goffice/app/go-plugin-loader-module.c: ditto.
	* goffice/app/go-plugin-service.c: ditto.
	* goffice/app/go-plugin-service.h: ditto.
	* goffice/app/go-view.c: ditto.
	* goffice/app/go-view.h: ditto.
	* goffice/app/goffice-app.h: ditto.
	* all others: introspection warnings.

2012-08-01  Jean Brefort  <jean.brefort@normalesup.org>

	* all: fixed some introspection and doc warnings.

2012-08-01  Jean Brefort  <jean.brefort@normalesup.org>

	* configure.in: requires gtk-doc >= 1.12.
	* docs/reference/goffice-docs.sgml: replaced by xml.
	* docs/reference/goffice-docs.xml: replaces sgml.
	* docs/reference/Makefile.am: ditto.

2012-08-01  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/gtk/go-action-combo-color.c
	(go_action_combo_color_create_tool_item),
	(go_action_combo_color_set_allow_alpha): add alpha support.
	* goffice/gtk/go-action-combo-color.h: ditto.

2012-07-29  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_surface/gog-xyz-surface-prefs.c
	(cb_missing_as_changed), (gog_xyz_surface_plot_pref): add an option for
	missing data.
	* plugins/plot_surface/gog-xyz-surface-prefs.ui: ditto.
	* plugins/plot_surface/gog-xyz-surface.c (missing_as_string),
	(missing_as_value), (gog_xyz_surface_plot_build_matrix),
	(gog_xyz_surface_plot_set_property),
	(gog_xyz_surface_plot_get_property), (common_init_class): ditto.
	* plugins/plot_surface/gog-xyz-surface.h: ditto.

2012-07-29  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-plot.c (gog_plot_set_property),
	(gog_plot_get_property), (gog_plot_class_init): save axis Id for all axes,
	not only X and Y. [#680739]
	* plugins/plot_surface/gog-xyz-surface.c
	(gog_xyz_surface_plot_build_matrix): avoid leaks and invalid properties.

2012-07-26  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis.c (gog_axis_map_get_real_extents),
	(gog_axis_map_get_real_bounds): new functions taking the axis span into
	account.
	* goffice/graph/gog-axis.h: ditto.
	* goffice/graph/gog-chart-map.c (xy_make_close_path): take new fill type
	into account.
	* goffice/graph/gog-plot.c (gog_plot_populate_editor): allow axis choice for
	pseudo-3d plots. [see #680636]
	* goffice/graph/gog-series.c: allow filling to axis limits. [#680513]
	* goffice/graph/gog-series.h: ditto.
	* plugins/plot_xy/gog-xy.c (gog_xy_series_class_init): ditto.

2012-07-26  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_surface/gog-contour.c
	(gog_contour_plot_foreach_elem): add series name to the elements. [#680508]
	* plugins/plot_surface/gog-xyz-surface.c
	(gog_xyz_surface_plot_build_matrix): use go_nan instead of 0 when data are
	missing and fix cardinality when pseudo-3d axis bounds can't be retrieved.
	[#680486][#680512]

2012-07-24  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-quad.c (go_quad_add): Complain if not properly
	initialized.
	(go_quad_start): Keep track of initialization depth.

	* goffice/math/go-regression.c (go_matrix_invert): Ensure go_quad
	has been properly initialized.  Don't re-use partial results after
	they have been rounded to "double".

2012-07-22  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/Makefile.am: make introspection stuff build when no libgoffice
	is installed.

2012-07-21  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/component/go-component.c (go_component_stop_editing): do not
	unref twice the same object. Related to #680190.

2012-07-20  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/component/go-component.c (go_component_finalize),
	(go_component_set_data), (go_component_set_command_context),
	(go_component_get_command_context),
	(go_component_set_default_command_context),
	(go_component_duplicate): fix some issues related to #680190.
	* goffice/component/go-component.h: ditto.
	* all others: fix introspection warnings.

2012-07-15  Morten Welinder <terra@gnome.org>

	* configure.in: Post-release bump.

2012-07-15  Morten Welinder <terra@gnome.org>

	* Release 0.9.5

2012-07-15  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis-line-impl.h: move prototypes to gog-axis-line.h.
	[#679967]
	* goffice/graph/gog-axis-line.h: ditto.

2012-07-13  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/Makefile.am: don't install gog-axis-line-impl.h.
	* goffice/graph/goffice-graph.h: ditto.
	* goffice/graph/gog-axis-line.c: ditto.
	* goffice/graph/gog-axis.c: ditto.
	* goffice/graph/gog-graph.c: fixed documentation typo.
	* goffice/graph/gog-object.h: add fields for future use.
	* goffice/graph/gog-view.h: ditto.

2012-07-10  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-label.c (gog_text_view_size_request),
	(gog_text_view_render): fix use of rich text from GOData.
	* goffice/graph/gog-renderer.c (gog_renderer_get_gostring_OBR): fix rich
	text size evaluation. [#679459]

2012-06-26 Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/graph/gog-reg-curve.c (limits_changed_cb): keep the
	min/max entries visible
	(gog_reg_curve_populate_editor): ditto
	* goffice/graph/gog-reg-curve-prefs.ui align High/low limits with
	high/low bounds

2012-06-25 Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* plugins/plot_xy/gog-xy-prefs.ui (gog-xy-prefs): add border_width

2012-06-25  Morten Welinder <terra@gnome.org>

	* configure.in: Post-release bump.

2012-06-25 Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-style-prefs.ui (go-style-prefs): add border_width

2012-06-25 Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/graph/gog-reg-curve.c (gog_reg_curve_populate_editor): fix
	gtk version check
	* plugins/reg_linear/gog-lin-reg.c (gog_lin_reg_curve_populate_editor):
	With the corrected gtk check above, we can depend on the attached info.

2012-06-25 Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/graph/gog-reg-curve-prefs.ui: avoid unneccesarily high
	dialog by placing checkbox to right

2012-06-25 Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* plugins/reg_linear/gog-lin-reg.c (gog_lin_reg_curve_populate_editor):
	There are two more rows that are being used for some drawing limits

2012-06-25 Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* plugins/reg_linear/gog-lin-reg.c (gog_lin_reg_curve_populate_editor):
	place the new items at the bottom
	* plugins/reg_linear/gog-polynom-reg.c
	(gog_polynom_reg_curve_populate_editor): assume we are at the bottom,
	so no row insertion is required.

2012-06-25 Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* plugins/reg_linear/gog-lin-reg.c (gog_lin_reg_curve_populate_editor):
	fix item placement for pre-gtk-3.4.0
	* plugins/reg_linear/gog-polynom-reg.c
	(gog_polynom_reg_curve_populate_editor): ditto

2012-05-24  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-reg-curve.c (gog_reg_curve_populate_editor): fix
	criticals, with gtk+ < 3.2, [#676641]
	(gog_reg_curve_view_render): fix limits with a discrete X-axis.
	* plugins/reg_linear/gog-lin-reg.c
	(gog_lin_reg_curve_build_values), fix x automatic values,
	(gog_lin_reg_curve_populate_editor): fix
	criticals, with gtk+ < 3.2. [#676641]
	* plugins/reg_linear/gog-log-reg.c
	(gog_log_reg_curve_build_values): fix x automatic values.
	* plugins/reg_linear/gog-polynom-reg.c
	(gog_polynom_reg_curve_build_values), fix x automatic values,
	(gog_polynom_reg_curve_populate_editor): fix
	criticals, with gtk+ < 3.2. [#676641]

2012-05-21  Jean Brefort  <jean.brefort@normalesup.org>

	* configure.in: copied code from introspection.m4

2012-05-19 Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-color.h (go_color_from_gdk_rgba): new
	* goffice/utils/go-color.c (go_color_from_gdk_rgba): new

2012-05-19  Jean Brefort  <jean.brefort@normalesup.org>

	* Makefile.am: enhance Introspection build support.
	* configure.in: ditto.
	* goffice/Makefile.am: ditto.

2012-05-18  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-canvas.c (goc_canvas_init): enable scroll events.

2012-05-15 Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-pango-extras.c
	(go_load_pango_attributes_into_buffer_filter): remove underline
	(go_load_pango_attributes_into_buffer_named_filter): add underline
	(go_create_std_tags_for_buffer): create underline tags
	(go_load_pango_attributes_into_buffer): handle underline tags as named tags

2012-05-15  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-group.c: moved transfrom to GocItem.
	* goffice/canvas/goc-group.h: ditto.
	* goffice/canvas/goc-item.c (goc_item_init),
	(goc_item_get_operator), (goc_item_set_transform),
	(_goc_item_transform): ditto.
	* goffice/canvas/goc-item.h: ditto.
	* goffice/canvas/goc-text.c (go_anchor_type_get_type): typo,
	(goc_text_draw): fix text position when clipped. [#676067]
	* goffice/utils/go-emf.c (go_dib_read_header),
	(go_dib_create_pixbuf_from_data), (go_wmf_mr_arc), (go_emf_header),
	(go_emf_polybezier), (go_emf_setworldtransform),
	(go_emf_modifyworldtransform), (go_emf_selectobject),
	(go_emf_rectangle), (go_emf_stretchdibits), (go_emf_polybezier16),
	(go_emf_polygon16), (go_emf_parse): more work.

2012-05-12 Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* utils/go-pango-extras.c (go_pango_attrs_to_markup): new
	(go_pango_attr_as_markup_string): new
	* utils/go-pango-extras.h (go_pango_attrs_to_markup): new

2012-05-12  Morten Welinder  <terra@gnome.org>

	* goffice/graph/gog-plot-engine.c
	(cb_pending_trend_line_types_load): Conditionalize debug print.

2012-05-06  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/reg_logfit/gog-logfit.c (gog_log_fit_curve_get_equation): fixed
	logfit equation typo. [#675560]

2012-04-21  Morten Welinder <terra@gnome.org>

	* configure.in: Post-release bump.

2012-04-21  Morten Welinder <terra@gnome.org>

	* Release 0.9.3

2012-04-21  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-emf.c (load_wmf_as_pixbuf): fix build with EMF support.

2012-04-20  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-renderer.c: fixed documentation.
	* goffice/graph/gog-theme.c: ditto.
	* goffice/utils/go-file.c: ditto.
	* goffice/utils/go-emf.c (load_wmf_as_pixbuf), (go_emf_load_data),
	(go_emf_new_from_file), (go_emf_new_from_data), (go_emf_parse): use
	libwmf when not built with emf support, and load emf image size.
	* goffice/utils/go-image.c (go_image_draw_fb): use the pixbuf when
	available.

2012-04-20  Jean Brefort  <jean.brefort@normalesup.org>
	* goffice/canvas/goc-canvas.c: fixed documentation.
	* goffice/canvas/goc-group.c: ditto.
	* goffice/canvas/goc-item.c: ditto.

2012-03-31  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-image.c (go_image_new_from_file),
	(go_image_new_from_data): correctly store EPS images even when not
	supported.
	* goffice/utils/go-spectre.c (go_spectre_new_from_file),
	(go_spectre_new_from_data): ditto.

2012-03-26  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-emf.c (go_emf_load_data), (go_emf_get_pixbuf),
	(go_emf_class_init): use a fallback image when the actual image type is
	not supported.
	* goffice/utils/go-image.c (go_image_draw_fb),
	(go_image_get_pixbuf_fb), (go_image_get_scaled_pixbuf_fb),
	(go_image_class_init): ditto.
	* goffice/utils/go-spectre.c (go_spectre_build_surface),
	(go_spectre_draw), (go_spectre_get_pixbuf),
	(go_spectre_get_scaled_pixbuf), (go_spectre_class_init): ditto.

2012-03-26  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-image.c (goc_image_draw),
	(goc_image_class_init): fixed cropped images rendering.

2012-03-26  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-pixbuf.c (go_pixbuf_save): fix pixbuf saving when cairo
	data has not been generated. [see #672716]

2012-03-25  Morten Welinder  <terra@gnome.org>

	* tools/embedder (embed_data): When we go to a new line, clear the
	nohex flag.  This avoids lines starting with three quotes which
	confuse the heck out of intltool 0.50

2012-03-21  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_format_output_to_odf): Undo last
	change.  Get version from output.

2012-03-20  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_format_output_to_odf): Take extra
	odf_version argument.
	(go_format_output_fraction_to_odf): Ditto.  Caller changed.

	* goffice/utils/go-pixbuf.c (go_pixbuf_save): Survive lack of
	image data.

2012-03-18 Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_output_number_to_odf): do not
	unneccessarily include a number:number element

2012-03-18 Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_output_scientific_number_to_odf):
	fix output of scientific formats

2012-03-16  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-file.c (go_url_show): Remove.  (Use
	go_gtk_url_show instead.)
	(go_url_encode): Make this a thin wrapper over
	g_uri_escape_string.

	* goffice/gtk/goffice-gtk.c (go_gtk_help_button_init): Hook up
	cb_help normally, ie., not swapped.
	(go_help_display): Add argument screen so we can show help on the
	right screen.  Use go_gtk_url_show, not go_url_show, for the same
	reason.

	* goffice/utils/go-file.c (go_url_decode): Remove.  Glib's
	g_uri_unescape_string does the same thing.

2012-03-10  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/component/go-component.c: add some doc.
	* goffice/utils/go-emf.c (go_emf_save), (go_emf_load_data),
	(go_emf_differ), (go_emf_new_from_file), (go_emf_new_from_data),
	(go_emf_setworldtransform), (go_emf_modifyworldtransform),
	(go_emf_createpen), (go_emf_polygon16), (go_emf_polyline16),
	(go_emf_extcreatepen): more implementations and fixes.
	* goffice/utils/go-image.c (go_image_get_data): new function, replaces
	obsolete go_image_get_pixels.
	* goffice/utils/go-image.h: ditto.
	* goffice/utils/go-spectre.c (go_spectre_save),
	(go_spectre_load_data), (go_spectre_differ): ditto.
	* goffice/utils/go-svg.c (go_svg_save), (go_svg_load_data),
	(go_svg_differ), (go_svg_new_from_file), (go_svg_new_from_data): ditto.

2012-03-10  Jean Brefort  <jean.brefort@normalesup.org>

	* configure.in: add a test for ghostscript to avoid crashes when using
	libspectre.
	* goffice/Makefile.am: make introspection build when libgoffice is not
	installed [#671699]
	* goffice/utils/go-emf.c (go_emf_modifyworldtransform): typo,
	(go_emf_lineto): implement, (go_emf_parse): initialize more fields.
	* other files: fix documentation for introspection.

2012-03-08  Jean Brefort  <jean.brefort@normalesup.org>

	* configure.in: add introspection support. [#670161]
	* goffice/Makefile.am: ditto.
	* goffice/app/go-plugin-loader-module.h: ditto.
	* goffice/canvas/goc-component.c: fixed introspection warnings.
	* goffice/utils/go-font.c: ditto.
	* goffice/utils/go-format.c: ditto.
	* goffice/utils/go-glib-extras.c: ditto.
	* goffice/utils/go-style.h: reversed some previous unneeded changes.

2012-03-07  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (cb_attrs_as_string): Tweak handling
	of bold so PANGO_WEIGHT_NORMAL becomes 0 and PANGO_WEIGHT_BOLD
	becomes 1.  PangoWeight->double->PangoWeight still round trips
	unless you start below 100.

2012-03-06  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-image.c (go_image_new_from_data): Make fallback
	work even in the non-GUI case.

2012-03-03  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/app/go-cmd-context-impl.h: fixed for nested structs introspection.
	* goffice/app/go-doc-impl.h: ditto.
	* goffice/app/go-doc.c: fixed documentation layout issues.
	* goffice/graph/gog-axis-line.c (cb_position_toggled): fixed unused
	variables warnings.
	* goffice/graph/gog-plot.h: fixed for nested structs introspection.
	* goffice/utils/datetime.c: fixed documentation layout issues.
	* goffice/utils/go-file.c: ditto.
	* goffice/utils/go-style.h: fixed for nested structs introspection.

2012-03-02  Morten Welinder <terra@gnome.org>

	* configure.in: Post-release bump.

2012-03-02  Morten Welinder <terra@gnome.org>

	* Release 0.9.2

2012-02-15  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-path.c (go_path_interpret), (go_path_to_cairo),
	(go_path_copy), (go_path_append): cleaned GOPath API.
	* goffice/utils/go-path.h: ditto.

2012-02-14  Morten Welinder  <terra@gnome.org>

	* goffice.mk (list_of_sources): Create a list of sources at each
	directory level.

2012-02-12  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis-line.c (cb_position_toggled): don't move any other
	axis when changing an axis position. [#669050]

2012-02-10  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-reg-curve-prefs.ui: add limits to the regression curve
	display range. [#669252]
	* goffice/graph/gog-reg-curve.c (limits_changed_cb),
	(gog_reg_curve_populate_editor), (gog_reg_curve_get_property),
	(gog_reg_curve_set_property), (gog_reg_curve_class_init),
	(gog_reg_curve_init), (gog_reg_curve_dataset_dims),
	(gog_reg_curve_dataset_get_elem), (gog_reg_curve_view_render): ditto.
	* goffice/graph/gog-reg-curve.h: ditto.
	* plugins/reg_linear/gog-lin-reg.c
	(gog_lin_reg_curve_populate_editor): ditto.
	* plugins/reg_linear/gog-polynom-reg.c
	(gog_polynom_reg_curve_populate_editor): ditto.

2012-02-07  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-renderer.c (gog_renderer_draw_gostring): take subscript
	and superscript into account.

2012-02-06  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis.c (gog_axis_view_size_allocate): fix Y-axis label
	position. [#669325]
	* goffice/utils/go-line.c: fix documentation.

2012-02-05  Jean Brefort  <jean.brefort@normalesup.org>
	* goffice/graph/gog-axis-line.c (axis_line_render): limit the axis line
	to its actual span.
	* goffice/graph/gog-axis.c (gog_axis_map_get_extents),
	(gog_axis_map_get_bounds): fix bounds for logarithmic axes using only
	a partial range. [#669257]
	* goffice/graph/gog-chart-map.c (xy_make_path): add ODF like Bezier cubic
	spline interpolation. [#663356]
	* goffice/utils/go-line.c: ditto.
	* goffice/utils/goffice-utils.h: ditto.

2012-01-26  Morten Welinder  <terra@gnome.org>

	* goffice/app/go-doc.c (go_doc_set_dirty_time)
	(go_doc_get_dirty_time): New function.
	(go_doc_set_dirty): Set dirty time.
	(go_doc_class_init): Install new dirty-time property.

2012-01-12  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-guru.c (graph_typeselect_minor): fixed selector
	position. [#667793]
	* goffice/utils/go-cairo.h: set CAIRO_CLAMP to a larger value. [#645938]

2012-01-06  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-renderer.h: fixed GdkPixbuf usage. [#667005]

2012-01-05  Morten Welinder  <terra@gnome.org>

	* goffice/app/go-plugin-service.c
	(go_plugin_service_resource_finalize): Plug leak.

2011-12-30  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-glib-extras.c (go_guess_encoding): Hook up
	existing debug code.

2011-12-29 Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (ethiopic_additional_digits): new
	(convert_numerals): use ethiopic_additional_digits
	(handle_ethiopic): new
	(go_format_execute): call handle_ethiopic
	(go_render_general): call handle_ethiopic

2011-12-29 Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (GOFormatShapeFlags): new flag
	(handle_chinese): add and use shape_flags argument, change all
	callers

2011-12-29 Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (chinese_marker_shapes): add large markers
	(handle_chinese): use '?' for larger than expected markers

2011-12-28 Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_parse_number_new_1): handle locales
	before starting the numbers
	(numeral_shapes): adjust
	(chinese_marker_shapes): new
	(convert_numerals): handle chinese position markers
	(handle_chinese): new
	(go_format_execute): call handle_chinese
	(HANDLE_NUMERAL_SHAPE): call handle_chinese

2011-12-27  Jean Brefort  <jean.brefort@normalesup.org>

	* configure.in: inhibit eps support for now because it makes gnumeric
	crash when using jpeg images.
	* goffice/graph/gog-label.c (gog_text_set_property),
	(gog_text_view_size_request), (gog_text_view_render): add justification for
	multi lines text.
	* goffice/gtk/go-font-sel.c (go_font_sel_set_font): allow non integer font
	sizes.
	* goffice/utils/go-image.c (go_image_new_from_data): always display an image
	even when the format is not supported.

2011-12-25  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-glib-extras.c (go_unichar_issign): add signs

2011-12-25  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-glib-extras.c (go_unichar_issign): New
	function.

2011-12-23  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_parse_locale): allow for 33 bit
	locale
	(handle_common_token): handle shape-flags
	(go_format_parse_number_new_1): write sign after common tokens
	(go_format_parse): just look at the locale part for the magic
	(go_format_dump_program): separate shape flags from shape
	(plus_shapes): new
	(convert_minus): change into convert_sign
	(INSERT_PLUS): new
	(INSERT_MINUS): look at the right part of the flag
	(go_format_execute): consider shape_flags, use shapes for non-markup
	scientific format

2011-12-21  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (handle_common_token): store shape
	separately
	(go_format_dump_program): handle OP_NUMERAL_SHAPE and make OP_LOCALE
	more descriptive
	(minus_shapes): new
	(numeral_shapes): new
	(convert_numerals): new
	(INSERT_MINUS): use the correct symbol
	(go_format_execute): handle numeral shape
	(convert_minus): use the correct symbol
	(go_render_general): add argument, change all callers, handle numeral
	shape
	* goffice/utils/go-format.h (go_render_general): add arguments

2011-12-21  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis-line.c (axis_line_get_bbox),
	(axis_line_render), (axis_circle_get_bbox), (axis_circle_render),
	(xyz_process): allow for multi-line labels.
	* goffice/graph/gog-label.c (gog_label_set_property),
	(gog_label_get_property), (gog_label_class_init), (gog_label_init),
	(gog_text_view_size_request), (gog_text_view_render): ditto.
	* goffice/graph/gog-legend.c (cb_size_elements),
	(cb_render_elements): ditto.
	* goffice/graph/gog-renderer.c (gog_renderer_draw_gostring),
	(gog_renderer_draw_text), (gog_renderer_get_gostring_OBR),
	(gog_renderer_get_text_OBR), (gog_renderer_get_text_AABR),
	(gog_renderer_get_gostring_AABR): add new arguments.
	* goffice/graph/gog-renderer.h: ditto.
	* goffice/utils/go-geometry.c: documentation typo.
	* plugins/plot_distrib/gog-histogram.c
	(gog_histogram_plot_view_render): fixed after API change.

2011-12-17  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_surface/gog-contour.c
	(gog_contour_plot_foreach_elem): fixed rounding errors in limits displayed
	in the legend. [#666292]

2011-12-08  Jean Brefort  <jean.brefort@normalesup.org>

	* configure.in: remove pixmaps/Makefile.

2011-12-05  Morten Welinder  <terra@gnome.org>

	* goffice/app/go-plugin-service.c: new "resource" service type.

	* goffice/utils/go-rsm.c (go_rsm_unregister_file): fix
	precondition.

2011-12-05  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-group.c (goc_group_init): initialize the transform
	matrix.
	* goffice/canvas/goc-group.h: add a matrix.
	* goffice/canvas/goc-path.c (goc_path_set_property),
	(goc_path_get_property), (goc_path_prepare_draw),
	(goc_path_class_init): add a fill rule.
	* goffice/canvas/goc-path.h: ditto.
	* goffice/canvas/goc-polyline.c (goc_polyline_prepare_draw): skip invalid
	points so that it supports polypolyline.
	* goffice/utils/go-emf.c (go_wmf_read_points),
	(go_wmf_read_pointl), (go_emf_polygon), (go_emf_polyline),
	(go_emf_polybezierto), (go_emf_polylineto), (go_emf_polypolyline),
	(go_emf_polypolygon), (go_emf_setwindowextex),
	(go_emf_setwindoworgex), (go_emf_setviewportextex),
	(go_emf_setviewportorgex), (go_emf_setpolyfillmode),
	(go_emf_settextalign), (go_emf_settextcolor), (go_emf_movetoex),
	(go_emf_selectobject), (go_emf_ellipse), (go_emf_rectangle),
	(go_emf_fillpath), (go_emf_strokeandfillpath),
	(go_emf_extcreatefontindirectw), (go_emf_exttextoutw),
	(go_emf_polygon16), (go_emf_polyline16), (go_emf_polybezierto16),
	(go_emf_polylineto16), (go_emf_polypolyline16),
	(go_emf_polypolygon16): more work.


2011-12-04  Morten Welinder  <terra@gnome.org>

	* goffice/graph/gog-plot-engine.c: Add debug code.

2011-12-03  Morten Welinder  <terra@gnome.org>

	* plugins/reg_linear: embed ui files into plugin.
	* plugins/reg_logfit: embed ui files into plugin.
	* plugins/smoothing: embed ui files into plugin.

	* plugins/plot_pie: embed stuff like plot_xy.
	* plugins/plot_radar: embed stuff like plot_xy.

	* pixmaps/Makefile.am (dist_icon_DATA): Don't distribute unused
	icon files.

	* plugins/plot_distrib: embed stuff like plot_xy.

	* goffice/graph/gog-error-bar.c (display_combo_desc): Embed error
	bar pixmaps.

	* plugins/plot_barcol: embed stuff like plot_xy.

	* plugins/plot_surface: embed stuff like plot_xy.

2011-12-02  Morten Welinder  <terra@gnome.org>

	* plugins/plot_xy: Move icon files here...
	* pixmaps: ...from here.

	* plugins/plot_xy/gog-xy.c: embed icons into here.

	* tools/embedder: Add the ability to unregister resources.

	* goffice/graph/gog-guru.c (graph_typeselect_minor): Load icons
	for subtypes here.
	(cb_plot_types_init): Not here.

	* goffice/utils/go-pixbuf.c (go_gdk_pixbuf_new_from_file):
	Optionally load from resource.

	* goffice/utils/go-glib-extras.c (go_debug_flag): New function.

	* goffice/utils/go-rsm.c (go_rsm_unregister_file): New function.

	* goffice/Makefile.am: Embed svg-patterns.xml without compression.

	* goffice/utils/go-pattern.c (go_pattern_get_svg_path): Use
	embedded resource, not a file.

2011-12-02  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-path.c (goc_path_set_property): make it properly
	manage the path.
	* goffice/utils/go-emf.c (go_wmf_read_spoint),
	(go_wmf_read_lpoint), (go_wmf_read_gocolor), (go_emf_dc_free),
	(go_emf_convert_coords), (go_emf_polygon), (go_emf_polyline),
	(go_emf_polybezierto), (go_emf_polylineto), (go_emf_polypolyline),
	(go_emf_setwindowextex), (go_emf_setwindoworgex),
	(go_emf_setviewportextex), (go_emf_setviewportorgex),
	(go_emf_movetoex), (go_emf_intersectcliprect), (go_emf_savedc),
	(go_emf_restoredc), (go_emf_selectobject), (go_emf_createpen),
	(go_emf_createbrushindirect), (go_emf_beginpath), (go_emf_endpath),
	(go_emf_closefigure), (go_emf_fillpath),
	(go_emf_strokeandfillpath), (go_emf_strokepath),
	(go_emf_polygon16), (go_emf_polyline16), (go_emf_polybezierto16),
	(go_emf_polylineto16), (go_emf_parse): implement more.
	* goffice/utils/go-path.c (go_path_ref): fixed a crasher.
	* goffice/utils/go-path.h: ditto.

2011-12-01  Morten Welinder  <terra@gnome.org>

	* goffice/goffice.c: Include generated embedded-ui.c here and call
	the registration function.
	* goffice/*/*.c: use resource, not filename for ui files.

2011-12-01  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_get_details): When
	looking for the exponent skip the whole EESI/ESI/EE/E marker

2011-12-01  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_get_details): do not
	mistake the scale symbol as mantissa

2011-12-01  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/gtk/go-format-sel.c (cb_si_combo_changed): check "Append
	this SI unit" button

2011-12-01  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/gtk/go-format-sel.c (cb_si_unit_toggle): set the scale
	correctly

2011-11-30  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/gtk/go-format-sel.c (fmt_dialog_enable_widgets): set
	initial sensitivity of SI unit checkboxes

2011-11-30  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/gtk/go-format-sel.c (fmt_dialog_enable_widgets),
	(nfs_init), (go_format_sel_show_preview),
	(go_format_sel_hide_preview): replaced GtkTable by GtkGrid.
	* goffice/gtk/go-format-sel.ui: ditto.
	* tests/mf-demo.c (main): works only if built with GOFFICE_WITH_EMF
	defined.

2011-11-27  Morten Welinder <terra@gnome.org>

	* configure.in: Post-release bump.

2011-11-27  Morten Welinder <terra@gnome.org>

	* Release 0.9.1

2011-11-27  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/component/go-component.c (go_component_export_image),
	(go_component_duplicate): new functions.
	* goffice/component/go-component.h: ditto.
	* goffice/utils/go-emf.c (go_wmf_read_spoint),
	(go_wmf_read_lpoint), (go_emf_setwindowextex),
	(go_emf_setwindoworgex), (go_emf_setviewportextex),
	(go_emf_setviewportorgex), (go_emf_setmapmode), (go_emf_setbkmode),
	(go_emf_setrop2), (go_emf_intersectcliprect), (go_emf_savedc),
	(go_emf_restoredc), (go_emf_parse): implement some callbacks.

2011-11-25  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-rangefunc.c (go_range_sumsq, go_range_devsq):
	Simplify.

	* goffice/math/go-accumulator.c (go_accumulator_add_quad): New
	function.

2011-11-24  Morten Welinder <terra@gnome.org>

	* configure.in: Post-release bump.

2011-11-24  Morten Welinder <terra@gnome.org>

	* Release 0.9.0

2011-11-23  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-accumulator.c: New file.

	* goffice/math/go-rangefunc.c (go_range_devsq, go_range_sumsq)
	(go_range_sum, go_range_average): Base on GOAccumulator.
	(go_range_constant): New function.

2011-10-27  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/gtk/goffice-gtk.c (recent_func_log_func): new
	(go_gtk_file_sel_dialog): avoid gtk bug #664587

2011-11-21  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-glib-extras.c (go_guess_encoding): Plug leak.

2011-11-19  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-trend-line.c (gog_trend_line_populate_editor): fixed
	editor build.
	* goffice/graph/gog-smoothed-curve.c
	(gog_smoothed_curve_parent_changed),
	(gog_smoothed_curve_class_init), (gog_smoothed_curve_init),
	(gog_smoothed_curve_dataset_dims),
	(gog_smoothed_curve_dataset_get_elem),
	(gog_smoothed_curve_dataset_dim_changed): fixed data management in
	exponential smoothing.
	* goffice/graph/gog-smoothed-curve.h: ditto.
	* plugins/smoothing/gog-exp-smooth.c (gog_exp_smooth_update),
	(gog_exp_smooth_class_init), (gog_exp_smooth_init): ditto.
	* plugins/smoothing/gog-exp-smooth.h: ditto.

2011-11-19  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-guru.ui: fixed a Gtk warning.

2011-11-16  Jody Goldberg <jody@gnome.org>

	* goffice/canvas/goc-widget.c (goc_widget_set_widget) : clear the ofbox
	  after unref.  Fixes slicer view combo.

2011-11-14  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-component.c (goc_component_set_property): don't change
	the size when not needed.
	* goffice/component/go-component.c (go_component_get_mime_type),
	(editor_destroy_cb), (go_component_edit),
	(go_component_stop_editing): add new functions.
	* goffice/component/go-component.h: ditto.
	* plugins/plot_barcol/gog-1.5d.c (gog_plot1_5d_axis_get_bounds): ensure
	that 0 is in the default values axis range. [#663717]

2011-11-10  Morten Welinder  <terra@gnome.org>

	* goffice/app/go-conf.h (go_conf_node_get_key_type)
	(go_conf_get_value_as_str, go_conf_set_value_from_str)
	(go_conf_get_long_desc, go_conf_get_short_desc): Delete.

2011-11-09  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-plot-impl.h: fixed macro name.
	* goffice/graph/gog-series-impl.h: removed the get_percent_value member.
	* goffice/graph/gog-series-labels.c (gog_data_label_update),
	(gog_series_labels_update): really implement percent as label.
	* goffice/graph/gog-series.c (role_series_labels_post_add),
	(gog_series_get_interpolation_params): remove
	gog_series_get_data_as_percent.
	* goffice/graph/gog-series.h: ditto.
	* plugins/plot_barcol/gog-1.5d.c (gog_plot1_5d_update),
	(_gog_plot1_5d_get_percent_value): implement percent as labels for bar/col
	plots.
	* plugins/plot_barcol/gog-1.5d.h: ditto.
	* plugins/plot_barcol/gog-barcol.c (gog_barcol_plot_class_init): ditto.

2011-11-09  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/component/go-component.c (go_component_set_font): new function.
	* goffice/component/go-component.h: ditto.
	* goffice/utils/go-image.c (go_image_finalize),
	(go_image_get_pixbuf): cache the pixbuf.
	* goffice/utils/go-image.h: ditto.

2011-11-06  Jean Brefort  <jean.brefort@normalesup.org>

	* configure.in: drop gconf support.
	* goffice/app/go-conf.c: ditto.
	* goffice/app/go-conf-gconf.c: ditto.

2011-11-05  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-emf.c (go_emf_get_canvas): new function,
	(go_emf_new_from_file): fixed several issues.
	* goffice/utils/go-emf.h: added a new prototype.
	* tests/mf-demo.c (open_file), (main): use GOEmf to load the images.

2011-11-05  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-item.c (goc_item_bounds_changed): invalidate new
	position (and force a bound update). [#662393]

2011-11-05  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-polyline.c (goc_polyline_finalize),
	(goc_polyline_class_init): fix memory leak. [#663355]

2011-11-04  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/gtk/go-image-sel.ui: make the icon selector larger.
	* goffice/utils/go-image.c (go_image_new_from_data): add support for pixbuf,
	(go_image_new_for_format), (go_image_type_for_format): new functions.
	* goffice/utils/go-image.h: ditto.

2011-11-04  Jean Brefort  <jean.brefort@normalesup.org>

	* configure.in: add a test for libspectre presence.
	* goffice/component/go-component.c (go_component_write_xml_sax),
	(_go_component_start): remove obsolete GOC_PARAM_PERSISTENT.
	* goffice/component/go-component.h: ditto.
	* goffice/goffice.c (libgoffice_init): add GO_TYPE_SPECTRE.
	* goffice/utils/Makefile.am: add go-spectre.[c,h]
	* goffice/utils/go-image.c (go_image_new_from_file),
	(go_image_new_from_data): create images form eps if libspectre is
	present.
	* goffice/utils/go-svg.c (go_svg_get_pixbuf),
	(go_svg_get_scaled_pixbuf): fixed memory leak.
	* goffice/utils/goffice-utils.h: add GOSpectre.

2011-11-03  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/goffice-gtk.c (go_gtk_builder_new): Plug leak.

	* goffice/utils/go-glib-extras.c (go_hash_values): Remove.

2011-11-03  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-series.c (gog_series_populate_editor): fix
	interpolation widgets visibility. [#663283]
	* goffice/utils/go-style.c (outline_init), (line_init),
	(fill_init), (go_style_populate_editor): enhanced layout.

2011-11-03  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-string.c (go_string_new_rich_nocopy): New function.
	(go_string_new_rich): Drop "copy" argument.  All callers changed.

	* goffice/graph/gog-axis.c (map_discrete_calc_ticks): Plug leak.

	* goffice/utils/go-string.c (go_string_new_rich): Plug leak.

2011-10-31  Jean Brefort  <jean.brefort@normalesup.org>
	* goffice/graph/gog-object.c (cb_size_changed),
	(cb_manual_size_changed), (gog_object_populate_editor): made the manual
	size UI consistent.
	* goffice/gtk/goffice-gtk.c (go_gui_get_image_save_info): don't ask for
	the extension when file type is unknown.
	* goffice/utils/go-image.c (go_image_get_format_from_name),
	(go_image_new_from_data): fixed behavior with unknown format.

2011-10-30  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-item.c (goc_item_set_operator),
	(goc_item_get_operator): add a cairo_operator_t member for future use.
	* goffice/canvas/goc-item.h: ditto.
	* goffice/utils/go-emf.c (go_dib_read_header),
	(go_dib_create_pixbuf_from_data), (go_emf_header),
	(go_emf_stretchdibits): import a simple image. [#653667]

2011-10-29  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/Makefile.am: allow the canvas in the without gtk build.
	* goffice/canvas/Makefile.am: ditto.
	* goffice/canvas/goc-arc.h: add placeholders for extensions.
	* goffice/canvas/goc-canvas.c: ditto.
	* goffice/canvas/goc-canvas.h: ditto.
	* goffice/canvas/goc-circle.h: ditto.
	* goffice/canvas/goc-component.c: ditto.
	* goffice/canvas/goc-ellipse.h: ditto.
	* goffice/canvas/goc-graph.c: ditto.
	* goffice/canvas/goc-graph.h: ditto.
	* goffice/canvas/goc-group.h: ditto.
	* goffice/canvas/goc-image.h: ditto.
	* goffice/canvas/goc-item.c: ditto.
	* goffice/canvas/goc-item.h: ditto.
	* goffice/canvas/goc-line.h: ditto.
	* goffice/canvas/goc-path.h: ditto.
	* goffice/canvas/goc-pixbuf.h: ditto.
	* goffice/canvas/goc-polygon.h: ditto.
	* goffice/canvas/goc-polyline.h: ditto.
	* goffice/canvas/goc-rectangle.h: ditto.
	* goffice/canvas/goc-styled-item.h: ditto.
	* goffice/canvas/goc-text.c: ditto.
	* goffice/canvas/goc-text.h: ditto.
	* goffice/canvas/goc-widget.h: ditto.
	* goffice/canvas/goffice-canvas.h: ditto.
	* goffice/component/go-component.c: remove support for windowed components.
	* goffice/component/go-component.h: ditto.
	* goffice/goffice.h: fix the without gtk build.
	* goffice/graph/gog-object.c: ditto.
	* goffice/gtk/goffice-gtk.c: ditto.
	* goffice/utils/go-emf.c: imported Valek's WMF parser and started an EMF
	parser.
	* goffice/utils/go-image.h: fix the without gtk build.
	* goffice/utils/go-pango-extras.c: ditto.
	* goffice/utils/go-pango-extras.h: ditto.
	* plugins/plot_radar/gog-radar.c: ditto.

2011-10-28  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/goffice-graph.h: some work on manual labels size.
	* goffice/graph/gog-chart.c (gog_chart_get_manual_size_mode),
	(gog_chart_class_init): ditto.
	* goffice/graph/gog-label.c (gog_text_set_property),
	(gog_text_get_property), (gog_text_get_manual_size_mode),
	(gog_text_class_init), (wrap_cb), (gog_label_populate_editor):
	* goffice/graph/gog-label.h: ditto.
	* goffice/graph/gog-object-prefs.ui: ditto.
	* goffice/graph/gog-object.c (cb_manual_size_changed),
	(gog_object_populate_editor), (gog_object_class_init),
	(gog_object_get_manual_allocation), (gog_object_document_changed),
	(gog_object_get_manual_size_mode):
	* goffice/graph/gog-object.h: ditto.
	* goffice/graph/gog-view.c (gog_tool_resize_object_point),
	(gog_tool_resize_object_render): ditto.
	* goffice/utils/go-style-prefs.ui: redesigned the style prefs widget.
	* goffice/utils/go-style.c (go_style_set_image_preview),
	(outline_init), (line_init), (fill_image_init),
	(fill_update_visibilies), (fill_init), (go_style_populate_editor): ditto.

2011-10-28  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-canvas.c (goc_canvas_get_bounds): fixed arguments type.
	* goffice/canvas/goc-canvas.h: ditto.
	* goffice/canvas/goc-pixbuf.c (goc_pixbuf_draw): cleaned.
	* goffice/graph/gog-3d-box-prefs.ui: fixed GtkGrid spacing.
	* goffice/graph/gog-axis-prefs.ui: ditto.
	* goffice/graph/gog-guru-type-selector.ui: ditto.
	* goffice/utils/go-emf.c (go_emf_new_from_file),
	(go_emf_new_from_data): return GOImage*.
	* goffice/utils/go-emf.h: ditto.
	* goffice/utils/go-image.c (go_image_new_from_data): add an argument to
	retrieve the type.
	* goffice/utils/go-image.h: ditto.
	* goffice/utils/go-pixbuf.c (go_pixbuf_new_from_pixbuf): return GOImage*.
	* goffice/utils/go-pixbuf.h: ditto.
	* goffice/utils/go-svg.c (go_svg_new_from_file),
	(go_svg_new_from_data): ditto.
	* goffice/utils/go-svg.h: ditto.
	* plugins/plot_surface/gog-xyz-prefs.ui: fixed GtkGrid spacing.

2011-10-27  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_execute): add arg to call of
	go_pango_attr_superscript_new
	(cb_attrs_as_string): write value of sub- and superscript attributes
	* goffice/utils/go-pango-extras.h: publish GOPangoAttr* struct
	(go_pango_attr_*_new): add argument
	* goffice/utils/go-pango-extras.c (go_pango_translate_here): check
	attribute values
	(go_pango_attr_subscript_copy): copy attribute value
	(go_pango_attr_superscript_copy): copy attribute value
	(go_pango_attr_compare): replace with go_pango_attr_*_compare
	(go_pango_attr_*_new): add argument

2011-10-27  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (cb_attrs_as_string): handle super and
	subscripts
	(go_format_parse_markup): ditto
	* goffice/utils/go-pango-extras.h (go_pango_attr_subscript_get_type):
	new
	(go_pango_attr_superscript_get_type): new
	* goffice/utils/go-pango-extras.c (go_pango_attr_subscript_get_type):
	new
	(go_pango_attr_superscript_get_type): new
	(filter_func): use the above
	(go_pango_attr_subscript_new): ditto
	(go_pango_attr_superscript_new): ditto

2011-10-27  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-emf.c: fixed a compilation warning.
	* goffice/utils/go-image.c (go_image_get_height),
	(go_image_set_default_dpi), (go_image_get_default_dpi): fixed svg image
	size. [#628472]
	* goffice/utils/go-image.h: ditto.
	* goffice/utils/go-svg.c (go_svg_load_data),
	(go_svg_new_from_file), (go_svg_new_from_data): ditto.

2011-10-27  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-canvas.c: new helper functions.
	* goffice/canvas/goc-canvas.h: ditto.
	* goffice/canvas/goc-image.c: add crop.
	* goffice/canvas/goc-image.h: ditto.
	* goffice/goffice.c: initialize new type.
	* goffice/graph/gog-plot-impl.h: add get_percent method.
	* goffice/graph/gog-plot.c: ditto.
	* goffice/graph/gog-plot.h: ditto.
	* goffice/utils/Makefile.am: new files.
	* goffice/utils/go-emf.c: added for a future support of WMF images.
	* goffice/utils/go-emf.h: ditto.
	* goffice/utils/go-image.c: add go_image_from_data().
	* goffice/utils/go-image.h: ditto.
	* goffice/utils/go-svg.c: ditto.
	* goffice/utils/go-svg.h: ditto.
	* goffice/utils/goffice-utils.h: add GOEmf.
	* tests/mf-demo.c: fixed GOImage usage.

2011-10-26  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-pango-extras.c (go_pango_translate_here): allow for
	multiple overlapping subscript/superscript attributes
	(go_pango_translate_attributes): allow for
	multiple overlapping subscript/superscript attributes
	(go_pango_attr_compare): return FALSE

2011-10-26  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_execute): use GO's new
	superscript andd subscript attributes
	* goffice/utils/go-pango-extras.h (go_pango_translate_layout): new
	(go_pango_translate_attributes): new
	(go_pango_attr_subscript_new): new
	(go_pango_attr_superscript_new): new
	* goffice/utils/go-pango-extras.c (go_pango_translate_layout): new
	(go_pango_translate_attributes): new
	(go_pango_attr_subscript_new): new
	(go_pango_attr_superscript_new): new
	(filter_func): new
	(go_pango_translate_here): new
	(go_pango_attr_subscript_copy): new
	(go_pango_attr_superscript_copy): new
	(go_pango_attr_destroy): new
	(go_pango_attr_compare): new

2011-10-26  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-image.c (goc_image_set_property),
	(goc_image_get_property), (goc_image_finalize),
	(goc_image_update_bounds), (goc_image_distance), (goc_image_draw),
	(goc_image_class_init): new canvas item displaying a GOImage.
	* goffice/canvas/goc-image.h: ditto.
	* goffice/canvas/goffice-canvas.h: ditto.
	* goffice/canvas/Makefile.am: ditto.
	* goffice/utils/go-style.c: fixed loading of image without type.

2011-10-26  Jean Brefort  <jean.brefort@normalesup.org>

	* all files: add support for svg images using librsvg.

2011-10-25  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/goffice-gtk.c (apply_ui_from_file): Add filename
	argument and use it to partially work around bug #662679.

2011-10-25  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/gtk/go-pixbuf.c: moved to utils.
	* goffice/gtk/go-pixbuf.h: ditto.
	* goffice/utils/go-pixbuf.c (go_gdk_pixbuf_intelligent_scale),
	(go_gdk_pixbuf_new_from_file), (go_gdk_pixbuf_get_from_cache),
	(go_gdk_pixbuf_tile):rename the functions to prepare for GOPixbuf (GOImage
	split).
	* goffice/utils/go-pixbuf.h: ditto.

2011-10-24  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_execute): fix sense of
	at_end test

2011-10-22  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_execute): consider the
	existing attributes

2011-10-22  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.h: add format defines
	* goffice/utils/go-format.c (go_format_execute): use these defines

2011-10-22  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/gtk/go-image-sel.c (cb_entry_focus_out),
	(cb_file_image_select), (delete_event_cb),
	(cancel_button_clicked_cb): more fixes, see #660917.

2011-10-21  Morten Welinder  <terra@gnome.org>

	* goffice/app/go-conf-gsettings.c (go_conf_get_node): Add
	precondition.

2011-10-21  Jean Brefort  <jean.brefort@normalesup.org>

	* configure.in: make GSettings the default configuration backend.
	* goffice/graph/gog-renderer.c (gog_renderer_export_image): use
	GdkPixbuf even in the no gtk build.
	* goffice/gtk/go-image-sel.c: redesigned.
	* goffice/gtk/go-image-sel.ui: ditto.
	* goffice/gtk/goffice-gtk.c (go_gtk_select_image),
	(go_gtk_select_image_with_extra_widget): new function.
	* goffice/gtk/goffice-gtk.h: ditto.

2011-10-18  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/goffice-gtk.c (go_gtk_builder_new): Handle
	compressed ui data (regardless of source).

2011-10-17  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-rsm.c: New file.

	* goffice/gtk/goffice-gtk.c (go_gtk_builder_new)
	(go_gtk_builder_new_internal): Handle resources.

2011-10-17  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/goffice-gtk.c (go_gtk_builder_new): Move
	default-directory code from here...
	(go_gtk_builder_new_internal): ...to here.

	* */*.c: change to use go_gtk_builder_new_internal as appropriate.

2011-10-13  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/app/go-plugin.c: removed deprecated go_plugins_add().
	* goffice/app/go-plugin.h: ditto.
	* goffice/graph/gog-object-xml.c (gog_object_new_from_input): new function
	to remlace gog_object_new_from_xml.
	* goffice/graph/gog-object-xml.h: ditto.
	* goffice/graph/gog-plot-impl.h: removed deprecated declaration.

2011-10-09  Gerald Niel

	* configure.in: fixed plugins load from a Mac OSX bundle. [#661264]
	* goffice.mk: ditto.
	* goffice/Makefile.am: ditto.
	* goffice/goffice.c (libgoffice_init): ditto.

2011-10-05  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/gtk8go-image-sel.c: make the dialog work again. [#660917]
	* goffice/utils/go-style-prefs.ui: fix a widget size.

2011-10-01  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-series-labels.c
	(gog_series_labels_dataset_dim_changed): update series labels when needed.
	[658527]

2011-09-30  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-rangefunc.c (sum_helper): Improve precision in
	the all-constant case.  See #660564.

	* goffice/utils/go-file.c (go_dirname_from_uri): Plug leak.

2011-09-26  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_barcol/gog-barcol.c (gog_barcol_plot_set_property),
	(gog_barcol_plot_init): draw columns/bars plots before the axes so that
	axis labels are always visible.

2011-09-25  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-item.c (goc_item_reordered), (goc_item_raise),
	(goc_item_lower), (goc_item_lower_to_bottom),
	(goc_item_raise_to_top), (_goc_item_unrealize),
	(goc_item_get_parent), (goc_item_get_window): fixed widgets stacking order.
	* goffice/canvas/goc-item.h: ditto.
	* goffice/canvas/goc-widget.c (goc_widget_get_window),
	(goc_widget_class_init): ditto.

2011-09-24  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/gtk/go-color-palette.c (draw_color_cb),
	(go_color_palette_button_new): ensure that the colors are always displayed,
	even with the most stupid theme.

2011-09-13  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-file.c (go_file_get_owner_name): adjust call
	to go_guess_encoding
	(go_file_get_group_name): ditto
	* goffice/utils/go-glib-extras.h (go_guess_encoding): change
	arguments
	* goffice/utils/go-glib-extras.c (go_guess_encoding): change
	arguments and change all callers

2011-09-08  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_refcount_cb): deleted
	(go_format_foreach): just wrap the GHFunc
	(go_format_unref): don't keep GOFormats that are just in the hash

2011-09-08  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.h (go_format_set_build_in): deleted again
	(go_format_is_build_in): deleted again
	* goffice/utils/go-format.c (go_format_set_build_in): deleted again
	(go_format_is_build_in): deleted again
	* goffice/gtk/go-format-sel.c (fmt_dialog_init_fmt_list): add argument
	and store seen formats in hash
	(fmt_dialog_load_true_custom_cb): check hash not, built_in flag

2011-09-08  Morten Welinder  <terra@gnome.org>

	* configure.in: Switch to AM_MAINTAINER_MODE([enable])

2011-09-08  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis.c (gog_axis_view_size_allocate): fixed axis title
	automatic position by taking actual axis span into account.
	* plugins/plot_barcol/gog-line.c (gog_line_view_render): fixed are filling.

2011-09-07  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.h (go_format_set_build_in): new
	(go_format_is_build_in): new
	(go_format_foreach): new
	* goffice/utils/go-format.c (go_format_set_build_in): new
	(go_format_is_build_in): new
	(go_format_foreach): new
	(go_format_refcount_cb): new
	* goffice/gtk/go-format-sel.c (fmt_dialog_load_true_custom_cb): new
	(fmt_dialog_enable_widgets): call fmt_dialog_load_true_custom_cb

2011-09-07  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (handle_common_token): try harder to find the
	locale, Ubuntu, for example, does not understand fi_FI but fi_FI.utf-8.

2011-09-06  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_parse_number_fraction): make
	denominator simplification slightly less eager
	(go_format_execute): ditto

2011-09-06  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_parse_number_E): make sure to
	fail on '00E00' and '00E +00'
	(go_format_execute): keep the leading whitespace

2011-09-06  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_execute): conditionalize denominator
	simplification (and disable)
	(go_format_parse_number_fraction): ditto

2011-09-06  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_output_fraction_to_odf): fix
	int_digits and don't force a 0 into the denominator

2011-09-05  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-widget.c (goc_widget_set_widget): fixed signals target,
	(goc_widget_draw): create a new path before exiting to avoid unwanted lines.

2011-09-05  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-widget.c (goc_offscreen_box_realize),
	(goc_offscreen_box_class_init), (goc_widget_draw),
	(goc_widget_class_init): reimplement widget transparency.

2011-09-05  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-widget.c (goc_offscreen_box_draw): enhance widget
	rendering.

2011-09-04  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_output_fraction_to_odf):
	handle pi-fraction

2011-09-04  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-widget.c: make sheet widgets scalable. [#605434]
	* goffice/canvas/goc-widget.h: ditto.

2011-09-03  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/gtk/go-format-sel.ui: new widgets
	* goffice/gtk/go-format-sel.c (_GOFormatSel): new fields
	(load_si_combo): new
	(cb_si_toggle): enable/disable new widgets
	(cb_si_unit_toggle): new
	(cb_si_combo_changed): new
	(fmt_dialog_enable_widgets): handle new widgets
	(nfs_init): ditto
	(go_format_sel_finalize): finalize details
	* goffice/utils/go-format.h (go_format_details_finalize): new
	and add new fields
	* goffice/utils/go-format.c (go_format_generate_scientific_str):
	use new fields
	(go_format_details_finalize): new
	(go_format_details_free): use go_format_details_finalize
	(go_format_get_details): consider new fields

2011-09-02  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis.c: use data format for discrete axis. [#641901]

2011-09-02  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (si_reduction): use -24 for smaller
	exponents

2011-09-01  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-text.c (goc_text_prepare_draw): always initialize
	dx and dy variables.

2011-09-01  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-series-impl.h: add support for values as percent in
	data labels.
	* goffice/graph/gog-series-labels.c: ditto.
	* goffice/graph/gog-series-labels.h: ditto.
	* goffice/graph/gog-series.c: ditto.
	* goffice/graph/gog-series.h: ditto.

2011-09-01  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_parse_number_E):
	use OP_NUM_SIMPLIFY_MANTISSA_SI instead of OP_NUM_SIMPLIFY_MANTISSA
	if appropriate
	(go_format_execute): handle OP_NUM_SIMPLIFY_MANTISSA_SI
	(go_format_dump_program): ditto

2011-09-01  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_parse_number_new_1): mark
	the end of the number
	(go_format_dump_program): support new op
	(go_format_execute): watch for stuff following the E

2011-09-01  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/gtk/go-format-sel.c (cb_si_toggle): new
	(fmt_dialog_enable_widgets): handle si_button
	(format_entry_set_text): check for null text
	(nfs_init): connect cb_si_toggle
	* goffice/gtk/go-format-sel.ui: add si_button
	* goffice/utils/go-format.h: move defs here from the .c file
	* goffice/utils/go-format.c: move defs to .h file
	(go_format_token2): split E token into separate tokens
	(go_format_preparse): handle new tokens
	(go_format_parse_number_new_1): new ' scale
	(go_format_parse_number_E): support SI prefixes
	(si_reduction): new
	(go_format_execute): support SI prefixes
	(go_format_generate_scientific_str): appens SI marker
	(go_format_get_details): store SI info

2011-08-31  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-renderer.c (gog_renderer_draw_data_label): center
	multiline label, (gog_renderer_get_scale): new function.
	* goffice/graph/gog-renderer.h: ditto.
	* plugins/plot_xy/gog-xy.c (gog_xy_view_render): support data labels.

2011-08-30  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/graph/gog-axis.c (axis_format_value): trim label. [#657670]
	* goffice/utils/go-string.c (find_shape_attr): new
	(go_string_trim): new
	* goffice/utils/go-string.h (go_string_trim): new

2011-08-30  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-graph.c (goc_graph_do_tooltip),
	(goc_graph_motion): appropriately scale the position. [#657694]
	* goffice/graph/gog-axis.c (map_linear_calc_ticks): always display the
	correct minor axis ticks. [#657670]
	* plugins/plot_surface/gog-contour.c
	(gog_contour_plot_foreach_elem): don't crash when pseudo3d axis has too
	largemanula ticks spacing. [#657695]
	* plugins/plot_surface/gog-xyz-surface.c
	(gog_xyz_surface_plot_build_matrix): ditto.

2011-08-30  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_get_logical_rect): change to
	go_format_get_width and change all callers
	(blank_characters): rewrite
	* goffice/gtk/go-format-sel.ui: fix spelling

2011-08-29  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-series-labels-prefs.ui: add a separator for labels.
	* goffice/graph/gog-series-labels.c: ditto.
	* goffice/graph/gog-series-labels.h: ditto.
	* goffice/utils/go-pango-extras.c (go_pango_attr_list_erase): fix a
	critical.

2011-08-28  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-widget.c (goc_widget_draw): draw using gtk_widget_draw.
	* goffice/goffice.c (libgoffice_init): new GogDataLabel type.
	* goffice/graph/goffice-graph.h: ditto.
	* goffice/graph/gog-renderer.c (gog_renderer_draw_data_label): use overriden
	style if given.
	* goffice/graph/gog-series-labels.c: new GogDataLabel type.
	* goffice/graph/gog-series-labels.h: ditto.
	* goffice/graph/gog-series.c (role_series_labels_post_add): set a default
	format, (gog_series_map_XL_dim), (gog_series_set_XL_dim): new functions.
	* goffice/graph/gog-series.h: new functions.
	* goffice/graph/gog-theme.c (build_predefined_themes): new GogDataLabel type
	* goffice/utils/go-style.c (go_style_is_auto): new function.
	* goffice/utils/go-style.h: ditto.
	* plugins/plot_barcol/gog-barcol.c (gog_barcol_view_render): allow for
	points in data labels.
	* plugins/plot_xy/gog-xy.c (gog_xy_series_init): set a default label
	position.

2011-08-27  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_desired_width): check for fontmap
	(go_format_get_logical_rect): ditto

2011-08-27  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_get_logical_rect): handle NULL layout
	(go_format_desired_width): ditto

2011-08-27  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/formats.c (_go_currency_date_format_init): ISO 8601 should
	be with the other date-time formats

2011-08-27  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (GOFormatOp): add ops
	(go_format_parse_number_fraction): create more program steps for fractions
	(go_format_dump_program): handle new ops
	(go_format_execute): ditto
	* goffice/gtk/go-format-sel.ui: change spin button bounds
	* goffice/gtk/go-format-sel.c (cb_max_denom_digits_changed): permit
	0 denominator digits

2011-08-26  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (GOFormatOp): add ops
	(go_format_parse_number_fraction): create more program steps for fractions
	(go_format_dump_program): handle new ops
	(go_format_execute): ditto
        (go_format_get_details): be more careful to take the right tokens

2011-08-26  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/gtk/go-format-sel.ui: fix tooltips

2011-08-26  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/gtk/go-format-sel.ui: add as-multiple-of-pi checkbox and sep.
	* goffice/gtk/go-format-sel.c (FormatWidget): add new widgets
	(cb_pi_scale_toggle): new
	(fmt_dialog_enable_widgets): handle new widgets
	(nfs_init): handle new widgets
	* goffice/utils/go-format.h (GOFormatDetails): add new field
	* goffice/utils/go-format.c (go_format_generate_fraction_str):
	handle pi-slash
	(go_format_details_init): adjust initialisation
	(go_format_get_details): handle pi-slash

2011-08-26  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_parse_number_fraction): write
	OP_NUM_VAL_SIGN
	(go_format_execute): keep the sign attached to val

2011-08-26  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (blank_characters): also remove the characters
	themselves
	(go_format_execute): move code to blank_characters; erase rather
	than overwrite for OP_NUM_FRACTION_BLANK_WHOLE; consider alignment
	for OP_NUM_FRACTION_SIMPLIFY_PI

2011-08-25  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_parse_number_fraction):
	don't use both OP_NUM_FRACTION_SIMPLIFY_PI and OP_NUM_FRACTION_BLANK

2011-08-25  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_parse_number_fraction): use
	OP_NUM_FRACTION_SLASH and OP_NUM_FRACTION_ALIGN
	(UNICODE_PI): use "mathematical small italic pi"
	(go_format_get_logical_rect): new
	(go_format_dump_program): add OP_NUM_FRACTION_SLASH and OP_NUM_FRACTION_ALIGN
	(go_format_desired_width): new
	(blank_characters): use go_format_get_logical_rect
	(go_format_execute): support OP_NUM_FRACTION_SLASH and OP_NUM_FRACTION_ALIGN

2011-08-24  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/gtk/go-format-sel.c (study_format): scientific number
	formatting with min_digits =0 and =1 are effectively indistinguishable
	(fmt_dialog_enable_widgets): set the range of the F_EXP_DIGITS widget
	depending on format_type
	* goffice/utils/go-format.c (go_format_parse_number_new_1): add argument
	and change all callers
	(go_format_parse_number_fraction): write OP_NUM_FRACTION_BLANK_WHOLE if
	appropriate
	(blank_characters): new
	(go_format_execute): use blank_characters and handle OP_NUM_FRACTION_BLANK_WHOLE
	(go_format_generate_fraction_str): write full numerator
	(cnt_digits): new

2011-08-24  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/gtk/go-format-sel.c (study_format): the fraction selector
	interface handles min_digits.

2011-08-24  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_get_details): handle fractions

2011-08-24  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/gtk/go-format-sel.c (FormatWidget): add widgets for fraction
	formatting
	(cb_denominator_changed): new
	(cb_max_denom_digits_changed): new
	(cb_min_integer_digits_changed): new
	(cb_min_denom_digits_changed): new
	(cb_exp_digits_changed): check for active type
	(cb_split_fraction_toggle): new
	(cb_fraction_automatic_toggle): new
	(fmt_dialog_enable_widgets): increase maximum number of widgets per format
	type, add widgets for fraction formatting
	(nfs_init): connect new callbacks
	* goffice/gtk/go-format-sel.ui: add widgets for fraction formatting
	* goffice/utils/go-format.c (go_format_generate_fraction_str): new
	(go_format_generate_str): call go_format_generate_fraction_str
	(go_format_details_init): initialize new fields
	* goffice/utils/go-format.h (GOFormatDetails): add fields to support
	fractions

2011-08-23  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/gtk/go-format-sel.c (cb_exp_digits_changed): new
	(fmt_dialog_enable_widgets): add widgets
	(nfs_init): connect above callback
	* goffice/gtk/go-format-sel.ui: add widgets and format others better

2011-08-23  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/gtk/go-format-sel.ui: use unicode chanracter for "times" instead
	of x

2011-08-23  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/gtk/go-format-sel.c (study_format): in scientific formatting the
	selector also handles details->min_digits == 0
	* goffice/utils/go-format.c (go_format_get_details): EE+ can also occur in
	scientific formatting

2011-08-21  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-widget.c (goc_widget_notify_scrolled): fix widgets
	position inside an RTL canvas.
	* goffice/graph/gog-renderer.c (gog_renderer_draw_data_label): enhance
	scale use.

2011-08-20  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/goffice-graph.h: fix include order.
	* goffice/graph/gog-renderer.c (gog_renderer_draw_data_label): new function.
	* goffice/graph/gog-renderer.h: ditto.
	* goffice/graph/gog-series-labels.c (gog_series_labels_update): make legend
	entry in label work.
	* goffice/graph/gog-series-labels.h: ditto.
	* goffice/graph/gog-view.c (gog_view_get_natural_size): new function
	(see #629794)
	* goffice/graph/gog-view.h: ditto.
	* plugins/plot_barcol/gog-barcol.c (gog_barcol_view_render): use
	gog_renderer_draw_data_label.

2011-08-18  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/app/go-cmd-context-impl.h (go_cmd_context_progress_set):
	remove
	(go_cmd_context_progress_message_set): remove
	* goffice/app/go-cmd-context.h (go_cmd_context_progress_set): add
	(go_cmd_context_progress_message_set): add

2011-08-15  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-canvas.c (goc_canvas_invalidate): add a one pixel
	wide margin to the invalidated region to avoid pixels dust.
	* goffice/canvas/goc-text.c (goc_text_prepare_draw),
	(goc_text_draw): ensure that the rotation is around the anchor point.
	* goffice/graph/gog-series-labels.c (used_selection_changed_cb),
	(raise_cb), (lower_cb), (position_changed_cb),
	(gog_series_labels_changed), (gog_series_labels_update): ensure that all
	changes instant apply in the preview.
	* goffice/gtk/go-rotation-sel.c (cb_rotate_changed),
	(cb_rotate_canvas_realize): replaced the GtkLabel by a GocText item.

2011-08-14  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/app/go-plugin-loader-module.c
	(go_plugin_loader_module_func_file_open): add argument and adjust
	call to loader_data->module_func_file_open
	* goffice/app/go-plugin-service.h (plugin_func_file_open):
	add argument
	* goffice/app/go-plugin-service.c (_GOPluginServiceFileOpener):
	add field
	(go_plugin_service_file_opener_read_xml): load "encoding_dependent"
	(go_plugin_file_opener_open): adjust call to plugin_func_file_open
	(go_plugin_file_opener_new): use service_file_opener->encoding_dependent

2011-08-14  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/data/go-data-impl.h: add new is_valid method.
	* goffice/data/go-data.c (go_data_is_valid): ditto.
	* goffice/data/go-data.h: ditto.
	* goffice/graph/gog-label.c (gog_text_view_size_request): don't unref a
	GOString twice.
	* goffice/graph/gog-series-labels.c: more work on data labels.
	* goffice/graph/gog-series-labels.h: ditto.
	* goffice/graph/gog-series.c (role_series_labels_can_add),
	(gog_series_update): ditto.
	* plugins/plot_barcol/gog-barcol.c (gog_barcol_view_render): ditto.

2011-08-12  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_format_value_gstring): Avoid
	changing attribute list we don't own.  Fixes problem with sticky
	format colours.

2011-08-09  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-smoothed-curve.c
	(gog_smoothed_curve_populate_editor),
	(gog_smoothed_curve_finalize), (gog_smoothed_curve_class_init),
	(gog_smoothed_curve_init), (gog_smoothed_curve_dataset_dims),
	(gog_smoothed_curve_dataset_get_elem),
	(gog_smoothed_curve_dataset_dim_changed),
	(gog_smoothed_curve_dataset_init): add support for smoothed curve renaming.
	[#656148].
	* goffice/graph/gog-smoothed-curve.h:

2011-08-08  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-locale.c (go_locale_month_before_day): in MSWindows
	also consider where the year is.

2011-08-08  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_execute): n digits means atmast
	10^n -1
	(go_format_generate_scientific_str): use number of exponent digits
	even if markup is used

2011-08-07  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-graph.c (goc_graph_do_tooltip): fix when an axis
	does not use all the available space.
	* goffice/graph/gog-axis-prefs.ui: allows an axis to use only part of
	available space. [#654392]
	* goffice/graph/gog-axis.c (gog_axis_map_new),
	(gog_axis_map_get_extents), (gog_axis_map_get_bounds),
	(gog_axis_set_property), (gog_axis_get_property),
	(cb_start_changed), (cb_end_changed), (gog_axis_populate_editor),
	(gog_axis_class_init), (gog_axis_init), (gog_axis_set_bounds),
	(gog_axis_get_effective_span): ditto.
	* goffice/graph/gog-axis.h: ditto.

2011-08-06  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-label.c (gog_text_set_property),
	(gog_text_get_property), (gog_text_class_init), (rotate_frame_cb),
	(rotate_bg_cb), (allow_markup_cb), (gog_label_populate_editor),
	(gog_label_class_init), (gog_text_view_size_request),
	(gog_text_view_render): allow rotation of the frame along with the text.
	[#647147]
	* goffice/graph/gog-label.h:
	* goffice/graph/gog-renderer.c (_draw_rotated_shape),
	(gog_renderer_fill_rectangle), (_draw_rotated_rectangle),
	(gog_renderer_draw_rotated_rectangle):
	* goffice/graph/gog-renderer.h:
	* goffice/utils/go-style-prefs.ui:

2011-08-05  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/goffice-graph.h: add support for rich text in legends.
	* goffice/graph/gog-legend.c (cb_size_elements), (cb_swatch_scale),
	(cb_render_elements): ditto.
	* goffice/graph/gog-plot.c (gog_plot_foreach_elem): ditto.
	* goffice/utils/go-string.c (replace_rich_base_with_plain): don't leak
	a string.
	* plugins/plot_surface/gog-contour.c
	(gog_contour_plot_foreach_elem):  add support for rich text in legends.

2011-08-05  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c
	(go_format_output_scientific_number_element_to_odf): add arguments re
	literal_E and change caller
	(go_format_output_scientific_number_to_odf): handle EE or ee

2011-08-05  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_format_get_details): Deduce
	exponent_digits.
	(go_format_generate_scientific_str): Add right number of exponent
	digits.
	(go_format_details_init): Reset exponent_digits.

	* goffice/data/go-data.c (go_data_preferred_fmt): Constify.  Fixes
	#635072.  All callers adjusted.

2011-08-05  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-string.c (replace_rich_base_with_plain): don't loose
	the ancient base if not destroyed.

2011-08-05  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/data/go-data-impl.h: sanitize the get_markup API.
	* goffice/data/go-data.c (_data_scalar_get_markup): ditto.
	* goffice/data/go-data.h: ditto.
	* goffice/graph/gog-axis.c (gog_axis_ticks_set_markup),
	(map_discrete_calc_ticks): use markup for discrete axis tip labels.
	* goffice/utils/go-string.c (replace_rich_base_with_plain),
	(go_string_new_rich), (go_string_unref): fix GOString lifetime.

2011-08-04  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-group.c (goc_group_update_bounds),
	(goc_group_draw_region), (goc_group_distance),
	(goc_group_cairo_transform), (goc_group_set_clip_path): start support for
	clipping at the GocGroup level.
	* goffice/canvas/goc-group.h:
	* goffice/gtk/go-optionmenu.c (handle_menu_signals),
	(go_option_menu_set_menu): don't use an unexisting sgnal.

2011-08-04  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/data/go-data-impl.h: fix get_markup method declaration.
	* goffice/graph/gog-renderer.c (gog_renderer_draw_text),
	(gog_renderer_get_text_OBR): removed obsolete variables.

2011-08-03  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-polygon.c (goc_polygon_set_property): make it
	compile again.
	* goffice/graph/gog-label.c (gog_text_get_markup),
	(gog_label_get_markup), (gog_label_class_init),
	(gog_text_view_render): add support for rich text labels.
	* goffice/graph/gog-label.h: ditto.
	* goffice/graph/gog-renderer.c (gog_renderer_get_text_AABR),
	(gog_renderer_get_gostring_AABR): ditto.
	* goffice/graph/gog-renderer.h: ditto.

2011-08-03  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-polygon.c (goc_polygon_finalize),
	(goc_polygon_set_property), (goc_polygon_get_property),
	(goc_polygon_prepare_path): replaced private structures by public data.
	* goffice/canvas/goc-polygon.h: ditto.
	* goffice/canvas/goc-rectangle.c (goc_rectangle_set_property),
	(goc_rectangle_get_property), (goc_rectangle_prepare_draw): ditto.
	* goffice/canvas/goc-rectangle.h: ditto.

2011-08-02  Jean Brefort  <jean.brefort@normalesup.org>

	* configure.in: needs librsvg.
	* goffice/canvas/Makefile.am:  add component support to the canvas.
	* goffice/canvas/goc-component.c: ditto.
	* goffice/canvas/goc-component.h: ditto.
	* goffice/canvas/goffice-canvas.h: ditto.
	* goffice/component/Makefile.am: revisited the component API.
	* goffice/component/go-component-factory.c: ditto.
	* goffice/component/go-component-factory.h: ditto.
	* goffice/component/go-component-mime-dialog.c: ditto.
	* goffice/component/go-component-mime-dialog.h: ditto.
	* goffice/component/go-component.c: ditto.
	* goffice/component/go-component.h: ditto.
	* goffice/component/goffice-component.h: ditto.
	* goffice/graph/gog-axis-line.c: cleaned out extra spaces.
	* goffice/graph/gog-axis.c: ditto.
	* goffice/graph/gog-renderer.c: ditto.
	* goffice/graph/gog-renderer.h: ditto.
	* goffice/graph/gog-series-labels.c: ditto.
	* goffice/gtk/go-format-sel.c: ditto.
	* goffice/utils/go-format.c: ditto.
	* goffice/utils/go-pango-extras.h: ditto.
	* plugins/plot_barcol/gog-barcol.c: ditto.

2011-08-02  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/data/go-data-impl.h: add markup support.
	* goffice/data/go-data.c: ditto.
	* goffice/data/go-data.h: ditto.
	* goffice/goffice.c: add initial support for data labels.
	* goffice/graph/Makefile.am: ditto.
	* goffice/graph/goffice-graph.h: ditto.
	* goffice/graph/gog-series-impl.h: ditto.
	* goffice/graph/gog-series-labels-prefs.ui: ditto.
	* goffice/graph/gog-series-labels.c: ditto.
	* goffice/graph/gog-series-labels.h: ditto.
	* goffice/graph/gog-theme.c: ditto.
	* plugins/plot_barcol/gog-1.5d.c: add support for d	ata labels in bar/col
	plots.
	* plugins/plot_barcol/gog-barcol.c: ditto.

2011-08-02  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/app/go-cmd-context-impl.h (GOCmdContextClass): move
	error_info_list field to the error substruct
	* goffice/app/go-cmd-context.c (go_cmd_context_error_info_list): adjust
	for the move of the error_info_list field
	(go_cmd_context_error_info_list_default): ditto

2011-08-02  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_execute): insert space in case
	of short nominators

2011-08-01  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* configure.in: disable gtk depreciation check
	* goffice/graph/gog-axis-line.c: replace ticks.labels with ticks.str
	throughout;
	gog_renderer_get_text_OBR with gog_renderer_get_gostring_OBR, and
	gog_renderer_draw_text with gog_renderer_draw_gostring as required
	byt he ticks change
	* goffice/graph/gog-axis.c replace ticks.labels with ticks.str
	throughout and use gog_axis_ticks_set_text to initialize
	(gog_get_layout): new
	(gog_axis_ticks_set_text): new
	(axis_format_value): add GOString argument and change all callers
	* goffice/graph/gog-axis.h: replace ticks.labels with ticks.str
	* goffice/graph/gog-renderer.c (gog_renderer_draw_gostring): new
	(gog_renderer_draw_text): use gog_renderer_draw_gostring
	(gog_renderer_get_gostring_OBR): new
	(gog_renderer_get_text_OBR): use gog_renderer_get_gostring_OBR
	(gog_renderer_get_gostring_OBR): new
	* goffice/graph/gog-renderer.h (gog_renderer_draw_gostring): new
	* goffice/gtk/go-format-sel.c (generate_preview): use PangoAttrList
	(draw_format_preview): ditto
	(nfs_init): create buffer tags
	* goffice/utils/go-format.c (go_format_parse_number_E): use attributes
	(go_format_execute): use attributes
	(go_format_value_gstring): use attributes instead of passing colour
	* goffice/utils/go-pango-extras.c
	(go_load_pango_attributes_into_buffer_filter): new
	(go_load_pango_attributes_into_buffer_named_filter): new
	(go_create_std_tags_for_buffer): new
	(go_load_pango_byte_to_char): new
	(go_load_pango_attributes_into_buffer): new
	* goffice/utils/go-pango-extras.h (go_create_std_tags_for_buffer): new
	(go_load_pango_attributes_into_buffer): new
	* goffice/utils/go-string.c (go_string_new_rich): ensure we have determined
	the byte_len (if it was negative or zero)

2011-08-01  Jean Brefort  <jean.brefort@normalesup.org>

	* all files: port to gtk+-3.0.

2011-08-01  Morten Welinder <terra@gnome.org>

	* configure.in: Branch to 0.9.0.

2011-07-31  Morten Welinder <terra@gnome.org>

	* configure.in: Post-release bump.

2011-07-31  Morten Welinder <terra@gnome.org>

	* Release 0.8.17

2011-06-21  Morten Welinder  <terra@gnome.org>

	* goffice/graph/gog-graph.c (gog_graph_populate_editor): Force the
	GtkComboxBox to drop its model on destroy to prevent theme leak if
	the combo is leaked itself.  Fixes #652420.

2011-06-18  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-marker-selector.c
	(go_marker_palette_render_func): Plug leak.

	* goffice/graph/gog-series.c (gog_series_populate_editor): Make
	sure we free the GtkBuilder object.

2011-06-16  Morten Welinder <terra@gnome.org>

	* configure.in: Post-release bump.

2011-06-16  Morten Welinder <terra@gnome.org>

	* Release 0.8.16

2011-06-10  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* configure.in: check for get_gsf_odf_version
	* goffice/utils/go-format.c (go_format_output_fraction_to_odf):
	don't just assume that we are writing ODF 1.2

2011-06-08  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_output_fraction_to_odf): in
	ODF 1.2 we do not need to use gnm:no-integer-part any more

2011-05-24  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_format_execute): Remove "-" from
	"-0" even when no dot is present.  Fixes #650928.

2011-05-23  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-complex.c (go_complex_invalid)
	(go_complex_angle_pi): New functions.
	(go_complex_pow): Improve accuracy.

2011-05-22  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-complex.h (go_complexl): Only defined when
	GOFFICE_WITH_LONG_DOUBLE.

2011-05-21  Morten Welinder <terra@gnome.org>

	* configure.in: Post-release bump.

2011-05-21  Morten Welinder <terra@gnome.org>

	* Release 0.8.15

2011-05-19  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_distrib/gog-probability-plot.c
	(data_as_y_toggled_cb), (gog_probability_plot_populate_editor),
	(gog_probability_plot_update), (gog_probability_plot_set_property),
	(gog_probability_plot_get_property),
	(gog_probability_plot_class_init),
	(gog_probability_plot_view_render): implement data-as-y-values property.
	[#650515]
	* plugins/plot_distrib/gog-probability-plot.h: ditto.

2011-05-15  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-format.c (go_format_parse_sequential),
	(go_format_output_date_to_odf),
	(go_format_output_scientific_number_to_odf): fixed some gcc-4.6 warnings.
	[#649355]

2011-05-10  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-regression.c (general_linear_regression): Always
	compute stat information.  If we get negative R-squared, mark
	result as bad.

2011-05-06  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-marker.c (go_marker_create_cairo_surface): don't
	use badly rounded values when clipping markers. [#649485]

2011-04-16  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-geometry.c (go_direction_get_type),
	(go_direction_get_name): make nick names localizable since they are
	used in a gnumeric dialog.
	* goffice/utils/go-geometry.h: ditto.

2011-04-10  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-legend.c (cb_render_elements): fix legends for plots
	with marker only style. [#647367]

2011-04-09  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_token2): localized colour
	names need not start with an alphabetic ascii character.

2011-04-08  Morten Welinder  <terra@gnome.org>

	* goffice/canvas/goc-group.c: Cleanup list traversal.

	* goffice/canvas/goc-item.c (goc_item_maybe_invalidate): New
	function, extracted from goc_item_invalidate.  Avoid invalidating
	invisible items.
	(goc_item_set_visible): New function.
	(goc_item_show, goc_item_hide): Base on goc_item_set_visible.
	This avoids invalidation when nothing changes.

2011-04-06  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_xy/gog-xy-dropbar-prefs.ui: implement dropbar plots with
	linear or logarithmic index axis. [#646832]
	* plugins/plot_xy/gog-xy-dropbar.c: ditto.
	* plugins/plot_xy/gog-xy-dropbar.h: ditto.

2011-04-04  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-bezier.c (go_bezier_spline_init): fixed closed bezier
	spline evaluation. [#646700]

2011-03-28  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-style.c (fill_init): Don't leak the size group.

2011-03-24  Morten Welinder <terra@gnome.org>

	* configure.in: Post-release bump.

2011-03-24  Morten Welinder <terra@gnome.org>

	* Release 0.8.14

2011-03-16  Morten Welinder  <terra@gnome.org>

	* configure.in: Fix backend selection by testing for win32 first.

2011-03-16  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/gtk/go-gtk-compat.h: fix gtk_widget_send_focus_change
	replacement macro to make gcc succeed again.

2011-03-12  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-combo-box.c (do_focus_change): Add cast because
	gcc isn't smart enough to follow union rules before warning.

2011-03-09  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/app/go-conf-gsettings.c (go_conf_get_node),
	(cb_key_changed), (go_conf_add_monitor): fix gnumeric crash when
	monitoring settings changes. [#644222]

2011-03-03  Jean Brefort  <jean.brefort@normalesup.org>

	* configure.in: implement a GSettings backend for GOConf. [#643767]
	* goffice/app/go-conf.c: ditto.
	* goffice/app/go-conf-gsettings.c: ditto.

2011-03-01  Morten Welinder  <terra@gnome.org>

	* goffice/app/go-conf-gconf.c (go_conf_get_node): Handle keys that
	don't start in /apps/.

2011-02-23  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-undo.c (go_undo_*nary_finalize): chain to parent

2011-02-23  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-charmap-sel.c (cs_build_menu): Plug leak.

	* goffice/graph/gog-guru.c (graph_guru_init_format_page): Plug
	leak.
	(graph_guru_type_selector_new): Ditto.
	* goffice/graph/gog-axis-line.c (gog_axis_base_populate_editor):
	Ditto.
	* plugins/plot_distrib/go-distribution-prefs.c (go_distribution_pref_new):
	Ditto.

2011-02-22  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-locale-sel.c (ls_build_menu): Plug leak.

2011-02-18  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-format-sel.c (nfs_init): Plug leaks.
	* goffice/gtk/go-font-sel.c (list_init): Ditto.
	* goffice/gtk/go-image-sel.c (go_image_sel_new): Ditto.

2011-02-02  Morten Welinder <terra@gnome.org>

	* configure.in: Post-release bump.

2011-02-02  Morten Welinder <terra@gnome.org>

	* Release 0.8.13

2011-01-29  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-file.c: add some API documentation.

2011-01-26  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (printf_engineering): New function.
	Fix overflow problem.  Fixes #640571.
	(go_format_execute): Use printf_engineering.

2011-01-25  Jean Brefort  <jean.brefort@normalesup.org>
	* goffice/data/go-data-simple.c (render_val),
	(go_data_scalar_val_serialize), (go_data_scalar_val_unserialize),
	(go_data_vector_val_unserialize), (go_data_matrix_val_unserialize):
	use g_ascii_dtostr and g_ascii_strtod when serializing. [#640438]

2011-01-23  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/formats.c (_go_format_currencies): delete EEK (Estonia
	is now using the Euro

2011-01-18  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-item.c (goc_item_raise), (goc_item_lower),
	(goc_item_lower_to_bottom), (goc_item_raise_to_top): invalidate the item
	after reordering to force a redraw? [#639840]

2011-01-06  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_barcol/gog-line.c (gog_line_view_render): fixed drop lines
	in line plots. [#638738]

2010-12-17  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis-line.c (xyz_process): fixed a memory leak.
	* plugins/plot_surface/gog-contour.c (gog_contour_view_render): ditto.
	* tests/go-demo.c (insert_histogram_data), (main): ditto.
	* tests/shapes-demo.c (open_file): ditto.

2010-11-30  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_output_text_to_odf): new
	(go_format_output_to_odf): connect go_format_output_text_to_odf

2010-11-25  Morten Welinder <terra@gnome.org>

	* configure.in: Post-release bump.

2010-11-25  Morten Welinder <terra@gnome.org>

	* Release 0.8.12

2010-11-24  Morten Welinder  <terra@gnome.org>

	* goffice/graph/gog-theme.c (themes_load_from_dir): Fix URI
	handling.
	(_gog_themes_init): Use g_get_home_dir.
	(gog_theme_finalize): Remove the theme from the global list.
	(_gog_themes_shutdown): Free the list of themes.

2010-11-10  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_distrib/gog-histogram.c
	(gog_histogram_plot_series_update): fixed a limit issue.
	* tests/go-demo.c (insert_histogram_data): don't use raw data.

2010-11-10  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_distrib/gog-histogram.c
	(gog_histogram_plot_series_update): fixed memory errors.
	* plugins/plot_surface/gog-contour.c
	(gog_contour_plot_foreach_elem): ditto.

2010-11-04  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-chart-map.c (make_path_cspline): fixed an infinite loop
	condition. [#633965]

2010-11-02  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/math/go-regression.c (go_exponential_regression): make it just
	wrap go_exponential_regression_as_log.

2010-11-01  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/math/go-regression.c (go_exponential_regression_as_log): new
	regression utility returning the logarithms of the coefficients instead of
	the coefficients to avoid roundint to 0 or infinite.
	* goffice/math/go-regression.h: ditto.
	* plugins/reg_linear/gog-exp-reg.c
	(gog_exp_reg_curve_get_value_at), (gog_exp_reg_curve_get_equation),
	(gog_exp_reg_curve_class_init): use go_exponential_regression_as_log.
	[#633735]

2010-10-26  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-pattern.c (go_pattern_create_cairo_pattern): enclose
	direct drawing between cairo_surface_flush and cairo_surface_mark_dirty
	calls, making patterns work with cairo-1.10.
	* plugins/plot_barcol/Makefile.am: allow all filled plots to be displayed
	under the grid. [#632310]
	* plugins/plot_barcol/gog-area-prefs.ui: ditto.
	* plugins/plot_barcol/gog-barcol-prefs.c (display_before_grid_cb),
	(gog_barcol_plot_pref): ditto.
	* plugins/plot_barcol/gog-barcol-prefs.ui: ditto.
	* plugins/plot_barcol/gog-barcol.c (gog_barcol_plot_set_property),
	(gog_barcol_plot_get_property), (gog_barcol_plot_class_init): ditto.
	* plugins/plot_barcol/gog-dropbar.c (gog_dropbar_set_property),
	(gog_dropbar_get_property), (display_before_grid_cb),
	(gog_dropbar_populate_editor), (gog_dropbar_plot_class_init): ditto.
	* plugins/plot_barcol/gog-line.c (gog_area_plot_set_property),
	(gog_area_plot_get_property), (display_before_grid_cb),
	(gog_area_plot_populate_editor), (gog_area_plot_class_init): ditto.
	* plugins/plot_distrib/gog-boxplot-prefs.ui: ditto.
	* plugins/plot_distrib/gog-boxplot.c (display_before_grid_cb),
	(gog_box_plot_pref), (gog_box_plot_set_property),
	(gog_box_plot_get_property), (gog_box_plot_class_init):
	* plugins/plot_distrib/gog-histogram-prefs.ui: ditto.
	* plugins/plot_distrib/gog-histogram.c
	(gog_histogram_plot_get_property),
	(gog_histogram_plot_set_property), (display_before_grid_cb),
	(gog_histogram_plot_populate_editor),
	(gog_histogram_plot_class_init): ditto.
	* plugins/plot_radar/Makefile.am: ditto.
	* plugins/plot_radar/gog-polar-prefs.ui: ditto.
	* plugins/plot_radar/gog-radar.c (gog_polar_area_set_property),
	(gog_polar_area_get_property), (display_before_grid_cb),
	(gog_polar_area_populate_editor), (gog_radar_area_plot_class_init),
	(gog_polar_plot_class_init): ditto.
	* plugins/plot_xy/gog-xy-prefs.ui: ditto.

2010-10-23  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/goffice-graph.h: allow rendering of grids above plots.
	[#632310]
	* goffice/graph/gog-chart.c (plot_render), (gog_chart_view_render): ditto.
	* goffice/graph/gog-plot-impl.h: ditto.
	* goffice/graph/gog-plot.c (gog_plot_init): ditto.
	* plugins/plot_barcol/gog-line.c (gog_area_plot_init): ditto.
	* plugins/plot_distrib/gog-histogram.c (gog_histogram_plot_init): ditto.
	* plugins/plot_radar/gog-radar.c (gog_radar_area_plot_init): ditto.
	* plugins/plot_surface/gog-contour.c (gog_contour_plot_init): always show
	the grids above contour plots.
	* plugins/plot_surface/gog-surface.c (gog_surface_plot_init): updated
	according to above changes.
	* plugins/plot_xy/Makefile.am: add a property box for GogXYPlot.
	* plugins/plot_xy/gog-xy.c (gog_xy_set_property),
	(gog_xy_get_property), (display_before_grid_cb),
	(gog_xy_plot_populate_editor), (gog_xy_plot_class_init): ditto.

2010-10-18  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-image.c (go_image_create_cairo_pattern):
	Document lifespan.  Make the surface hold a ref to the image so
	image->data stay valid until cairo is done with it.  This is a
	btter fix for 632439.

2010-10-10  Jean Brefort  <jean.brefort@normalesup.org>

	* */*/*.ui: fixed orientation property for GtkVBox.

2010-10-06  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-string.c (go_string_cmp_ignorecase),
	(go_string_get_casefold), (go_string_get_casefolded_collate): fixed
	sorting with accentuated characters. [#631504]
	* goffice/utils/go-string.h:

2010-10-03  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/datetime.c (days_between_GO_BASIS_MSRB_30_360):
	  fix calculation, see 631242 and 630784.

2010-10-01  Morten Welinder <terra@gnome.org>

	* configure.in: Post-release bump.

2010-10-01  Morten Welinder <terra@gnome.org>

	* Release 0.8.11

2010-09-27  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-locale-sel.c (ls_build_menu): Draw as radio
	buttons.

2010-09-24  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_surface/xl-surface.c (get_y_vector): fixed typo.

2010-09-23  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-charmap-sel.c (charset_trans_array): Use charset
	CP932 for what we claim is Shift_JIS.  See bug 627829 for details.
	Patch from Yasuaki Taniguchi.
	(cs_build_menu): Draw as radio buttons.

2010-09-23  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_surface/gog-contour.c: implement
	custom grids in xyz plots. [#624273]
	* plugins/plot_surface/gog-contour.h: ditto.
	* plugins/plot_surface/gog-xyz-surface-prefs.c: ditto.
	* plugins/plot_surface/gog-xyz-surface-prefs.ui: ditto.
	* plugins/plot_surface/gog-xyz-surface.c: ditto.
	* plugins/plot_surface/gog-xyz-surface.h: ditto.
	* plugins/plot_surface/gog-xyz.h: ditto.

2010-09-20  Jon Nordby <jonn@openismus.com>

	* docs/reference/goffice-docs.sgml: update API documentation.
	* goffice/goffice.c: ditto.
	* goffice/graph/gog-axis.c: ditto.
	* goffice/graph/gog-chart.c: ditto.
	* goffice/graph/gog-graph.c: ditto.
	* goffice/graph/gog-label.c: ditto.
	* goffice/graph/gog-legend.c: ditto.
	* goffice/graph/gog-object.c: ditto.
	* goffice/graph/gog-plot.c: ditto.
	* goffice/graph/gog-renderer.c: ditto.
	* goffice/graph/gog-series.c: ditto.
	* goffice/gtk/go-graph-widget.c:

2010-09-10  Morten Welinder  <terra@gnome.org>

	* goffice/graph/gog-axis.c (map_date_get_dim_format): If we have a
	date format is time-of-day (or even a time format), make sure the
	format we use has full time-of-day.

2010-09-04  Morten Welinder <terra@gnome.org>

	* configure.in: Post-release bump.

2010-09-04  Morten Welinder <terra@gnome.org>

	* Release 0.8.10

2010-09-04  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/app/go-doc.c (go_doc_init_read), (go_doc_image_fetch): fixed
	GOImage references management. [#628732]
	* goffice/graph/gog-styled-object.c
	(gog_styled_object_document_changed): ditto.

2010-09-03  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/data/go-data-simple.c (go_data_vector_val_load_values),
	(go_data_matrix_val_load_values): update base type sizes.
	* goffice/graph/gog-styled-object.c
	(gog_styled_object_document_changed): fixed a potential crasher. [#628671]
	* goffice/utils/go-styled-object.c (go_styled_object_get_style): add
	missing space.

2010-09-01  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/app/go-doc.c (load_image_data): don't unref the image at
	this point. [#628467]

2010-09-01  Morten Welinder  <terra@gnome.org>

	* goffice/app/go-doc.c (go_doc_init_read, go_doc_init_write): Make
	->imagebuf own the ids.
	(go_doc_save_image, go_doc_image_fetch): Copy image ids.

2010-08-31  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/app/go-cmd-context.c (go_cmd_context_class_init): this
	should be a base init function, so change its name and arguments

2010-08-31  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-plot.c (gog_plot_update_cardinality),
	(gog_plot_foreach_elem): optionnaly delete trendlines from
	legend. [#628031]
	* goffice/graph/gog-trend-line.c (gog_trend_line_set_property),
	(gog_trend_line_get_property), (cb_show_in_legend),
	(gog_trend_line_populate_editor), (gog_trend_line_class_init),
	(gog_trend_line_init), (gog_trend_line_new_by_type),
	(gog_trend_line_has_legend): ditto.
	* goffice/graph/gog-trend-line.h: ditto.
	* goffice/utils/go-editor.c (go_editor_get_page): new.
	* goffice/utils/go-editor.h: ditto.

2010-08-30  Morten Welinder  <terra@gnome.org>

	* goffice/graph/gog-axis.c (map_date_calc_ticks): Simplify and
	handle non-integer steps.

	* goffice/utils/go-format.c (go_format_month_before_day): Fix test
	for date format.
	(go_format_is_date): Return also an indication of whether the
	format has time-of-day.

2010-08-29  Morten Welinder  <terra@gnome.org>

	* goffice/graph/gog-axis.c (map_date_calc_ticks): Fix condition
	for weekly axis.  Fixes #628259.

2010-08-24  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/app/io-context.c (go_io_error_info_set): don't be overzealous
	  while checking for problems
	(go_io_error_push): skip useless code

2010-08-24  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/app/go-cmd-context-impl.h (error_info_list): new method
	* goffice/app/go-cmd-context.c (go_cmd_context_error_info_list):
	  call error_info_list
	(go_cmd_context_error_info_list_default): new
	(go_cmd_context_class_init): new
	(go_cmd_context_get_type): connect go_cmd_context_class_init

2010-08-24  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/app/go-cmd-context.c (go_cmd_context_error_info_list): new
	* goffice/app/go-cmd-context.h (go_cmd_context_error_info_list): new
	* goffice/app/io-context-priv.h (_GOIOContext): change info field into
	  a GSList
	* goffice/app/io-context.c (ioc_finalize): free info list
	(go_io_error_clear): ditto
	(go_io_error_info_set): append to list
	(go_io_warning_varargs): ditto
	(go_io_error_push): add details to the last item
	(go_io_error_display): call go_cmd_context_error_info_list

2010-08-24  Morten Welinder  <terra@gnome.org>

	* goffice/component/go-component-factory.c: Fix char-xmlChar
	confusion.
	* goffice/app/go-plugin-service.c: Ditto.
	* goffice/app/go-plugin.c: Ditto.

2010-08-24  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/app/go-plugin-service.c (go_plugin_service_finalize),
	(go_plugin_service_new): don't use g_free instead of xmlFree. [#627700]
	* goffice/graph/gog-plot-engine.c (gog_plot_type_service_read_xml),
	(gog_trend_line_service_read_xml): ditto.
	* goffice/utils/go-libxml-extras.c (go_xml_node_get_bool): ditto.

2010-08-23  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-style-prefs.ui: restore centered image filling.
	* goffice/utils/go-style.c (go_style_fill_sax_save),
	(go_style_sax_load_fill_image), (go_style_sax_load_fill): consider image
	filling with no imge as no filling when serializing. [#627690],
	(go_style_create_cairo_pattern): restore centered image filling.

2010-08-23  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_format_parse_sequential): Plug
	leak.

	* goffice/goffice.c (libgoffice_shutdown): Free locale vars too.
	* goffice/utils/go-locale.c (_go_locale_shutdown): New function.

2010-08-20  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-glib-extras.c (go_string_replace): pos==len is
	ok.

2010-08-20  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-chart-map.c (make_path_cspline): do not check order
	for NULL abscissa. [#627507]

2010-08-20  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-rangefunc.c (go_range_increasing)
	(go_range_decreasing): Add preconditions.

2010-08-19  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_surface/gog-xyz-surface.c
	(gog_xyz_surface_plot_update): force update of x and y limits when data
	change. [#627388]

2010-08-18  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-style.c (go_style_fill_sax_save): fixed typo.

2010-08-18  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-renderer.c (_line_size): Always use real line width
	when evaluating dashes. [#442546]

2010-08-17  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_format_generate_number_str,
	go_format_generate_scientific_str,
	go_format_generate_accounting_str): Limit number of decimals.

2010-08-16  Morten Welinder <terra@gnome.org>

	* configure.in: Post-release bump.

2010-08-16  Morten Welinder <terra@gnome.org>

	* Release 0.8.9

2010-08-16  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-theme.c (gog_theme_finalize),
	(map_area_series_solid_palette), (name_end), (elem_start): use g_ptr_array
	instead of g_array and don't use recent glib additions. [#627056]

2010-08-15  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-theme.c (build_predefined_themes): fixed typo (no
	more critical in gog_theme_fillin_style. [#626960]

2010-08-12  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/formats.c: update currencies. [#626461]

2010-08-12  Jean Brefort  <jean.brefort@normalesup.org>

	* docs/reference/goffice-0.8-sections.txt: update.
	* goffice/graph/gog-graph-prefs.ui: allow for themes defined in xml files.
	[#531070]
	* goffice/graph/gog-graph.c (cb_theme_changed),
	(gog_graph_populate_editor): ditto.
	* goffice/graph/gog-plot-engine.c (_gog_plugin_services_init): ditto.
	* goffice/graph/gog-styled-object.c (gog_styled_object_init_style): ditto.
	* goffice/graph/gog-theme.c (gog_theme_finalize),
	(gog_theme_find_element), (gog_theme_fillin_style),
	(gog_theme_add_element), (gog_theme_get_local_name),
	(gog_theme_get_description), (map_area_series_solid_default),
	(map_area_series_solid_guppi), (map_area_series_solid_palette),
	(build_predefined_themes), (name_start), (name_end), (desc_end),
	(elem_start), (theme_load_from_uri), (themes_load_from_dir),
	(_gog_themes_init): ditto.
	* goffice/graph/gog-theme.h: ditto.

2010-08-12  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-error-bar.c (gog_error_bar_prefs): fix memory leak.
	* plugins/plot_distrib/gog-boxplot.c (gog_box_plot_pref),
	(gog_box_plot_populate_editor): fix memory leak and criticals. [#626665]

2010-08-11  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-graph.c (goc_graph_draw): fix blur in zoomed charts.
	[see #626404]

2010-08-07  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-object.c (gog_object_add_by_role): do not try to
	instantiate an object using an abstract class. [#626305]

2010-08-07  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-data-set.c (gog_dataset_set_dim): check dimension.
	* goffice/graph/gog-object-xml.c (gogo_dim_start):  check dimension and
	object type [#626263],
	(gogo_prop_start): check dimension [#626206].
	* goffice/utils/go-styled-object.c (go_styled_object_set_style): don't set
	a NULL style.

2010-07-30  Morten Welinder <terra@gnome.org>

	* configure.in: Post-release bump.

2010-07-30  Morten Welinder <terra@gnome.org>

	* Release 0.8.8

2010-07-30  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/gtk/go-format-sel.c (study_format): change arguments and
	  change all callers
	(go_format_sel_format_classification): use study_format

2010-07-30  Morten Welinder  <terra@gnome.org>

	* goffice/graph/gog-axis.c (map_week_calc_ticks): New function.
	(map_date_calc_ticks): Call map_week_calc_ticks as appropriate.

	* goffice/app/go-conf-gconf.c (cb_key_changed): Send the full key
	to callback.

2010-07-27  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-math.c: Use go_finitel as appropriate.

	* goffice/utils/formats.c (_go_currency_date_format_init): Make
	GOFormatDetails usage a bit more opaque.

	* goffice/math/go-math.c: Use go_finitel as appropriate.

2010-07-13  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-graph.c (goc_graph_do_tooltip): don't access a
	GODataVector with an index larger than its length.

2010-07-13  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_surface/gog-contour.c
	(gog_contour_plot_foreach_elem): Fixed legend when the pseudo-3D axis
	has a manually set minimum. [#623887]

2010-07-08  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_format_details_new,
	go_format_details_free): New functions.

2010-07-01  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-graph.c (gog_graph_validate_chart_layout): do not
	take manually placed charts into account when evaluating rows and
	columns in GogGraph.
	* goffice/graph/gog-object.c (gog_object_set_position_flags): ditto.

2010-07-01  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-glib-extras.c (go_string_replace): New
	function.

2010-06-28  Morten Welinder <terra@gnome.org>

	* configure.in: Post-release bump.

2010-06-28  Morten Welinder <terra@gnome.org>

	* Release 0.8.7

2010-06-27  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-equation.c (gog_equation_init_style),
	(gog_equation_view_size_request), (gog_equation_view_render): implement
	equations rotation. [#622782]
	* goffice/graph/gog-renderer.c (gog_renderer_draw_equation):

2010-06-24  Jean Brefort  <jean.brefort@normalesup.org>

	* pixmaps/Makefile.am: add new icons.
	* plugins/plot_distrib/Makefile.am: enhance histograms.
	* plugins/plot_distrib/gog-boxplot.c (gog_box_plot_pref):
	* plugins/plot_distrib/gog-histogram.c (gog_histogram_plot_update),
	(gog_histogram_plot_axis_get_bounds),
	(gog_histogram_plot_get_property),
	(gog_histogram_plot_set_property), (vertical_changed_cb),
	(cumulative_changed_cb), (gog_histogram_plot_populate_editor),
	(gog_histogram_plot_class_init), (gog_histogram_plot_init),
	(gog_double_histogram_plot_populate_editor),
	(gog_double_histogram_plot_finalize),
	(gog_double_histogram_plot_class_init),
	(gog_double_histogram_plot_init),
	(gog_double_histogram_plot_dataset_dims),
	(gog_double_histogram_plot_dataset_get_elem),
	(gog_double_histogram_plot_dataset_dim_changed),
	(gog_double_histogram_plot_dataset_init),
	(gog_histogram_plot_view_render),
	(gog_histogram_plot_series_update),
	(gog_histogram_plot_series_finalize): ditto.
	* plugins/plot_distrib/gog-histogram.h: ditto.
	* plugins/plot_distrib/plot-types.xml.in: ditto.
	* plugins/plot_distrib/plugin.c (go_plugin_init): ditto.
	* plugins/plot_distrib/plugin.xml.in: ditto.

2010-06-16  Morten Welinder <terra@gnome.org>

	* configure.in: Post-release bump.

2010-06-16  Morten Welinder <terra@gnome.org>

	* Release 0.8.6

2010-06-15  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-math.c (go_fake_floor, go_fake_ceil,
	go_fake_trunc, go_fake_floorl, go_fake_ceill, go_fake_truncl):
	Handle very large numbers right.  Handle ix86 excess precision for
	"double" versions.

2010-06-11  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-format-sel.c (funny_currency_order): Fix order.
	#621336.

2010-06-04  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-undo.c: Docoment all apis.

2010-06-01  Morten Welinder  <terra@gnome.org>

	* goffice/utils/formats.c (_go_currency_date_format_init):
	Unconditionally add formats "yyyy-mm-dd" and "yyyy-mm-dd
	hh:mm:ss".

2010-06-01  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_barcol/gog-line.c (gog_line_view_render): Fix various
	series point related issues.
	* plugins/plot_radar/gog-radar (gog_rt_view_render): ditto.
	* plugins/plot_xy/gog-xy.c (gog_xy_view_render): ditto.

2010-06-01  Morten Welinder  <terra@gnome.org>

	* plugins/plot_xy/gog-xy.c (gog_xy_view_render,
	gog_xy_view_get_data_at_point): Fix crash.  #620198.

2010-05-31  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-file.c (go_url_show, go_shell_arg_to_uri)
	(go_mime_type_get_description): Remove special case for Win32.

2010-05-30  Morten Welinder <terra@gnome.org>

	* configure.in: Post-release bump.

2010-05-30  Morten Welinder <terra@gnome.org>

	* Release 0.8.5

2010-05-28  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/Makefile.am: appiled patch from Bobby Powers: fix --without-gtk
	win32 build. [#619312]
	* goffice/graph/gog-styled-object.c (gog_styled_object_class_init): ditto.
	* goffice/ms-compat/Makefile.am: ditto.
	* goffice/utils/go-style.h: ditto.
	* goffice/graph/gog-3d-box.c (gog_3d_box_class_init): fixed all warnings
	for the without-gtk build.
	* goffice/graph/gog-axis-line.c: ditto.
	* goffice/graph/gog-axis.c: ditto.
	* goffice/graph/gog-renderer.c (gog_renderer_export_image): ditto.
	* plugins/plot_pie/gog-pie.c: ditto.

2010-05-28  Morten Welinder  <terra@gnome.org>

	* goffice/graph/gog-chart-map.c (make_path_cspline): Both
	increasing and decreasing coordinates are ok.  Fixes #619958.
	(Tracked down by Jean.)

2010-05-23  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-rangefunc.c (go_range_sumsq): Do square in
	extended precision if we are summing in extended precision.

2010-05-20  Morten Welinder <terra@gnome.org>

	* configure.in: Post-release bump.

2010-05-20  Morten Welinder <terra@gnome.org>

	* Release 0.8.4

2010-05-20  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-quad.c (go_quad_dot_product): New function.
	(go_quad_init): Drop third argument.  All callers changed.

2010-05-17  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-rangefunc.c (go_range_devsq): Do the long-double
	trick here too.

	* goffice/gtk/go-format-sel.c (find_builtin): Special-case
	case-challenged variants of "General".

2010-05-17  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/goffice.h: applied patch from Bobby Powers: fix without-gtk
	build. [#618592]
	* goffice/graph/gog-chart.c (gog_chart_class_init):

2010-05-16  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-quad.c: quad precision routines.
	* goffice/math/go-regression.c (refine): Use quad precision.

2010-05-13  Morten Welinder  <terra@gnome.org>

	* goffice/component/go-component-factory.c (go_component_type_service_read_xml):
	Plug leak.
	(go_component_type_service_deactivate): Plug leak.

	* goffice/math/go-regression.c (general_linear_regression): Use QR
	factorization with refinement.

2010-05-09  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-regression.c (DOUBLE_MAX): Eliminate in favour
	of SUFFIX(go_pinf).
	(general_linear_regression): Allocate stats->xbar correctly.
	Always set the result vector to something.
	(go_exponential_regression): map the result also if it is
	near-singular.

2010-05-07  Morten Welinder <terra@gnome.org>

	* configure.in: Post-release bump.

2010-05-07  Morten Welinder <terra@gnome.org>

	* Release 0.8.3

2010-05-04  Morten Welinder  <terra@gnome.org>

	* goffice/app/go-conf-win32.c (go_conf_win32_get): Restore last
	backslash for error messages.
	(go_conf_set_bool): Set the right value.  Fixes #617672.
	(go_conf_get_node): Don't create too-deep directory structure.

2010-05-03  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-regression.c (LUPDecomp): Handle nan entries.

2010-05-01  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-graph.c (goc_graph_do_tooltip): use markup
	for tips.

2010-04-27  Jean Brefort  <jean.brefort@normalesup.org>

	* configure.in: check for gtk_widget_send_focus_change().
	* goffice/gtk/go-action-combo-color.c (cb_color_changed),
	(go_action_combo_color_class_init): implement the "combo-activate"
	signal.	[#583175]
	* goffice/gtk/go-action-combo-pixmaps.c (cb_selection_changed),
	(go_action_combo_pixmaps_class_init): ditto.
	* goffice/gtk/go-combo-box.c (do_focus_change): use
	gtk_widget_send_focus_change() when available.
	* goffice/gtk/go-gtk-compat.h: ditto.

2010-04-23  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_distrib/gog-probability-plot.c
	(gog_probability_plot_series_update): skip invalid data.

2010-04-21  Morten Welinder  <terra@gnome.org>

	* goffice/utils/datetime.c (go_date_weeknum): Return the Excel
	compatible week numbers as intended, not the glib ones.

2010-04-16  Valek Filippov  <frob@gnome.org>

	* tests/shapes-demo.c: fix warnings.

2010-04-16  Morten Welinder <terra@gnome.org>

	* configure.in: Post-release bump.

2010-04-16  Morten Welinder <terra@gnome.org>

	* Release 0.8.2

2010-04-16  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-regression.c (rescale): Don't return a value.
	Determinant will be zero on return when singular.
	(LUPDecomp): Moderate cleanup.

2010-04-13  Jean Brefort  <jean.brefort@normalesup.org>

	* docs/reference/goffice-0.8-sections.txt: add new go_path entries.
	* goffice/utils/go-path.c (go_path_copy),
	(go_path_append): new functions.
	* goffice/utils/go-path.h: ditto.

2010-04-10  Valek Filippov  <frob@gnome.org>

	* goffice/tests/mf-demo.c: move objects to drawing context,
	add save/restore DC and offset window/viewportOrg.

2010-04-10  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/gtk/go-gtk-compat.h: make things build with gtk-2.20.
	* goffice/gtk/goffice-gtk.c (cb_activate_default): use
	gtk_widget_is_sensitive() instead of gtk_widget_get_sensitive().

2010-04-09  Valek Filippov  <frob@gnome.org>

	* goffice/canvas/goc-path.c: add Path support
	* goffice/canvas/goc-path.h: ditto
	* goffice/canvas/Makefile.am: ditto

2010-04-09  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-path.c (go_path_new), (go_path_free),
	(go_path_ref), (go_path_get_type), (go_path_to_cairo): new GOPath functions.
	* goffice/utils/go-path.h: ditto.

2010-04-09  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/app/go-plugin.c (go_plugins_init), (go_plugins_add): fixed issues
	related to components intialization.
	* goffice/component/go-component-factory.c
	(go_component_type_service_read_xml),
	(go_component_type_service_activate),
	(go_component_type_service_deactivate),
	(go_component_type_service_class_init): implement components plugins
	activation/deactivation.
	* goffice/component/goffice-component.h: add missing headers.

2010-04-08  Morten Welinder  <terra@gnome.org>

	* goffice/app/go-conf-win32.c (go_conf_win32_clone_full): Handle
	buffer expansion right.

2010-04-07  Valek Filippov  <frob@gnome.org>

	* tests/mf-demo.c: add 'Symbol' and 'MT Extra' support.

2010-04-05  Morten Welinder  <terra@gnome.org>

	* goffice/app/go-conf-win32.c: Catch up with changes to other
	backend.  Might even work now.

2010-04-04  Valek Filippov  <frob@gnome.org>

	* tests/mf-demo.c: reuse common parsing routines between MR commands.

2010-04-03  Valek Filippov  <frob@gnome.org>

	* tests/mf-demo.c: new demo.
	* tests/Makefile.am: ditto.

2010-03-27  Jean Brefort  <jean.brefort@normalesup.org>

	* configure.in: fixed gtk compatibility macro names.
	* goffice/canvas/goc-canvas.c (goc_canvas_invalidate): ditto.
	* goffice/canvas/goc-item.c (goc_item_dispose),
	(goc_item_invalidate): ditto.
	* goffice/graph/gog-child-button.c (gog_child_button_popup): ditto.
	* goffice/gtk/go-font-sel.c (select_row): ditto.
	* goffice/gtk/go-gtk-compat.h: ditto.
	* goffice/gtk/go-selector.c (go_selector_popup): ditto.
	* goffice/gtk/goffice-gtk.c (cb_activate_default),
	(cb_parent_mapped), (go_gtk_window_set_transient): ditto.

2010-03-26  Morten Welinder  <terra@gnome.org>

	* goffice/app/go-conf-keyfile.c (go_conf_set_str_list): Handle
	empty list.

2010-03-26  Valek Filippov  <frob@gnome.org>

	* goffice/canvas/goc-polygon.c (goc_polygon_prepare_draw): use polygon
	splitting to draw polypolygons.

2010-03-26  Jean Brefort  <jean.brefort@normalesup.org>

	* docs/reference/goffice-0.8-sections.txt: new entries.
	* goffice/canvas/goc-polygon.c (goc_polygon_priv_free),
	(goc_polygon_set_property), (goc_polygon_get_property),
	(goc_polygon_class_init), (goc_polygon_init): implement polygon splitting.
	* goffice/canvas/goc-utils.c (goc_int_array_new),
	(goc_int_array_ref), (goc_int_array_unref),
	(goc_int_array_get_type): ditto.
	* goffice/canvas/goc-utils.h: ditto.

2010-03-25  Morten Welinder  <terra@gnome.org>

	* goffice/app/go-conf-keyfile.c (go_conf_add_monitor,
	go_conf_remove_monitor): Implement for intra-process changes.

2010-03-25  Valek Filippov  <frob@gnome.org>

	* goffice/canvas/goc-polygon.c: support for fill rule.

2010-03-24  Valek Filippov  <frob@gnome.org>
	* goffice/canvas/goc-text.c: (goc_text_draw), (goc_text_distance),
	(goc_text_update_bounds), (goc_text_prepare_draw): implement text rotation.

2010-03-17  Valek Filippov  <frob@gnome.org>

	* goffice/canvas/goc-arc.c (goc_arc_distance): take ppu into account
	* goffice/canvas/goc-ellipse.c (goc_ellipse_distance): ditto
	* goffice/canvas/goc-polygon.c (goc_polygon_distance): ditto
	* goffice/canvas/goc-polyline.c (goc_polyline_distance): ditto
	* goffice/canvas/goc-rectangle.c (goc_rectangle_distance): ditto

2010-03-17  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-canvas.c (key_release_cb), (key_press_cb),
	(enter_notify_cb), (leave_notify_cb), (goc_canvas_init): ensure that the
	GdkEvent can always be accessed if needed.
	* goffice/canvas/goc-item.c (goc_item_key_pressed),
	(goc_item_key_released), (goc_item_class_init): ditto.

2010-03-10  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-polyline.c (goc_polyline_prepare_draw): don't zoom
	hairline.

2010-03-09  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-file.c (go_shell_arg_to_uri): check for fd:// type
	URIs on win32. [#608422]

2010-03-09  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-item.c (goc_item_new): invalidate the new item.
	* goffice/canvas/goc-styled-item.c (goc_styled_item_set_property),
	(goc_styled_item_get_property), (goc_styled_item_class_init): really
	implement the "scale-line-width" property.

2010-03-09  Valek Filippov  <frob@gnome.org>

	* goffice/canvas/goc-rectangle.c (goc_rectangle_prepare_draw): enhance
	round corners support.
	* tests/shapes-demo.c (parse_line): ditto.

2010-03-08  Morten Welinder <terra@gnome.org>

	* configure.in: Post-release bump.

2010-03-08  Morten Welinder <terra@gnome.org>

	* Release 0.8.1

2010-03-08  Jean Brefort  <jean.brefort@normalesup.org>

	* docs/reference/goffice-0.8-sections.txt: added GocArc.
	* docs/reference/goffice-docs.sgml: ditto.
	* goffice/canvas/goc-ellipse.c (goc_ellipse_update_bounds): fixed bounds.
	* goffice/canvas/goc-rectangle.c (goc_rectangle_update_bounds): ditto.
	* goffice/canvas/goc-styled-item.c (goc_styled_item_set_property),
	(goc_styled_item_style_changed): minor changes.
	* goffice/utils/go-bezier.c: fix docs.
	* goffice/utils/go-styled-object.c: add docs.
	* tests/shapes-demo.c (parse_line): enhance style changes.

2010-03-07  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-style.c (go_style_set_cairo_line): fix hairline.

2010-03-07  Jean Brefort  <jean.brefort@normalesup.org>

	* tests/shapes-demo.c (parse_line): use go_style_object_style_changed().

2010-03-06  Valek Filippov  <frob@gnome.org>

	* goffice/canvas/goc-rectangle.c (goc_rectangle_set_property),
	(goc_rectangle_get_property), (goc_rectangle_prepare_draw),
	(goc_rectangle_class_init), (goc_rectangle_init): implement round
	rectangles.

2010-03-06  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-arc.c (goc_arc_update_bounds): set the line style.
	* goffice/canvas/goc-styled-item.c (goc_styled_item_style_changed):
	enforce invalidation of the item when done.
	* tests/shapes-demo.c (parse_line): more fixes.

2010-03-06  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-polyline.c (goc_polyline_draw): missing white spaces.
	* tests/shapes-demo.c (my_test), (parse_line), (enter_callback): add
	missing calls to goc_item_bounds_changed and fix white spaces and other
	presentation issues.

2010-03-06  Valek Filippov  <frob@gnome.org>

	* goffice/canvas/goc-arc.c (prepare_draw_arrow),
	(goc_arc_prepare_draw), (goc_arc_distance): fix rtl.
	* tests/shapes-demo.c (open_file), (on_open), (my_test),
	(parse_line), (enter_callback), (main): new version.

2010-03-05  Valek Filippov  <frob@gnome.org>

	* goffice/canvas/goc-arc.c (goc_arc_start), (goc_arc_end),
	(prepare_draw_arrow), (goc_arc_prepare_draw),
	(goc_arc_update_bounds), (goc_arc_distance), (goc_arc_draw): support
	arrow heads.
	* goffice/canvas/goc-ellipse.c (goc_ellipse_prepare_draw): fix rtl.
	* goffice/canvas/goc-rectangle.c (goc_rectangle_prepare_draw): ditto.

2010-03-03  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-styled-item.c (goc_styled_item_style_changed): call
	goc_item_bounds_changed.

2010-03-04  Valek Filippov  <frob@gnome.org>

	* goffice/canvas/goc-arc.c (goc_arc_prepare_draw),
	(goc_arc_distance), (goc_arc_draw), (goc_arc_init_style): more
	canvas improvements.
	* goffice/canvas/goc-ellipse.c (goc_ellipse_prepare_draw),
	(goc_ellipse_update_bounds), (goc_ellipse_distance),
	(goc_ellipse_draw), (goc_ellipse_class_init): ditto.
	* goffice/canvas/goc-rectangle.c (goc_rectangle_prepare_draw),
	(goc_rectangle_update_bounds), (goc_rectangle_distance),
	(goc_rectangle_draw), (goc_rectangle_class_init): ditto.

2010-03-03  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-line.c (goc_line_distance): fix distance evaluation.

2010-03-03  Valek Filippov  <frob@gnome.org>

	* goffice/canvas/goc-arc.c (goc_arc_update_bounds),
	(goc_arc_distance): fixed for filled items.
	* goffice/canvas/goc-polygon.c (goc_polygon_update_bounds),
	(goc_polygon_distance): little optimization.
	* goffice/canvas/goc-polyline.c (goc_polyline_update_bounds),
	(goc_polyline_distance): ditto.

2010-03-03  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-polygon.c (goc_polygon_update_bounds): always
	set bounds even if fully transparent.
	* goffice/canvas/goc-polyline.c (goc_polyline_update_bounds): ditto.

2010-03-02  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-locale-sel.c (go_locale_sel_get_locale): Plug
	leak.
	(ls_class_init): Try adding ".utf8" to the locale name.  Fixes
	#611415 in some sense.

2010-03-02  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-item.c (_goc_item_update_bounds): always set
	bounds, even for transparent items or empty items.
	* goffice/canvas/goc-polygon.c (goc_polygon_set_property),
	(goc_polygon_prepare_path), (goc_polygon_update_bounds),
	(goc_polygon_distance), (goc_polygon_draw),
	(goc_polygon_class_init): implement spline support.
	* goffice/utils/go-bezier.c: fix comment.

2010-03-01  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-polyline.c (goc_polyline_set_property),
	(goc_polyline_prepare_draw), (goc_polyline_distance),
	(goc_polyline_class_init): implement spline support.
	* tests/shapes-demo.c (main): add missing white spaces.

2010-03-01  Valek Filippov  <frob@gnome.org>

	* goffice/canvas/Makefile.am: add arc support.
	* goffice/canvas/goc-arc.c: ditto
	* goffice/canvas/goc-arc.h: ditto
	* goffice/canvas/goc-polyline.c (goc_polyline_prepare_draw),
	(goc_polyline_update_bounds), (goc_polyline_distance),
	(goc_polyline_draw): enhance polyline implementation.
	* goffice/canvas/goffice-canvas.h: add arc support.
	* tests/Makefile.am: new demo.
	* tests/shapes-demo.c: ditto.

2010-03-01  Jean Brefort  <jean.brefort@normalesup.org>
	* goffice/utils/go-bezier.c (go_bezier_spline_to_cairo): add a flag to
	support rendering in an RTL canvas.
	* goffice/utils/go-bezier.h: ditto.

2010-02-26  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-chart-map.c (make_path_cspline): correctly manage
	invalid data. [#611163]
	* goffice/utils/go-bezier.c (go_bezier_spline_to_cairo): new utility.
	* goffice/utils/go-bezier.h: ditto.

2010-02-21  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/gtk/goffice-gtk.c (go_gtk_builder_new): fixed a memory leak.

2010-02-19  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-object.c (gog_object_parent_finalized),
	(gog_object_finalize): ensure that children parent is set to NULL.
	(gog_object_get_graph): restore previous version
	* goffice/graph/gog-guru-type-selector.ui: remove orientation property
	to avoid warnings with old gtk+.

2010-02-19  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-object.c (gog_object_get_graph): avoid a crash if a
	parent has been finalized. [#610435]

2010-02-19  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis-line.c (cb_position_toggled),
	(cb_tick_toggle_changed): use gtk_buildable_get_name instead of
	gtk_widget_get_name where appropriate.
	* goffice/graph/gog-axis.c (cb_axis_toggle_changed):
	* goffice/graph/gog-object.c (cb_chart_position_changed):
	* goffice/utils/go-editor.c (go_editor_register_widget):
	* plugins/plot_xy/gog-bubble-prefs.c (cb_type_changed):

2010-02-14  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-canvas.c (button_press_cb),
	(button_release_cb), (motion_cb): don't return before cleaning.
	* libgoffice.pc.in: remove libglade dependency. [#609833]

2010-02-13  Morten Welinder <terra@gnome.org>

	* configure.in: Post-release bump.

2010-02-13  Morten Welinder <terra@gnome.org>

	* Release 0.8.0

2010-02-12  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-item.c (goc_item_dispose): ungrab item on dispose
	when needed. [#609747]

2010-02-11  Morten Welinder  <terra@gnome.org>

	* configure.in: Bump version number in preparation for release.

2010-01-30  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-file.c (go_file_access): Assume g_access is
	available.

2010-01-26  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-format.c (cb_attrs_as_string),
	(go_format_parse_markup): use locale independent markup. [#608047]

2010-01-25  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-graph.c (goc_graph_do_tooltip): do not crash when
	the chart contains no plot. [#607960]

2010-01-21  Morten Welinder  <terra@gnome.org>

	* goffice/app/go-plugin.c (go_plugin_read): Add new "autoload"
	flag
	(go_plugin_activate): Autoload if requested.

2010-01-19  Morten Welinder <terra@gnome.org>

	* configure.in: Post-release bump.

2010-01-19  Morten Welinder <terra@gnome.org>

	* Release 0.7.18

2010-01-19  Jean Brefort  <jean.brefort@normalesup.org>

	* docs/reference/goffice-0.8-sections.txt: fixed more gtk-doc warnings.
	* goffice/app/file.c (go_file_saver_class_init),
	(go_file_format_level_get_type), (go_file_save_scope_get_type): ditto.
	* goffice/app/file.h: ditto.
	* goffice/app/go-plugin-service.c
	(go_plugin_service_file_saver_read_xml): ditto.

2010-01-18  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_distrib/gog-probability-plot.c
	(gog_probability_plot_set_property): apply type change to all series.
	* plugins/plot_distrib/gog-boxplot.c
	(gog_box_plot_axis_get_bounds), (gog_box_plot_child_name_changed),
	(gog_box_plot_class_init): fixed category axis update.

2010-01-15  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-guru.c (graph_guru_type_selector_new): make keyboard
	navigation work again in plot subtypes.

2010-01-14  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-guru-type-selector.ui: a better plot type selector.

2010-01-14  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-guru-type-selector.ui: add a sample and remove obsolete
	widgets. [#495781 and #606162].
	* goffice/graph/gog-guru.c (cb_typesel_sample_plot_resize),
	(graph_typeselect_minor), (cb_selection_changed),
	(cb_plot_types_init), (cb_plot_families_init),
	(graph_guru_type_selector_new), (gog_guru_add_custom_widget): ditto.
	* plugins/plot_barcol/plot-types.xml.in: update line plots descriptions.

2010-01-12  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-guru.c (graph_typeselect_minor),
	(gog_guru_item_enter_notify), (gog_guru_item_leave_notify),
	(gog_guru_item_class_init), (cb_plot_types_init),
	(graph_guru_type_selector_new): show tooltips for plot types.

2010-01-06  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-chart.c (plot_area_pref_state_free),
	(cb_plot_area_changed), (cb_manual_position_changed),
	(gog_chart_populate_editor): moved plot area page there. [#605771]
	* goffice/graph/gog-plot.c (cb_axis_changed),
	(gog_plot_populate_editor): and remove it from here.

2010-01-06  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* plugins/plot_pie/plot-types.xml.in: fix description


2009-12-27  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-polygon.c (goc_polygon_update_bounds): fixed bounds.
	[#605496]

2009-12-23  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_xy/gog-xy.c (gog_xy_view_get_data_at_point),
	(gog_xy_view_class_init): new implementation of get_data_at_point.

2009-12-21  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-reg-curve-prefs.ui: add a name to regression curves
	for display in legends. [#605040]
	* goffice/graph/gog-reg-curve.c (gog_reg_curve_populate_editor),
	(gog_reg_curve_finalize), (gog_reg_curve_init),
	(gog_reg_curve_dataset_dims), (gog_reg_curve_dataset_get_elem),
	(gog_reg_curve_dataset_dim_changed):
	* goffice/graph/gog-reg-curve.h: ditto.

2009-12-19  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_barcol/gog-barcol.c
	(gog_barcol_view_get_data_at_point), (gog_barcol_view_render),
	(gog_barcol_view_class_init): implement get_data_at_point for bar/columns.

2009-12-18  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-canvas.c (goc_canvas_c2w): fixed rounding to int.

2009-12-05  Morten Welinder <terra@gnome.org>

	* configure.in: Post-release bump.

2009-12-15  Morten Welinder <terra@gnome.org>

	* Release 0.7.17

2009-12-13  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-graph.c (goc_graph_set_property): invalidate bounds
	after setting horizontal position.

2009-12-10  Jean Brefort  <jean.brefort@normalesup.org>

	* docs/reference/goffice-0.8-sections.txt: add new function.
	* goffice/gtk/go-marker-selector.c (go_marker_selector_set_shape): ditto.
	* goffice/gtk/go-marker-selector.h: ditto.
	* goffice/utils/go-style.c (outline_init), (line_init),
	(marker_init), (cb_style_changed): update property page after style changes
	when reordering. [#604229]

2009-12-09  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-grid.c (gog_grid_view_xyz_render): still others.

2009-12-09  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-grid-line.c (gog_grid_line_xyz_render): fixed
	some more leaks.

2009-12-09  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis-line.c (xyz_process): fixed leaks.

2009-12-09  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/app/go-plugin.c (append_dir), (go_plugins_set_dirs),
	(go_plugins_init), (go_plugins_add), (go_plugins_shutdown): allow several
	modules to call go_plugins_init without interfering.

2009-12-07  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/goffice.c (libgoffice_init), (libgoffice_shutdown): allow
	multiple calls to libgoffice_shutdown.

2009-12-06  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-canvas.c (goc_canvas_invalidate): really pass width
	and height to gtk_widget_queue_draw_area.

2009-12-05  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-item.c (goc_item_bounds_changed): do not invalidate
	the whole canvas when an item bounds change. [#603813]

2009-12-04  Jody Goldberg <jody@gnome.org>

	* goffice/gtk/goffice-gtk.c (go_help_display) : support tab as a
	  separator in the hhmap file.

2009-12-02  Morten Welinder  <terra@gnome.org>

	* goffice/app/go-cmd-context.c (go_cmd_context_progress_set,
	go_cmd_context_progress_message_set, go_cmd_context_get_password,
	go_cmd_context_set_sensitive): Make implementation optional.

2009-11-30  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_pie/gog-pie.c (gog_pie_view_get_data_at_point): make
	it work in all case, including split rings.

2009-11-29  Morten Welinder <terra@gnome.org>

	* configure.in: Post-release bump.

2009-11-29  Morten Welinder <terra@gnome.org>

	* Release 0.7.16

2009-11-26  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-object-xml.c (gogo_start): revert previous change,
	needs more work.
	* goffice/graph/gog-object.c (gog_object_add_by_role): ditto.

2009-11-26  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-object-xml.c (gogo_start): set axis set to all to
	allow axis loading.
	* plugins/plot_distrib/gog-probability-plot.c
	(gog_probability_plot_update, gog_probability_plot_class_init)
	gog_probability_plot_view_render): implement multiple series in
	probablility plots.

2009-11-26  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-object.c (gog_object_dup): duplicate chart
	axis set; needed because of the change in gog_object_add_by_role.
	(gog_object_add_by_role): fail when addition is not allowed.

2009-11-26  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_distrib/gog-probability-plot.c
	(gog_probability_plot_populate_editor) don't unref the new widget
	[#603015],
	(gog_probability_plot_update): check if there is a series before
	using it.  [#603016]
	* plugins/plot_xy/gog-xy.c (gog_2d_plot_update): do not check error
	bars for a NULL series.

2009-11-22  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-view.c (gog_view_get_view_at_point): allow obj to
	be NULL.

2009-11-20  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_radar/gog-radar.c
	(gog_color_polar_plot_populate_editor): fixed ui file name.

2009-11-20  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_radar/gog-radar.c (gog_rt_view_render),
	(gog_rt_series_element_init_style),
	(gog_rt_series_element_class_init), (gog_rt_series_class_init),
	(go_plugin_init): implement singletons in radar/polar plots.

2009-11-20  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-chart-map.c (make_path_cspline): fixed leaks.

2009-11-19  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-series.c (role_series_element_allocate): don't attempt
	to allocate a virtual class instance.

2009-11-19  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/data/go-data.c (go_data_vector_get_str,
	go_data_matrix_get_str): no need to load values, just length or
	size.

2009-11-17  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_odf_style_map): use %g
	rather than %f

2009-11-17  Andreas J. Guelzow <aguelzow@pyrshep.ca>

	* autogen.sh: allow dirs on PATH to have spaces without causing
	warnings.

2009-11-13  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-item.c (goc_item_bounds_changed): make sure that the
	previously occupied region is invalidated.

2009-11-12  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_pie/gog-pie.c (gog_pie_view_get_data_at_point): do not
	access NULL data. [#601618]

2009-11-09  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-graph.c (goc_graph_do_tooltip): use
	gog_view_get_tip_at_point when no XY map is available (pies and rings).
	* goffice/data/go-data.c (go_data_vector_get_str),
	(go_data_matrix_get_str): load data before returning a string.
	* goffice/graph/goffice-graph.h: move GogPlotView there.
	* goffice/graph/gog-plot-impl.h: new gog_plot_view_get_data_at_point.
	* goffice/graph/gog-plot.c (gog_plot_view_get_data_at_point): new
	function introduced to fix #580545.
	* goffice/graph/gog-plot.h: ditto.
	* goffice/graph/gog-view.c (gog_view_get_tip_at_point): new function.
	* goffice/graph/gog-view.h: ditto.
	* plugins/plot_pie/gog-pie.c (gog_pie_view_get_data_at_point),
	(gog_pie_view_get_tip_at_point), (gog_pie_view_class_init): implement
	the two new view methods (only partially for now, does not work
	properly for split rings).

2009-11-08  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-color.c (go_color_from_str): call gdk_parse_color
	when needed. [#601114]

2009-11-08  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_pie/gog-pie.c (find_element), (gog_pie_view_render): make
	points work when negative values are skipped.

2009-11-06  Jean Brefort  <jean.brefort@normalesup.org>
	* goffice/graph/gog-plot.c (gog_plot_update_cardinality),
	(gog_plot_foreach_elem): add trend lines to legend. [#383518]
	* goffice/graph/gog-series.c (gog_series_child_added),
	(gog_series_class_init): update plot cardinality when a trend line
	is added or removed.

2009-11-06  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_pie/gog-pie-prefs.c (cb_show_negs_changed),
	(gog_pie_plot_pref_signal_connect): add an option for negative values
	display. [#152614]
	* plugins/plot_pie/gog-pie-prefs.ui:
	* plugins/plot_pie/gog-pie.c (gog_show_neg_mode_from_str),
	(gog_show_neg_mode_as_str), (gog_pie_plot_set_property),
	(gog_pie_plot_get_property), (gog_pie_plot_class_init),
	(gog_pie_plot_init), (gog_pie_view_render),
	(gog_pie_series_update):
	* plugins/plot_pie/gog-pie.h:
	* plugins/plot_pie/gog-ring-prefs.ui:

2009-11-04  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-error-bar-prefs.ui: implement error bars in
	radar and polar plots. [#572720]
	* goffice/graph/gog-error-bar.c (gog_error_bar_prefs),
	(gog_error_bar_render): ditto.
	* goffice/graph/gog-error-bar.h: ditto.
	* plugins/plot_barcol/gog-barcol.c (gog_barcol_view_render): fixed after
	error bars API changes.
	* plugins/plot_barcol/gog-line.c (gog_line_view_render): ditto.
	* plugins/plot_radar/gog-radar.c (gog_rt_plot_update),
	(gog_radar_plot_class_init), (gog_polar_plot_class_init),
	(gog_color_polar_plot_class_init), (gog_rt_view_render),
	(gog_rt_series_set_property), (gog_rt_series_get_property),
	(gog_rt_series_finalize), (gog_rt_series_populate_editor),
	(gog_rt_series_class_init), (gog_polar_series_set_property),
	(gog_polar_series_get_property),
	(gog_polar_series_populate_editor), (gog_polar_series_finalize),
	(gog_polar_series_class_init):  implement error bars in
	radar and polar plots. [#572720]
	* plugins/plot_xy/gog-xy.c (gog_xy_view_render): fixed after
	error bars API changes.

2009-11-04  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/app/go-conf-keyfile.c (go_conf_get_real_key): do not add a '/'
	when subkey is NULL. [#600654]

2009-11-03  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-child-button.c (ensure_menu): add parent name to
	the menu entry.

2009-11-01  Morten Welinder <terra@gnome.org>

	* configure.in: Post-release bump.

2009-11-01  Morten Welinder <terra@gnome.org>

	* Release 0.7.15

2009-10-29  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-chart-impl.h: add persistent position for auto mode.
	Fixes #152674.
	* goffice/graph/gog-chart.c (gog_chart_set_property),
	(gog_chart_get_property), (gog_chart_class_init), (gog_chart_init),
	(gog_chart_get_position), (gog_chart_set_position): ditto.
	* goffice/graph/gog-graph.c (role_chart_post_add),
	(gog_graph_validate_chart_layout), (gog_graph_view_size_allocate):
	* goffice/graph/gog-object-prefs.ui: add a user interface to set column
	and row position of a chart in the graph.
	* goffice/graph/gog-object.c (update_select_state),
	(cb_manual_position_changed), (cb_chart_position_changed),
	(gog_object_populate_editor): ditto.

2009-10-29  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-graph.c (goc_graph_update_bounds): set the right size.
	* goffice/graph/gog-renderer.c (gog_renderer_update): fixed resizing a
	graph. [#599887]

2009-10-28  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-chart.c (gog_chart_view_render): reapply patch for
	#152675 and ensure titles are rendered last.
	* goffice/graph/gog-graph.c (gog_graph_class_init),
	(gog_graph_view_render), (gog_graph_view_class_init): ditto.

2009-10-27  Morten Welinder  <terra@gnome.org>

	* goffice/app/file.c (go_file_saver_for_mime_type): Ignore file
	savers with no mime type instead of crashing.

2009-10-19  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-chart-map.c (polar_map_view_to_2D): take radar plot
	maximum into consideration.

2009-10-18  Morten Welinder  <terra@gnome.org>

	* goffice/canvas/goc-graph.c (goc_graph_motion): Hook up a timer
	to handle the rate-limiting.

	* goffice/graph/gog-axis.c (gog_axis_get_effective_format): Rename
	from get_axis_format and make public.
	(axis_format_value): Use unicode minuses and proper date_conv.

	* goffice/canvas/goc-graph.c (goc_graph_do_tooltip): Extract from
	goc_graph_motion for clarity.  Free the right string!  Use
	format_coordinate, not g_strdup_printf.
	(format_coordinate): New function to ensure unicode minuses.

2009-10-18  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/app/go-service-impl.h: typo.
	* goffice/canvas/goc-graph.c (goc_graph_motion),
	(goc_graph_leave_notify), (goc_graph_class_init): display coordinates
	when moving the mouse. [#382666]
	* goffice/canvas/goc-graph.h: ditto/
	* goffice/graph/gog-axis.c (map_discrete_from_view): return discrete
	values,
	(gog_axis_map_is_discrete): new function.
	* goffice/graph/gog-axis.h: ditto.
	* goffice/graph/gog-chart-map.c (x_map_view_to_2D),
	(xy_map_view_to_2D), (polar_map_view_to_2D), (gog_chart_map_new),
	(gog_chart_map_view_to_2D): ditto.
	* goffice/graph/gog-chart-map.h: ditto.

2009-10-15  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-line.c (go_line_dash_as_label): Translate here.
	* goffice/gtk/go-line-selector.c (go_line_dash_palette_get_tooltip_func):
	Don't translate here.

2009-10-14  Morten Welinder  <terra@gnome.org>

	* goffice/canvas/goc-line.c (goc_line_class_init): Change to
	GOArrow for arrow properties.

	* goffice/canvas/goc-line.h (struct _GocLine): Have an arrow at
	both ends.

	* goffice/canvas/goc-line.c (goc_line_draw): Draw point arrows.

	* goffice/utils/go-line.c (go_arrow_init, go_arrow_get_type,
	go_arrow_clear, go_arrow_dup): New functions.

2009-10-12  Jean Brefort  <jean.brefort@normalesup.org>

	* configure.in: prepare for GSEAL_ENABLE.
	* goffice/canvas/goc-canvas.c (goc_canvas_invalidate): ditto.
	* goffice/canvas/goc-item.c (goc_item_dispose),
	(goc_item_invalidate): ditto.
	* goffice/drawing/god-drawing-view.c (god_drawing_view_realize): ditto.
	* goffice/graph/gog-child-button.c (gog_child_button_popup): ditto.
	* goffice/graph/gog-error-bar.c (cb_width_changed),
	(cb_line_width_changed): ditto.
	* goffice/graph/gog-guru.c (cb_sample_pressed),
	(cb_canvas_realized), (graph_guru_init_format_page),
	(typesel_set_selection_color): ditto.
	* goffice/gtk/Makefile.am: ditto.
	* goffice/gtk/go-3d-rotation-sel.c (cb_rotate_canvas_realize),
	(cb_rotate_canvas_button): ditto.
	* goffice/gtk/go-action-combo-color.c (make_icon): ditto.
	* goffice/gtk/go-action-combo-pixmaps.c (make_icon): ditto.
	* goffice/gtk/go-action-combo-stack.c (go_combo_stack_init): ditto.
	* goffice/gtk/go-color-palette.c (create_color_sel),
	(handle_color_sel), (swatch_activated): ditto.
	* goffice/gtk/go-color-selector.c (cb_color_dialog_response),
	(cb_combo_custom_activate), (go_color_selector_drag_data_received): ditto.
	* goffice/gtk/go-combo-box.c (go_combo_popup_reparent),
	(do_focus_change), (go_combo_box_popup_hide_unconditional),
	(cb_arrow_pressed), (go_combo_box_realize),
	(go_combo_popup_tear_off), (go_combo_box_popup_hide),
	(go_combo_box_get_pos), (go_combo_tearoff_bg_copy),
	(go_combo_box_popup_display), (go_combo_box_button_press),
	(cb_state_change), (go_combo_box_init),
	(cb_tearable_button_release), (go_combo_box_construct): ditto.
	* goffice/gtk/go-combo-text.c (cb_scroll_size_request): ditto.
	* goffice/gtk/go-font-sel.c (cb_list_adjust), (select_row): ditto.
	* goffice/gtk/go-format-sel.c (cb_decimals_changed),
	(cb_separator_toggle), (fmt_dialog_enable_widgets),
	(cb_format_currency_select): ditto.
	* goffice/gtk/go-graph-widget.c (go_graph_widget_size_allocate),
	(go_graph_widget_expose_event),
	(go_graph_widget_button_press_event),
	(go_graph_widget_motion_notify_event), (idle_handler),
	(go_graph_widget_set_size_mode): ditto.
	* goffice/gtk/go-gtk-compat.h: ditto.
	* goffice/gtk/go-optionmenu.c (go_option_menu_update_contents),
	(go_option_menu_position), (go_option_menu_set_menu),
	(go_option_menu_set_history), (go_option_menu_init):
	* goffice/gtk/go-palette.c (cb_swatch_expose),
	(cb_menu_item_activate): ditto.
	* goffice/gtk/go-rotation-sel.c (cb_rotate_canvas_realize),
	(cb_rotate_canvas_button): ditto.
	* goffice/gtk/go-selector.c (go_selector_popup),
	(go_selector_drag_data_received), (go_selector_drag_data_get):
	* goffice/gtk/go-selector.h: ditto.
	* goffice/gtk/goffice-gtk.c (go_gtk_dialog_add_button),
	(cb_activate_default), (go_gtk_widget_disable_focus),
	(cb_parent_mapped), (go_gtk_window_set_transient),
	(go_gtk_notice_dialog), (go_dialog_guess_alternative_button_order),
	(go_menu_position_below): ditto.
	* goffice/utils/go-style.c (cb_outline_size_changed),
	(cb_line_size_changed), (cb_marker_size_changed):
	* plugins/plot_barcol/gog-barcol-prefs.c (cb_gap_changed),
	(cb_overlap_changed): ditto.
	* plugins/plot_barcol/gog-minmax.c (cb_gap_changed):
	* plugins/plot_distrib/gog-boxplot.c (cb_gap_changed),
	(cb_ratio_changed): ditto.
	* plugins/plot_pie/gog-pie-prefs.c (cb_element_separation_changed),
	(cb_default_separation_changed), (cb_rotation_changed),
	(cb_center_size_changed): ditto.
	* plugins/plot_surface/gog-xyz-surface-prefs.c (cb_rows_changed),
	(cb_columns_changed): ditto.
	* plugins/plot_xy/gog-bubble-prefs.c (cb_scale_changed): ditto.

2009-10-11  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-group.c (goc_group_set_property): call
	goc_item_bounds_changed after moving to a new position. [#598091]

2009-10-11  Morten Welinder <terra@gnome.org>

	* configure.in: Post-release bump.

2009-10-11  Morten Welinder <terra@gnome.org>

	* Release 0.7.14

2009-10-10  Jody Goldberg <jody@gnome.org>

	From peter.jaeckel@gmail.com:
	* goffice/app/go-plugin.c (go_plugin_get_loader) : new accessor. [#597849]

2009-10-10  Jean Brefort  <jean.brefort@normalesup.org>

	* docs/reference/goffice-0.8-sections.txt: now includes all relevant
	symbols.
	* goffice/app/go-plugin-service-impl.h: make gtk-doc happy.
	* goffice/canvas/goc-circle.c: canvas documentation minimally completed.
	* goffice/canvas/goc-ellipse.c: ditto.
	* goffice/canvas/goc-graph.c: ditto.
	* goffice/canvas/goc-item.c: ditto.
	* goffice/canvas/goc-line.c: ditto.
	* goffice/canvas/goc-pixbuf.c: ditto.
	* goffice/canvas/goc-polygon.c: ditto.
	* goffice/canvas/goc-polyline.c: ditto.
	* goffice/canvas/goc-rectangle.c: ditto.
	* goffice/canvas/goc-structs.h: ditto.
	* goffice/canvas/goc-text.c: ditto.
	* goffice/canvas/goc-utils.c: ditto.
	* goffice/canvas/goc-utils.h: ditto.
	* goffice/canvas/goc-widget.c: ditto.
	* goffice/graph/gog-object.h: make gtk-doc happy.
	* goffice/graph/gog-reg-curve.h: ditto.
	* goffice/graph/gog-trend-line.h: ditto.

2009-10-07  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/gtk/go-image-sel.c (ok_button_clicked_cb): fix image life cycle.
	* goffice/gtk/go-image-sel.ui: set correct response buttons.
	* goffice/utils/go-style.c (cb_image_select): don't proceed until
	gtk_dialog_run returns non 0,
	(go_style_populate_editor): accept passing the document as a property
	(allows images in gnumeric sheet objects),
	(go_style_create_cairo_pattern): fixed wallpaper origin.

2009-10-06  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-polygon.c (goc_polygon_class_init): removed not
	yet implemented "use-spline" property for now.
	* goffice/canvas/goc-polyline.c (goc_polyline_class_init): ditto.

2009-10-06  Jean Brefort  <jean.brefort@normalesup.org>

	* docs/reference/goffice-0.8-sections.txt: add more symbols.
	* goffice/canvas/goc-ellipse.c (goc_ellipse_class_init): fixed description
	of properties.
	* goffice/canvas/goc-group.c (goc_group_add_child),
	(goc_group_remove_child), (goc_group_adjust_bounds),
	(goc_group_adjust_coords), (goc_group_cairo_transform): documented.
	* goffice/canvas/goc-group.h:  changed args names.
	* goffice/canvas/goc-item.c (GSF_CLASS_FULL),
	(goc_item_invalidate): make GocItemClass really virtual.
	* goffice/canvas/goc-rectangle.c (goc_rectangle_class_init): fixed
	description of properties.
	* goffice/canvas/goc-styled-item.c (goc_styled_item_class_init): API docs
	work.
	* goffice/canvas/goc-styled-item.h: ditto.
	* goffice/canvas/goc-widget.c (goc_widget_notify_scrolled): adapt to new
	group API.
	* goffice/graph/gog-object.c (GSF_CLASS_FULL): make class really virtual.
	* goffice/graph/gog-outlined-object.c: ditto.
	* goffice/graph/gog-series.c: ditto.
	* goffice/graph/gog-smoothed-curve.c: ditto.
	* goffice/graph/gog-styled-object.c: ditto.
	* goffice/graph/gog-trend-line.c: ditto.

2009-10-04  Jean Brefort  <jean.brefort@normalesup.org>

	* docs/reference/goffice-0.8-sections.txt: more work.
	* goffice/canvas/goc-group.c (goc_group_add_child): simplify and
	document GocItem API.
	* goffice/canvas/goc-item.c (_goc_item_update_bounds),
	(goc_item_new), (goc_item_invalidate), (goc_item_get_bounds): ditto.
	* goffice/canvas/goc-item.h: ditto.
	* goffice/canvas/goc-styled-item.c (goc_styled_item_class_init),
	(goc_styled_item_init): ditto.
	* goffice/canvas/goc-widget.c (goc_widget_update_bounds),
	(goc_widget_notify_scrolled): ditto.
	* plugins/plot_xy/gog-xy.c: fixed signed/unsigned warnings.

2009-10-03  Jean Brefort  <jean.brefort@normalesup.org>

	* docs/reference/goffice-0.8-sections.txt: more documentation work.
	* goffice/canvas/goc-canvas.c: ditto.
	* goffice/component/go-component.c: ditto.

2009-10-02  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/app/go-plugin.c (go_plugin_read_for_dir): fixed the two last
	strings from #596003.
	* goffice/gtk/go-format-sel.ui: ditto.

2009-09-29  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-widget.c (goc_widget_init): create widget far away
	from visible area.

2009-09-29  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-line.c (goc_line_class_init): fixed translatable
	strings using a patch from Bruce Cowan. [#596003]
	* goffice/graph/gog-series-prefs.ui: add translators comments. [#596003]
	* goffice/graph/gog-series.c (gog_series_populate_editor): add tooltips
	to the clamped spline derivatives data selectors.
	* goffice/gtk/go-color-palette.c (go_color_palette_setup),
	(go_color_palette_make_menu): fixed translatable
	strings
	* goffice/gtk/go-color-selector.c (cb_combo_custom_activate),
	(go_color_selector_new): ditto.
	* goffice/gtk/go-image-sel.ui: ditto.
	* goffice/gtk/go-palette.c (go_palette_show_custom): ditto.
	* goffice/gtk/go-rotation-sel.ui: ditto.
	* goffice/utils/go-style-prefs.ui: ditto.
	* plugins/plot_radar/plugin.xml.in: ditto.
	* tests/go-demo.ui: ditto.

2009-09-29  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_xy/gog-xy.c (gog_xy_view_render): fix point custom
	marker rendering. [#596585]

2009-09-27  Jean Brefort  <jean.brefort@normalesup.org>

	* configure.in: don't allow gtk-doc if without-gtk.

2009-09-27  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/component/go-component.h: cleaned includes.
	* goffice/goffice.h: make without-gtk build work again.
	* goffice/graph/Makefile.am: ditto.
	* goffice/graph/goffice-graph.h: ditto.
	* goffice/utils/go-color.h: ditto.
	* plugins/plot_barcol/gog-barcol.c (gog_barcol_plot_class_init):
	* plugins/plot_pie/gog-pie.c (gog_pie_plot_class_init),
	(gog_ring_plot_class_init): ditto.
	* plugins/plot_radar/gog-color-polar-prefs.xml: removed unused file.
	* plugins/plot_xy/gog-xy.c (gog_bubble_plot_class_init): make without-gtk
	build work again.
	* tests/Makefile.am: make check works without gtk.

2009-09-27  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-style-prefs.ui: fixed unicolor gradients brightness.
	* goffice/utils/go-style.c (fill_gradient_init),
	(cb_fill_type_changed), (go_style_set_fill_brightness): ditto.

2009-09-25  Jean Brefort  <jean.brefort@normalesup.org>

	* docs/reference/goffice-0.8-sections.txt: added a few more entries.
	* goffice/utils/go-style.c (go_style_set_cairo_line): new function.
	* goffice/utils/go-style.h: ditto.
	* goffice/utils/go-styled-object.c
	(go_styled_object_set_cairo_line): use go_style_set_cairo_line.

2009-09-24  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-circle.c (goc_circle_init_style): crrectly set
	background and forground.
	* goffice/canvas/goc-ellipse.c (goc_ellipse_init_style): ditto.
	* goffice/canvas/goc-polygon.c (goc_polygon_init_style): ditto.
	* goffice/canvas/goc-rectangle.c (goc_rectangle_init_style): ditto.
	* goffice/utils/go-style.c (go_style_assign): don't ref an image twice.

2009-09-20  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-text.c (goc_text_draw): purge cairo path.

2009-09-20  Morten Welinder <terra@gnome.org>

	* configure.in: Post-release bump.

2009-09-20  Morten Welinder <terra@gnome.org>

	* Release 0.7.13

2009-09-18  Jean Brefort  <jean.brefort@normalesup.org>

	* docs/reference/goffice-0.8-sections.txt: more symbols included.
	* goffice/component/go-component.c (go_component_get_data): make
	gtk-doc happy.
	* goffice/component/go-component.h: ditto.
	* goffice/data/go-data-impl.h: ditto.

2009-09-18  Jean Brefort  <jean.brefort@normalesup.org>

	* docs/reference/goffice-0.8-sections.txt: removed duplicates
	* goffice/canvas/goc-group.c (goc_group_draw_region): remove unuseful
	call.
	* goffice/canvas/goc-item.c: update documentation and remove unused
	code.
	* goffice/canvas/goc-item.h: remove unused fields.
	* goffice/gtk/goffice-gtk.c: add missing colons.
	* goffice/utils/go-style.c: fixed a documentation warning.

2009-09-17  Morten Welinder  <terra@gnome.org>

	* goffice/canvas/goc-item.c (goc_item_invalidate): Handle the
	no-parent case without crashing.

2009-09-16  Morten Welinder  <terra@gnome.org>

	* goffice/canvas/goc-widget.c (goc_widget_init,
	cb_canvas_changed): New functions.
	(goc_widget_notify_scrolled): Do nothing if we have no parent.
	(goc_widget_set_widget): Handle the no-canvas-yet case.

	* goffice/canvas/goc-item.c (goc_item_class_init): Add canvas and
	parent properties.
	(goc_item_new): Construct the new item with all its properties.

	* goffice/canvas/goc-group.c (goc_group_unrealize,
	goc_group_realize): Chain.
	(goc_group_add_child, goc_group_remove_child): Notify item::parent
	and item::canvas.

	* goffice/canvas/goc-item.c (goc_item_realize,
	goc_item_unrealize): New handlers.
	(_goc_item_realize, _goc_item_unrealize): Simplify.
	(goc_item_new): Simplify and avoid double-realize.

	* goffice/canvas/goc-group.c (goc_group_realize,
	goc_group_unrealize): Simplify.

	* goffice/canvas/goc-polygon.c (goc_polygon_finalize): New
	function to plug leak.

2009-09-15  Morten Welinder  <terra@gnome.org>

	* goffice/canvas/goc-group.c (goc_group_clear): Add sanity check.

2009-09-14  Morten Welinder  <terra@gnome.org>

	* goffice/canvas/goc-widget.c (goc_widget_set_widget): Split from
	goc_widget_set_property.  Disconnect signals when changing widget.
	Keep ref to widget.  Handle setting NULL widget.
	(goc_widget_dispose): Set NULL widget.
	(goc_widget_class_init): Hook up dispose method.

	* goffice/canvas/goc-text.c (goc_text_class_init): Don't cast
	klass pointer to parent's interface type and expect to get the
	right thing!  Instead, make this implement the interface here and
	override the method we want to handle.

2009-09-13  Morten Welinder  <terra@gnome.org>

	* goffice/canvas/goc-widget.c (goc_widget_get_property): Add
	missing "break".

	* goffice/canvas/goc-item.c (goc_item_dispose): Rename from
	goc_item_finalize.
	(goc_item_destroy): New function.

	* goffice/canvas/goc-group.c (goc_group_clear): New function.
	(goc_group_dispose): Renamed from goc_group_finalize and changed
	to simply call goc_group_clear.
	(goc_group_class_init): Hook-up ::dispose instead of finalize.

	* goffice/canvas/goc-canvas.c (goc_canvas_dispose): New handler to
	get rid of items.

2009-09-13  Jean Brefort  <jean.brefort@normalesup.org>

	* docs/reference/goffice-0.8-sections.txt: more API doc work.
	* docs/reference/goffice-docs.sgml: ditto.
	* goffice/graph/gog-chart-map.c (make_path_spline): make gtk-doc happy.
	* goffice/gtk/go-3d-rotation-sel.c (go_3d_rotation_sel_new): renamed
	GO_3D_ROTATION_SEL_TYPE to GO_TYPE_3D_ROTATION_SEL.
	* goffice/gtk/go-3d-rotation-sel.h: ditto.
	* goffice/utils/go-bezier.c (go_bezier_spline_init),
	(go_bezier_spline_destroy), (go_bezier_spline_to_path): make gtk-doc happy.
	* goffice/utils/go-bezier.h: ditto.

2009-09-13  Jean Brefort  <jean.brefort@normalesup.org>

	* docs/reference/.gitignore: removed goffice-*-sections.txt.
	* docs/reference/Makefile.am: do not clean goffice-*-sections.txt.
	* docs/reference/goffice-0.8-sections.txt: added and cleaned a lot.
	* docs/reference/goffice-docs.sgml: updated.
	* goffice/canvas/goc-canvas.c: add some documentation.
	* goffice/canvas/goc-group.c (goc_group_add_child),
	(goc_group_remove_child): fix item life cycle issues.
	* goffice/canvas/goc-item.c (goc_item_finalize),
	(_goc_item_realize), (_goc_item_unrealize): ditto.
	* goffice/canvas/goc-item.h: ditto.
	* goffice/graph/gog-plot-impl.h: make gtk-doc happy.
	* goffice/gtk/go-combo-text.c: ditto.
	* goffice/gtk/go-combo-text.h: ditto.

2009-09-12  Jean Brefort  <jean.brefort@normalesup.org>

	* docs/reference/Makefile.am: removed obsolete entries.
	* docs/reference/goffice-docs.sgml: add canvas.
	* docs/reference/goffice-overrides.txt: removed obsolete file.
	* docs/reference/goffice-sections.txt: ditto.
	* docs/reference/goffice.types: ditto.
	* goffice/canvas/goc-canvas.c: some documentation related work.
	* goffice/canvas/goc-group.h: ditto
	* goffice/canvas/goc-item.h: ditto
	* goffice/canvas/goc-pixbuf.c: ditto
	* goffice/canvas/goc-pixbuf.h: ditto
	* goffice/canvas/goc-styled-item.h: ditto

2009-09-12  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-widget.c (goc_widget_set_property): don't destroy
	the old widget, just remove it from the canvas.

2009-09-11  Jean Brefort  <jean.brefort@normalesup.org>

	* docs/reference/goffice-sections.txt: make things work again after
	go-plugin-service names changes.

2009-09-08  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Fixed empty combos after the libglade to gtkbuilder transition.

	* goffice/graph/gog-object.c (gog_object_populate_editor): here.

2009-09-08  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/gtk/go-image-save-dialog-extra.ui: fixed a combo box
	 initialization.
	* goffice/gtk/goffice-gtk.c (go_gui_get_image_save_info): ditto.

2009-09-05  Morten Welinder <terra@gnome.org>

	* configure.in: Post-release bump.

2009-09-05  Morten Welinder <terra@gnome.org>

	* Release 0.7.12

2009-09-05  Jean Brefort  <jean.brefort@normalesup.org>

	* all files: renamed go-color.h macros.

2009-09-05  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-equation.c (gog_equation_finalize),
	(gog_equation_view_finalize): call parent class finalize methods. [#594189]

2009-09-04  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Conditional use of Use AM_SILENT_RULES (if automake-1.11 is present).
	Verbose compilation is still available using make V=1.
	Feel free to revert if it's not convenient.

2009-09-04  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_surface/xl-surface.c
	(xl_xyz_series_init_style): avoid edition of unused styles,
	(xl_contour_plot_class_init), (xl_surface_plot_class_init):
	allow series insertion, and fix surface series style. [#594070, #594077]

2009-09-03  Jody Goldberg <jody@gnome.org>

	* goffice/Makefile.am : move win32 .def file from foocanvas to goc

2009-09-03  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-error-bar.c (gog_error_bar_prefs): fix a widget
	life cycle issue.

2009-09-03  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_surface/gog-surface.c (gog_surface_view_render): missing
	space.
	* plugins/plot_surface/xl-surface.c (xl_surface_plot_class_init): X values
	are not required, just suggested. [#593937]

2009-09-03  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-styled-object.c
	(go_styled_object_set_cairo_fill): return FALSE when type is FILL_NONE.

2009-09-03  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis-line.c (gog_axis_base_init_style): fixed some
	issues with auto styles.
	* goffice/graph/gog-axis.c (gog_axis_init_style): ditto.
	* goffice/graph/gog-equation.c (gog_equation_init_style): ditto.
	* goffice/graph/gog-graph.c (gog_graph_init): ditto.
	* goffice/graph/gog-grid.c (gog_grid_init_style): ditto.
	* goffice/graph/gog-label.c (gog_text_init_style): ditto.
	* goffice/graph/gog-legend.c (gog_legend_init_style): ditto.
	* goffice/graph/gog-plot.c (gog_plot_foreach_elem): ditto.
	* goffice/graph/gog-reg-curve.c (gog_reg_curve_init_style): ditto.
	* goffice/graph/gog-series-lines.c (gog_series_lines_init_style): ditto.
	* goffice/graph/gog-series.c (gog_series_element_init_style),
	(gog_series_init_style): ditto.
	* goffice/graph/gog-smoothed-curve.c
	(gog_smoothed_curve_init_style): ditto.
	* goffice/graph/gog-styled-object.c
	(gog_styled_object_parent_changed): ditto.
	* goffice/graph/gog-theme.c (gog_theme_fillin_style): ditto.
	* goffice/graph/gog-theme.h: ditto.
	* goffice/utils/go-style.c (go_style_apply_theme): ditto.
	* goffice/utils/go-style.h: ditto.
	* plugins/plot_barcol/gog-line.c
	(gog_line_series_element_init_style): ditto.
	* plugins/plot_distrib/gog-boxplot.c
	(gog_box_plot_series_class_init): ditto.
	* plugins/plot_pie/gog-pie.c (gog_pie_view_render): ditto.
	* plugins/plot_surface/gog-contour.c
	(gog_contour_plot_foreach_elem), (gog_contour_view_render): ditto.
	* plugins/plot_xy/gog-xy.c (gog_xy_view_render),
	(gog_xy_series_element_init_style): ditto.

2009-09-01  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/app/go-plugin-service-impl.h: renamed GPS to GO_PLUGIN_SERVICE
	* goffice/app/go-plugin-service.c: ditto.
	* goffice/component/go-component-factory.c: ditto.
	* goffice/graph/gog-plot-engine.c: ditto.

2009-09-01  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-color.h: prefixed all macros with GO_
	* all files: use renamed go-color.h macros.

2009-08-31  Morten Welinder <terra@gnome.org>

	* docs/reference/Makefile.am: Clean more stuff to force regens.

2009-08-31  Jean Brefort  <jean.brefort@normalesup.org>

	* all files: deprecate GOStyle::outline. [#593608]
	* goffice/canvas/goc-pixbuf.c (goc_pixbuf_draw): don't display a null sized
	pixbuf item.

2009-08-31  Morten Welinder <terra@gnome.org>

	* configure.in: Post-release bump.

2009-08-31  Morten Welinder <terra@gnome.org>

	* Release 0.7.11

2009-08-30  Morten Welinder  <terra@gnome.org>

	* goffice/canvas/goc-item.c (goc_item_new): Keep track of realize.

	* goffice/canvas/goc-group.c (goc_group_realize,
	goc_group_unrealize): Set the right ->realized.

2009-08-30  Morten Welinder <terra@gnome.org>

	* configure.in: Post-release bump.

2009-08-30  Morten Welinder <terra@gnome.org>

	* Release 0.7.10

2009-08-30  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-line.c (goc_line_update_bounds): take line cap
	into account when needed.
	* goffice/canvas/goc-pixbuf.c (goc_pixbuf_draw): fixed scaling.
	* goffice/utils/go-styled-object.c
	(go_styled_object_set_cairo_line): make dashes work.

2009-08-27  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-group.c (goc_group_realize),
	(goc_group_unrealize): don't unrealize an item several times.
	* goffice/canvas/goc-item.c (goc_item_finalize): ditto.
	* goffice/canvas/goc-item.h: ditto.

2009-08-26  Morten Welinder  <terra@gnome.org>

	* goffice/graph/Makefile.am: The ui file needs to be distributed
	regardless of configuration.
	* plugins/plot_distrib/Makefile.am (ui_DATA): Ditto.

2009-08-26  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-group.c (goc_group_finalize): don't crash when
	destroying a group.

2009-08-26  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/gtk/go-combo-box.c (go_combo_box_set_display): expand the
	 display widget.
	* goffice/gtk/go-format-sel.c (nfs_init): create missing combo box.

2009-08-26  Jean Brefort  <jean.brefort@normalesup.org>

	* all files: migrated from Glade to GtkBuilder

2009-08-25  Morten Welinder  <terra@gnome.org>

	* goffice/app/go-conf-win32.c (go_conf_win32_get_node): Guess what
	should happen when key==NULL.  Hopefully addresses #590786.

2009-08-25  Jean Brefort  <jean.brefort@normalesup.org>

	* configure.in: remove FooCanvas.
	* goffice/Makefile.am: ditto.
	* goffice/cut-n-paste/.gitignore: ditto.
	* goffice/cut-n-paste/Makefile.am: ditto.
	* goffice/cut-n-paste/foocanvas/.gitignore: ditto.
	* goffice/cut-n-paste/foocanvas/Makefile.am: ditto.
	* goffice/cut-n-paste/foocanvas/foo-canvas-i18n.h: ditto.
	* goffice/cut-n-paste/foocanvas/foo-canvas-line.c: ditto.
	* goffice/cut-n-paste/foocanvas/foo-canvas-line.h: ditto.
	* goffice/cut-n-paste/foocanvas/foo-canvas-marshal.list: ditto.
	* goffice/cut-n-paste/foocanvas/foo-canvas-pixbuf.c: ditto.
	* goffice/cut-n-paste/foocanvas/foo-canvas-pixbuf.h: ditto.
	* goffice/cut-n-paste/foocanvas/foo-canvas-polygon.c: ditto.
	* goffice/cut-n-paste/foocanvas/foo-canvas-polygon.h: ditto.
	* goffice/cut-n-paste/foocanvas/foo-canvas-rect-ellipse.c: ditto.
	* goffice/cut-n-paste/foocanvas/foo-canvas-rect-ellipse.h: ditto.
	* goffice/cut-n-paste/foocanvas/foo-canvas-text.c: ditto.
	* goffice/cut-n-paste/foocanvas/foo-canvas-text.h: ditto.
	* goffice/cut-n-paste/foocanvas/foo-canvas-util.c: ditto.
	* goffice/cut-n-paste/foocanvas/foo-canvas-util.h: ditto.
	* goffice/cut-n-paste/foocanvas/foo-canvas-widget.c: ditto.
	* goffice/cut-n-paste/foocanvas/foo-canvas-widget.h: ditto.
	* goffice/cut-n-paste/foocanvas/foo-canvas.c: ditto.
	* goffice/cut-n-paste/foocanvas/foo-canvas.h: ditto.
	* goffice/cut-n-paste/foocanvas/libfoocanvas.h: ditto.
	* goffice/cut-n-paste/foocanvas/libfoocanvastypes.c: ditto.
	* goffice/graph/Makefile.am: ditto.
	* goffice/graph/gog-control-foocanvas.c: ditto.
	* goffice/graph/gog-control-foocanvas.h: ditto.

2009-08-25  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-line.c: fixed arrows bounds.

2009-08-25  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-canvas.c: cleaned things.
	* goffice/canvas/goc-canvas.h: ditto.
	* goffice/canvas/goc-graph.c: ditto.
	* goffice/canvas/goc-group.c: ditto.
	* goffice/canvas/goc-line.c: implement arrow head.

2009-08-23  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-color.h (PIXEL_*): Kill unused macros.

2009-08-23  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/goc-canvas.c: add RTL support tothe canvas.
	* goffice/canvas/goc-canvas.h: ditto.
	* goffice/canvas/goc-ellipse.c: ditto.
	* goffice/canvas/goc-graph.c: ditto.
	* goffice/canvas/goc-group.c: ditto.
	* goffice/canvas/goc-line.c: ditto.
	* goffice/canvas/goc-line.h: ditto.
	* goffice/canvas/goc-pixbuf.c: ditto.
	* goffice/canvas/goc-polygon.c: ditto.
	* goffice/canvas/goc-polyline.c: ditto.
	* goffice/canvas/goc-rectangle.c: ditto.
	* goffice/canvas/goc-text.c: ditto.

2009-08-19  Jean Brefort  <jean.brefort@normalesup.org>

	* configure.in: test for gtk_layout_get_bin_window.
	* goffice/canvas/goc-canvas.c: define gtk_layout_get_bin_window if needed.
	* goffice/canvas/goc-line-impl.h: removed obsolete.
	* goffice/graph/gog-chart.c (role_plot_can_add): fix signature.

2009-08-19  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/Makefile.am: add gog-polyline.[c,h].
	* goffice/canvas/*.[c,h]: fixed various issues.
	* goffice/grph/gog-equation.c: make it compile with latest lasem code.

2009-08-15  Morten Welinder <terra@gnome.org>

	* configure.in: Post-release bump.

2009-08-15  Morten Welinder <terra@gnome.org>

	* Release 0.7.9

2009-08-12  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-chart.c (role_plot_can_add): do not allow several 3D plots an a
	single chart. (see #591478)

2009-08-11  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/canvas/*: removed *-impl.h files
	* goffice/goffice.h: changed include order.
	* goffice/gtk/go-3d-rotation-sel.c (cb_rotation_changed): removed unused variable.

2009-08-11  Jean Brefort  <jean.brefort@normalesup.org>

	* All: add and use a new cairo based canvas.

2009-08-07  Morten Welinder  <terra@gnome.org>

	* goffice/graph/gog-axis.c (map_log_calc_ticks): Improve minor
	ticks placement.

2009-08-06  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-string.c: Fix docs.

	* goffice/graph/gog-axis.c (map_linear_auto_bound): Avoid using an
	integer number of steps for pull-in-0 threshold.  Fixes #590903, I
	hope.

2009-08-04  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-series.c (gog_series_get_xy_data): fix tests.
	* plugins/plot_distrib/gog-probability-plot.c: implement comparison line
	for probability plots. [#590416]
	* plugins/plot_distrib/plugin.c (go_plugin_init): ditto.
	* plugins/plot_distrib/plugin.xml.in: ditto.

2009-08-02  Andreas J. Guelzow  <aguelzow@pyrshep.ca>

	* plugins/plot_distrib/plugin.xml.in: fix spelling

2009-07-24  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_surface/gog-contour.c (gog_contour_view_render): don't
	stop filling surface when one vertex is at a different level than the three
	others. [#589512]
	* plugins/plot_surface/gog-xyz-surface-prefs.glade: change tool tips to
	something more meaningful. [#589511]

2009-07-23  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_surface/plot-types.xml.in: fix #589512.
	* plugins/plot_surface/plugin.xml.in: ditto.

2009-07-18  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-marker.c: add a left half bar marker.
	* goffice/utils/go-marker.h: ditto.

2009-07-15  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Remove duplicated declaration.

	* goffice/graph/gog-axis-line.h: here. Already in gog-axis-line-impl.h.

2009-07-09  Morten Welinder  <terra@gnome.org>

	* goffice/app/go-conf-win32.c (go_conf_win32_get,
	go_conf_win32_set): Handle NULL key.

2009-07-01  Morten Welinder  <terra@gnome.org>

	* goffice/app/go-conf-gconf.c (go_conf_add_monitor): Don't use
	reserved identifier.
	(get_schema): Use go_conf_get_real_key to avoid problems with
	NULL.
	(cb_key_changed): Actually call the monitor with a node as
	advertised!

2009-06-30  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	More workaround for http://bugzilla.gnome.org/show_bug.cgi?id=585421

	* goffice/gtk/go-color-palette.c (make_colored_menu_item): here.
	* goffice/gtk/go-combo-pixmaps.c (go_menu_pixmaps_add_element): and here.

2009-06-30  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Fix wrong palette swatch sizes, due to bug introduced in gtk 2.16.
	(see http://bugzilla.gnome.org/show_bug.cgi?id=585421)

	* goffice/gtk/go-palette.c (go_palette_menu_item_new): here.

2009-06-28  Andreas J. Guelzow  <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_output_date_to_odf): when we
	  encounter a error in tokenizing, skip forward

2009-06-25  Andreas J. Guelzow  <aguelzow@pyrshep.ca>

	* goffice/utils/go-string.h (go_string_get_cstr): deleted
	* goffice/utils/go-string.c (go_string_get_len): new
	(go_string_get_markup): new
	(go_string_get_phonetic): new
	(go_string_equal_ignorecase): new
	(go_string_equal_rich): new

2009-06-25  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis-line.c (axis_line_render), (x_process),
	(xy_process), (radar_process), (xyz_process): set 3d ticks at the
	correct position. [#585298]
	* goffice/graph/gog-chart.c: reversed fix to #152675.
	* goffice/graph/gog-graph.c (gog_graph_class_init): ditto.

2009-06-24  Andreas J. Guelzow  <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c
	(go_format_output_scientific_number_element_to_odf): only add
	  gnm:engineering when asked to do so

2009-06-23  Andreas J. Guelzow  <aguelzow@pyrshep.ca>

	* utils/go-format.c (go_format_output_date_to_odf): be as explicit
	  as possible with respect to elapsed time and avoid it when we
	  are outputting a date-style.

2009-06-23  Andreas J. Guelzow  <aguelzow@pyrshep.ca>

	* utils/go-format.c (go_format_output_date_to_odf): also consider
	  elapsed seconds

2009-06-22  Andreas J. Guelzow  <aguelzow@pyrshep.ca>

	* utils/go-format.c (go_format_output_date_to_odf): handle elapsed
	  times better
	(go_format_output_number_to_odf): also handle currencies and accounting
	(go_format_output_currency_to_odf): deleted
	(go_format_output_to_odf): use go_format_output_number_to_odf for
	  currencies too

2009-06-22  Andreas J. Guelzow  <aguelzow@pyrshep.ca>

	* utils/go-format.c (go_format_output_date_to_odf): use family rather
	  than details, add color
	(go_format_output_fraction_to_odf): add color
	(go_format_output_number_to_odf): use unichar minus
	(go_format_output_scientific_number_to_odf): parse format string
	(go_format_output_to_odf): asked for details only when we need them

2009-06-21  Andreas J. Guelzow  <aguelzow@pyrshep.ca>

	* utils/go-format.c (go_format_output_date_to_odf): time and date styles
	  must contain a non-text element.

2009-06-21  Andreas J. Guelzow  <aguelzow@pyrshep.ca>

	* utils/go-format.c (go_format_output_number_to_odf): Don't use the details
	  but count the digits yourself. Change arguments.
	(go_format_output_number_element_to_odf): Change arguments
	(go_format_output_scientific_number_to_odf): ditto
	(go_format_output_general_to_odf): ditto
	(go_format_output_to_odf): adjust the calls to the above functions

2009-06-21  Andreas J. Guelzow  <aguelzow@pyrshep.ca>

	* utils/go-format.c (go_format_output_number_to_odf): add missed
	  argument to go_format_parse_color

2009-06-21  Andreas J. Guelzow  <aguelzow@pyrshep.ca>

	* utils/go-format.c (go_format_output_number_element_to_odf): new
	(go_format_output_number_to_odf): check the format string for colors
	  and string characters.
	(go_format_output_to_odf): consider the conditional formats if we can't
	  determine type otherwise.

2009-06-21  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-format-sel.c (fmt_dialog_enable_widgets): Warn if
	localization fails.

	* goffice/utils/go-format.c (go_format_parse_color): Add
	is_localized parameter and handle it.  Caller changed.  Fixes
	#586567.

2009-06-20  Morten Welinder <terra@gnome.org>

	* configure.in: Post-release bump.

2009-06-20  Morten Welinder <terra@gnome.org>

	* Release 0.7.8

2009-06-17  Andreas J. Guelzow  <aguelzow@pyrshep.ca>

	* utils/go-format.c (go_format_output_general_to_odf): we need to
	output something
	(go_format_output_to_odf): if we don't know what kind of format
	it is, make a guess

2009-06-14  Morten Welinder  <terra@gnome.org>

	* goffice/app/go-doc.c (go_doc_set_uri): Allow setting a NULL uri.

2009-06-13  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-equation.c: make things compile again after the
	goffice/goffice.h change.

2009-06-11  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (ALLOW_NEGATIVE_TIMES): Turn on.

2009-06-09  Morten Welinder  <terra@gnome.org>

	* */*.[ch]: Introduce <goffice/goffice.h> as master include file.

2009-06-03  Andreas J. Guelzow  <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_output_currency_to_odf):
	  account for the possibility of NULL currency

2009-06-02  Andreas J. Guelzow  <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_output_number_to_odf):
	  use min_digits from format details
	(go_format_output_scientific_number_to_odf): ditto
	(go_format_output_currency_to_odf): ditto

2009-06-02  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-format-sel.c (study_format): Deal with issues the
	GUI does not handle.

	* goffice/utils/go-format.c (go_format_get_details): Figure out
	min_digit_width too.  Figure out decimals for seconds.  Use
	go_format_details_init.
	(go_format_details_init): New function.
	(go_format_generate_currency_str,
	go_format_generate_accounting_str,
	go_format_generate_scientific_str): Make static and just take
	details.  All callers fixed use to go_format_generate_str.

2009-06-02  Andreas J. Guelzow  <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_output_number_to_odf): set
	  text properties for red text
	(go_format_output_currency_to_odf): ditto

2009-06-01  Andreas J. Guelzow  <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.h (go_format_output_to_odf): add argument
	* goffice/utils/go-format.c (go_format_output_to_odf): add argument
	  and pass to go_format_output_*_to_odf
	(go_format_output_*_to_odf): add argument determining whether to use
	  foreign elements

2009-06-01  Andreas J. Guelzow  <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_output_fraction_to_odf):
	  fix min-denominator-digits

2009-06-01  Andreas J. Guelzow  <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_output_fraction_to_odf):
	  indicate when number:text are again possible

2009-06-01  Andreas J. Guelzow  <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_output_date_to_odf):
	  mark elaspsed time with gnm: attribute

2009-05-31  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_format_inc_precision,
	go_format_dec_precision): Use go_format_get_details and
	go_format_generate_str.  That handles accounting formats and is
	less hacky.

2009-06-01  Andreas J. Guelzow  <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_output_date_to_odf):
	  mark elaspsed time with gnm: attribute

2009-05-31  Andreas J. Guelzow  <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_output_fraction_to_odf):
	  rewrite to export the true format

2009-05-31  Andreas J. Guelzow  <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_output_date_to_odf): store
	  magic and handle fractional seconds

2009-05-31  Andreas J. Guelzow  <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (fill_accumulator): delete
	(go_format_output_date_to_odf): rewrite without reference to the
	  style program

2009-05-30  Andreas J. Guelzow  <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.h: use a descriptive name for arguments
	* goffice/utils/go-format.c (go_format_odf_style_map): rename argument
	  and handle GO_FMT_COND_NONTEXT
	(go_format_output_date_to_odf): fix typo
	(go_format_output_number_to_odf): handle conditional format
	(go_format_output_currency_to_odf): ditto
	(go_format_output_to_odf): ditto

2009-05-30  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_format_generate_str): Handle
	thousands_sep as well as negative value properties for percentages
	too.

	* goffice/gtk/go-format-sel.c (fillin_negative_samples): Use
	smaller sample value for percentages.
	(cb_decimals_changed, cb_separator_toggle,
	cb_format_currency_select): Call fillin_negative_samples when we
	have the F_NEGATIVE widget.

2009-05-30  Andreas J. Guelzow  <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.h (go_format_odf_style_map): simplify
	  calling convention
	(gboolean go_format_output_to_odf): add argument
	* goffice/utils/go-format.c (go_format_odf_style_map): simplify
	  calling convention
	(gboolean go_format_output_to_odf): add argument

2009-05-30  Andreas J. Guelzow  <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_output_date_to_odf) use
	  GOFormatDetails
	(go_format_output_scientific_number_to_odf): ditto
	(go_format_output_number_to_odf): ditto
	(go_format_output_currency_to_odf): new
	(go_format_output_to_odf) use GOFormatDetails

2009-05-29  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_format_default_date_time): Make
	this GO_FORMAT_MAGIC_SHORT_DATETIME instead of just picking the
	fifth time format we happen to generate.
	(go_format_default_date, go_format_default_time): Similar.
	(go_format_magic_fmt_str): Fix GO_FORMAT_MAGIC_SHORT_DATETIME to
	use GO_FORMAT_MAGIC_SHORT_TIME's format.

2009-05-28  Andreas J. Guelzow  <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (cb_attrs_as_string): handle "scale"
	  attributes
	(go_format_parse_markup): ditto

2009-05-28  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-format-sel.c (struct _GOFormatSel): Use a
	GOFormatDetails instead of individual members.
	(generate_format): Eliminate in favour of go_format_generate_str.
	(study_format): Simplify using go_format_get_details.
	(find_symbol): Remove.

	* goffice/utils/go-format.c (go_format_generate_accounting_str):
	Improve quoting.
	(go_format_get_details, go_format_generate_str): New functions.

	* goffice/utils/formats.c (go_currency_date_format_init): Simplify
	using go_format_locale_currency, go_format_generate_currency_str,
	and go_format_generate_accounting_str.
	(go_currency_date_format_init): Generate all members of
	fmts_accounting.

	* goffice/utils/go-format.c (go_format_locale_currency): New
	function.

2009-05-27  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-format-sel.c (generate_number): Simplify using
	go_format_generate_number_str.
	(generate_accounting, generate_format): Use
	go_format_generate_number_str, go_format_generate_scientific_str,
	go_format_generate_accounting_str, and
	go_format_generate_currency_str.
	(fillin_negative_samples): Select using iterator, not path.
	(nfs_init): Split negative_type into negative_red and
	negative_paren in the negative-types model.

	* goffice/utils/go-format.c (go_format_generate_number_str,
	go_format_generate_scientific_str,
	go_format_generate_accounting_str,
	go_format_generate_currency_str): New functions.

2009-05-27  Andreas J. Guelzow  <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (fill_accumulator): new
	(go_format_output_date_to_odf): new
	(odf_add_bool): new
	(go_format_output_fraction_to_odf): new stub
	(go_format_output_scientific_number_to_odf): new stub
	(go_format_output_number_to_odf): new stub
	(go_format_output_to_odf): implement

2009-05-27  Jean Bréfort  <jean.brefort@normalesup.org>

	* goffice/gtk/goffice-gtk.c (go_gtk_builder_new): renamed for more
	consistency,
	(go_gtk_builder_signal_connect),
	(go_gtk_builder_signal_connect_swapped): new functions.
	* goffice/gtk/goffice-gtk.h: ditto.
	* plugins/plot_radar/gog-radar.c
	(gog_color_polar_plot_populate_editor): use go_gtk_builder_new.

2009-05-26  Andreas J. Guelzow  <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_odf_style_map): new
	(go_format_output_to_odf): new
	* goffice/utils/go-format.h (go_format_odf_style_map): new
	(go_format_output_to_odf): new

2009-05-23  Morten Welinder <terra@gnome.org>

	* Release 0.7.7

2009-05-23  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/gtk/go-graph-widget.c (go_graph_widget_get_renderer): new
	utility function.
	* goffice/gtk/go-graph-widget.h: ditto.

2009-05-22  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-calendar-button.c: New file.

	* goffice/gtk/go-combo-box.c (cb_state_change,
	go_combo_box_set_display, go_combo_box_construct): Handle NULL
	display_widget.

	* goffice/gtk/Makefile.am: Add go-calendar-button.c

2009-05-21  Morten Welinder  <terra@gnome.org>

	* goffice/graph/gog-axis.c (map_time_get_dim_format): New
	functions.  Use an elapsed-time format for all dimensions.
	(map_date_get_dim_format): New function.  Use a date format for
	minimum and maximum only.
	(map_linear_subclass): Hook up map_time_get_dim_format and
	map_date_get_dim_format.
	(struct _GogAxisMapDesc): Add new get_dim_format method.
	(set_to_auto_value): Use new gog_data_editor_set_value_double.
	(make_dim_editor): Use format on editor.

	* goffice/graph/gog-data-allocator.h (GogDataEditor): new
	interface for the editor returned by
	GogDataAllocatorClass::editor.
	(GogDataAllocatorClass): use GogDataEditor* as return type for
	editor.
	(gog_data_allocator_editor): Ditto.  All caller changed.

2009-05-19  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_format_ref, go_format_unref):
	Constify.

	* goffice/gtk/go-format-sel.c (go_format_sel_get_fmt,
	go_format_sel_set_style_format): Constify.

2009-05-18  Morten Welinder  <terra@gnome.org>

	* goffice/data/go-data-impl.h (GODataClass): New member date_conv.
	* goffice/data/go-data.c (go_data_date_conv): New function.
	* plugins/plot_*/*.c: track date conventions from data as formats.

2009-05-16  Morten Welinder  <terra@gnome.org>

	* goffice/data/go-data-simple.c (go_data_vector_val_serialize,
	go_data_vector_str_serialize, go_data_matrix_val_serialize):
	Simplify.

	* goffice/gtk/go-format-sel.c (go_format_sel_set_style_format):
	Don't accept markup formats.

2009-05-11  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Bump lasem version requirement to 0.1.1. Adapt to the API change.

	* configure.in: here.
	* goffice/graph/gog-equation.c: use lsm_dom_view_get_size instead of
	lsm_dom_view_measure.

2009-05-11  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-series.c (gog_series_class_init): always save
	interpolation mode. [#582054]

2009-05-11  Morten Welinder  <terra@gnome.org>

	* goffice/app/go-doc.c (go_doc_set_pristine): New function.
	(go_doc_get_property, go_doc_set_property, go_doc_class_init):
	Make "pristine" an object property.

2009-05-07  Andreas J. Guelzow  <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (cb_attrs_as_string): store the full
	  pango-weight. We apply a linear adjustment so that earlier
	  versions that read an int see the correct 0 for normal and
	  1 for bold and we will read old files correctly.
	(go_format_parse_markup): read the full pango-weight

2009-05-07  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/goffice-gtk.c (go_gtk_url_is_writeable): Avoid a
	warning and further reports like #580409.

2009-05-06  Morten Welinder  <mwelinder@gmail.com>

	* configure.in: Post-release bump.

2009-05-06  Morten Welinder <terra@gnome.org>

	* Release 0.7.6

2009-05-04  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (handle_common_token): Dump currency
	string into the program as a string, not a sequence of characters.
	Fixes #581307.
	(go_format_dump_program): New function.

2009-05-02  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-styled-object.c (gog_style_new): have it back to fix
	some compatibility issues.
	* goffice/graph/gog-styled-object.h: ditto.

2009-04-29  Morten Welinder  <terra@gnome.org>

	* goffice/graph/gog-object-xml.h (gog_object_new_from_xml,
	gog_object_sax_push_parser): Add user pointer argument for
	serialization.  All callers changed.

	* goffice/data/go-data.c (go_data_serialize): Rename from
	go_data_as_str.  Add user pointer argument.  All callers changed.
	(go_data_unserialize): Rename from go_data_from_str.  Add user
	pointer argument.  All callers changed.

2009-04-28  Morten Welinder  <terra@gnome.org>

	* goffice/graph/gog-axis.c (map_log_calc_ticks): Handle
	non-integer major steps.  Fixes #375756.

2009-04-27  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/app/go-conf-*: use go_conf_node_get_key_type which looks
	ways better than go_conf_get_node_type.

2009-04-26  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/app/go-conf-gconf.c: renamed go_conf_get_type
	go_conf_get_node_type to avoid a build failure during docs generation.
	[#580296]
	* goffice/app/go-conf-keyfile.c: ditto.
	* goffice/app/go-conf-win32.c: ditto.
	* goffice/app/go-conf.h: ditto.

2009-04-26  Jean Brefort  <jean.brefort@normalesup.org>

	* configure.in: Post release bump.

2009-04-25  Morten Welinder <terra@gnome.org>

	* Release 0.7.5

2009-04-23  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Enable the creation of multidimensional GOData derived objects, and
	their use for the graph data sources.

	That means, in graphs, all the GOData area accessed via the generic
	GOData API, not by cast to GODataScalar, GODataVector and GODataMatrix.
	It's still required that the underlying object has the requested dimension,
	i.e. a call to go_data_get_vector_value should use a GOData object with
	n_dimensions == 1.

2009-04-17  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/goffice-gtk.c (go_libglade_new): Actually remove
	this alias as threatened.  All internal users fixed.

	* */*.c: Doc fixes to please gtk-doc.

	* goffice/graph/gog-axis.c (map_date_auto_bound): Fix problem with
	upper bound when step is in years and maximum in not on January 1.

2009-04-17  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_radar/Makefile.am: add the glade fil to EXTRA_DIST since
	it is used as a source for the xml file.

2009-04-17  Morten Welinder  <terra@gnome.org>

	* goffice/utils/formats.c (fmts_date, fmts_time): Auto-generate
	all.  Add magic formats.  Note, that the dialog does, but should
	not, display the magic formats literally.

2009-04-15  Morten Welinder  <terra@gnome.org>

	* goffice/graph/gog-error-bar.c: Add missing include.

2009-04-11  Jean Brefort  <jean.brefort@normalesup.org>

	* Makefile.am: add --with-gmathml to DISTCHECK_CONFIGURE_FLAGS so
	that gtk-doc succeeds.
	* docs/reference/goffice-docs.sgml: moved style related documentation
	to utilities.
	* docs/reference/goffice-sections.txt: update names.
	* plugins/plot_radar/Makefile.am: add ui_DATA to EXTRA_DIST.

2009-04-10  Jean Brefort  <jean.brefort@normalesup.org>

	* All files: moved GogStyle code to utils and renamed it GOStyle.

2009-04-06  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Naming consistency fix.

	/\bGo([A-Z])/GO$1/
	/\bIS_GO_/GO_IS_/
	/\bIS_GOG_/GOG_IS_/
	/\bIS_GOD_/GOD_IS_/
	/\bGO_([A-Z,_]*)_TYPE\b/GO_TYPE_$1/
	/\bGOG_([A-Z,_]*)_TYPE\b/GOG_TYPE_$1/
	/\bGOD_([A-Z,_]*)_TYPE\b/GOD_TYPE_$1/

2009-04-03  Morten Welinder  <terra@gnome.org>

	* goffice/graph/gog-axis.c (map_linear_calc_ticks): Take N...  We
	got hit by excess precision on x86.

2009-04-02  Jody Goldberg <jody@gnome.org>

	* goffice/app/file.c (go_file_saver_for_mime_type) : search the
	  default list first.
	(go_file_saver_for_file_name) : ditto.

2009-03-31  Morten Welinder  <terra@gnome.org>

	* goffice/graph/gog-axis.c (map_linear_calc_ticks): When we
	determine whether to drop a major tick due to alignment, use a
	more stable method.

2009-03-31  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_barcol/gog-line.c: (gog_line_view_render): fix area
	plots rendering.

2009-03-30  Morten Welinder  <terra@gnome.org>

	* goffice/graph/gog-axis.c (map_linear_calc_ticks): Drop final
	major tick if it goes beyond the maximum which can happen after we
	align the grid.

2009-03-29  Morten Welinder  <terra@gnome.org>

	* goffice/graph/gog-axis.c (map_linear_calc_ticks): Make sure the
	major step is a multiple of what was asked for, notably when a
	crazy maximum has been picked.

2009-03-28  Morten Welinder  <terra@gnome.org>

	* goffice/graph/gog-axis.c (make_dim_editor): Simplify.
	(map_linear_calc_ticks): Make sure we get zero and not almost-zero
	when we need to.

2009-03-27  Morten Welinder  <terra@gnome.org>

	* goffice/graph/gog-axis.c: Introduce subclassing of axis map
	descriptors.
	(map_date_calc_ticks, map_date_auto_bound): New functions.
	(map_linear_subclass): Subclass polar, time, and date axes.

2009-03-27  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-plot.c: (gog_plot_guru_helper_add_grid_line): fixed
	axis type test.
	* goffice/gtk/goffice-gtk.c: (go_xml_builder_new): new GtkBuilder
	support function.
	* goffice/gtk/goffice-gtk.h: ditto.
	* pixmaps/Makefile.am: added new pixmaps.
	* pixmaps/chart_color_polar_1_1.png: new pixmap.
	* pixmaps/chart_color_polar_1_1.svg: ditto.
	* plugins/plot_radar/Makefile.am: added ui file.
	* plugins/plot_radar/gog-color-polar-prefs.glade: new glade file.
	* plugins/plot_radar/gog-color-polar-prefs.xml: the same as a ui file.
	* plugins/plot_radar/gog-radar.c: (hide_outliers_toggled_cb),
	(gog_color_polar_plot_populate_editor),
	(gog_color_polar_plot_set_property),
	(gog_color_polar_plot_get_property),
	(gog_color_polar_plot_type_name), (gog_color_polar_plot_update),
	(gog_color_polar_plot_axis_get_bounds),
	(gog_color_polar_plot_class_init), (gog_color_polar_plot_init),
	(get_map_color), (gog_rt_view_render),
	(gog_color_polar_series_init_style),
	(gog_color_polar_series_update),
	(gog_color_polar_series_class_init), (go_plugin_init): add support for
	the new GogColorPolarPlot plot type.
	* plugins/plot_radar/gog-radar.h: ditto.
	* plugins/plot_radar/plot-types.xml.in: ditto.
	* plugins/plot_radar/plugin.xml.in: ditto.
	* plugins/plot_xy/gog-xy.c: (gog_xy_color_plot_populate_editor): fixed a
	memory leak.

2009-03-27  Jean Brefort  <jean.brefort@normalesup.org>

	* configure.in: Fixed gconf and gmathml propagation to pc file. [#576497]

2009-03-25  Morten Welinder  <terra@gnome.org>

	* goffice/graph/gog-axis.c (map_polar_auto_bound): Split from
	map_linear_auto_bound.
	(map_time_auto_bound): New function.
	(map_linear_auto_bound): Call map_polar_auto_bound or
	map_time_auto_bound as appropriate.

	* goffice/utils/go-format.c (go_format_is_time,
	go_format_has_minute): New functions.

2009-03-22  Morten Welinder  <terra@gnome.org>

	* configure.in: Post release bump

2009-03-22  Morten Welinder <terra@gnome.org>

	* Release 0.7.4

2009-03-20  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-locale.c (go_locale_get_time_format,
	go_locale_get_date_format): Make more robust.

2009-03-19  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_format_magic_fmt_str): Use
	go_locale_24h.

	* goffice/utils/go-locale.c (go_locale_24h): New function.

2009-03-18  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-format-sel.c (fmt_dialog_init_fmt_list): Select a
	magic format if just the magic agrees.

	* goffice/utils/go-format.c (go_format_get_magic): New function.

2009-03-17  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-format-sel.c (cb_format_entry_changed): Handle
	failing go_format_str_delocalize.

	* goffice/utils/go-format.c (go_format_str_localize,
	go_format_str_delocalize): Redo based on go_format_preparse.  This
	way we understand the formats better and don't translate the dots
	in, for example, "dd.mm.yyyy".
	(go_format_preparse): Take extra argument for keeping all tokens
	and for tokenizing localized.  Caller changed.
	(GOFormatParseState): Add extra fields for colours.
	(go_format_preparse): Populated those fields.
	(go_format_token2): Add extra parameter for tokenizing localized.
	Return decimal and thousands separator as special tokens.  All
	callers changed.

2009-03-15  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_format_default_accounting): New
	function.

2009-03-14  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-style.c: (gog_style_sax_load_font): set
	a default family when none is given. [#575318]

2009-03-12  Morten Welinder  <terra@gnome.org>

	* configure.in (surfaces_reqs): Move cairo backends here, so we
	don't link against them.

2009-03-06  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-renderer.c: (_draw_rectangle): revert previous
	change.
	* plugins/plot_barcol/gog-dropbar.c: (barcol_draw_rect): ensure that
	the width and height are positive.

2009-03-06  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-renderer.c: (_draw_rectangle): correctly evaluate
	the narrow flag when the rectangle has a negative width or height.

2009-03-06  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_barcol/gog-barcol.c: (gog_barcol_view_render): correctly
	use points other than the first one. [#574349]
	* plugins/plot_distrib/gog-histogram.c: don't show a marker in the
	legend. [#574340]
	* plugins/plot_pie/gog-pie.c: (gog_pie_view_render): skip points when
	the datum is skipped. [#574348]

2009-03-05  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/gtk/goffice-gtk.c: new go_gtk_show_url function. [#559021]
	* goffice/gtk/goffice-gtk.h: ditto.

2009-02-26  Morten Welinder  <terra@gnome.org>

	* goffice/cut-n-paste/foocanvas/foo-canvas-pixbuf.c (foo_canvas_pixbuf_update):
	If the resulting size is 0 pixels, don't try to scale the pixbuf.
	Avoids critical on image insert in Gnumeric.

2009-02-22  Morten Welinder <terra@gnome.org>

	* configure.in: Post release bump

2009-02-22  Morten Welinder <terra@gnome.org>

	* Release 0.7.3

2009-02-22  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-chart-map.c: (polar_make_path): return a NULL path
	for cubic splines interpolation (should not happen).
	* goffice/graph/gog-series.c: (gog_series_populate_editor): fix radial
	axis test when populating interpolation combo box. [#572698]
	* plugins/plot_radar/gog-radar.c: (gog_rt_view_render): avoid criticals
	when a path is NULL (anyway this should not happen).

2009-02-19  Morten Welinder  <terra@gnome.org>

	* docs/reference/Makefile.am (IGNORE_HFILES): Ignore gog-equation
	unless with are compiling it.  See bug 572483.

2009-02-19  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_barcol/gog-1.5d.c: (gog_plot1_5d_update): don't set
	a value to an invalid length variable. [#572354]

2009-02-06  Tor Lillqvist  <tml@iki.fi>

	Bug 570095 - [Win32] Make goffice build without urlmon and
	htmlhelp headers and libs

	Unfortunately, MinGW doesn't come with headers and libraries for
	urlmon and htmlhelp. So to make it easier to build goffice with
	MinGW, just include the very minimal declarations needed inline,
	and look up the two functions used at run-time.

	* goffice/utils/go-file.c (find_mime_from_data): Look up
	FindMimeFromData from urlmon.dll.

	* goffice/gtk/goffice-gtk.c (html_help): Look up HtmlHelp from
	hhctrl.ocx.

	* goffice/Makefile.am: Drop -lurlmon and -lhtmlhelp.

2009-01-24  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-series.c: (gog_series_populate_editor): fixed a
	wrong test. [#568932]

2009-01-16  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-guru.c: (graph_typeselect_minor): return if the
	item is the sample graph. [#567931]

2009-01-11  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/goffice-gtk.c (go_gtk_url_is_writeable): Undo
	incorrect fix for "goffice-gtk.c:925: warning: format not a string
	literal and no format arguments".  For now, let gcc issue the
	false warning.

2008-01-07  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/graph/gog-equation.c (gog_equation_update): don't crash when
	on equation string == "{".

2009-01-06  Morten Welinder  <terra@gnome.org>

	* goffice/goffice.c (libgoffice_init): Call g_type_init early as
	go_conf_init might need it.

2008-01-06  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/graph/gog-equation.c (gog_equation_populate_editor):
	remember last active preference page.

2008-12-31  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-guru-type-selector.glade: implement the insertion
	of an application specific custom widget.
	* goffice/graph/gog-guru.c: (graph_guru_type_selector_new),
	(gog_guru_add_custom_widget): ditto.
	* goffice/graph/gog-guru.h: ditto.
	* goffice/graph/gog-plot-impl.h: remove series minimum number.
	* goffice/graph/gog-plot.c: (gog_plot_class_init),
	(gog_plot_clear_series): ditto.
	* goffice/graph/gog-plot.h: ditto.
	* plugins/plot_barcol/gog-1.5d.c: (gog_plot1_5d_class_init): ditto.
	* plugins/plot_distrib/gog-boxplot.c: (gog_box_plot_class_init): ditto.
	* plugins/plot_distrib/gog-histogram.c: ditto.
	(gog_histogram_plot_class_init):
	* plugins/plot_distrib/gog-probability-plot.c: ditto.
	(gog_probability_plot_class_init):
	* plugins/plot_pie/gog-pie.c: (gog_pie_plot_class_init),
	(gog_ring_plot_class_init): ditto.
	* plugins/plot_radar/gog-radar.c: (gog_rt_plot_class_init): ditto.
	* plugins/plot_surface/gog-xyz.c: (gog_xyz_plot_class_init): ditto.
	* plugins/plot_xy/gog-xy.c: (gog_2d_plot_class_init): ditto.

2008-12-30  Morten Welinder  <terra@gnome.org>

	* configure.in (set_more_warnings): Add -Wformat-security.

2008-12-24  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-file.c (is_fd_uri): Allow terminating slash.

2008-12-24  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Avoid a warning when equation->itex string is NULL.

	* goffice/graph/gog-equation.c (gog_equation_populate_editor): here.

2008-12-15  Morten Welinder  <terra@gnome.org>

	* goffice/utils/datetime.c (datetime_serial_to_g): Simply return
	1900-02-29 as an invalid date.  Callers now handle it.

2008-12-14  Morten Welinder  <terra@gnome.org>

	* */*.c: Clean up glib includes.  Patch from Pedro Fragoso.  Fixes
	#564021.

2008-12-13  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Don't access mathml root element style field directly. That fixes
	the font sizes of the equation.

	* goffice/graph/gog-equation.c (_update_equation_style): here.

2008-12-13  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Avoid a crash when the equation expression is empty.

	* goffice/graph/gog-equation.c (_update_equation_style): here.

2008-12-13  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Avoid non-zero page size warnings in all glade files.

2008-12-13  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Actually use the parent styled_object properties.

	* goffice/graph/gog-equation.c (_update_equation_style): new.
	(gog_equation_style_changed): new.
	(gog_equation_init_style): we don't need text_layout properties.
	(gog_equation_view_size_request): propagates to the parent
	size_request method.
	(gog_equation_view_render): propagates to the parent render method.

2008-12-13  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Define the theme properties for the GogEquation objects.

	* goffice/graph/gog-theme.c: here.

2008-12-13  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Move the style-changed emission after the style have been applied to
	the styled object. Makes the new style availabe to the signal
	callbacks.

	* goffice/graph/gog-styled-object.c (gog_styled_object_set_style):
	here.

2008-12-12  Pedro Fragoso  <ember@ubuntu.com>

	* goffice/app/goffice-app.h:
	* goffice/app/io-context.c:
	* goffice/component/go-component.h:
	* goffice/cut-n-paste/foocanvas/foo-canvas.h:
	* goffice/drawing/god-drawing-renderer-cairo.c:
	* goffice/drawing/god-drawing-renderer-gdk.h:
	* goffice/drawing/god-drawing-view.h:
	* goffice/graph/gog-axis-line.c:
	* goffice/graph/gog-axis.c:
	* goffice/graph/gog-chart.c:
	* goffice/graph/gog-child-button.c:
	* goffice/graph/gog-child-button.h:
	* goffice/graph/gog-error-bar.c:
	* goffice/graph/gog-graph.c:
	* goffice/graph/gog-grid.c:
	* goffice/graph/gog-guru.c:
	* goffice/graph/gog-guru.h:
	* goffice/graph/gog-label.c:
	* goffice/graph/gog-object.c:
	* goffice/graph/gog-plot.c:
	* goffice/graph/gog-reg-curve.c:
	* goffice/graph/gog-renderer.h:
	* goffice/graph/gog-series.c:
	* goffice/graph/gog-series.h:
	* goffice/graph/gog-style.c:
	* goffice/gtk/go-3d-rotation-sel.c:
	* goffice/gtk/go-3d-rotation-sel.h:
	* goffice/gtk/go-action-combo-color.c:
	* goffice/gtk/go-action-combo-pixmaps.c:
	* goffice/gtk/go-action-combo-stack.c:
	* goffice/gtk/go-action-combo-text.c:
	* goffice/gtk/go-charmap-sel.c:
	* goffice/gtk/go-charmap-sel.h:
	* goffice/gtk/go-color-palette.c:
	* goffice/gtk/go-color-palette.h:
	* goffice/gtk/go-color-selector.c:
	* goffice/gtk/go-color-selector.h:
	* goffice/gtk/go-combo-box.c:
	* goffice/gtk/go-combo-box.h:
	* goffice/gtk/go-combo-color.c:
	* goffice/gtk/go-combo-color.h:
	* goffice/gtk/go-combo-pixmaps.c:
	* goffice/gtk/go-combo-pixmaps.h:
	* goffice/gtk/go-combo-text.c:
	* goffice/gtk/go-combo-text.h:
	* goffice/gtk/go-font-sel.c:
	* goffice/gtk/go-font-sel.h:
	* goffice/gtk/go-format-sel.c:
	* goffice/gtk/go-format-sel.h:
	* goffice/gtk/go-gradient-selector.h:
	* goffice/gtk/go-graph-widget.c:
	* goffice/gtk/go-graph-widget.h:
	* goffice/gtk/go-image-sel.c:
	* goffice/gtk/go-image-sel.h:
	* goffice/gtk/go-line-selector.h:
	* goffice/gtk/go-locale-sel.c:
	* goffice/gtk/go-locale-sel.h:
	* goffice/gtk/go-marker-selector.h:
	* goffice/gtk/go-palette.c:
	* goffice/gtk/go-palette.h:
	* goffice/gtk/go-pattern-selector.h:
	* goffice/gtk/go-pixbuf.h:
	* goffice/gtk/go-rotation-sel.c:
	* goffice/gtk/go-rotation-sel.h:
	* goffice/gtk/go-selector.c:
	* goffice/gtk/go-selector.h:
	* goffice/gtk/goffice-gtk.h:
	* goffice/math/go-cspline.c:
	* goffice/math/go-math.h:
	* goffice/math/go-matrix3x3.h:
	* goffice/math/go-rangefunc.c:
	* goffice/math/go-rangefunc.h:
	* goffice/math/go-regression.c:
	* goffice/math/go-regression.h:
	* goffice/ms-compat/go-ms-parser.c:
	* goffice/ms-compat/god-drawing-ms.c:
	* goffice/utils/go-color.c:
	* goffice/utils/go-color.h:
	* plugins/plot_barcol/gog-1.5d.c:
	* plugins/plot_barcol/gog-barcol-prefs.c:
	* plugins/plot_distrib/gog-boxplot.c:
	* plugins/plot_pie/gog-pie-prefs.c:
	* plugins/plot_radar/gog-radar.c:
	* plugins/reg_linear/gog-polynom-reg.c:
	GNOME Goal: Clean up GLib and GTK+ includes (Closes: #564021)

2008-12-11  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Use a GtkTextView for the equation expression.

	* goffice/graph/gog-equation-prefs.glade: use a GtkTextView.
	* goffice/graph/gog-equation.c (cb_equation_buffer_changed): replaces
	cb_equation_entry_changed.
	(gog_equation_populate_editor): use a GtkTextView.
	(gog_equation_update): try to fix the user entered expression in order
	to have a valid mathml tree.

2008-12-08  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-combo-box.c (go_combo_box_realize): Set cursor in
	a realize handler, not at init time.

	* goffice/utils/go-format.c (go_format_parse_number_E): Handle
	E-00 as well as E+00.

2008-12-07  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Add an optional dependency to GMathml, for equation support. It's
	disabled by default.

	* configure.in: gmathml check.
	* goffice/goffice.c: Declare GogEquationType.
	* goffice/graph/Makefile.am: Conditionally build gog-equation.[ch]
	* goffice/graph/gog-equation.[ch]: new.
	* goffice/graph/gog-equation-prefs.c: new.
	* goffice/graph/gog-chart.c: add GogEquation to the possible chart
	children.
	* goffice/graph/gog-renderer.c (gog_renderer_draw_equation): new.

2008-11-29  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/goffice-graph.h: make GogAxisBase public, at least a bit.
	* goffice/graph/gog-axis-line-impl.h: ditto.
	* goffice/graph/gog-axis-line.c: ditto.
	* goffice/graph/gog-axis-line.h: ditto.
	* plugins/plot_barcol/gog-line.c: make drop lines go to the axis instead
	of bottom (or left when horizontal).
	* plugins/plot_xy/gog-xy.c: ditto.

2008-11-24  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis.c: add support for clamped splines.
	* goffice/graph/gog-axis.h: ditto.
	* goffice/graph/gog-chart-map.c: ditto.
	* goffice/graph/gog-chart-map.h: ditto.
	* goffice/graph/gog-series-impl.h: ditto.
	* goffice/graph/gog-series-prefs.glade: ditto.
	* goffice/graph/gog-series.c: ditto.
	* goffice/graph/gog-series.h: ditto.
	* goffice/utils/go-line.c: ditto.
	* goffice/utils/go-line.h: ditto.
	* plugins/plot_xy/gog-xy.c: ditto.
	* plugins/plot_xy/gog-xy.h: ditto.

2008-11-20  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-file.c (go_get_file_permissions): Fix memory
	corruption.  Probably fixes #561708.

2008-11-16  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/math/go-spline.c: removed unnecessary casts.
	* goffice/math/go-distribution.c: removed unused gtk dependent function.
	* goffice/math/go-distribution.h: ditto.
	* plugins/plot_distrib/gog-probability-plot.c: fixed compilation without
	gtk.

2008-11-11  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/math/go-cspline.c: (go_cspline_init): don't use cast with
	g_new.
	* goffice/utils/go-bezier.c: (go_bezier_spline_init): create a struct,
	not a pointer to a struct, and don't cast.

2008-11-11  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-chart.c: set title priority to 0. [#152675]
	* goffice/graph/gog-graph.c: (gog_graph_class_init): ditto.

2008-11-11  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-chart-map.c: (make_path_linear),
	(make_path_spline), (make_path_cspline), (xy_make_path_step),
	(xy_make_path), (polar_make_path_step), (polar_make_path),
	(gog_chart_map_make_path): add new spline interpolation modes.
	* goffice/graph/gog-chart-map.h: ditto.
	* goffice/graph/gog-reg-curve.c: (gog_reg_curve_view_render): use
	natural cubic splines instead of Bezier splines.
	* goffice/graph/gog-series-impl.h: allow interpolation over invalid
	data.
	* goffice/graph/gog-series-prefs.glade: add new spline interpolation
	modes and allow interpolation over invalid data.
	* goffice/graph/gog-series.c: (gog_series_set_property),
	(gog_series_get_property), (cb_line_interpolation_changed),
	(cb_line_interpolation_skip_changed), (gog_series_populate_editor),
	(gog_series_class_init): ditto.
	* goffice/graph/gog-smoothed-curve.c:
	(gog_smoothed_curve_view_render): update after gog_chart_map_make_path
	signature change.
	* goffice/utils/Makefile.am: add bezier splines evaluation.
	* goffice/utils/go-line.c: (go_line_interpolation_as_label),
	(go_line_interpolation_supports_radial),
	(go_line_interpolation_auto_skip): add new spline interpolation modes.
	* goffice/utils/go-line.h: ditto.
	* plugins/plot_radar/gog-radar.c: (gog_rt_view_render): update after
	gog_chart_map_make_path signature change.
	* plugins/plot_xy/gog-xy.c: (gog_xy_view_render): add new spline
	interpolation modes.
	* plugins/plot_xy/gog-xy.h: ditto.

2008-11-10  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/math/go-cspline.c: (go_cspline_init): fixed evaluation for
	cubic and clamped limits.

2008-11-10  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-graph.c: (gog_graph_set_property): fixed typo.

2008-11-10  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-bezier.c: new code for bezier splines.
	* goffice/utils/go-bezier.h: ditto.

2008-11-07  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_distrib/go-distribution-prefs.c:
	(go_distribution_pref_new): fixed a memory leak.

2008-11-07  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-chart-map.c: (make_path_spline): use true splines.

2008-11-01  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-file.c: (go_url_show): removed duplicated GError*.

2008-11-01  Jean Brefort  <jean.brefort@normalesup.org>

	* configure.in: drop the libgnome related code. [#558709]
	* goffice/goffice-features.h.in: ditto.
	* goffice/gtk/goffice-gtk.c: (go_help_display): ditto.
	* goffice/utils/go-file.c: (go_url_show): ditto.

2008-11-01  Jean Brefort  <jean.brefort@normalesup.org>

	* configure.in: add GOFFICE_WITH_GCONF and use gtk_show_uri when present.
	[#558709]
	* goffice/app/go-conf.c: ditto.
	* goffice/goffice-features.h.in: ditto.
	* goffice/gtk/goffice-gtk.c: (go_help_display): ditto.
	* goffice/utils/go-file.c: (go_url_show): ditto,
	(go_get_mime_type): simplify.

2008-10-31  Jean Brefort  <jean.brefort@normalesup.org>

	* pixmaps/Makefile.am: add new icon for GogXYZContourPlot.
	* pixmaps/chart_contour_2_1.png: new icon.
	* pixmaps/chart_contour_2_1.svg: ditto.
	* plugins/plot_surface/gog-contour.c: fixed various regressions.
	* plugins/plot_surface/gog-xyz-surface.c: add GogXYZContourPlot.
	* plugins/plot_surface/gog-xyz-surface.h: ditto.
	* plugins/plot_surface/gog-xyz.c: ditto.
	* plugins/plot_surface/plot-types.xml.in: ditto.

2008-10-25  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-action-combo-color.c (go_action_combo_color_finalize):
	Plug leak.

	* configure.in (long double): Add --without-long-double option.
	Fixes #557045.  Patch by Halton Huo.

	* goffice/gtk/go-combo-box.c (go_combo_box_popup_hide_unconditional):
	Fix some very strange ref-unrefing.

2008-10-24  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-combo-text.c (go_combo_text_init): Plug leak.

	* goffice/gtk/go-color-palette.c (go_color_palette_set_group):
	Balance references.

2008-10-24  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_surface/xl-surface.c: (get_y_vector): add labels if none
	is given,
	(xl_contour_plot_class_init): use GOG_SERIES_SUGGESTED for categories.

2008-10-24  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_surface/gog-xyz.c: (gog_xyz_plot_axis_get_bounds):
	make things work when there is no data for an axis.

2008-10-23  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-action-combo-color.c
	(go_action_combo_color_create_tool_item): Plug leak.

2008-10-22  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/math/go-cspline.c: (go_cspline_destroy): return without freeing
	if the argument is NULL. [#557442]

2008-10-18  Jody Goldberg <jody@gnome.org>

	* configure.in : post release bump

2008-10-17  Jody Goldberg <jody@gnome.org>

	* Release 0.7.2

2008-10-17  Jody Goldberg <jody@gnome.org>

	* goffice/math/go-distribution.c : minor build fix for win32.
	    *
2008-10-14  Jody Goldberg <jody@gnome.org>

	* /gnome/src/goffice/goffice/app/go-doc.c (go_doc_write) : only
	  generate a GODoc node if there is something to put in.

2008-10-14  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/math/go-distribution.c: fixed compilation for both with
	and without long double.

2008-10-14  Jody Goldberg <jody@gnome.org>

	* goffice/graph/gog-style.c (gog_style_fill_sax_save) : add some
	  protection.
	* goffice/utils/go-image.c (go_image_get_name) : add some protection.

2008-10-14  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-file.c: (go_get_mime_type): do not unref a
	NULL GObject*.

2008-10-10  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_surface/gog-contour.c: (gog_contour_view_render): do
	not try to access NULL data. [#555757]
	* plugins/plot_surface/gog-surface.c: (gog_surface_view_render): ditto.

2008-10-06  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_distrib/gog-probability-plot.c:
	(gog_probability_plot_series_update): don't write a second in
	an array of size 1. [#555161]

2008-10-08  Jody Goldberg <jody@gnome.org>

	* goffice/cut-n-paste/foocanvas/foo-canvas.c (foo_canvas_crossing) :
	  simplistic patch to repair gtk-2.14 related breakage.

2008-09-25  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-error-bar.c: (gog_error_bar_get_bounds):
	don't crash in index < 0.
	* plugins/plot_barcol/gog-line.c: (gog_line_view_render): fix index
	for error bars. [#553711]

2008-09-14  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-graph.c: (gog_graph_set_property): [Coverity 187]
	* goffice/graph/gog-grid-line.c: (gog_grid_line_xy_render): [Coverity 52]
	* goffice/graph/gog-guru.c: (populate_graph_item_list): [Coverity 20]
	* goffice/graph/gog-renderer.c: (gog_renderer_export_image): [Coverity 40]
	* goffice/gtk/go-format-sel.c: (fmt_dialog_enable_widgets): [Coverity 18]
	* goffice/gtk/go-image-sel.c: (ok_button_clicked_cb): [Coverity 19]
	* goffice/utils/datetime.c: (datetime_weeknum): [Coverity 27]
	* goffice/utils/go-pattern.c: (go_pattern_get_svg_path): [Coverity 17]

2008-09-14  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/gtk/go-image-sel.c: (cb_file_image_select): don't test
	before g_free.
	* goffice/gtk/goffice-gtk.c: (go_help_display): applied patch
	from Hib Eris to fix a crash in non-gnome apps using goffice
	with gnome. [#551128]
	* goffice/utils/go-file.c: (go_file_get_date): don't free the error twice.

2008-09-13  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/app/go-doc.c: (load_image): check attr != NULL before
	deferencing [Coverity 196].
	* goffice/graph/gog-axis-line.c:
	(gog_axis_base_view_label_position_request): initialize padding
	[Coverity 242].
	* goffice/graph/gog-legend.c: (cb_render_elements): add a test to
	hopefully fix Coverity 199.
	* goffice/graph/gog-object.c: (gog_object_dup): add a test to
	hopefully fix Coverity 72.
	* goffice/graph/gog-plot.c: (gog_plot_populate_editor): add missing
	labels [Coverity 154].
	* goffice/gtk/goffice-gtk.c: (go_gui_get_image_save_info): add a test
	to hopefully fix Coverity 71.
	* goffice/math/go-R.c: fix file name in license.
	* goffice/math/go-R.h: ditto.
	* goffice/math/go-distribution.c: ditto.
	* goffice/utils/go-pattern.c: (go_pattern_get_svg_path): don't check
	in an unsigned number is positive [Coverity 134].
	* goffice/utils/go-undo.c: (go_undo_group_undo): [Coverity 188].
	* plugins/plot_distrib/gog-boxplot.c: fix file name in license.
	* plugins/plot_distrib/gog-boxplot.h: ditto.
	* plugins/plot_distrib/gog-probability-plot.c:
	(gog_probability_plot_class_init): fix the comment for the second
	shapr property.
	* plugins/plot_radar/gog-radar.c: (gog_rt_view_render): add a few
	parenthesis in the hope to fix Coverity 73.
	* plugins/plot_surface/gog-xyz-surface.c:
	(gog_xyz_surface_plot_build_matrix): removed an invalid test [Coverity 135].

2008-09-13  Jean Brefort  <jean.brefort@normalesup.org>

	* configure.in: renamed plot_boxes to plot_distrib.
	* plugins/Makefile.am: ditto.
	* plugins/plot_boxes/.gitignore: ditto.
	* plugins/plot_boxes/Makefile.am: ditto.
	* plugins/plot_boxes/go-distribution-prefs.c: ditto.
	* plugins/plot_boxes/go-distribution-prefs.h: ditto.
	* plugins/plot_boxes/gog-boxplot-prefs.glade: ditto.
	* plugins/plot_boxes/gog-boxplot.c: ditto.
	* plugins/plot_boxes/gog-boxplot.h: ditto.
	* plugins/plot_boxes/gog-histogram.c: ditto.
	* plugins/plot_boxes/gog-histogram.h: ditto.
	* plugins/plot_boxes/gog-probability-plot.c: ditto.
	* plugins/plot_boxes/gog-probability-plot.h: ditto.
	* plugins/plot_boxes/plot-types.xml.in: ditto.
	* plugins/plot_boxes/plugin.xml.in: ditto.
	* plugins/plot_distrib/go-distribution-prefs.c: fixed a warning.
	* plugins/plot_distrib/gog-boxplot.c: fixed a warning.
	* plugins/plot_distrib/gog-probability-plot.c: fixed a warning.
	* plugins/plot_distrib/plugin.c: added missing file.

2008-09-12  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/goffice.c: (libgoffice_init): init distributions.
	* goffice/math/Makefile.am: support distributions.
	* goffice/math/go-R.c: ditto.
	* goffice/math/go-R.h: ditto.
	* goffice/math/go-distribution.c: ditto.
	* goffice/math/go-distribution.h: ditto.
	* goffice/math/go-rangefunc.c: renamed range_sort to go_range_sort
	and make it public.
	* goffice/math/go-rangefunc.h: ditto.
	* pixmaps/Makefile.am: add new pixmaps.
	* pixmaps/chart_prob_1_1.svg: implement probablility plots. [#500168]
	* plugins/plot_boxes/Makefile.am: ditto (and renamed the plugin).
	* plugins/plot_boxes/go-distribution-prefs.c: ditto.
	* plugins/plot_boxes/go-distribution-prefs.h: ditto.
	* plugins/plot_boxes/gog-boxplot.c: moved some code to plugin.c.
	* plugins/plot_boxes/gog-probability-plot.c: implement probablility plots.
	* plugins/plot_boxes/gog-probability-plot.h: ditto.
	* plugins/plot_boxes/plot-types.xml.in: ditto.
	* plugins/plot_boxes/plugin.xml.in: ditto.

2008-09-12  Jean Brefort  <jean.brefort@normalesup.org>

	* pixmaps/dist.xpm: new pixmap for the distribution related plot
	family.

2008-09-11  Jody Goldberg <jody@gnome.org>

	* goffice/app/go-doc.c (load_image) : Check for missing "name"
	  attribute not no attributes at all. [Coverity 196]

2008-09-04  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-file.c (go_url_resolve_relative): Fix
	references to wrong URI.  Fixes #550898.

2008-08-30  Jody Goldberg <jody@gnome.org>

	* configure.in : Post release bump

2008-08-29  Jody Goldberg <jody@gnome.org>

	* Release 0.7.1

2008-08-28  Gustavo Noronha Silva  <gns@gnome.org>

	* configure.in: fix libgsf-1 requirements, since the gio headers
	are now required
	* README: document the changes in libgsf-1 requirements and update
	all the other requirements

2008-08-27  Jean Brefort  <jean.brefort@normalesup.org>

	* configure.in: add gio-2.0 to requirements.
	* libgoffice.pc.in: ditto.

2008-08-27  Jean Brefort  <jean.brefort@normalesup.org>

	* configure.in: do not request libgsf-gnome anymore.
	* goffice/utils/go-file.c: Use gio from glib. [#522458]
	* goffice/utils/go-file.h: ditto.

2008-08-27  Jean Brefort  <jean.brefort@normalesup.org>
	* libgoffice.pc.in: removed libart there too.

2008-08-27  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis.c: (map_log_to_view): update a comment.
	* goffice/gtk/go-line-selector.c: removed obsolete libart header.

2008-08-27  Jean Brefort  <jean.brefort@normalesup.org>

	* configure.in: do not request libart anymore.
	* goffice/graph/gog-renderer.c: removed ArtVpath and ArtBpath related
	deprecated API.
	* goffice/graph/gog-renderer.h: ditto.
	* plugins/plot_surface/gog-contour.c: (gog_contour_view_render): use
	GOPath instead of ArtVpath.

2008-08-26  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-series-lines.h: do not include libart.h.
	* plugins/plot_barcol/gog-barcol.c: (barcol_draw_rect): fixed snap.
	* plugins/plot_boxes/gog-boxplot.c: (gog_box_plot_view_render):
	use GOPath instead of ArtVpath.
	* plugins/plot_boxes/gog-histogram.c:
	(gog_histogram_plot_init): draw before the axis.
	(gog_histogram_plot_view_render): use GOPath instead of ArtVpath.

2008-08-25  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_format_preparse): In some
	circumstances, an empty format is like "General".  Fixes #549249.
	Prepare for negative date values, but do not activate.  [#509720]

2008-08-24  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_barcol/gog-barcol.c: (barcol_draw_rect): use GOPath
	instead of ArtVpath.
	* plugins/plot_barcol/gog-line.c: (gog_line_view_render): ditto.

2008-08-23  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-error-bar.c: (gog_error_bar_init),
	(gog_error_bar_render): use GOPath instead of ArtVpath.
	* goffice/graph/gog-legend.c: (cb_render_elements),
	(gog_legend_view_render): ditto.

2008-08-22  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-color.c: removed obsolete libart related code.
	* goffice/utils/go-color.h: ditto.
	* goffice/utils/go-gradient.c: ditto.
	* goffice/utils/go-gradient.h: ditto.

2008-08-22  Halton Huo <halton.huo@sun.com>

	Fix bug #547408: Add go-demo for testing more charts
	* tests/Makefile.am: Add go-demo.c and go-demo.glade fro go-demo
	* tests/go-demo.c: (added)
	* tests/go-demo.glade: (added)

2008-08-21  Jean Brefort  <jean.brefort@normalesup.org>

	* all files: renamed GOG_PARAM_PERSISTENT to GO_PARAM_PERSISTENT and
	GogPersist to GOPersist.

2008-08-19  Mariusz Adamski  <mariusz.adamski@gmail.com>

	* goffice/graph/gog-3d-box.c: (gog_3d_box_populate_editor):	made Euler
	angles sliders "keyboard friendly".
	* goffice/graph/gog-grid-line.c: (gog_grid_line_xyz_render):fixed
	inappropriate drawing of grid stripes.
	* goffice/gtk/go-3d-rotation-sel.c: (g3d_init):	made Euler angles
	sliders "keyboard friendly".

2008-08-11  Mariusz Adamski  <mariusz.adamski@gmail.com>

	* pixmaps/Makefile.am: add new pixmaps for surface plots.
	* pixmaps/chart_surface_2_2.png: ditto.
	* pixmaps/chart_surface_2_2.svg: ditto.
	* plugins/plot_surface/Makefile.am: add surface plots based on xyz data
	averaged on a grid.
	* plugins/plot_surface/gog-surface.c: ditto.
	* plugins/plot_surface/gog-xyz-surface-prefs.c:
	* plugins/plot_surface/gog-xyz-surface-prefs.glade:
	* plugins/plot_surface/gog-xyz-surface.c: ditto.
	* plugins/plot_surface/gog-xyz-surface.h: ditto.
	* plugins/plot_surface/gog-xyz.c: ditto.
	* plugins/plot_surface/gog-xyz.h: ditto.
	* plugins/plot_surface/plot-types.xml.in: ditto.
	* plugins/plot_surface/plugin.xml.in: ditto.

2008-08-08  Jean Brefort  <jean.brefort@normalesup.org>

	* docs/reference/Makefile.am: add API version to DOC_MODULE. [#522096]

2008-08-06  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_barcol/gog-line.c: (gog_line_view_render): removed some
	stupid unused code (probably a copy/paste incident).

2008-01-05  J.H.M. Dassen (Ray) <jdassen@debian.org>

	* goffice/graph/gog-styled-object.c: Include <string.h> for strlen and
	<goffice/app/go-doc.h> for go_doc_add_image.

2008-08-03  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis-line.c: (gog_axis_base_class_init): fixed
	"pos" property maximum.

2008-08-03  Jean Brefort  <jean.brefort@normalesup.org>

	* configure.in: add a test for g_hash_table_iter_init.
	* goffice/app/go-doc-impl.h: serialize images in charts. [#348780]
	* goffice/app/go-doc.c: ditto.
	* goffice/app/go-doc.h: ditto.
	* goffice/graph/gog-chart-impl.h: removed unused 3d params.
	* goffice/graph/gog-graph.c: serialize images in charts.
	* goffice/graph/gog-object.c: ditto.
	* goffice/graph/gog-object.h:ditto.
	* goffice/graph/gog-style.c: ditto.
	* goffice/graph/gog-styled-object.c: ditto.
	* goffice/utils/go-image.c: ditto.
	* goffice/utils/go-image.h: ditto.

2008-08-03  Jean Brefort  <jean.brefort@normalesup.org>

	* configure.in:
	* goffice/app/go-doc-impl.h:
	* goffice/app/go-doc.c: (go_doc_add_image), (go_doc_init_write),
	(go_doc_init_read), (save_image_cb), (go_doc_write),
	(go_doc_save_image), (load_image), (load_image_data),
	(go_doc_read), (go_doc_end_read), (go_doc_image_fetch):
	* goffice/app/go-doc.h:
	* goffice/graph/gog-chart-impl.h:
	* goffice/graph/gog-graph.c: (gog_graph_set_property):
	* goffice/graph/gog-object.c: (gog_object_document_changed):
	* goffice/graph/gog-object.h:
	* goffice/graph/gog-style.c: (gog_style_fill_sax_save),
	(gog_style_sax_load_fill_image), (gog_style_persist_prep_sax),
	(gog_style_create_cairo_pattern):
	* goffice/graph/gog-styled-object.c:
	(gog_styled_object_document_changed),
	(gog_styled_object_class_init):
	* goffice/utils/go-image.c: (go_image_get_thumbnail),
	(go_image_same_pixbuf), (go_image_save), (go_image_load_attrs),
	(go_image_load_data):
	* goffice/utils/go-image.h:

2008-08-03  Jean Brefort  <jean.brefort@normalesup.org>

	* pixmaps/Makefile.am: create a new contour plots family.
	* pixmaps/contour.xpm: ditto.
	* plugins/plot_surface/plot-types.xml.in: ditto.

2008-08-03  Mariusz Adamski  <mariusz.adamski@gmail.com>

	* goffice/graph/gog-axis.c: (gog_axis_view_padding_request_3d),
	(gog_axis_view_padding_request), (gog_axis_view_size_allocate_3d):
	a more consistent auto angle for 3D axis labels.
	* goffice/graph/gog-style.c: (gog_style_text_layout_sax_save): don't
	save the label angle when it is automatic.

2008-07-31  Mariusz Adamski  <mariusz.adamski@gmail.com>

	* goffice/graph/gog-axis-line-impl.h: add 3d axis labels positioning.
	* goffice/graph/gog-axis-line.c:  ditto.
	* goffice/graph/gog-axis.c: ditto.
	* goffice/graph/gog-label.c: ditto.

2008-07-27  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_format_get_family): If a number
	format has both a date and a time part, it's a date format.  Fixes
	#545016.

2008-07-26  Mariusz Adamski  <mariusz.adamski@gmail.com>

	* goffice/graph/gog-chart.c: (xy_grid_3d_can_add),
	(yz_grid_3d_can_add), (zx_grid_3d_can_add), (grid_3d_post_add),
	(xy_grid_3d_post_add), (yz_grid_3d_post_add),
	(zx_grid_3d_post_add), (axis_can_add): implement 3d backplanes.
	* goffice/graph/gog-grid.c: (gog_grid_get_gtype),
	(gog_grid_set_gtype), (gog_grid_set_property),
	(gog_grid_get_property), (gog_grid_class_init), (gog_grid_init),
	(gog_grid_view_xyz_render), (gog_grid_view_render): ditto.
	* goffice/graph/gog-grid.h: ditto.

2008-07-23  Mariusz Adamski  <mariusz.adamski@gmail.com>

	* goffice/graph/gog-axis.c: implemented axes grigs for 3d plots.
	* goffice/graph/gog-chart.c: ditto.
	* goffice/graph/gog-grid-line.c: ditto.

2008-07-21  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-style.c: (gog_style_font_sax_save): use
	gsf_xml_out_add_cstr instead of gsf_xml_out_add_cstr_unchecked.
	[#543986]

2008-07-19  Mariusz Adamski  <mariusz.adamski@gmail.com>

	* goffice/graph/gog-axis-line.c: (xyz_process): fix a padding issue.
	* goffice/graph/gog-chart.c: (gog_chart_view_3d_process),
	(gog_chart_view_size_allocate): implemented padding for 3d axes.

2008-07-14  Jody Goldberg <jody@gnome.org>

	* goffice/graph/gog-plot.c (gog_plot_enum_in_reverse) : new.
	(gog_plot_foreach_elem) : Legends are the only things that use this,
	  add a hook to allow a plot to decide what order to walk the list of
	  series. [#540719]

	* plugins/plot_barcol/gog-1.5d.c (gog_1_5d_enum_in_reverse) : stacked
	  and percentage plots prefer to list the series in reverse order.

2008-07-14  Mariusz Adamski  <mariusz.adamski@gmail.com>

	* goffice/graph/gog-3d-box.c: display3D axes and limit FoV to 90.
	* goffice/graph/gog-axis-line.c: ditto.
	* goffice/graph/gog-chart-map-3d.c: ditto.
	* goffice/graph/gog-chart-map-3d.h: ditto.
	* goffice/gtk/go-3d-rotation-sel.glade: ditto.
	* plugins/plot_surface/gog-xyz.c: ditto.

2008-07-13  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-plot-engine.c:
	(gog_plot_type_service_finalize),
	(gog_trend_line_service_finalize),
	(gog_trend_line_service_class_init): fix memory leaks. [#542506]

2008-07-12  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/component/go-component-factory.c:
	(go_component_type_service_read_xml): fix a memory leak.
	* goffice/graph/gog-chart-map-3d.c: (xyz_map_3D_to_view):
	fix projection code for non nul FoV.
	* goffice/graph/gog-chart.c: (gog_chart_3d_process): ditto.

2008-07-08  Jody Goldberg <jody@gnome.org>

	* plugins/plot_surface/plugin.xml.in : rename to match the naming
	  convention.
	* plugins/smoothing/plugin.xml.in : ditto.

2008-07-08  Mariusz Adamski  <mariusz.adamski@gmail.com>

	* goffice/graph/gog-3d-box-prefs.glade: fixed limits.
	* goffice/graph/gog-3d-box.c: (gog_3d_box_class_init): fixed maximums
	for all properties.
	* goffice/gtk/go-3d-rotation-sel.glade: fixed limits.

2008-07-08  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-3d-box.c: (gog_3d_box_class_init): add 0.000001
	to max fov value to avoid rouding errors.
	* plugins/plot_surface/gog-surface.c: fixed gog_surface_view_render
	for some border cases with large fov value (might also allow the use
	of cylindrical or spherical coordinates).

2008-07-07  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Fix keyboard activation of the add menu in the graph guru.

	* goffice/graph/gog-child-button.c (gog_child_button_init): connect to
	toggled signal.
	(ensure_menu): new, to be shared by toggled in button-press signal
	handlers.
	(gog_child_button_toggled_cb): new.
	(gog_child_button_press_event_cb): new.

2008-07-07  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_surface/gog-surface.c: (gog_surface_view_render): fixed a
	rendering order (not sure it still works in all cases).

2008-07-07  Mariusz Adamski  <mariusz.adamski@gmail.com>

	* goffice/graph/Makefile.am: add new glade file.
	* goffice/graph/gog-3d-box-prefs.glade: new glade file for setting
	the 3d view.
	* goffice/graph/gog-3d-box.c: ditto and make the settings persistant.
	* goffice/gtk/Makefile.am: new 3d related widget
	* goffice/gtk/go-3d-rotation-sel.c: ditto.
	* goffice/gtk/go-3d-rotation-sel.glade: ditto.
	* goffice/gtk/go-3d-rotation-sel.h: ditto.

2008-07-07  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/Makefile.am:
	* goffice/graph/gog-3d-box.c: (cb_g3d_update), (cb_matrix_changed),
	(cb_fov_changed), (cb_box_psi_changed), (cb_box_theta_changed),
	(cb_box_phi_changed), (cb_g3d_change_psi), (cb_g3d_change_theta),
	(cb_g3d_change_phi), (gog_3d_box_populate_editor),
	(gog_3d_box_set_property), (gog_3d_box_get_property),
	(gog_3d_box_class_init), (gog_3d_box_init):
	* goffice/gtk/Makefile.am:
	* plugins/plot_surface/gog-surface.c: (gog_surface_view_render):

2008-06-30  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-math.c (go_math_init): Check for buggy
	valgrind (finitel problem) and limp on.

2008-06-25  Morten Welinder  <terra@gnome.org>

	* goffice/utils/datetime.c (datetime_serial_to_timet): Check for
	valid date.

2008-06-25  Halton Huo <halton.huo@sun.com>

	* configure.in: adapt suncc not installed under /opt/SUNWspro,
	fixes #539930

2008-06-25  Jody Goldberg <jody@gnome.org>

	* configure.in : post release bump

2008-06-25  Jody Goldberg <jody@gnome.org>

	* Release 0.7.0

2008-06-24  Morten Welinder  <terra@gnome.org>

	* goffice/math/go-rangefunc.c (go_range_median_inter_sorted): New
	function.

2008-06-23  Morten Welinder  <terra@gnome.org>

	* goffice/app/go-doc.c (go_doc_add_image): Rewrite to avoid
	GHashTableIter.

2008-06-22  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/app/go-doc-control-impl.h: add a GODoc member.
	* goffice/app/go-doc-control.c: (go_doc_control_get_doc),
	(go_doc_control_set_doc): ditto.
	* goffice/app/go-doc-control.h: ditto.
	* goffice/app/go-doc-impl.h: ad an images hash table.
	* goffice/app/go-doc.c: (go_doc_finalize), (go_doc_choose_image),
	(go_doc_get_image), (go_doc_add_image), (go_doc_get_images):
	* goffice/app/go-doc.h: ditto.
	* goffice/graph/gog-graph-impl.h: ad a GODoc member.
	* goffice/graph/gog-graph.c: (gog_graph_set_property),
	(gog_graph_get_property), (gog_graph_class_init), (gog_graph_dup): ditto.
	* goffice/graph/gog-guru.c: (gog_guru): ditto.
	* goffice/graph/gog-style.c: (cb_image_select), (fill_image_init),
	(fill_init), (marker_init), (gog_style_pref_state_free),
	(gog_style_populate_editor), (gog_style_assign): remove image filename
	after pushing images to the GODoc level, and don't show the Style page
	when empty.
	* goffice/graph/gog-style.h: ditto.
	* goffice/gtk/Makefile.am: add an image selector.
	* goffice/gtk/go-image-sel.c: ditto.
	* goffice/gtk/go-image-sel.h: ditto.
	* goffice/gtk/go-image-sel.glade: ditto.
	* goffice/utils/go-image.c: (go_mime_to_image_format),
	(go_image_format_to_mime), (go_image_set_property),
	(go_image_finalize), (go_image_get_thumbnail), (go_image_set_name),
	(go_image_get_name), (go_image_same_pixbuf): add support for images in
	GODoc.
	* goffice/utils/go-image.h: ditto.
	* plugins/plot_xy/gog-xy.c: (gog_xy_series_element_init_style): add
	the MARKER_NO_COLOR flag for colored XY plots.

2008-06-21  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_barcol/gog-1.5d.c: add singleton formatting support to
	line plots.
	* plugins/plot_barcol/gog-barcol.c: ditto.
	* plugins/plot_barcol/gog-line.c: ditto.

2008-06-21  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_barcol/gog-1.5d.c: add singleton formatting support to
	bars/columns plots. [#517488]
	* plugins/plot_barcol/gog-barcol.c: ditto.
	* plugins/plot_barcol/gog-barcol.h: ditto.

2008-06-21  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/math/go-matrix3x3.c:
	(go_matrix3x3_from_euler_transposed), (go_matrix3x3_to_euler),
	(go_matrix3x3_multiply): add missing functions.
	* goffice/math/go-matrix3x3.h: ditto.

2008-06-20  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-style.c: (gog_style_create_cairo_pattern): fixed
	gradients coordinates.
	* goffice/gtk/go-gradient-selector.c:
	(go_gradient_swatch_render_func): ditto.
	* plugins/plot_xy/gog-xy.c: (gog_xy_view_render),
	(gog_xy_series_element_init_style),
	(gog_xy_series_element_class_init), (gog_xy_series_class_init),
	(go_plugin_init): add singleton support to scatter plots.

2008-06-18  Jody Goldberg <jody@gnome.org>

	* plugins/plot_xy/gog-xy.c (MAX_RADIUS_RATIO) : tweak to match the
	  wallenbach mouse example.
	(gog_bubble_plot_class_init) : increase the bubble-scale limit to 300%
	* plugins/plot_xy/gog-bubble-prefs.glade : ditto.

2008-06-17  Jody Goldberg <jody@gnome.org>

	* goffice/graph/gog-renderer.c (gog_renderer_draw_text) : Use the same
	  size handling as get_text_OBR. [#442773]

2008-06-13  Rob Staudinger <robert.staudinger@gmail.com>

	* goffice/gtk/go-color-palette.c (make_colored_menu_item): Use plain
	menu items for toolbar overflow image menu item proxies, so they are
	displayed correctly with gtk-menu-images=0, fixes #537541.
	* goffice/gtk/go-combo-pixmaps.c (go_menu_pixmaps_add_element): ditto.

2008-06-03  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-marker.c: (go_marker_render): set dashes to NULL,
	fixes #536276.

2008-05-30  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-renderer.c: (_draw_circle),
	(gog_renderer_draw_circle), (gog_renderer_stroke_circle),
	(gog_renderer_fill_circle): new utilities.
	* goffice/graph/gog-renderer.h: ditto.
	* pixmaps/Makefile.am: add new pixmaps for box-plots
	excluding outliers.
	* plugins/plot_boxes/gog-boxplot-prefs.glade: add new properties.
	* plugins/plot_boxes/gog-boxplot.c: (cb_outliers_changed),
	(cb_ratio_changed), (gog_box_plot_pref),
	(gog_box_plot_set_property), (gog_box_plot_get_property),
	(gog_box_plot_class_init), (gog_box_plot_init),
	(gog_box_plot_view_render), (gog_box_plot_series_update),
	(gog_box_plot_series_finalize), (gog_box_plot_series_class_init):
	ditto, fixes #534642.
	* plugins/plot_boxes/plot-types.xml.in: new boxplots sub-types.
	* plugins/plot_xy/gog-xy.c: (gog_xy_view_render): use
	gog_renderer_draw_circle for bubbles.

2008-05-24  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-plot-engine.c: fixed services (de)activation.
	* goffice/graph/gog-plot-engine.h: ditto.

2008-05-12  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/goffice.c: (libgoffice_init): call go_conf_init,
	(libgoffice_shutdown): call go_conf_shutdown.

2008-05-12  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/data/go-data.c: (go_data_vector_increasing),
	(go_data_vector_decreasing), (go_data_vector_vary_uniformly):
	new functions.
	* goffice/data/go-data.h: ditto.
	* goffice/goffice.c: (libgoffice_init): add initial 3d plots support.
	* goffice/graph/Makefile.am: ditto.
	* goffice/graph/goffice-graph.h: ditto.
	* goffice/graph/gog-3d-box.c: (gog_3d_box_class_init),
	(gog_3d_box_init): ditto.
	* goffice/graph/gog-3d-box.h: ditto.
	* goffice/graph/gog-axis-line.c: (xyz_process),
	(gog_axis_base_view_point), (gog_axis_base_view_padding_request):
	* goffice/graph/gog-axis.c: (gog_axis_view_size_allocate): ditto.
	* goffice/graph/gog-chart-impl.h: ditto.
	* goffice/graph/gog-chart-map-3d.c: (null_map_3D),
	(xyz_map_3D_to_view), (gog_chart_map_3d_new),
	(gog_chart_map_3d_to_view), (gog_chart_map_3d_is_valid),
	(gog_chart_map_3d_free): ditto.
	* goffice/graph/gog-chart-map-3d.h: ditto.
	* goffice/graph/gog-chart.c: (role_3d_box_can_add),
	(role_3d_box_can_remove), (gog_chart_is_3d),
	(gog_chart_3d_process), (gog_chart_view_size_allocate),
	(gog_chart_view_render): ditto.
	* goffice/graph/gog-chart.h: ditto.
	* goffice/math/Makefile.am: ditto.
	* goffice/math/go-matrix3x3.c: (go_matrix3x3_transform),
	(go_matrix3x3_from_euler): ditto.
	* goffice/math/go-matrix3x3.h: ditto.
	* goffice/math/go-rangefunc.c: (go_range_decreasing),
	(go_range_vary_uniformly): new functions.
	* goffice/math/go-rangefunc.h: ditto.
	* plugins/plot_surface/Makefile.am: new surface plot type.
	* plugins/plot_surface/gog-contour-prefs.c: ditto.
	* plugins/plot_surface/gog-contour-prefs.glade: ditto.
	* plugins/plot_surface/gog-contour.c: ditto.
	(gog_contour_plot_build_matrix), (gog_contour_plot_type_name),
	(gog_contour_plot_foreach_elem), (gog_contour_plot_class_init),
	(gog_contour_plot_init), (gog_contour_view_render),
	(gog_contour_view_class_init): ditto.
	* plugins/plot_surface/gog-contour.h: ditto.
	* plugins/plot_surface/gog-surface.c: ditto.
	(gog_surface_plot_build_matrix), (gog_surface_plot_type_name),
	(gog_surface_plot_class_init), (gog_surface_plot_init),
	(gog_surface_view_render), (gog_surface_view_class_init):
	* plugins/plot_surface/gog-surface.h:
	* plugins/plot_surface/gog-xyz-prefs.c:
	* plugins/plot_surface/gog-xyz-prefs.glade:
	* plugins/plot_surface/gog-xyz.c: (gog_xyz_plot_build_matrix),
	(gog_xyz_plot_update_3d), (gog_xyz_plot_populate_editor),
	(gog_xyz_plot_clear_formats), (gog_xyz_plot_update),
	(gog_xyz_plot_axis_get_bounds), (gog_xyz_plot_finalize),
	(gog_xyz_plot_set_property), (gog_xyz_plot_get_property),
	(gog_xyz_plot_class_init), (gog_xyz_plot_init),
	(gog_xyz_series_update), (gog_xyz_series_init_style),
	(gog_xyz_series_class_init), (go_plugin_init),
	(go_plugin_shutdown): ditto.
	* plugins/plot_surface/gog-xyz.h: ditto.
	* plugins/plot_surface/plot-types.xml.in: ditto.
	* plugins/plot_surface/plugin.xml.in: ditto.
	* plugins/plot_surface/xl-surface.c: (xl_labels_init),
	(xl_xyz_series_update), (xl_xyz_series_init_style),
	(xl_xyz_series_class_init), (xl_xyz_plot_update), (get_y_vector),
	(xl_xyz_plot_axis_get_bounds), (xl_contour_plot_build_matrix),
	(xl_contour_plot_finalize), (xl_contour_plot_class_init),
	(xl_surface_plot_build_matrix), (xl_surface_plot_finalize),
	(xl_surface_plot_class_init): ditto.
	* plugins/plot_surface/xl-surface.h: ditto.

2008-05-12  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-series-lines.c: use GOPath instead of ArtVpath.
	* goffice/graph/gog-series-lines.h: ditto.
	* plugins/plot_barcol/gog-barcol.c: (gog_barcol_view_render):
	* plugins/plot_barcol/gog-dropbar.c: (barcol_draw_rect),
	(gog_dropbar_view_render): ditto.
	* plugins/plot_barcol/gog-line.c: (gog_line_view_render): ditto.
	* plugins/plot_barcol/gog-minmax.c: (path_move_to),
	(path_curve_to), (path_close_path), (gog_minmax_view_render): ditto.

2008-05-12  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/app/Makefile.am:
	* goffice/app/go-conf-gconf.c: copied from gnumeric.
	* goffice/app/go-conf-keyfile.c: ditto.
	* goffice/app/go-conf-win32.c: ditto.
	* goffice/app/go-conf.c: ditto.
	* goffice/app/go-conf.h: ditto.
	* goffice/component/go-component.h: add missing header.

2008-05-11  Jody Goldberg <jody@gnome.org>

	* configure.in : branch 0.7.0

2008-05-11  Jody Goldberg <jody@gnome.org>

	* Release 0.6.4

2008-05-09  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/goffice.c: (libgoffice_init), (libgoffice_shutdown):
	fixed typo.

2008-05-08  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/data/go-data-simple.c: (go_data_matrix_val_get_value),
	(go_data_matrix_val_get_str): do not crash if called before the
	values are loaded. Patch from Hiroyuki Ikezoe, see bug #532105.

2008-05-04  Jody Goldberg <jody@gnome.org>

	* configure.in : post release bump

2008-05-04  Jody Goldberg <jody@gnome.org>

	* Release 0.6.3

2008-05-02  Jody Goldberg <jody@gnome.org>

	* goffice/utils/go-locale.c (go_locale_win32_get_user_default) : fix
	  typo on win32 that always set lc_date_format, and never
	  lc_time_format.
	(go_locale_get_time_format): ditto.

2008-04-30  Morten Welinder  <terra@gnome.org>

	* */*.[ch]: Make things compile --without-gtk.  Docs still do not
	work right.

2008-04-27  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-series.c: (gog_series_dataset_set_dim):
	fixed typo.

2008-04-25  Morten Welinder  <terra@gnome.org>

	* goffice/utils/regutf8.c (go_regexec): New glib (i.e., non-pcre)
	implementation when glib has the right functions.  Patch from
	Hiroyuki Ikezoe, see bug #482319.

2008-04-25  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-series.c: (gog_series_dataset_set_dim): check
	dim_i validity.

2008-04-24  Jean Brefort  <jean.brefort@normalesup.org>

	* libgoffice.pc.in: fixed the plugins dir definition so tht it can
	be used.

2008-04-22  Jody Goldberg <jody@gnome.org>

	* goffice/utils/go-image.c (image_format_infos) : add "eps" to go with
	  jean's work.

	* goffice/graph/gog-object.h : remove inclusion of libart header here.
	  It is no longer needed.

2008-04-21  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/goffice-gtk.c (go_gtk_editable_enters): Avoid
	infinite recursion if default widget is not sensitive.

2008-04-18  Jean Brefort  <jean.brefort@normalesup.org>

	* configure.in: add a test for cairo_ps_surface_set_eps.
	* goffice/graph/gog-graph.c:
	(gog_graph_get_supported_image_formats): add EPS if cairo supports it.
	* goffice/graph/gog-renderer.c: (gog_renderer_export_image): ditto.
	* goffice/utils/go-image.h: ditto.

2008-04-16  Jody Goldberg <jody@gnome.org>

	* configure.in : Use dolt when possible.
	* acinclude.m4 : create, and add dolt.m4

2008-04-10  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-image.c: (go_mime_to_image_format),
	(go_image_format_to_mime): add support for pdf and ps.

2008-04-10  Morten Welinder  <terra@gnome.org>

	* goffice/utils/datetime.c (go_date_conv_from_str,
	go_date_conv_equal, go_date_conv_translate): New functions.

2008-04-10  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_boxes/gog-boxplot.c: skip invalid data. [#527249]

2008-03-22  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/math/go-complex.h: fixed go-math.h inclusion.
	* goffice/utils/go-image.h: include goffice-features.h.

2008-03-12  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_format_is_invalid): New function.

2008-03-06  Morten Welinder  <terra@gnome.org>

	* configure.in: Post release bump.

2008-03-06  Morten Welinder <terra@gnome.org>

	* Release 0.6.2

2008-03-05  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis-line.c: (gog_axis_base_get_crossed_axis),
	(gog_axis_base_get_clamped_position): do not draw axes when no axis
	is defined.
	* goffice/graph/gog-renderer.c: (gog_renderer_update): do not attempt
	to render with negative width or height. Partially fixes #519788.

2008-02-28  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis-line.c: (x_process), (xy_process),
	(radar_process): remove the unuseful tmp.

2008-02-23  Morten Welinder  <terra@gnome.org>

	* plugins/plot_barcol/gog-1.5d.c (gog_plot1_5d_update): Fix array
	filling.  Fixes #517995.

2008-02-10  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_barcol/gog-1.5d.c (gog_plot1_5d_update): set
	length to 0 for invalid series. Fixes #514642.

2008-01-24  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_format_execute): For
	OP_DATE_SPLIT, make sure to set day/month/year/weekday even in the
	error case.  Fixes #511435.

	* autogen.sh: Replace last change with a final test for the actual
	bug in question.

2008-01-05  J.H.M. Dassen (Ray) <jdassen@debian.org>

	* autogen.sh (REQUIRED_GTK_DOC_VERSION): Specify a minimum version
	which has the right shell error handling logic in gtk-doc.make not so
	we do not error out on "make install" when gtkdoc-rebase is unavailable
	(in the --disable-gtk-doc case). [#506506]

2007-12-20  Jody Goldberg <jody@gnome.org>

	* configure.in : post release bump

2007-12-20  Jody Goldberg <jody@gnome.org>

	* Release 0.6.1

2007-12-18  Jody Goldberg <jody@gnome.org>

	* configure.in : post release bump

2007-12-18  Jody Goldberg <jody@gnome.org>

	* Release 0.6.0

2007-12-13  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Fix pattern with semi-transparent colors.

	* goffice/utils/go-pattern (go_pattern_create_cairo_pattern): cairo uses
	premultiplied color components.

2007-12-13  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-style.h: renamed GogLineStyle::pattern to
	pattern_unimplemented_yet to avoid confusion.

2007-12-06  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Fix selection rectangle style.

	* goffice/graph/gog-rendere.c (gog_renderer_draw_selection_rectangle):
	here.

2007-12-05  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/graph/gog-axis-line.c (gog_axis_base_get_clamped_position):
	the bound axis is the crossed axis.

2007-12-05  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Fix for #501831 – Spreadsheet crashes when I change title of graph

	* goffice/graph/gog-child-button.c (gog_child_button_build_additions):
	fix search of the parent object.

2007-12-05  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Clamp the axis position to the edges of the graph and place the axis
	label near to the axis.

	* goffice/graph/gog-axis-line.c (gog_axis_base_get_clamped_position):
	new. Handle inverted axes.
	(xy_process): use gog_axis_base_get_clamped_position.
	* goffice/graph/gog-axis.c (gog_axis_view_padding_request): ditto.
	(gog_axis_view_size_allocate): ditto.

2007-12-04  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Revert axis label positioning to previous behaviour for the GOG_AXIS_CROSS
	case (and be it the same as for the GOG_AXIS_LOW case).

	* goffice/graph/gog-axis.c (gog_axis_view_padding_request): here.
	(gog_axis_view_size_allocate): and here.

2007-12-04  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Don't try to distinguish between user axis position and calculated
	axis position.

	* goffice/graph/gog-axis-line.c (gog_axis_base_set_property): here.
	(gog_axis_base_get_property): here.
	(gog_axis_base_set_position): here.
	(cb_position_toggled): here.
	(gog_axis_base_populate_editor): here.
	(gog_axis_base_init): here.
	(gog_axis_base_get_position): here.
	(gog_axis_base_get_padding): here.
	(xy_process): here.
	(radar_process): here.
	(gog_axis_view_padding_request): here.
	(gog_axis_view_size_allocate): and here.
	(gog_axis_base_class_init): GOG_AXIS_AUTO is not a valid serializable position.

2007-12-05  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Fix for #501119 – Misplacing of high Y axis label

	* goffice/graph/gog-axis.c (gog_axis_view_size_allocate): add missing
	break.

2007-12-05  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis-line.c: (gog_axis_base_populate_editor),
	(xy_process), (radar_process): hide property pages for invisible axis
	and don't take into account for size allocation.
	* goffice/graph/gog-axis.c: (gog_axis_populate_editor): hide property
	pages for invisible axis
	* goffice/graph/gog-object.h: add a gog_object_is_visible macro.

2007-12-04  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-pango-extras.c: New file with a few
	generally-useful functions from Gnumeric.

2007-12-03  Jody Goldberg <jody@gnome.org>

	* configure.in : post release bump.  Last before 0.6

2007-12-03  Jody Goldberg <jody@gnome.org>

	* Release 0.5.4

2007-11-30  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis-line.c: (gog_axis_base_set_position):
	ensure pos_user is set, so that correct position is saved.

2007-11-29  Andreas J. Guelzow  <aguelzow@pyrshep.ca>

	* goffice/utils/go-format.c (go_format_inc_precision): Handle
	  increase of decimals also for E.
	  Fixes add-decimals problem from #500365.

2007-11-29  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_format_parse_number_E): Fix
	mantissa simplification problem.  [#500393]

2007-11-28  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_format_inc_precision): Actually
	find the last zero.  Fixes add-decimals problem from #434785.

2007-11-28  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis-line.c: (gog_axis_base_set_property): fix setting
	axis position as string, (xy_process): use a better test.

2007-11-28  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Fix for #500017: incorrect graph printing.

	* goffice/graph/gog-renderer.c (gog_renderer_render_to_cairo): don't
	call cairo_show_page here.
	(gog_renderer_export_image): but here.

2007-11-24  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/component/go-component.c: (go_component_edit): return the
	GtkWindow* associated with the editor, so that it can be made transient.
	* goffice/component/go-component.h: ditto.

2007-11-22  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_barcol/gog-dropbar.c: (barcol_draw_rect): always
	draw a rectangle, even if very sharp,
	(gog_dropbar_view_render): ensure that invalid data are not used. [#498846]
	* plugins/plot_barcol/gog-minmax.c: (gog_minmax_view_render): fix
	index initialization.

2007-11-19  Jody Goldberg <jody@gnome.org>

	* configure.in : post release bump

2007-11-19  Jody Goldberg <jody@gnome.org>

	* Release 0.5.3

2007-08-10  Jody Goldberg <jody@gnome.org>

	* goffice/graph/gog-guru.c (gog_guru) : clean the api.  The caller is
	  responsible for setting transientness.

2007-11-18  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_barcol/gog-barcol.c: (gog_barcol_view_render): fix
	rendering when some data are invalid.
	* plugins/plot_barcol/gog-dropbar.c: (gog_dropbar_view_render):
	ditto.
	* plugins/plot_barcol/gog-minmax.c: (gog_minmax_view_render):
	ditto.

2007-11-18  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_barcol/gog-barcol.c: (gog_barcol_view_render): don't
	try to allocate 0 bytes. [#497777]

2007-11-15  Jon K Hellan  <hellan@acm.org>

	* goffice/utils/go-image.c (go_image_format_to_mime): Fix typos in
	mime types.

2007-11-12  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Improve the appearance of legend swatches, by respecting the outline
	style, avoid blurriness in case of no outline and show fill color for
	XY and polar plots.

	* goffice/graph/gog-legend.c (cb_swatch_scale): also handle the
	GOG_STYLE_LINE case.
	(cb_render_elements): also show fill color in case of marker + line.
	Respect the outline appearance, rescaling the outline width in order
	to always show the fill color.
	* goffice/graph/gog-renderer.c (path_interpret): round coordinates
	when line width <= 0.
	(_draw_shape): force line width to zero when stroke is invisible.
	(_draw_rectangle): don't ask for stroke is outline is invisible.
	(gog_renderer_stroke_rectangle): fix stroke argument in
	_draw_rectangle call.
	(gog_renderer_fill_rectangle): new.

2007-11-07  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Add a frame around the graph area in the graph editor.

	* goffice/graph/gog-guru.c (cb_sample_plot_resize): resize the frame.
	(graph_guru_init_format_page): add the frame. I've tried to use the
	color associated to the canvas widget, for a better compatibility with
	gtk themes, but without satisfaction. The hardcoded ones seem to play
	well with dark and clear themes.

2007-11-07  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* plugins/reg-lin/gog-reg-lin.c (gog_lin_reg_curve_update): return
	silently if series isn't valid.

2007-11-07  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Try to make the add button in GogGuru more useful, by populating it
	with all item of the currently selected chart that can be
	unambiguously added.

	* goffice/graph/gog-child-button.c (build_addition_process_childs),
	(build_addition_foreach), (addition_compare),
	(gog_child_button_build_additions), (gog_child_button_free_additions): new.
	(gog_child_button_set_object): use build addition functions.
	(cb_graph_guru_add_plot): adapt to new addition list.
	(cb_plot_family_menu_create): ditto.
	(plot_type_menu_create): ditto.
	(cb_graph_guru_add_trend_line): ditto.
	(cb_trend_line_type_menu_create): ditto.
	(trend_line_type_menu_create): ditto.
	(gog_child_button_press_event_cb): ditto.

2007-11-06  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-charmap-sel.c (cs_emphasize_label): Fix markup.

	* goffice/utils/go-format.c (go_format_month_before_day): Return
	2, if year comes first.
	* goffice/utils/go-locale.c (go_locale_month_before_day): Ditto.

2007-11-04  Morten Welinder <terra@gnome.org>

	* configure.in: post-release bump.

2007-11-04  Morten Welinder <terra@gnome.org>

	* Release 0.5.2

2007-11-04  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-glib-extras.c (go_parse_key_value): Renamed
	from go_file_saver_parse_options and drop several unused
	arguments.
	* goffice/app/file.c (go_file_saver_parse_options): See above.

2007-11-04  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_xy/gog-xy.c: (gog_xy_view_render): fix xy colored
	plots when some data are missing. [#475394]

2007-11-03  Morten Welinder  <terra@gnome.org>

	* goffice/app/file.c (go_file_saver_parse_options): Document and
	fix a few FIXMEs.

	* goffice/utils/go-glib-extras.c (go_object_set_property): New
	function.

2007-11-02  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_barcol/gog-line.c: (gog_line_view_render): don't
	try to access invalid series data. [#492485]

2007-11-01  Morten Welinder  <terra@gnome.org>

	* goffice/app/file.c (go_file_saver_set_export_options,
	go_file_saver_parse_options): New functions.
	(go_file_saver_class_init): Install new set-export-options signal.

2007-11-01  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/graph/gog-chart-map.c (make_path_spline): fix the
	fix for [#492158].

2007-10-31  Morten Welinder  <terra@gnome.org>

	* goffice/app/file.h: Make more stuff public so we can derive.

	* goffice/graph/gog-chart-map.c (make_path_spline): Fix ABR
	reported by Sum1.  [#492158]

2007-10-30  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/data/go-data.c: (go_data_vector_get_len),
	(go_data_matrix_get_size): return nul sizes when the vector or matrix
	is invalid.
	* goffice/graph/gog-error-bar.c: (gog_error_bar_get_bounds),
	(gog_error_bar_get_minmax): don't crash when there are no data.

2007-10-29  Morten Welinder  <terra@gnome.org>

	* goffice/app/go-plugin-loader-module.c (make_function_name): New
	convenience function that keeps Valgrind/dlsym happy.

	* goffice/gtk/go-font-sel.c (gfs_destroy): Let g_slist_free handle
	the empty list.

	* plugins/smoothing/gog-moving-avg.c (gog_moving_avg_update): Fix
	problem with overwriting memory, see #491328.

2007-10-28  Jody Goldberg <jody@gnome.org>

	* goffice/graph//gog-object.c : Add GogObject::invisible
	* goffice/graph/gog-view.c (gog_view_render) : support it here.
	  We can debate if it should also short circuit space allocation.

2007-10-28  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Fix a crash when deleting a chart. We may be in a state where a chart
	has axes and grid lines, but axis_set is GOG_AXIS_SET_UNKNOW.

	* goffice/graph/gog-axis-line.c (gog_axis_base_get_crossed_axis_type):
	exit early if axis_set == GOG_AXIS_SET_UNKNOW.
	(gog_axis_base_view_point): ditto.
	(gog_axis_base_view_padding_request): ditto.
	(gog_axis_base_view_render): ditto.
	* goffice/graph/gog-grid-line.c (gog_grid_line_radial_render): ditto.
	(gog_grid_line_circular_render): ditto.
	* goffice/graph/gog-chart-map.c (gog_chart_map_new): return NULL is
	axis_set == GOG_AXIS_SET_UNKNOW.

2007-10-21  Morten Welinder <terra@gnome.org>

	* configure.in: post-release bump.

2007-10-21  Morten Welinder <terra@gnome.org>

	* Release 0.5.1

2007-10-20  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Fix a one pixel mismatch on the size when exporting to images.

	* goffice/graph/gog-renderer.c (gog_renderer_update): always use
	rend->w and rend->h as image size.

2007-10-20  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Remove duplicated fill pattern creation code.

	* goffice/graph/gog-renderer.c (emit_fill): use
	gog_style_create_cairo_pattern.
	* goffice/graph/gog-style.c (gog_style_create_cairo_pattern): width
	and height are retrieved from the cairo context. Use
	go_pattern_create_cairo_pattern.

2007-10-18  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Second fix to GogChildButton behaviour regarding to consistency with
	regular menu on fast click on the button.

	* goffice/graph/gog-child-button.c (gog_child_button_popup): take
	event button and time as parameters, and pass them to gtk_menu_popup.
	(gog_child_button_press_event_cb): use new gog_child_button_popup API.

2007-10-18  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/graph/gog-child-button.c (gog_child_button_press_event_cb):
	do the signal connection only once.

2007-10-17  Morten Welinder  <terra@gnome.org>

	* configure.in (CFLAGS): Properly handle GTK_DISABLE_DEPRECATED.

2007-10-17  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Fix the behaviour of GogChildButton by showing the popup menu as soon
	as the toggle button is pressed.

	* goffice/graph/gog-child-button.c (gog_child_button_init): use the
	button-press-event signal instead of toggled.
	(gog_child_button_toggled_cb): renamed to
	gog_child_button_press_event_cb. Remove the active/inactive switch.

2007-10-10  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-pixbuf.c (go_pixbuf_tile): Import from Gnumeric.
	Seems generally useful.
	(go_pixbuf_new_from_file): Allow absolute filenames.

2007-10-09  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Widgetization and conversion of the graph guru "add menu" to a button
	with a popup menu.

	* goffice/graph/gog-child-button.[ch]: new.
	* goffice/graph/gog-guru.c: move code related to the add menu to
	gog-child-button.c.
	(get_pixbuf): removed (now in go-pixbuf as go_pixbuf_get_from_cache).
	(cb_graph_guru_add_item), (cb_cmp_plot_type), (cb_plot_type_list),
	(cb_graph_guru_add_plot), (cb_plot_family_menu_create),
	(plot_type_menu_create), (cb_graph_guru_add_trend_line),
	(cb_trend_line_type_menu_create), (trend_line_type_menu_create): removed.
	(cb_attr_tree_selection_change): use GogChildButton.
	(graph_guru_init_format_page): create a GogChildButton.
	* goffice/graph/gog-guru.glade: remove the menu and convert precedence
	menu items to button.

2007-10-09  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Move pixbuf related function into goffice/gtk/go-pixbuf.[ch]

	* goffice/gtk/goffice-gtk.c: move go_pixbuf_new_from_file and
	go_pixbuf_intelligent_scale...
	* goffice/gtk/go-pixbuf.[ch]: ...here.
	(go_pixbuf_get_from_cache): new.

	* goffice/gtk/go-selector.c: move go_menu_position_below...
	* goffice/gtk/goffice-gtk.c: ...here.

2007-10-08  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Don't use the G_TYPE_INSTANCE_GET_PRIVATE macro in GOSelector and
	GOPalette implementation. We already have a private pointer in the
	public struct.

	* goffice/gtk/go-palette.c: here.
	* goffice/gtk/go-selector.c: and here.

2007-10-02  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/graph/gog-renderer.c: move GO_CAIRO_CLAMP from here...
	* goffice/utils/go-cairo.h: ... to here.
	* goffice/utils/go-path.c: use GO_CAIRO_CLAMP instead of
	GO_PATH_CLAMP.

2007-10-02  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Fix for Bug 153883 - making graphs insanely large leads to ~infinite
	memory and cpu use.
	The fix consists in not using the graph image cache for big graphs, and
	just render directly. The patch uses a temporary image surface, since
	rendering onto an xlib surface may cause segfault on path with lot of
	points. Another issue is all path point coordinates are clipped as a
	workaround to the long line cairo bug, which means the graph content
	won't display beyond the clipping value.
	The arbitrary limit is set to image with a number of pixels greater
	than the number of screen pixels.

	* goffice/graph/gog-control-foocanvas.c (gog_control_foocanvas_draw),
	(gog_control_foocanvas_update): here.

2007-10-01  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/graph/gog-smoothed-curve.c (gog_smoothed_curve_view_render):
	warning fix.

2007-10-01  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/component/go-component.c: removed pixbuf, everything should
	be done using cairo for windowless objects.
	* goffice/component/go-component.h: ditto.

2007-09-30  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Documentation fixes.

2007-09-30  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/gtk/goffice-gtk.c: removed unused
	go_cairo_set_source_pixbuf.

2007-09-29  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-smoothed-curve.c:
	(gog_smoothed_curve_view_render): fix rendering at the right place.

2007-09-29  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* plugins/smoothing/gog-moving-avg.glade: fix spacing.

2007-09-29  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/graph/gog-control-foocanvas.c (gog_control_foocanvas_draw):
	fix the clipping region when compositing the graph cache.
	* goffice/gtk/go-graph-widget.c (go_graph_widget_expose_event): port
	to cairo.

2007-09-29  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-chart-map.h: added missing G_BEGIN_DECLS/G_END_DECLS.
	* goffice/graph/gog-series-lines.h: ditto.
	* goffice/math/go-complex.h: ditto.
	* goffice/math/go-cspline.h: ditto.
	* goffice/math/go-fft.h: ditto.
	* goffice/math/go-regression.h: ditto.
	* goffice/utils/go-path-impl.h: ditto.
	* goffice/utils/go-path.h: ditto.

2007-09-29  Jean Brefort <jean.brefort@normalesup.org>

	* goffice/graph/gog-renderer.h: add missing G_END_DECLS.

2007-09-28  Morten Welinder  <terra@gnome.org>

	* goffice/utils/formats.c (go_format_builtins): Add extra NULL for
	GO_FORMAT_MARKUP.  Fixes #480971.

2007-09-28  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/graph/gog-graph (gog_graph_render_to_cairo): use the correct
	type for the cairo parameter, instead of gpointer.

2007-09-28  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/graph/gog-graph.c (gog_graph_render_to_cairo_vector):
	removed. There's no need to tell if we want to render in vector mode,
	that can be guessed from the cairo target.

2007-09-28  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/graph/gog-control-foocanvas.c
	(gog_control_foocanvas_update): remove unused gog_renderer_update zoom
	parameter again.
	* goffice/gtk/go-graph-widget.c (update_image_rect): ditto.
	* goffice/graph/gog-renderer.c (gog_renderer_update): ditto.
	(gog_renderer_new_for_pixbuf): removed.

2007-09-28  Jean Brefort <jean.brefort@normalesup.org>

	* configure.in: added goffice/math directory.
	* goffice/Makefile.am: ditto.
	* goffice/data/go-data-simple.c: moved maths to goffice/math.
	* goffice/data/go-data.c: ditto.
	* goffice/goffice.c: ditto.
	* goffice/graph/gog-axis-line.c: ditto.
	* goffice/graph/gog-axis.c: ditto.
	* goffice/graph/gog-chart-map.c: ditto.
	* goffice/graph/gog-chart.c: ditto.
	* goffice/graph/gog-data-set.c: ditto.
	* goffice/graph/gog-error-bar.c: ditto.
	* goffice/graph/gog-grid-line.c: ditto.
	* goffice/graph/gog-grid.c: ditto.
	* goffice/graph/gog-legend.c: ditto.
	* goffice/graph/gog-plot.c: ditto.
	* goffice/graph/gog-reg-curve.c: ditto.
	* goffice/graph/gog-renderer.c: ditto.
	* goffice/graph/gog-style.c: ditto.
	* goffice/gtk/go-graph-widget.c: ditto.
	* goffice/gtk/go-rotation-sel.c: ditto.
	* goffice/math/Makefile.am: ditto.
	* goffice/math/go-complex.c: copied code from gnumeric.
	* goffice/math/go-complex.h: ditto.
	* goffice/math/go-cspline.c: moved maths to goffice/math.
	* goffice/math/go-cspline.h: ditto.
	* goffice/math/go-fft.c: copied code from gnumeric.
	* goffice/math/go-fft.h: ditto.
	* goffice/math/go-math.c: moved maths to goffice/math.
	* goffice/math/go-math.h: ditto.
	* goffice/math/go-rangefunc.c: ditto.
	* goffice/math/go-rangefunc.h: ditto.
	* goffice/math/go-regression.c: ditto.
	* goffice/math/go-regression.h: ditto.
	* goffice/utils/Makefile.am:
	* goffice/utils/go-cspline.c: ditto.
	* goffice/utils/go-cspline.h: ditto.
	* goffice/utils/go-format.c: ditto.
	* goffice/utils/go-geometry.c: ditto.
	* goffice/utils/go-line.c: ditto.
	* goffice/utils/go-marker.c: ditto.
	* goffice/utils/go-math.c: ditto.
	* goffice/utils/go-math.h: ditto.
	* goffice/utils/go-path.c: ditto.
	* goffice/utils/go-rangefunc.c: ditto.
	* goffice/utils/go-rangefunc.h: ditto.
	* goffice/utils/go-regression.c: ditto.
	* goffice/utils/go-regression.h: ditto.
	* plugins/plot_barcol/gog-1.5d.c: ditto.
	* plugins/plot_barcol/gog-barcol.c: ditto.
	* plugins/plot_barcol/gog-dropbar.c: ditto.
	* plugins/plot_barcol/gog-line.c: ditto.
	* plugins/plot_boxes/gog-boxplot.c: ditto.
	* plugins/plot_boxes/gog-histogram.c: ditto.
	* plugins/plot_pie/gog-pie.c: ditto.
	* plugins/plot_radar/gog-radar.c: ditto.
	* plugins/plot_surface/gog-surface.c: ditto.
	* plugins/plot_surface/xl-surface.c: ditto.
	* plugins/plot_xy/gog-xy.c: ditto.
	* plugins/reg_linear/gog-exp-reg.c: ditto.
	* plugins/reg_linear/gog-lin-reg.c: ditto.
	* plugins/reg_linear/gog-lin-reg.h: ditto.
	* plugins/reg_linear/gog-log-reg.c: ditto.
	* plugins/reg_linear/gog-polynom-reg.c: ditto.
	* plugins/reg_linear/gog-power-reg.c: ditto.
	* plugins/reg_logfit/gog-logfit.c: ditto.
	* plugins/reg_logfit/gog-logfit.h: ditto.
	* plugins/smoothing/gog-exp-smooth.c: ditto.
	* plugins/smoothing/gog-moving-avg.c: ditto.

2007-09-27  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Implementation of gog_renderer_render_to_cairo. Compared to
	gog_renderer_update / gog_renderer_get_cairo_surface, it always redo
	the size allocation and doesn't cache the rendering result.

	Some API cleanup by removing gog_renderer_new_for_foo functions,
	replaced by gog_renderer_new. Restore the unused zoom parameter of
	gog_renderer_update, in order to keep compatibility with goffice 0.4.

	* goffice/graph/gog-control-foocanvas.c
	(gog_control_foocanvas_set_property): use gog_renderer_new.
	(gog_control_foocanvas_update): add dummy zoom parameter to
	gog_renderer_update_call.
	* goffice/graph/gog-graph.c (gog_graph_export_image): use
	gog_renderer_new.
	(gog_graph_render_to_cairo),
	(gog_graph_render_to_cairo_vector): ditto. Use
	gog_renderer_render_to_cairo.
	* goffice/graph/gog-renderer.c (gog_renderer_render_to_cairo): new.
	(gog_renderer_export_image): use gog_renderer_render_to_cairo.
	(gog_renderer_new): new. Replace gog_renderer_new_for_format and
	gog_renderer_new_for_pixbuf.
	(gog_renderer_new_for_format): removed.
	(gog_renderer_new_for_pixbuf): keppe for gnumeric goffice 0.4
	compatibility.
	* goffice/gtk/go-graph-widget.c (update_image_rect): restore dummy
	gog_renderer_update zoom parameter.
	(go_graph_widget_set_property): use gog_renderer_new instead of
	gog_renderer_new_for_pixbuf.

2007-09-27  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Fix rendering of marker outline.

	* goffice/utils/go-marker.c (go_marker_render): don't multiply line
	width by scale, scaling is already done by cairo_scale.

2007-09-25  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/graph/gog-renderer.c (gog_renderer_update): no need to clear
	the surface when it was just created. Force is_vector to FALSE here.

2007-09-25  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Restrict the drawing of the cairo surface cache to the event->region.

	* goffice/graph/gog-control-foocanvas.c (gog_control_foocanvas_draw):
	here.

2007-09-25  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Use cairo for graph painting in GogControlFoocanvas. That avoids the
	conversion from cairo to pixbuf format.

	* goffice/graph/gog-control-foocanvas.c (gog_control_foocanvas_draw):
	here.

2007-09-25  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Move cairo to/from pixbuf pixel data conversion from GOImage to
	go-cairo.c.

	* goffice/graph/gog-renderer.c (gog_renderer_get_pixbuf): adapt to new
	go_cairo_convert_data_to_pixbuf signature.
	* goffice/utils/go-cairo.c (go_cairo_convert_data_to_pixbuf),
	(go_cairo_convert_data_from_pixbuf): handle src != dst.
	* goffice/utils/go-image.c (pixbuf_to_cairo), (cairo_to_pixbuf): use
	go_cairo_convert_data functions.

2007-09-24  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/graph/gog-control-foocanvas.c
	(gog_control_foocanvas_update): remove unused gog_renderer_update zoom
	parameter.
	* goffice/graph/gog-graph.c (gog_graph_render_to_cairo),
	(gog_graph_render_to_cairo_vector): ditto.
	* goffice/gtk/go-graph-widget (update_image_rect): ditto.

	Use a cairo_surface for graph image cache, instead of pixbuf. Remove
	"cairo" and "is_vector" properties, they are internal variables. Also
	remove "zoom", it's unused.

	* goffice/graph/gog-renderer.c (gog_renderer_update): remove unused
	zoom parameter. Use a cairo_surface for caching.
	(gog_renderer_get_pixbuf): keep for now, and do the conversion from
	cairo format here.
	(gog_renderer_get_cairo_surface): new.
	(gog_renderer_export_image): remove unused gog_renderer_update zoom
	parameter.
	(gog_renderer_set_property): remove "zoom", "cairo" and "is_vector"
	property.
	(gog_renderer_get_property): ditto.
	(gog_renderer_class_init): ditto.

2007-09-24  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/utils/go-cairo (go_cairo_convert_data_from_pixbuf),
	(go_cairo_convert_data_to_pixbuf): new.

2007-09-27  Morten Welinder  <terra@gnome.org>

	* goffice/utils/regutf8.c (go_regcomp): Add run-time check for
	missing pcre_compile2.

2007-09-24  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/goffice-gtk.c (go_widget_set_tooltip_text,
	go_tool_item_set_tooltip_text): New functions.

	* */*.c: switch to go_widget_set_tooltip_text.

2007-09-16  Jody Goldberg <jody@gnome.org>

	* goffice/graph/gog-plot.c (gog_plot_set_axis) : split out
	 (gog_plot_set_axis_by_id) : from here.

	* goffice/graph/gog-axis-line.c (gog_axis_base_set_property) : renamed
	  PROP_POSITION -> POSITION_STR, add added a PROP_POSITION to take the
	  enum directly.
	(gog_axis_base_get_property) : ditto.
	(gog_axis_base_class_init) : ditto.
	(xy_process) : Be smarter about label positioning when crossing.  If
	  we're at a bound put it on the other side.

2007-09-15  Jean Brefort  <jean@acer>

	* goffice/graph/gog-axis-line.c: (xy_process): make axis lines
	always visible.
	* goffice/graph/gog-renderer.c: (gog_renderer_update): don't crash
	when pixbuf is initially NULL. [#477052]

2007-09-12  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Handle GOG_AXIS_SET_COLOR axis selection.

	* goffice/graph/gog-axis-line.c (gog_axis_base_view_point): here.

2007-09-12  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Fix manual position of axis labels.

	* goffice/graph/gog-axis.c (gog_axis_view_size_allocate): use bbox
	instead of view->allocation, which is not set yet when entering
	size_allocate.

2007-09-11  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-marker.c (square_path, ...): Make static.

2007-09-10  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Fix backplane rendering regression (1 pixel offset).

	* goffice/graph/gog-grid.c (gog_grid_view_render): use
	GOPath API.

2007-09-10  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Don't show fill_type combo box in the radar plot series editor.

	* plugins/plot_radar/gog-radar.c (gog_polar_plot_class_init): use
	GogPolarSeries object type for series_type.
	(gog_rt_series_class_init): don't enable fill_type here...
	(gog_polar_series_class_init): ... but here.

2007-09-10  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Fix rendering of radar area plot outline.

	* goffice/graph/gog-renderer.c (gog_renderer_stroke_serie): call the
	right emit function.

2007-09-09  Jon K Hellan  <hellan@acm.org>

	* goffice/gtk/goffice-gtk.c (go_gui_get_image_save_info): Don't
	close save as dialog after entering wrong image file extension.
	[#420451]

	* goffice/gtk/go-format-sel.c (find_builtin): Fix format selector
	crash. [#475136]

2007-09-09  Jean Brefort  <jean@acer>

	* goffice/utils/go-font.c: (go_font_new_by_index): don't ref
	a NULL font.

2007-09-08  Jody Goldberg <jody@gnome.org>

	* goffice/Makefile.am : use -Wl,-lhtmlhelp to avoid libtool getting
	  irrate about no matching .dll

	* plugins/plot_radar/gog-radar.c (gog_radar_area_plot_init) :
	  RadarArea defaults to having a fill.

2007-09-08  Jean Brefort  <jean@acer>

	* configure.in: applied patch from Claude Paroz. [#474037]

2007-09-05  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_format_has_hour): New function.

2007-09-03  Jody Goldberg <jody@gnome.org>

	* configure.in : post release bump

2007-09-03  Jody Goldberg <jody@gnome.org>

	* Release 0.5.0

2007-09-03  Jody Goldberg <jody@gnome.org>

	* goffice/utils/go-file.c (go_get_mime_type) : Use
	  FMFD_ENABLEMIMESNIFFING.
	(go_get_mime_type_for_data) : write a win32 variant.

	* goffice/utils/go-locale.c (go_locale_win32_get_user_default) : new.
	(go_locale_get_date_format) : use it here in preference to langinfo.
	(go_locale_get_time_format) : and here too.
	(go_locale_month_before_day) : use the win32 locale info in preference
	  to langinfo.

	* goffice/goffice.c (libgoffice_init) : make it compile on win32.

2007-09-03  Jean Brefort  <jean.brefort@normalesup.org>

	* tests/Makefile.am: fix library name.

2007-09-02  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_format_month_before_day): New function.

2007-08-30  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/graph/gog-renderer.c (gog_renderer_draw_marker): avoid
	useless cairo surface creation in case of PDF or PS export.
	* goffice/utils/go-marker.c (go_marker_render): put cairo_save and
	cairo_restore around coordinate transformation.

2007-08-30  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/graph/gog-chart-map.c (get_extremes_2D): handle x == NULL or
	y == NULL cases.

2007-08-29  Jody Goldberg <jody@gnome.org>

	* goffice/graph/gog-series.c (gog_series_dataset_get_elem) : be more
	  permissive, return NULL on requests for dim >= num_dum rather than
	  spewing an error.
	* goffice/graph/gog-data-set.c (gog_dataset_get_dim) : ditto.

2007-08-25  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/graph/gog-renderer.c (emit_fill): removed unused color
	variable.
	* goffice/utils/go-pattern.c (go_pattern_create_cairo_pattern):
	suppress compilation warning. Check image data pointer before using
	it.

2007-08-25  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Move GOPattern code to cairo.
	Minor tweak of go_marker_create_cairo_surface.

	* goffice/graph/gog-renderer.c (emit_fill): use
	go_pattern_create_cairo_pattern.
	(_get_marker_surface): adapt to new go_marker_create_cairo_surface.
	* goffice/gtk/go-pattern-selector.c (go_pattern_palette_render_func):
	use go_pattern_create_cairo_pattern.
	* goffice/utils/go-cairo.c (go_cairo_surface_is_vector): new.
	* goffice/utils/go-marker.c (go_marker_create_cairo_surface): return
	width and height of the created surface, in case of
	future non square surfaces.
	* goffice/utils/go-pattern.c (pattern_solid): removed.
	(pattern_blend): removed.
	(cb_pattern_alpha): removed.
	(cb_pattern_opaque): removed.
	(go_pattern_render_svp): removed.
	(go_pattern_create_cairo_pattern): new.

2007-08-24  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-locale.c (go_locale_get_date_format): Use a
	sane default and report it as a date default, not a time default.

2007-08-21  Jody Goldberg <jody@gnome.org>

	* goffice/utils/go-file.c (check_program) : disable for win32 also.
	(go_shell_argv_to_glib_encoding) : fix typo and avoid a memory leak on
	  failure.

2007-08-21  Jody Goldberg <jody@gnome.org>

	* docs/reference/goffice-sections.txt : remove
	  gog_renderer_push_selection_style it's been deleted.
	* goffice/graph/gog-renderer.h : ditto.

2007-08-20  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/Makefile.am: changed library name to libgoffice-0.5.so
	* configure.in: ditto.
	* libgoffice-0.5.pc.in: ditto.

2007-08-18  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/graph/gog-series.c (gog_series_get_data): don't emit a
	warning whe series is invalid.
	(gog_series_get_xy_data): ditto.

2007-08-18  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Fix automatic creation of backplane via guru-hints.

	* goffice/graph/gog-plot.c (gog_plot_guru_helper): backplane role name
	is "Backplane" now, not "Grid".

2007-08-18  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Conversion of GOMarker to cairo.

	* goffice/utils/go-marker.c: removed dependency on libart and
	GdkPixbuf. Use SVG path string for marker description.
	(marker_create_pixbuf_with_size), (marker_free_pixbuf),
	(marker_update_pixbuf), (go_marker_finalize),
	(go_marker_get_pixbuf), (go_marker_get_pixbuf_with_size): removed.
	(go_marker_set_shape), (go_marker_set_outline_color),
	(go_marker_set_fill_color), (go_marker_set_size), (go_marker_assign):
	no more pixbuf caching.
	(go_marker_render): new.
	(go_marker_create_cairo_surface): new.
	* goffice/gtk/go-marker-selector.c: (go_marker_palette_render_func)
	use go_marker_render.
	* goffice/graph/gog-renderer.c (_draw_marker): removed.
	(_get_marker_surface): use go_marker_create_cairo_surface.
	* goffice/utils/go-cairo.c (go_cairo_emit_svg_path): new.

2007-08-18  Jean Brefort  <jean.brefort@normalesup.org>

	* pixmaps/Makefile.am: add new icon for surface plots.
	* pixmaps/chart_surface_2_1.png: ditto.
	* pixmaps/chart_surface_2_1.svg: ditto.

2007-08-16  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Really make go_path_get_extremes unused.

	* plugins/plot_xy/gog-xy.c (gog_xy_view_render): removed useless call
	to go_path_get_extremes.

2007-08-16  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Remove unused code.

	* goffice/utils/gog-path.[ch] (go_path_get_extremes]: removed.

2007-08-15  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Change Grid role name to Backplane, since that what GogGrid really is.
	We should rename the GogGrid object to GogBackplane later.

	* goffice/graph/gog-object-xml.c (gog_object_write_xml_sax): do the
	substitution here, for backward compatibility.
	(gog_object_new_from_xml): ditto.
	(gogo_start): ditto.
	* goffice/graph/gog-chart.c (gog_chart_class_init): replace "Grid" role
	name by "Backplane".

2007-08-12  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Fix update of dim editors when moving axis bounds.

	* goffice/graph/gog-axis.c (set_to_auto_value): new.
	(cb_enable_dim): use set_to_auto_value.
	(cb_axis_bound_changed): removed.
	(cb_update_editor): new.
	(make_dim_editor): don't connect to Axis::changed signal, but to
	Axis::update-editor.

2007-08-12  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/utils/go-cairo.[ch]: removed.

2007-08-13  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-file.c (go_shell_arg_to_uri): Don't trash
	fd://0 and friends.

2007-08-10  Jody Goldberg <jody@gnome.org>

	* goffice/utils/go-pattern.c (go_pattern_get_svg_path) : this actually
	  returned an xmlChar *
	* goffice/graph/gog-renderer-svg.c (fill_properties) : adjust to
	  actual result type from go_pattern_get_svg_path.

	* goffice/goffice.c (libgoffice_init) : use GO_VERSION_* for the dll.

2007-08-06  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Fix step interpolation for radar plots by introducing a new
	go_path_arc_to function, which will not start with move_to like
	go_path_arc.

	* goffice/utils/go-path.c: (go_path_arc_to) new.
	* goffice/graph/gog-chart-map.c: (polar_make_path_step) use the new
	go_path_arc_to function.

2007-08-06  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Move GogStyleFill editor to GogSeries, and make it appear along with
	fill settings.

	* goffice/graph/gog-series-prefs.glade: describe the GogFillType
	editor.
	* goffice/graph/gog-series.c (gog_series_populate_editor): handle
	GogFillType editor.
	* goffice/graph/gog-style-prefs.glade: add a placeholder for the fill
	type editor.
	* goffice/graph/gog-style.c (fill_update_visibilies): handle
	placeholder visibility.
	(fill_init): register placeholder.
	* plugins/plot_radar/gog-radar.c: remove fill type editor.
	(gog_rt_series_class_init): enable interpolation and fill_type
	properties.
	* plugins/plot_xy/gog-xy-series-prefs.glade: remove fill type editor.
	* plugins/plot_xy/gog-xy.c (gog_xy_series_populate_editor): remove
	fill type editor.
	(gog_xy_series_class_init): enable fill_type property.

2007-08-06  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Remove unused code and dependency to libart in go-line.c.

	* goffice/graph/gog-renderer.c:
	s/go_line_get_vpath_dash/go_line_dash_get_sequence/
	s/go_line_vpath_dash_free/go_line_dash_sequence_free/
	* goffice/gtk/go-line-selector.c (go_line_dash_palette_render_func):
	ditto.
	* goffice/graph/gog-smoothed-curve.c (gog_smoothed_curve_view_render):
	use GOPath API and gog_chart_map_make_path. Remove commented code.
	* goffice/utils/go-line.c (go_line_get_vpath_dash): renamed to
	go_line_dash_get_sequence.
	(go_line_vpath_dash_free): renamed to go_line_dash_sequence_free.
	(go_line_clip_vpath): removed.
	(go_line_dash_vpath): removed.
	(go_line_build_bpath): removed.
	(go_line_build_vpath): removed.

2007-08-06  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Fix tool rendering. Add gog_renderer_draw_selection_rectangle.

	* goffice/graph/gog-axis-line.c (gog_tool_select_axis_render): use
	gog_renderer_draw_selection_rectangle.
	* goffice/graph/gog-plot.c (gog_tool_move_plot_area_render): ditto.
	* goffice/graph/gog-view.c (gog_tool_select_object_render): ditto.
	* plugins/plot_pie/gog-pie.c (gog_tool_move_pie_render): ditto.
	* goffice/graph/gog-graph.c (gog_graph_view_render): don't push style
	here, that's handled in GogRenderer.
	* goffice/graph/gog-renderer.c
	(gog_renderer_draw_selection_rectangle): new.
	(gog_renderer_push_selection_style): removed.
	(gog_renderer_init), (gog_renderer_finalize): handle selection_style.

2007-08-06  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Fix clipping bug introduced by GOPath conversion.

	* goffice/graph/gog-renderer.c (gog_renderer_push_clip_rectangle):
	here.

	(_draw_rectangle): call _draw_shape directly.

2007-08-05  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Adapt renderer rectangle API to new style (draw, fill, stroke).

	* goffice/graph/gog-label.c (gog_text_view_render):
	gog_renderer_draw_sharp_rectangle is gog_renderer_draw_rectangle now.
	* goffice/graph/gog-legend.c (cb_render_elements): ditto.
	* goffice/graph/gog-outlined-object.c (gog_outlined_view_render):
	ditto.
	* goffice/graph/gog-plot.c (gog_tool_move_plot_area_render): use
	gog_renderer_stroke_rectangle.
	* goffice/graph/gog-view.c (gog_tool_select_object_render): ditto.
	* plugins/plot_pie/gog-pie.c (gog_tool_move_pie_render): ditto.
	* goffice/graph/gog-renderer.c (gog_renderer_get_rectangle_vpath):
	removed.
	(_draw_rectangle): use GOPath.
	(gog_renderer_draw_sharp_rectangle): removed.
	(gog_renderer_draw_rectangle): draw shar rectangle.
	(gog_renderer_stroke_rectangle): new.
	(gog_renderer_draw_grip): adapt to new API.
	* plugins/plot_radar/gog-radar.c (gog_rt_view_render): remove unused
	variables.

2007-08-05  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Use of go_path_ring_wedge for pie wedge rendering.

	* plugins/plot_pie/gog-pie.c (gog_pie_view_render): here.

2007-08-05  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Use of go_path_pie_wedge for bubble rendering.

	* plugins/plot_xy/gog-xy.c (bubble_draw_circle): here.

2007-08-05  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Finish conversion of GogGridLine to GOPath.

	* goffice/graph/gog-grid-line.c (fill_rectangle): removed.
	(gog_grid_line_xy_render): use GOPath. Group fill and strokes.

2007-08-05  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Convert GogAxisLine to GOPath. Emit axis ticks in one stroke, in order
	to reduce export file size. We should not have the same performance
	issue we had with libart.

	* goffice/graph/gog-axis-line.c (gog_tool_select_axis_render): use
	GOPath.
	(axis_line_render): ditto.

2007-08-05  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Convert the clipping API to GOPath. Drop the clip stack, that's not
	needed anymore.

	* goffice/graph/gog-renderer.c: here.
	(gog_renderer_push_clip_rectangle): new.
	* goffice/graph/gog-legend.c (gog_legend_view_render): use
	gog_renderer_push_clip_rectangle.
	* goffice/graph/gog-reg-curve.c (gog_reg_curve_view_render): ditto.
	* goffice/graph/gog-smoothed-curve.c (gog_smoothed_curve_view_render):
	ditto.
	* goffice/graph/gog-view.c (gog_view_render): ditto.
	* plugins/plot_barcol/gog-line.c (gog_line_view_render): ditto.
	* plugins/plot_surface/gog-surface.c (gog_contour_view_render): ditto.
	* plugins/plot_xy/gog-xy.c (gog_xy_view_render): ditto.
	* plugins/plot_radar/gog-radar.c (gog_rt_view_render): restore
	clipping.
	* goffice/utils/go-path.c (go_path_rectangle): don't change path
	options here. That's not consistent and a call for troubles.

2007-08-05  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Swith to GOPath API for ring wedge shapes. Improve size of exported
	graphs.

	* goffice/graph/gog-axis-line.c (axis_circle_render): use GOPath API.
	* goffice/graph/gog-grid-line.c (gog_grid_line_radial_render): ditto.
	(gog_grid_line_circular_render): ditto.
	* goffice/graph/gog-grid.c (gog_grid_view_render): ditto.
	* goffice/graph/gog-renderer.c (emit_line), (emit_outline),
	(emit_fill): clear current if !preserve on early exit.
	(_draw_shape): new.
	(gog_renderer_draw_shape), (gog_renderer_fill_shape),
	gog_renderer_stroke_shape): new.
	(emit_stroke): renamed to emit_line.
	(gog_renderer_get_ring_wedge_bpath): removed.
	(gog_renderer_draw_ring_wedge): removed.
	* goffice/utils/go-path.c (go_path_ring_wedge): always begin with a
	move_to.
	* plugins/plot_radar/gog-radar.c: add a default_style_has_fill
	property, like XY plots.
	(gog_rt_view_render): disable clipping for now.

2007-08-03  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Rename gog_renderer_serie_stroke and gog_renderer_serie_fill to
	gog_renderer_stroke_serie and gog_renderer_fill_serie.

	* goffice/graph/gog-reg-curve: here.
	* goffice/graph/gog-renderer.c: here.
	* plugins/plot_xy/gog-xy.c: here.
	* plugins/plot_radar/gog-radar.c: here.

2007-08-03  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/graph/gog-renderer.c (gog_renderer_serie_fill): accept NULL
	close_path.

2007-08-02  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Merge of GogRenderer and GogRendererCairo.

	* configure.in: explicitely require cairo, cairo-svg, cairo-pdf and
	cairo-ps 1.2.0.
	* goffice/graph/gog-renderer-cairo.[ch]: merge code in gog-renderer.
	* goffice/graph/gog-renderer-svg.[ch]: deleted.
	* goffice/graph/gog-renderer-gnome-print.[ch]: removed.
	* goffice/graph/gog-renderer-impl.h: removed.
	* goffice/graph/Makefile.am: update.
	* goffice/graph/gog-graph.c (gog_graph_export_image): GogRendererCairo
	doesn't exist anymore.
	(gog_graph_render_to_cairo): ditto.
	* goffice/graph/gog-renderer.c: merge cairo implementation.

2007-08-01  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Fill support for XY plots.
	Interpolation, drop lines and fill support for radar plots.

	* goffice/graph/gog-axis.c (gog_axis_map_is_inverted): new
	* goffice/graph/gog-chart.c: move GogChartMap code...
	* goffice/graph/gog-chart-map.c: ... here.
	(get_extremes_2D): new.
	(make_path_linear): new.
	(make_path_spline): new.
	(xy_make_path_step): new.
	(xy_make_path): new.
	(xy_make_close_path): new.
	(polar_make_path_step): new.
	(polar_make_path): new.
	(polar_make_close_path): new.
	(gog_chart_map_make_path): new.
	(gog_chart_map_make_close_path): new.
	* goffice/graph/gog-reg-curve.c (gog_reg_curve_view_render): use
	gog_chart_make_path and GOPath API.
	* goffice/graph/gog-renderer-cairo.c (emit_stroke): new.
	(emit_outline): new.
	(emit_fill): new.
	(path_raw_move_to): new.
	(path_raw_line_to): new.
	(path_snap_even_move_to),
	(path_snap_even_line_to),
	(path_snap_odd_move_to),
	(path_snap_odd_line_to): new.
	(path_interpret): new.
	(fill_path_line_to): new.
	(fill_path_close_path),
	(fill_path_interpret): new.
	(gog_renderer_cairo_serie_stroke): new.
	(gog_renderer_cairo_serie_fill): new.
	* goffice/graph/gog-renderer.c (gog_renderer_serie_stroke),
	(gog_renderer_serie_fill): new.
	* goffice/graph/gog-series.c: add a GogSeriesFillType property.
	(gog_series_get_data): new.
	(gog_series_get_xy_data): use gog_series_get_data.
	(gog_series_get_xyz_data): new, using gog_series_get_data.
	(gog_series_get_fill_type), (gog_series_set_fill_type): accessor for
	GogSeries::fill_type property.
	(gog_series_populate_fill_type_combo),
	(gog_series_get_fill_type_from_combo): convenience functions for use in
	GogSeries editors.
	* goffice/graph/gog-style-prefs.glade: move marker editor in its own
	page.
	* goffice/graph/gog-style.c (outline_init): register outline_box
	widget.
	(gog_style_apply_theme), (gog_style_fill_sax_save),
	(gog_style_fill_load), (gog_style_sax_load_fill),
	(cb_fill_type_changed): fill has an auto_type flag now.
	(marker_init): marker editor has its own page now.
	(gog_style_is_fill_visible): new.

	Actually use GOPath API. Don't use it as an object storage, just
	paths.

	* goffice/utils/go-path.c: switch to fixed size data buffers.
	(go_path_get_options): new.
	(go_path_add_data): renamed to go_path_add_points.
	(go_path_move_to), (go_path_line_to), (go_path_curve_to): clamp here.
	(go_path_ring_wedge): new.
	(go_path_pie_wedge): new.
	(go_path_new_rectangle): removed.
	(go_path_add_style): removed.
	(go_path_interpret): new.

	* plugins/plot_radar/gog-radar.c (gog_rt_view_render): implement
	interpolation and fill support.
	(radial_drop_lines_can_add), (radial_drop_lines_post_add),
	(radial_drop_lines_pre_remove): new.
	(gog_rt_series_populate_editor): new. Editor for FillType Property.
	(gog_rt_series_class_init): sets relevant FillType values.
	Add drop lines support.
	* plugins/plot_radar/gog-rt-series-prefs.glade: new.

	* plugins/plot_xy/gog-xy-series-prefs.glade: add FillType editor.
	* plugins/plot_xy/gog-xy.c: add a default-style-has-fill property, for
	compatibility with the previous behaviour wher xy plots didn't have
	fill enabled.
	(gog_xy_view_render): implement fill support.
	(gog_xy_series_update): use gog_series_get_xy_data and
	gog_series_get_xyz_data.

2007-08-11  Christian Neumair <cneumair@gnome.org>

	* goffice/graph/gog-object-xml.c: (gogo_prop_end): Pass instance type
	to gsf_xml_gvalue_from_str() instead of fundamental type. Required for
	correct parsing of enum/flag-derived types.

2007-08-10  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-file.c (go_shell_argv_to_glib_encoding):
	NULL-terminate argv array.  Don't bother setting argc.
	(go_shell_argv_to_glib_encoding_free): Use g_strfreev.

2007-08-10  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/component/go-component.c: removed all rendering functions
	and replace by go_component_render using a cairo_t*.
	* goffice/component/go-component.h: ditto.

2007-08-10  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/cut-n-paste/foocanvas/Makefile.am: fix headers path
	from 0.4 to 0.5.
	* goffice/goffice.c: (libgoffice_init): rename dll (0-4->0-5).

2007-08-10  Jody Goldberg <jody@gnome.org>

	* goffice/graph/Makefile.am : remove gog-renderer-gnome-print
	* libgoffice-0.5.pc.in : bump from 0.4 -> 0.5 and drop gnomeprint
	* goffice.mk : ditto.
	* configure.in : drop gnomeprint req

2007-08-10  Jody Goldberg <jody@gnome.org>

	* configure.in : Post release bump to 0.5.0

2007-08-10  Jody Goldberg <jody@gnome.org>

	* Release 0.4.3	(Branch point for 0.5.0)

2007-08-07  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-undo.c (go_undo_combine): New function.

2007-08-07  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Add gog_graph_render_to_cairo_vector for better gnumeric printing.
	Fix for #381682.

	* goffice/graph/gog-graph.[ch]: here.

2007-08-05  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Drop use-splines as soon as one of the series has interpolation
	different from GO_LINE_INTERPOLATION_SPLINE.

	* plugins/plot_xy/gog-xy.c (gog_xy_get_property): here.

2007-08-05  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Put back goffice 0.2.x GogXYPlot::use-spline property.

	* plugins/plot_xy/gog-xy.c: here.

2007-08-03  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Move interpolation property from GogStyle to GogSeries.

	* goffice/graph/gog-plot.c (role_series_post_add): sets line
	interpolation of child series.
	(gog_plot_set_property), (gog_plot_get_property),
	(gog_plot_class_init), (gog_plot_init): handle interpolation property.
	* goffice/graph/gog-series.c (gog_series_set_property),
	(gog_series_get_property), (gog_series_class_init), (gog_series_init):
	handle line interpolation property.
	(gog_series_populate_editor): add a line property selector if
	GogSeriesClass::has_interpolation == TRUE. The selector is added to
	the GogStyle::line editor.
	* goffice/graph/gog-style-prefs.glade: move line intertpolation
	selector...
	* goffice/graph/gog-series-prefs.glade: ...here.
	* goffice/graph/gog-style.c (line_init): register line_box
	widget for later extension.
	(cb_line_interpolation_changed): removed.
	(interp_init): removed.
	(gog_style_interpolation_load): removed.
	(gog_style_interpolation_sax_save): removed.
	(gog_style_sax_load_interpolation): removed.
	* plugins/plot_xy/gog-xy.c: remove use_splines and interpolation
	properties.
	(gog_xy_view_render): line interpolation is a GogSeries property now.

2007-07-29  J.H.M. Dassen (Ray) <jdassen@debian.org>

	* configure.in: Resync ALL_LINGUAS with po files.

2007-07-24  Jody Goldberg <jody@gnome.org>

	* goffice/gtk/goffice-gtk.c (go_gtk_window_set_transient) : minor
	  coverity report caused by some #ifndef WITH_GNOME.

2007-07-24  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-line.c (go_line_interpolation_as_str): Don't
	overrun line_interpolations array.

2007-07-23  Jody Goldberg <jody@gnome.org>

	* configure.in : post release bump

2007-07-23  Jody Goldberg <jody@gnome.org>

	* Release 0.4.2

2007-07-18  Jody Goldberg <jody@gnome.org>

	* goffice/graph/gog-guru.c (gog_guru_get_help_button) : a hook to
	  work around the docs still living in gnumeric. [#394181]

2007-07-17  Jody Goldberg <jody@gnome.org>

	From Coverity.
	* goffice/utils/go-glib-extras.c (go_guess_encoding) : Avoid crash if
	  libxml2 returns ERROR or NONE when guessing encoding.

2007-07-16  Jody Goldberg <jody@gnome.org>

	* goffice/cut-n-paste/foocanvas/foo-canvas-text.c
	(foo_canvas_text_update) : round the bounds rather than using floor
	  and ceil.  The disparity would exacerbate rounding errors caused by
	  scaling, and would result in 1 pixel errors.
	* goffice/cut-n-paste/foocanvas/foo-canvas-pixbuf.c
	(foo_canvas_pixbuf_update) : ditto.  The errors where especially
	noticable here because images would get scaled. [#314864]
	* goffice/cut-n-paste/foocanvas/foo-canvas.c
	(foo_canvas_item_accessible_get_item_extents) : ditto.

2007-07-14  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/graph/gog-object.c (gog_editor_register_widget): new.
	(gog_editor_get_registered_widget): new.

2007-07-15  Jody Goldberg <jody@gnome.org>

	* goffice/app/file.c (go_file_saver_finalize) : do not leak the mime
	  type.

2007-07-13  Jody Goldberg <jody@gnome.org>

	* configure.in : remove GTK_DISABLE_DEPRECATED.  gtk trunk has
	  deprecated GtkTooltips.

2007-07-11  Jody Goldberg <jody@gnome.org>

	* configure.in : post release bump

2007-07-10  Jody Goldberg <jody@gnome.org>

	* Release 0.4.1

2007-07-03  Jody Goldberg <jody@gnome.org>

	* goffice/goffice.c (libgoffice_init) : on win32 qualify icon dir with
	  the version to match the installation dir in configure.in and fix
	  the dll name. [#442707]

2007-07-01  Jody Goldberg <jody@gnome.org>

	Patch from Jean for 340552
	* goffice/graph/gog-graph.c (gog_graph_finalize) : free the new
	  data_hash.
	(gog_graph_init) : init the data hash.
	(gog_graph_get_data) : use the hash rather than quarks.
	(gog_graph_ref_data) : ditto.
	(gog_graph_unref_data) : ditto.

2007-07-01  Jody Goldberg <jody@gnome.org>

	* configure.in : remove req for pangoft.  No need for that anymore.

2007-07-01  Jody Goldberg <jody@gnome.org>

	Patch from Andreas Kohler.
	* goffice-win32.mk :  portability patch for [#367785]

2007-06-21  Jody Goldberg <jody@gnome.org>

	* configure.in : export GOFFICE_USE_SVG_RENDERER.
	* goffice/graph/gog-renderer.c : honour it here.

2007-06-17  J.H.M. Dassen (Ray) <jdassen@debian.org>

	* goffice/graph/gog-object-xml.c (gog_object_write_xml_sax): fixed
	signedness issue spotted with help of sparse.
	* goffice/graph/gog-view.c (gog_view_queue_resize): Made do-while into
	a compound statement. (Silences sparse warning)
	* goffice/graph/gog-style.c: Be more consistent in use of enum types.
	* goffice/component/go-component-factory.c
	(go_components_get_mime_types): Fixed non-ANSI function declaration by
	specifying "void" for the parameter list, rather than leaving it
	unspecified.

2007-06-17  Jody Goldberg <jody@gnome.org>

	* goffice/graph/gog-object.c (gog_object_add_by_role) : Add error
	  handling for unknown types.

	* goffice/graph/gog-object-xml.c (gogo_dim_start) : handle NULL
	  objects from preceding errors.
	(gogo_dim_end) : ditto.
	(gogo_prop_start) : ditto.
	(gogo_end) : ditto.
	(gogo_start) : ditto.  Make it clear that all paths through this must
	  add something to the obj_stack.

2007-06-12  Jody Goldberg <jody@gnome.org>

	* goffice/utils/go-geometry.c (go_direction_get_type) : new.
	(go_direction_is_forward) : new.
	(go_direction_is_horizontal) : new.

2007-06-12  Jody Goldberg <jody@gnome.org>

	* goffice/app/file.c (go_file_saver_for_file_name) : fix cut-n-paste-o
	  in docs.

2007-06-06  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/graph/gog-chart.c (calc_circle_parameters): fix rotation of
	circular axis for theta_max > 360°.

2007-06-05  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_format_execute): Handle OP_STRING.
	(handle_common_token): Issue OP_STRING ofr TOK_STRING.  Fixes
	#444247.

2007-05-25  Morten Welinder  <terra@gnome.org>

	* goffice/app/file.c (go_file_saver_level_get_type,
	go_file_saver_scope_get_type): New functions.
	(go_file_saver_new): Use object properties.
	(go_file_saver_class_init): Install object properties, setter, and
	getter.
	(go_file_saver_setup): Remove.  All callers now use object
	properties.

	* goffice/app/go-plugin-service.c
	(plugin_service_file_saver_read_xml): Major cleanup.  Handle mime
	type too.
	(go_plugin_file_saver_new): Use object properties for the saver.
	Set mime type too.
	(parse_format_level_str): Remove.  xml_node_get_enum can do that.

2007-05-16  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-style.c: (cb_font_changed): set the
	attributes before retrieving the GOFont.

2007-05-09  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/graph/gog-axis.c (gog_axis_view_size_allocate): fix manual
	position of axis labels.

2007-05-03  Morten Welinder <terra@gnome.org>

	* configure.in: Post-release bump.

2007-05-03  Morten Welinder <terra@gnome.org>

	* Release 0.4.0

2007-05-01  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-cspline.c: (go_cspline_get_values),
	(go_cspline_get_derivs), (go_cspline_get_integrals):
	constified arguments and fixed the code.
	* goffice/utils/go-cspline.h: constified arguments.

2007-04-27  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-image.c: (cairo_to_pixbuf): fixed conversion
	on bigendian machines [#432532].

2007-04-26  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/Makefile.am: added new cubic spline support.
	* goffice/utils/go-cspline.c: ditto.
	* goffice/utils/go-cspline.h: ditto.
	* goffice/utils/go-rangefunc.c: (go_range_increasing): new
	convenience function.
	* goffice/utils/go-rangefunc.h: ditto.

2007-04-21  Morten Welinder <terra@gnome.org>

	* configure.in: Post-release bump.

2007-04-21  Morten Welinder <terra@gnome.org>

	* Release 0.3.8

2007-04-20  Morten Welinder  <terra@gnome.org>

	* goffice/app/go-cmd-context.c (go_cmd_context_error_invalid):
	Translate.

2007-04-19  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-format-sel.c (find_builtin): Handle
	GO_FORMAT_UNKNOWN without crashing.  [#431256]

2007-04-11  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-glib-extras.c (go_guess_encoding): Actually
	verify that we get good UTF-8.  Fixes #401588.

2007-04-10  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-format-sel.glade: Fix minor grammar issue.  Fixes
	#428331.

2007-04-02  Morten Welinder  <terra@gnome.org>

	* goffice/utils/regutf8.c (go_regcomp): Undo last change.

2007-03-29  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Fix alignement of rotated labels. #343507

	* goffice/graph/gog-axis-line.c (axis_line_get_bbox): compute the
	correct anchor.
	(axis_line_render): ditto.
	* goffice/graph/gog-grid.c (gog_grid_view_render):
	GOG_AXIS_SET_XY_BUBBLE has a background.
	* goffice/graph/gog-renderer-cairo.c (gog_renderer_cairo_draw_text):
	label rotation angle in the same direction as the canvas.
	* goffice/graph/gog-renderer-gnome-print.c
	(gog_renderer_gnome_print_draw_text): ditto.
	* goffice/graph/gog-renderer-svg.c (gog_renderer_svg_draw_text):
	ditto.
	* goffice/graph/gog-renderer.c (gog_renderer_get_text_OBR): ditto.
	* goffice/utils/go-geometry.c (go_geometry_test_OBR_overlap):
	simplify.
	(go_geometry_calc_label_anchor): new.
	(go_geometry_calc_label_position): add an acnhor parameter.

	* goffice/utils/datetime.c: fix compilation warning.

2007-03-28  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-format-sel.c (generate_number, generate_format,
	study_format): Handle quoted dollars too.  Fixes part of #423603.

2007-03-28  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-regression.c: add namespace to names missing it.
	* goffice/utils/go-regression.h: ditto.
	* plugins/reg_linear/gog-lin-reg.c: use new names in go-regression.h
	* plugins/reg_linear/gog-lin-reg.h: ditto.

2007-03-26  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-font.c (go_font_metrics_new): Try even more
	kinds of weird spaces.

	* goffice/utils/regutf8.c (go_regcomp): Unicode-normalize pattern.

2007-03-13  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_format_execute)
	[OP_NUM_FRACTION_SIMPLIFY_PI]: Simplify "n\pi/1" too.  #417981.

2007-03-10  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/Makefile.am: removed $(BUILT_SOURCES) from
	libgoffice_0_la_SOURCES. [#354874]

2007-03-10  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-font.c (go_font_metrics_new): Don't pick a
	space that is too tall, see bug 416526.

2007-03-08  Morten Welinder  <terra@gnome.org>

	* goffice/utils/formats.c (go_format_currencies): Translate
	"None".

	* goffice/gtk/go-combo-text.c (go_combo_text_set_text,
	go_combo_text_get_entry, go_combo_text_add_item): Add
	preconditions.

2007-03-04  Morten Welinder  <terra@gnome.org>

	* configure.in: Post-release bump.

2007-03-04  Morten Welinder <terra@gnome.org>

	* Release 0.3.7

2007-03-03  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* plugins/plot_boxes/gog-boxplot.c (gog_box_plot_view_render): fix
	boxplot rendering (blur at fill edges). Remove commented code.
	* goffice/graph/gog-renderer-cairo.c (grc_line_size): round and not
	floor, that more close to vector rendering.
	(grc_path_raw): fix even width check.
	(grc_draw_path): add a kludge in order to completly fix #403403.
	(gog_renderer_cairo_push_style): fix rectangular clip region.
	* goffice/graph/gog-legend.c (cb_render_elements): fix line sample
	rendering.
	(gog_legend_view_render): sets the clip region to view residual...
	(gog_legend_view_class_init): ... not view allocation.

2007-03-02  Morten Welinder  <terra@gnome.org>

	* goffice/graph/gog-axis-line.c (axis_line_render): If we have to
	skip entries because there is no room, skip regularly.  Fixes
	#413660.

2007-03-02  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/graph/gog-style.c (gog_style_line_sax_save): increase float
	format precision.
	(gog_style_gradient_sax_save): ditto.
	(gog_style_text_layout_sax_save): ditto.
	* goffice/graph/gog-error-bars.c (gog_error_bar_persist_sax_save):
	ditto.

2007-03-01  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_format_toggle_1000sep):
	Re-implement.

	* configure.in: Unconditionally require a proper system PCRE
	library.

2007-02-27  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/goffice-graph.h: add bubble axis.
	* goffice/graph/gog-axis-line.c: fix various virtual axis issues.
	* goffice/graph/gog-axis.c: (gog_axis_populate_editor): don't
	add style related pages forvirtual axis.
	* goffice/graph/gog-chart.c: implement bubble axis adding and
	fix various related issues.
	* plugins/plot_barcol/gog-1.5d.c: (gog_plot1_5d_axis_get_bounds):
	removed a warning since various axis sets might be used when using
	mixed plots.

2007-02-26  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_format_is_date_for_value): Remove.
	(go_format_as_XL, go_format_new_from_XL): Drop localization
	argument.  All callers changed.

2007-02-25  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_format_parse_number_fraction):
	Reinstate pi fraction extention.
	(go_format_parse_number_E): Simplify mantissa when requested.

2007-02-24  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-font.c (go_font_metrics_new): Acquire
	information and various space characters too.

	* goffice/utils/go-format.c (go_format_execute) [OP_DATE_SPLIT]:
	If date is not valid, don't request year etc.
	(go_format_execute) [OP_FILL]: When space filling, fine-tune with
	thin spaces.

2007-02-23  Morten Welinder  <terra@gnome.org>

	* goffice/utils/formats.c (go_currency_date_format_shutdown): Fix
	memory handling.

2007-02-23  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-format-sel.c: Make truncation UTF-8 safe.  Make
	function independent of go-format.c internals.
	(fillin_negative_samples): Use GOFormat instead of doing things by
	hand.
	(study_format): Identify currency.

	* goffice/utils/go-format.c: Total rewrite.
	* goffice/utils/formats.c: Remove various unused stuff.

2007-02-22  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_xy/Makefile.am: add new glade file.
	* plugins/plot_xy/gog-xy-color-prefs.glade: new glade file.
	* plugins/plot_xy/gog-xy.c: allow hiding data outside of
	the color axis bounds.
	* plugins/plot_xy/gog-xy.h: ditto.

2007-02-21  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-format-sel.c (generate_format): Generate formats
	here.
	(fmt_dialog_enable_widgets): Recognize builtins here.

	* goffice/utils/go-glib-extras.c (go_string_append_c_n): New
	function.

2006-02-21  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Fix calls to g_object_class_install_property.
	http://bugzilla.gnome.org/show_bug.cgi?id=172866

2006-02-21  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Restrict legend sample line width to sane values, like what we do for
	markers.
	http://bugzilla.gnome.org/show_bug.cgi?id=404819

	* goffice/utils/go-line.c: add a sequence length to dash descriptors.
	(go_line_dash_get_length): new.
	* goffice/graph/gog-renderer.c (gog_renderer_get_hairline_width_pts):
	new.
	* goffice/graph/gog-renderer-cairo.c: provide an implemenation of
	hairline_pts.
	* goffice/graph/gog-legend.c: use defines for legend element layout.
	(cb_swatch_scale): compute the scale used for restricting sample width
	in order to always shows correctly the dashed lines.
	(cb_render_elements): apply line width scale.

2007-02-20  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-locale.c (go_locale_get_time_format): New
	function.

2007-02-20  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_xy/gog-xy.c: (gog_xy_color_plot_update),
	(gog_xy_color_plot_axis_get_bounds): use Color axis, not Pseudo3d.

2006-02-18  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Fix incorrect saving of position (which happens when role default
	position is not the same as the g_param_spec one).
	http://bugzilla.gnome.org/show_bug.cgi?id=345836

	* goffice/graph/gog-object-xml.c (gog_object_write_property_sax): use
	gog_object_is_default_position_flags.
	* goffice/graph/gog-object.c (gog_object_class_init): sets the
	GOG_PARAM_POSITION flag for "compass", "alignment" and "anchor".
	(gog_object_is_default_position_flags): new.

2006-02-17  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Dashed line improvements. More line styles.
	http://bugzilla.gnome.org/show_bug.cgi?id=403403

	* goffice/gtk/go-line-selector.c (go_line_dash_palette_render_func):
	sharper rendering.
	(go_line_dash_selector_new): 3 columns layout.
	* goffice/utils/go-lines.c: some more line styles.
	(go_line_dash_vpath): sharper dashed line rendering.
	* goffice/graph/gog-renderer-cairo.c (grc_line_size): round only for
	sharp rendering.
	(grc_path_raw): new.
	(grc_path_sharp): new. Sharpening happens here now.
	(grc_draw_path): takes a sharp parameter. Use square line cap for
	small width.
	(grc_draw_polygon): ditto.
	(gog_renderer_cairo_line_size): takes a sharp parameter.
	(gog_renderer_cairo_draw_path): ditto.
	(gog_renderer_cairo_draw_polygon): ditto.
	(draw_path): ditto.
	(gog_renderer_cairo_sharp_path): removed.
	* goffice/graph/gog-renderer-gnomep-print.c: add sharp parameter.
	(gog_graph_print_to_gnome_print): set line cap to round.
	* goffice/graph/gog-legend.c (gog_legend_view_size_request): makes the
	line sample longer.
	(cb_render_elements): ditto.
	* goffice/graph/gog-renderer.c: add a sharp parameter to draw_path,
	draw_polygon and line_size virtuals.
	(line_size): new.
	* goffice/graph/gog-renderer.h: double the width of the hairline for
	vector formats.
	* goffice/graph/gog-renderer-svg.c: stroke with round line cap. Add
	sharp parameter.

2007-02-16  Morten Welinder <terra@gnome.org>

	* Release 0.3.6

2007-02-16  Morten Welinder  <terra@gnome.org>

	* goffice/utils/datetime.c (go_date_month_name): Trim terminating
	spaces in the result.

2007-02-16  Jean Brefort  <jean.brefort@normalesup.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=408520
	* plugins/reg_linear/gog-exp-reg.c:
	(gog_exp_reg_curve_get_equation): fix equation.

2007-02-15  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-locale.c (go_locale_month_before_day): 'M' is
	minutes, so ignore it.
	(go_locale_get_date_format): New function.

2007-02-12  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-rangefunc.c: copied some new functions
	from gnumeric.
	* goffice/utils/go-rangefunc.h: ditto.
	* plugins/plot_boxes/gog-boxplot.c: find fractiles using
	new functions in go-rangefunc.*.

2007-02-09  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-math.c (go_ascii_strtod, go_ascii_strtold): New
	functions.

2007-02-07  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_format_str_delocalize): Don't
	overrun source string on unbalanced quote.

2006-02-06  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/graph/gog-renderer-pixbuf.[ch]: removed.

2006-02-06  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Disable pango markup for all user entered texts.
	http://bugzilla.gnome.org/show_bug.cgi?id=403209

	* goffice/graph/gog-renderer.c (gog_renderer_draw_text):
	remove the unused result parameter and add a new use_markup flag.
	(gog_renderer_get_text_OBR): add new use_markup flag.
	(gog_renderer_get_text_AABR): ditto.
	* goffice/graph/gog-renderer-cairo.c: ditto.
	* goffice/graph/gog-renderer-gnome-print.c: ditto.
	* goffice/graph/gog-renderer-svg.c: ditto.

	* goffice/graph/gog-label.c (gog_text_view_size_request): don't use
	pango markup.
	(gog_text_view_render): ditto.
	* goffice/graph/gog-legend.c (cb_size_elements): ditto.
	(cb_render_elements): ditto.

	* goffice/graph/gog-axis-line..c (axis_line_get_bbox): use pango
	markup (for exponent of log axes).
	(axis_line_render): ditto.
	(axis_circle_get_bbox): ditto.
	(axis_circle_render): ditto.
	* goffice/graph/gog-axis.c (map_discrete_calc_ticks): but escape user
	text here.

	* goffice/graph/gog-grid.c (gog_grid_view_render): handle new
	GogAxisSet type.

2007-01-30  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_format_is_text): Typo.

2007-01-24  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-locale.[ch]: New files, extracted from
	go-format.[ch].  Grand renaming.

	* goffice/utils/go-format.c (go_render_number): Make this static.

2007-01-22  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (type GOFormat): Make this private.
	*/*.c: deal with the fallout.

2007-01-21  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (cb_attrs_as_string): Fix typo
	"strikthough" and add underline styles "low" and "error".
	(go_format_parse_markup): Add "low" and "error" here too.

2007-01-20  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=397679
	* goffice/graph/gog-renderer-cairo.c (gog_renderer_cairo_update) :
	  Don't freak everything out if we attempt to render with w/h < 1.
	  That should not happen, but if it gets through, avoid a nan
	* goffice/graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_update) :
	  ditto.

2007-01-20  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-guru.c (cb_plot_family_menu_create): fix recently
	introduced bug.

2007-01-09  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-math.c (go_strtod): Eliminate the need to reset
	errno before calling this.

2007-01-08  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-math.c (go_strtod, go_strtold): New functions.

2007-01-05  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_format_is_date,
	go_format_is_date_for_value): New functions.

2007-01-04  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-format-sel.c (fmt_dialog_enable_widgets): When
	displaying a widget, display its parents too.  This kills the need
	for all the silly box widgets.

	* goffice/utils/go-format.h (GOFormatDetails): Eliminate
	date_has_days and date_has_months.  No-one uses them.

2006-01-03  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/graph/gog-renderer-cairo.c (gog_renderer_cairo_draw_text):
	Don't scale text by using pango_cairo_context_set_resolution, but use
	cairo_scale instead. Much more WYSIWYG now.
	(gog_renderer_cairo_get_text_OBR): ditto.

2006-12-06  Jean Brefort  <jean.brefort@normalesup.org>

	* pixmaps/color.xpm: new pixmap.
	* pixmaps/chart_colored_1_1.png: ditto.
	* pixmaps/chart_colored_1_1.svg: ditto.

2006-12-29  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/graph/gog-chart.c (gog_chart_get_cardinality): use full
	cardinality for plot index offset. The style of a serie do not
	depend on the visibility of another serie.
	* goffice/graph/gog-legend.c (cb_render_elements): use a counter
	instead of relying on first callback argument.

2006-12-28  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/graph/gog-axis-line.c (cb_cross_axis_changed): clear GValue
	struct before using it, and unset it before leaving.
	* goffice/graph/gog-chart.c: typo.
	* goffice/graph/gog-error-bar-prefs.glade: layout fix.
	* goffice/graph/gog-error-bar.c (cb_color_changed): color selector is a
	GOSelector now.
	(cb_display_changed): display selector is a standard GtkComboBox now.
	(gog_error_bar_prefs): ditto.
	* goffice/graph/gog-style-prefs.glade: layout fixes.
	* pixmaps/bar*.png: convert to 16x16 images.

2006-12-27  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-math.c (go_continued_fraction): Use integer
	operations as intended.

	* goffice/utils/go-format.c (go_format_number): Check for improper
	fraction overflows.

2006-12-26  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c: Merge format.c in here.

2006-12-25  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/reg_logfit/gog-logfit.c: (gog_log_fit_curve_type_name): fixed
	comment.
	* po/POTFILES.in: add missing files.

2006-12-22  Morten Welinder  <terra@gnome.org>

	* goffice/utils/format.c (go_format_number): Improve fractions a
	tiny bit.  Prevent reading beyond allocated memory.

2006-12-20  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_format_value_gstring): Take colour
	argument too and pass it to go_style_format_find_entry.  All
	callers changed.

2006-12-19  Morten Welinder  <terra@gnome.org>

	* goffice/utils/format.c (go_format_number): Handle 'E' right and
	fix a few more issues with month-vs-minutes handling.

2006-12-18  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_style_format_find_entry): New
	static function, mostly from Gnumeric.
	(go_style_format_condition): Generalize.
	(go_format_value_gstring): Generalize to handle layouts, not just
	strings.  Generalize to handle non-number values.  All callers
	changed.
	* Makefile.am: Don't install format-impl.h

2006-12-17  Jody Goldberg <jody@gnome.org>

	* configure.in : post release bump

2006-12-17  Jody Goldberg <jody@gnome.org>

	* Release 0.3.5

2006-12-15  Morten Welinder  <terra@gnome.org>

	* goffice/utils/format.c (append_second): Handle sss etc. right.
	(go_format_value): Improve m-as-minutes vs. m-as-month situation.
	Fix handling of "e" and "E" in date contexts.

2006-12-14  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format.c (go_format_value_gstring): Return
	error code.
	(go_format_value): Simplistic handling of errors.

	* goffice/utils/format.c (append_day): Handle crazy number of ds.
	(append_thai_year): New function.
	(go_format_number): Handle 'b', 'g', 'G'.  Return error code.

	* goffice/utils/go-font.c (go_font_metrics_new): Get the width of
	"#" too.

2006-12-11  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-glib-extras.c (go_str_compare): Simplify and
	handle the eq case fast.

2006-12-10  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-undo.h: supply a data pointer to undo operations.
	* goffice/utils/go-undo.c (go_undo_undo_with_data): New function.
	(go_undo_unary_new): Implement properly.

2006-12-09  Jody Goldberg <jody@gnome.org>

	* goffice/graph/gog-style.c (gog_style_sax_load_*) : Pass in the
	  GogStyle as the user_state rather than using
	  gog_xml_read_state_get_obj.  This allows the parser to be used
	  externally by code (gnumeric sheet objects) that do not have the
	  GogObject parser state.

2006-12-07  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/graph/gog-legend.c (gog_legend_view_size_request): Fix
	legend layout when there's no serie to display. [#382354]
	* goffice/graph/gog-chart.c (gog_chart_get_cardinality): update plot
	cardinality before calling gog_plot_get_cardinality.
	* goffice/graph/gog-plot.c (gog_plot_get_cardinality): move update and
	cache...
	(gog_plot_update_cardinality): here. [#382663]

2006-12-07  Morten Welinder  <terra@gnome.org>

	* goffice/utils/regutf8.c (go_regexec): Use g_try_new and require
	glib 2.8 (as libgsf already does).

2006-12-06  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-style.c: (gog_style_persist_prep_sax): register
	STYLE_INTERPOLATION instead of a second STYLE_LINE. [#382862]

2006-12-05  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Fix markers in PDF and PS export.

	* goffice/graph/gog-renderer-cairo.c (grc_draw_marker): new.
	(grc_get_marker_surface): use grc_draw_marker.
	(gog_renderer_cairo_draw_marker): don't use a cached cairo surface for
	marker rendering when exporting to PDF and PS.
	(gog_renderer_cairo_export_image): ditto.

2006-12-04  Jody Goldberg <jody@gnome.org>

	* configure.in : post release bump

2006-12-03  Jody Goldberg <jody@gnome.org>

	* Release 0.3.4

2006-12-01  Christian Neumair  <chris@gnome-de.org>

	* goffice/graph/gog-object-xml.c: (gog_object_set_arg_full),
	(gog_object_write_property_sax):
	Pass actual property type to gsf_xml_gvalue_from_str() instead of its
	fundamental type. Also persist enums and flags, and bail if
	persistance failed.

2006-11-29  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/gtk/go-color-selector.c:  add go_color_selector_set_allow_alpha.
	* goffice/gtk/go-color-selector.h: ditto.

2006-11-27  Morten Welinder  <terra@gnome.org>

	* */*.c: Renaming of format_ symbols and a few others.

2006-11-25  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-undo.[ch]: New files.

2006-11-19  Jon K Hellan  <hellan@acm.org>

	* goffice/graph/gog-chart.c (gog_chart_map_2D_to_view): void
	function was returning value.

	* goffice/graph/gog-data-set.c (gog_dataset_dims): Ditto.

2006-11-13  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-renderer-cairo.c: (gog_renderer_cairo_update):
	fixed a memory leak.

2006-11-12  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/gtk/go-graph-widget.c: add horizontal and vertical
	resolution properties so that go_graph_set_size can be called with
	the size in pts.

2006-11-11  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_surface/gog-surface.c: support inverted axis [#372969]
	and enhance axis bounds issues.

2006-11-04  J.H.M. Dassen (Ray) <jdassen@debian.org>

	* goffice/component/go-component-factory.c (go_mime_type_free),
	  goffice/component/go-component.c (go_component_set_property, go_component_finalize),
	  goffice/data/go-data-simple.c (go_data_scalar_val_finalize, go_data_vector_str_finalize),
	  goffice/graph/gog-plot.c (gog_plot_finalize, gog_plot_set_property),
	  goffice/graph/gog-reg-curve.c (gog_reg_curve_finalize),
	  goffice/graph/gog-smoothed-curve.c (gog_smoothed_curve_finalize),
	  goffice/utils/go-image.c (go_image_set_property, go_image_finalize),
	  goffice/utils/go-regression.c (go_regression_stat_destroy),
	  plugins/plot_barcol/gog-line.c (gog_line_series_update, gog_line_series_finalize),
	  plugins/plot_boxes/gog-boxplot.c (gog_box_plot_update),
	  plugins/plot_boxes/gog-histogram.c (gog_histogram_plot_update, gog_histogram_plot_series_finalize),
	  plugins/plot_surface/gog-surface.c (gog_contour_plot_finalize),
	  plugins/plot_surface/xl-surface.c (get_y_vector, xl_contour_plot_finalize),
	  plugins/reg_linear/gog-lin-reg.c (gog_lin_reg_curve_update, gog_lin_reg_curve_build_values, gog_lin_reg_curve_set_property, gog_lin_reg_curve_finalize),
	  plugins/reg_linear/gog-log-reg.c (gog_log_reg_curve_build_values),
	  plugins/reg_linear/gog-polynom-reg.c (gog_polynom_reg_curve_build_values),
	  plugins/reg_logfit/gog-logfit.c (gog_log_fit_curve_update),
	  plugins/smoothing/gog-exp-smooth.c (gog_exp_smooth_update),
	  plugins/smoothing/gog-moving-avg.c (gog_moving_avg_update):
	  simplified as g_free handles NULL properly. Fixes #369662.

2006-11-06  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/gtk/go-color-selector.c (go_color_selector_new): adapt
	to new go_palette_new signature.
	* goffice/gtk/go-gradient-selector.c (go_gradient_selector_new):
	ditto.
	* goffice/gtk/go-marker-selector.c (go_marker_selector_new): ditto.
	* goffice/gtk/go-pattern-selector.c (go_pattern_selector_new): ditto.
	* goffice/gtk/go-line-selector.c (go_line_dash_selector_new): ditto.
	(go_line_dash_palette_get_tooltip_func): new.
	* goffice/gtk/go-palette.c (go_palette_init): init tooltips object.
	(go_palette_menu_item_new): add a tooltip using user get_tooltip
	function.
	(go_palette_new): add a new argument defining a get_tooltip callback.
	* goffice/utils/go-line.c (go_line_dash_as_label): new.

2006-11-06  Morten Welinder  <terra@gnome.org>

	* goffice/utils/format.c (go_format_number): Handle "dd.mm.yyyy".

2006-11-05  Jody Goldberg <jody@gnome.org>

	* configure.in : Post release version bump

2006-11-05  Jody Goldberg <jody@gnome.org>

	* Release 0.3.3

2006-11-04  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_pie/gog-pie.c:
	(gog_pie_plot_set_default_separation): reimplement accidently removed.

2006-11-03  Morten Welinder  <terra@gnome.org>

	* goffice/utils/formats.c (cell_format_is_time,
	cell_format_is_date): New functions.
	(go_format_classify): Use above functions.  Partial fix for
	#370183.

2006-11-02  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_barcol/gog-1.5d.c: use GOFFICE_WITH_GTK
	instead of WITH_GTK. [#368789]
	* plugins/plot_barcol/gog-minmax.c: ditto.
	* plugins/plot_pie/gog-pie.c: ditto.
	* plugins/smoothing/gog-exp-smooth.c: ditto.
	* plugins/smoothing/gog-moving-avg.c: ditto.

2006-10-26  Morten Welinder  <terra@gnome.org>

	* goffice/app/file.c (go_file_saver_save): Fix filename handling
	as much as current API allows.  Make sure to set and error at the
	GSF level when we do at higher level.  Fixes #365115

2006-10-25  Morten Welinder  <terra@gnome.org>

	* autogen.sh (REQUIRED_AUTOMAKE_VERSION): Up to 1.9.0 like
	Gnumeric.  Fixes certain, but not all, issues with building in
	non-standard locations.

2006-10-23  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/gtk/go-graph-widget.c: (update_image_rect): set the graph
	size. Fixes #344646.

2006-10-20  Jon K Hellan  <hellan@acm.org>

	* plugins/plot_boxes/gog-boxplot.c: Fix include.

2006-10-19  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-action-combo-text.c
	(go_action_combo_text_create_tool_item): Set width using
	gtk_entry_set_width_chars, not pixels.  This will automatically
	listen to style changes.  Fixes #362704.

2006-10-18  Morten Welinder  <terra@gnome.org>

	* goffice/graph/gog-renderer-cairo.c
	(gog_renderer_cairo_export_image): Use
	cairo_surface_set_fallback_resolution only when available.

	* configure.in: Check for cairo_surface_set_fallback_resolution.

2006-10-17  Morten Welinder  <terra@gnome.org>

	* goffice/app/error-info.c (error_info_print_with_offset): Add
	precondition and use g_printerr, not fprintf.

2006-10-16  Jody Goldberg <jody@gnome.org>

	* configure.in : Post release verion bump

2006-10-16  Jody Goldberg <jody@gnome.org>

	* Release 0.3.2

2006-10-06  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-image.c (go_image_new_from_file): Handle errors
	better.

2006-10-06  Dom Lachowicz <domlachowicz@gmail.com>

	* configure.in: I accidentally checked in a change that
	disabled all DEPRECATED checks. This is because the deprecation
	checks won't build with GTK+ 2.6.x and Glib >= 2.8. I'll need to
	come up with a better work-around for this, as it also effects
	Gnumeric proper.

2006-10-06  Dom Lachowicz <domlachowicz@gmail.com>

	* goffice/gtk/goffice-gtk.c: Conditionally implement
	gdk_cairo_set_source_pixbuf(), stolen from GTK+ 2.8. Implement
	go_cairo_set_source_pixbuf() in terms of it.
	* goffice/gtk/goffice-gtk.h: Ditto
	* goffice/gtk/go-market-selector.c: Use go_cairo_set_source_pixbuf()
	* goffice/gtk/go-pattern-selector.c: Ditto
	* configure.in: Check for gdk_cairo_set_source_pixbuf()

2006-10-06  Dom Lachowicz <domlachowicz@gmail.com>

	* libgoffice-0.3.pc.in: Require pangocairo. Not everyone has GTK+ 2.8

2006-10-06  Dom Lachowicz <domlachowicz@gmail.com>

	* libgoffice-0.3.pc.in: Require cairo. Not everyone has GTK+ 2.8

2006-10-06  Jon K Hellan  <hellan@acm.org>

	* goffice/gtk/goffice-gtk.c (gui_get_image_save_info): Don't hide
	format selector just because resolution isn't meaningful.
	(go_gtk_file_sel_dialog): Use gtk_widget_show instead of
	show_all. Otherwise, we can't hide unwanted widgets.

2006-10-05  Jon K Hellan  <hellan@acm.org>

	* goffice/utils/go-image.c (go_mime_to_image_format)
	(go_image_build_pixbuf_format_infos): Base mime_to_image_format on
	info from gdk-pixbuf.

2006-10-05  Jean Brefort  <jean.brefort@normalesup.org>

	* configure.in: check for pangocairo. [#359904]
	* goffice/graph/gog-renderer-cairo.c: include pangocairo.h instead of
	pangoft2.h.

2006-10-05  Dom Lachowicz <domlachowicz@gmail.com>

	* goffice/gtk/go-palette.h: Include cairo.h. Don't assume that GTK+
	automatically brings it in.

2006-10-05  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_boxes/gog-boxplot.c: (gog_box_plot_view_render): fixed
	a boundary issue.

2006-10-05  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_boxes/gog-boxplot.c: (gog_box_plot_view_render): make use
	of the second axis map so that box-plots support inverted axis.

2006-10-04  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/component/go-component-factory.c: add a minimum support for
	optional clipboard operations (default is no clipboard).
	* goffice/component/go-component-factory.h: ditto.

2006-10-02  Jody Goldberg <jody@gnome.org>

	* configure.in : post release bump

2006-10-02  Jody Goldberg <jody@gnome.org>

	* Release 0.3.1

2006-10-01  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/graph/gog-renderer-cairo.c (grc_path): clamp coordinates
	before giving them to cairo. That's a workaround for cairo long line
	bug. [#341993]

2006-10-01  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_boxes/gog-boxplot.c: don't update inexistant axes.

2006-10-01  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-renderer.c: (gog_renderer_export_image): avoid
	creating a pxbuf with a resolution <= 0.
	* pixmaps/Makefile.am: new box-plot icons.
	* pixmaps/chart_boxplot_1_2.png: ditto.
	* pixmaps/chart_boxplot_1_2.svg: ditto.
	* plugins/plot_boxes/gog-boxplot-prefs.glade: implement vertical
	box-plots. [#358153]
	* plugins/plot_boxes/gog-boxplot.c: ditto.
	* plugins/plot_boxes/gog-boxplot.h: ditto.
	* plugins/plot_boxes/plot-types.xml.in: ditto.

2006-09-30  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_xy/plot-types.xml.in: fixed the has-lines flag
	after the interpolation patch.

2006-09-29  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-style-prefs.glade: add an interpolation type
	selector.
	* goffice/graph/gog-style.c: add interpolation type to GogStyle.
	* goffice/graph/gog-style.h: ditto.
	* goffice/utils/go-line.c: add support for general interpolation
	types.
	* goffice/utils/go-line.h: ditto.
	* plugins/plot_xy/gog-xy.c: use interpolation types in series.
	* plugins/plot_xy/gog-xy.h: ditto.

2006-09-26  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* configure.in: lower cairo requirement to 1.0. Use SVG renderer if
	cairo SVG backend is not available.
	* goffice/graph/Makefile.am: ditto.
	* goffice/graph/gog-graph.c (gog_graph_get_supported_image_formats): SVG
	always supported.
	* goffice/graph/gog-renderer-cairo.c
	(gog_renderer_cairo_export_image): move
	cairo_surface_set_fallback_resolution inside #ifdef statements. This
	is a new API only available in cairo >= 1.2.0, as PDF and PS backends.

2006-09-18  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/graph/gog-style-prefs.glade: some tweaks. Use only two color
	selectors for gradient/pattern.
	* goffice/graph/gog-style.c: ditto. use new pattern/marker/line/color
	selectors.
	* goffice/gtk/go-color-palette.c: convert ColorNamePair to
	GONamedColor, for use of default_color_set in go-color-selector.c.
	* goffice/gtk/go-color-selector.c: share default_color_set.
	Add some documentation.
	* goffice/gtk/go-line-selector.c: Add some documentation.
	* goffice/gtk/go-marker-selector.c: ditto.
	* goffice/gtk/go-pattern-selector.c: ditto.
	* goffice/gtk/go-selector.c: ditto.
	* goffice/gtk/go-palette.c: ditto.
	(cb_swatch_expose): implementation for gtk < 2.8.0.

	* goffice/utils/go-gradient.c (go_gradient_selector): removed.
	* goffice/utils/go-line.c (go_line_dash_selector): removed.
	* goffice/utils/go-marker.c (go_marker_selector): removed.
	* goffice/utils/go-pattern.c (go_pattern_selector): removed.

	* goffice/utils/format.c (find_decimal_char): fix warning.

2006-09-17  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* configure.in: hard dependency to cairo 1.2.0. Alwayas define
	GOFFICE_WITH_CAIRO.
	* goffice/graph/Makefile.am: always build cairo renderer. Don't build
	pixbuf and svg renderers.
	* goffice/graph/gog-axis.c: suppress condition on GOFFICE_WITH_CAIRO
	(format with markup).
	* goffice/graph/gog-graph.c: ditto.
	* goffice/graph/gog-renderer-gnome-print.c: ditto (text with markup).
	* goffice/graph/gog-renderer.[ch]: ditto.
	* goffice/graph/gog-style.[ch]: ditto.
	* goffice/utils/go-image.[ch]: ditto.

2006-09-16  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/graph/gog-guru.c (cb_canvas_select_item): fix for first
	click lost.

2006-09-14  Ivan, Wong Yat Cheung <email@ivanwong.info>

	* goffice/utils/go-file.h: The check for HAVE_G_ACCESS is in
	go-file.c and should not be put in a public header.

2006-09-12  Morten Welinder  <terra@gnome.org>

	* goffice/app/go-plugin.c (go_plugin_read): Plug leak.

	* goffice/component/go-component-factory.c
	(go_component_type_service_read_xml): Plug leak.

2006-09-10  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Add drag and drop support to color selector.
	Postpone palette content creation to widget realization.

	* goffice/gtk/go-color-selector.c (cb_color_dialog_response): use
	go_color_selector_set_color.
	(go_color_selector_drag_data_received),
	(go_color_selector_drag_data_get),
	(go_color_selector_drag_fill_icon): new.
	(go_color_selector_new): setup drag and drop.
	(go_color_selector_set_color): return TRUE if color actually changed.
	* goffice/gtk/go-palette.c (go_palette_realize): fill menu here. That
	makes dialog with lot of selectors appear faster.
	(go_palette_new): don't fill menu.
	(go_palette_show_automatic): ditto.
	(go_palette_show_custom): ditto.
	* goffice/gtk/go-selector.c (go_selector_drag_data_received),
	(go_selector_drag_data_get), (go_selector_drag_begin): new.
	We should make drag_begin smarter and don't require a custom
	implementation.
	(go_selector_setup_dnd): new.

2006-09-10  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/component/go-component-factory.c:
	(goc_plugin_services_shutdown): clean hash tables,
	(go_components_set_mime_suffix), (go_components_get_mime_suffix):
	new utilities.
	* goffice/component/go-component-factory.h: add two utilities.

2006-09-07  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_boxes/gog-histogram.c:
	(gog_histogram_plot_view_render): check if a series is present before
	using it (fixes #354705).

2006-09-07  Ivan, Wong Yat Cheung <ivanwong@gnome.org>

	* .cvsignore:
	* goffice/.cvsignore:
	* goffice/app/.cvsignore:
	* goffice/component/.cvsignore:
	* goffice/data/.cvsignore:
	* goffice/drawing/.cvsignore:
	* goffice/graph/.cvsignore:
	* goffice/gtk/.cvsignore:
	* goffice/ms-compat/.cvsignore:
	* goffice/utils/.cvsignore: added *.def

	* configure.in: distinguishs between native Win32 and Cygwin. The later one is
	actually a kind of Unix whose share object shares the properties of a DLL.

	* goffice.mk:
	* goffice/goffice.h: defines GO_VAR_DECL

	* goffice-win32.mk:
	* dumpdef.pl: recognizes GO_VAR_DECL (dllexport) for global variables.

	* goffice/Makefile.am:
	* goffice/app/Makefile.am:
	* goffice/component/Makefile.am: fixed Win32 build

	* goffice/app/go-plugin.c:
	* goffice/gtk/goffice-gtk.c:
	* goffice/utils/go-file.[ch]: added go_file_access().

	* goffice/app/file.c:
	* goffice/app/go-doc-control-impl.h:
	* goffice/app/go-doc.[ch]:
	* goffice/component/go-component-factory.c:
	* goffice/component/go-component.h:
	* goffice/cut-n-paste/foocanvas/foo-canvas-line.c:
	* goffice/cut-n-paste/foocanvas/foo-canvas-polygon.c:
	* goffice/drawing/god-drawing-renderer-gdk.c:
	* goffice/graph/gog-axis.c:
	* goffice/graph/gog-guru.c:
	* goffice/graph/gog-renderer-cairo.h:
	* goffice/graph/gog-renderer-svg.c:
	* goffice/graph/gog-style.c:
	* goffice/graph/gog-theme.c:
	* goffice/gtk/go-action-combo-color.c:
	* goffice/gtk/go-action-combo-pixmaps.c:
	* goffice/gtk/go-color-palette.c:
	* goffice/gtk/go-combo-box.c:
	* goffice/gtk/go-combo-color.c:
	* goffice/gtk/go-combo-pixmaps.c:
	* goffice/gtk/go-font-sel.c:
	* goffice/gtk/go-graph-widget.h:
	* goffice/utils/format.c:
	* goffice/utils/formats.c:
	* goffice/utils/go-color.h:
	* goffice/utils/go-font.h:
	* goffice/utils/go-format.[ch]:
	* goffice/utils/go-geometry.c:
	* goffice/utils/go-glib-extras.[ch]:
	* goffice/utils/go-marker.c:
	* goffice/utils/go-math.h:
	* goffice/utils/go-pattern.c: replaced all #warning with /* FIXME ...*/
	replaced all calls to rint() with go_rint(), uses GO_VAR_DECL for all
	public global variables, replaced ssize_t with gssize, etc.

2006-09-04  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/gtk/go-gradient-selector.[ch]: new.
	* goffice/gtk/go-color-selector.c (go_color_selector_set_color): new.
	* goffice/gtk/go-marker-selector.c (go_marker_palette_render_func):
	use marker colors.
	(go_marker_selector_new): ditto.
	(go_marker_selector_set_colors): new.
	* goffice/gtk/go-palette.c (cb_swatch_expose): don't leak cairo_t.

2006-09-03  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/gtk/go-color-group.c (go_color_group_add_color): fix
	history.

2006-09-03  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	New GOPalette and GOSelector widgets for unification
	and beautification of goffice selectors. They depend on
	cairo, so I'm not using them for now, until we change gtk
	version requirement.

	* goffice/gtk/go-line-selector.[ch],
	* goffice/gtk/go-marker-selector.[ch],
	* goffice/gtk/go-pattern-selector.[ch],
	* goffice/gtk/go-color-selector.[ch],
	* goffice/gtk/go-selector.[ch],
	* goffice/gtk/go-palette.[ch]: new.

2006-08-21  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-guru.c: (graph_guru_init_format_page): explicitly
	create the FooCanvas widget instead of using the custom widget mechanism
	from libglade, because when called from the Abiword plugin, the
	foo_canvas_new might be unresolved and lead to a crash
	(https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=190579).
	* goffice/graph/gog-guru.glade: ditto.

2006-08-20  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Add a graph theme selector.

	* goffice/graph/gog-graph.c (cb_theme_changed): new.
	(cb_force_theme): new.
	(gog_graph_populate_editor): new.
	(gog_graph_class_init): install graph property editor.
	(apply_theme): new.
	* goffice/graph/gog-plot-engine.c (gog_theme_service_read_xml): adapt
	to GogTheme API changes.
	* goffice/graph/gog-theme.c: remove theme hash caches. They were
	broken. I didn't see a good way to fix them.
	(gog_theme_register): renamed to gog_theme_registry_add. Change theme
	list order.
	(gog_theme_new_from_file): new. Don't register theme to be consistent
	with got_theme_new.
	(gog_theme_register_file): removed.
	(gog_theme_lookup): renamed to gog_theme_registry_lookup.
	(gog_theme_registry_get_theme_names): new.
	(gog_themes_init): Theme for chart titles. Tweak Guppi theme.

2006-08-18  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-style.c: (str_as_image_type),
	(image_type_as_str), (gog_style_fill_sax_save),
	(gog_style_image_load), (gog_style_fill_load),
	(gog_style_sax_load_fill_image), (gog_style_persist_prep_sax): save
	image fill options.
	* goffice/utils/go-image.c: (go_image_get_pixbuf): don't crash if image
	is NULL [#348780].

2006-08-17  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/graph/gog-axis-line.c (gog_axis_base_set_property): handle
	new padding property.
	(gog_axis_base_get_property): ditto.
	(gog_axis_base_class_init): ditto.
	(cb_position_toggled): make padding spinbutton insensitive when
	padding setting is not relevent.
	(cb_padding_changed): new.
	(gog_axis_base_populate_editor): handle padding spinbutton.
	(gog_axis_base_get_padding): new.
	(axis_line_point): take padding setting into account.
	(axis_line_get_bbox): ditto.
	(axis_line_render): ditto. Store axis position here for use by
	axis tools...
	(x_process): ... instead of here. Adapt to new axis_line_render and
	axis_line_point signature.
	(xy_process): ditto.
	(radar_process): ditto.
	* goffice/graph/gog-axis-prefs.glade: add new padding spinbutton.

2006-08-11  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/graph/gog-object.c (gog_editor_get_notebook): always show
	notebook tabs. Makes thing more consistent.
	* plugins/plot_xy/gog-xy.c (gog_xy_series_populate_editor): don't display
	details on first page.

2006-08-06  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* configure.in: bump cairo req to 1.2.0 for
	cairo_surface_set_fallback_resolution.
	* goffice/graph/gog-renderer-cairo.c
	(gog_renderer_cairo_export_image): call
	cairo_surface_set_fallback_resolution.
	* goffice/gtk/goffice-gtk.c (cb_format_combo_changed): new.
	(gui_get_image_save_info): disable resolution spinbutton for formats
	that don't require a resolution setting.
	* goffice/utils/go-image.c: set is_dpi_useful to FALSE for PDF format.
	* goffice/app/go-plugin.c (plugin_get_loader_if_needed): fix compiler
	warning.
	(go_plugin_list_read_for_subdirs_of_dir): ditto.

2006-08-06  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/graph/gog-axis.c (map_discrete_calc_ticks): use go_fake_ceil
	and go_fake_floor variants preventively.
	(map_linear_calc_ticks): ditto. (Not preventively in this case, I've
	really seen an issue on my laptop, where lower bound tick was not
	displayed for minimum < 0.0).
	(map_log_auto_bounds): ditto.
	(map_log_calc_ticks): ditto.

2006-07-30  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* plugins/plot_radar/gog-radar.c (gog_rt_view_render): fix a crash
	where clip path == NULL (#349238).

2006-07-28  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/graph/gog-theme.c (gog_themes_init): set serie default fill
	style to GOG_FILL_STYLE_PATTERN.
	* plugins/plot_boxes/gog-histogram.c (gog_histogram_plot_view_render):
	make histogram plots sharp.

2006-07-28  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* plugins/plot_xy/gog-axy.c (gog_xy_view_render): make step
	interpolation sharp.

2006-07-28  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* plugins/plot_barcol/gog-barcol.c (barcol_draw_rect): make barcol
	plot log scale safe.

2006-07-21  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-file.c (go_url_resolve_relative): Add
	preconditions.

2006-06-30  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* plugins/plot_radar/gog-radar.c (gog_rt_view_class_init): disable
	default clipping.

2006-06-29  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Add support for polar plot units (degrees, radians, grads).

	* goffice/graph/gog-axis.c (map_linear_auto_bound): handle radian
	and grad case.
	(gog_axis_set_format): request an object update.
	(gog_axis_set_property): handle new circular_rotation and polar_unit
	properties.
	(gog_axis_get_property): ditto.
	(gog_axis_class_init): ditto.
	(gog_axis_pref_state_free): new.
	(gog_axis_populate_polar_unit_combo): new.
	(cb_polar_unit_changed): new.
	(cb_rotation_changed): new.
	(gog_axis_populate_editor): handle circular_rotation and polar_unit
	properties.
	(gog_axis_set_polar_unit): new.
	(gog_axis_get_polar_unit): new.
	(gog_axis_get_polar_perimeter): new.
	(gog_axis_get_circular_rotation): new.
	* goffice/graph/gog-chart.c (calc_circle_parameters): fix wrong
	calculations.
	(gog_chart_map_new): handle other polar units.
	* goffice/utils/format.c (go_format_number): handle new ?pi/? format.
	* plugins/plot_radar/gog-radar.c (gog_polar_plot_axis_get_bounds):
	don't limit bounds to 0 / 360 °.

2006-06-28  Jody Goldberg <jody@gnome.org>

	* goffice/graph/gog-style.h : include <cairo.h> rather than
	  <cairo/cairo.h>
	* goffice/utils/go-image.h : ditto.

2006-06-16  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Add support for background stripes.

	* goffice/graph/gog-chart.c (grid_line_render): render stripes, then
	lines. Add a kludge layer on top of the initial kludge, since we
	don't use GogView::render, but specialized render functions.
	* goffice/graph/gog-grid-line.c (gog_grid_line_init_style): enable
	fill property.
	(fill_rectangle): new.
	(gog_grid_line_xy_render): new.
	(gog_grid_line_radial_render): new.
	(gog_grid_line_circular_render): new.
	(gog_grid_line_view_render): not called directly by GogView::render.
	Now has a stripes parameter.
	(gog_grid_line_view_render_lines): new.
	(gog_grid_line_view_render_stripes): new.
	* goffice/graph/gog-renderer.c (gog_renderer_get_ring_wedge_vpath):
	automatically swap in and out radii. Fix fill decision.
	Fix ring wedges.
	* goffice/graph/gog-style.c (gog_style_init): set fill to none by
	default. That'll be overriden by theme settings.
	* goffice/graph/gog-theme (gog_themes_init): init fill property of
	GogGridLine objects.

2006-06-15  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=344747
	* goffice/graph/gog-axis.c (gog_axis_get_format) : new.
	(gog_axis_set_format) : make public.

2006-06-14  Jody Goldberg <jody@gnome.org>

	* goffice/utils/go-marker.c : constify

	* goffice/utils/go-cairo.c : tweak comments to make gtk-doc happy.

2006-06-05  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-renderer-cairo.c: (grc_draw_polygon): GogStyle now use
	GOImage instead of GdkPixbuf.
	* goffice/graph/gog-renderer-gnome-print.c:
	(gog_renderer_gnome_print_draw_polygon): ditto.
	* goffice/graph/gog-renderer-pixbuf.c:
	(gog_renderer_pixbuf_draw_polygon): ditto.
	* goffice/graph/gog-style.c: (gog_style_set_image_preview),
	(gog_style_set_fill_image_filename),
	(gog_style_create_cairo_pattern): ditto.
	* goffice/graph/gog-style.h: ditto.
	* goffice/utils/go-cairo.c: (go_cairo_fill): ditto.
	* goffice/utils/go-image.c: (go_image_set_property),
	(go_image_class_init), (go_image_get_pixbuf),
	(go_image_new_from_file), (go_image_get_pixels),
	(go_image_get_rowstride), (go_image_fill): add new functions and fixed some
	issues.
	* goffice/utils/go-image.h: new functions.

2006-06-05  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-marker.c: (marker_update_pixbuf): free old
	pixbuf if any,
	(go_marker_assign): unref destination pixbuf, not source.

2006-06-02  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/goffice.c: (libgoffice_init): set initialized to TRUE
	after initialization.

2006-05-31  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_barcol/gog-dropbar.c: (gog_dropbar_view_render): fixed
	discrete axis origin.
	* plugins/plot_barcol/gog-minmax.c: (gog_minmax_view_render): ditto.

2006-05-30  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* pixmaps/chart_scatter_*: simplification.

2006-05-30  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/gtk/go-graph-widget.c: modifying the graph secured.

2006-05-29  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/utils/go-path.c: new.
	* goffice/utils/go-path.h: new.
	* goffice/utils/go-path-impl.h: new.
	* goffice/utils/go-cairo.c: new.
	* goffice/utils/go-cairo.h: new. These files are just commited, not
	used yet.

2006-05-26  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_xy/gog-xy.c: add four types of stepped plots.
	* plugins/plot_xy/gog-xy.h: ditto.
	* plugins/plot_xy/plot-types.xml.in: ditto.

2006-05-25  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-image.c: Fix preprocessor conditionals.

2006-05-25  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-renderer-cairo.c: (grc_draw_polygon),
	(gog_renderer_cairo_update): use GOImage.
	* goffice/graph/gog-style.c: (gog_style_create_cairo_pattern): ditto.
	* goffice/graph/gog-style.h: ditto.
	* goffice/utils/go-image.c: new GOImage object.
	* goffice/utils/go-image.h: ditto.
	* goffice/utils/goffice-utils.h: ditto.

2006-05-25  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_barcol/gog-barcol.c: (gog_barcol_view_render):
	fixed rendering of series lines in bar plots.

2006-05-25  Jean Brefort  <jean.brefort@normalesup.org>

	* pixmaps/Makefile.am: add new pixmaps for step plots.
	* pixmaps/chart_scatter_3_1.svg: new icon.
	* pixmaps/chart_scatter_4_1.png: ditto.
	* pixmaps/chart_scatter_4_1.svg: ditto.
	* pixmaps/chart_scatter_4_2.png: ditto.
	* pixmaps/chart_scatter_4_2.svg: ditto.
	* pixmaps/chart_scatter_4_3.png: ditto.
	* pixmaps/chart_scatter_4_3.svg: ditto.
	* pixmaps/chart_scatter_4_4.png: ditto.
	* pixmaps/chart_scatter_4_4.svg: ditto.

2006-05-24  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/graph/gog-axis.c (get_adjusted_tick_array): removed.
	(map_log_calc_ticks): use g_renew instead of get_adjusted_tick_array.

2006-05-22  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/graph/gog-axis.c (map_log_calc_ticks): fix major start tick.
	(get_adjusted_tick_array): obviously, I'm not reliable when it comes
	to calculate memory allocation sizes, so emit a critical when
	something's wrong.

2006-05-22  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/utils/go-image.c (go_image_build_pixbuf_format_infos):
	default alpha_support to FALSE.
	* goffice/graph/gog-renderer-cairo.c
	(gog_renderer_cairo_export_image): extend image export to all format
	with pixbuf savers.
	* goffice/graph/gog-renderer-pixbuf.c
	(gog_renderer_pixbuf_export_image): ditto.
	* goffice/graph/gog-renderer.c (gog_renderer_new_for_format): ditto.

2006-05-22  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/utils/go-format.c: new alpha_support property for
	GOImageFormatInfo. Tells wether export format support alpha channel.
	* goffice/graph/gog-renderer-cairo.c
	(gog_renderer_cairo_export_image): for image formats that don't
	support alpha channel, composite onto white background.
	* goffice/graph/gog-renderer-pixbuf.c
	(gog_renderer_pixbuf_export_image): ditto.

2006-05-19  Morten Welinder  <terra@gnome.org>

	* goffice/graph/gog-renderer.c (gog_renderer_new_for_format): Fix
	preprocessor conditionals.

2006-05-16  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/gtk/go-graph-widget.c: removed unused GOGraphWidget::chart,
	and reimplemented helper function go_graph_widget_get_chart for
	compatibility.

2006-05-14  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-graph.c: (gog_graph_render_to_cairo): new function.
	* goffice/graph/gog-graph.h: ditto.
	* goffice/graph/gog-renderer-cairo.c: added "cairo" and "is-vector"
	properties to allow rendering to an external cairo_t structure.

2006-05-14  Jean Brefort  <jean.brefort@normalesup.org>

	* configure.in: use Cairo if present.
	* goffice/goffice-features.h.in: export GOFFICE_WITH_CAIRO.
	* goffice/graph/gog-style.c: compile even without cairo.
	* goffice/graph/gog-style.h: ditto.

2006-05-13  Jody Goldberg <jody@gnome.org>

	* goffice/graph/gog-style.c (gog_style_create_cairo_pattern) :
	  constify and fix some warnings.

2006-05-13  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/app/go-plugin.c: (go_plugins_add): new function.
	* goffice/app/go-plugin.h: ditto.

2006-05-12  Morten Welinder  <terra@gnome.org>

	* goffice/utils/format.c (split_time): Handle invalid dates
	sanely.

2006-05-12  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-color.h: define GO_COLOR_TO_CAIRO.

2006-05-12  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-style.c: (pixbuf_to_cairo),
	(gog_style_create_cairo_pattern): new cairo support functions.
	* goffice/graph/gog-style.h: ditto.

2006-05-12  Christian Neumair  <chris@gnome-de.org>

	* goffice/gtk/go-graph-widget.c:
	* goffice/gtk/go-graph-widget.h: Add multiple size modes,
	modify go_graph_widget_new to take a GogGraph *.

	* tests/pie-demo.c: (main): Pass NULL to go_graph_widget_new.

2006-05-08  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/component/go-component.c: change api.
	* goffice/component/go-component.h: ditto.

2006-05-08  Morten Welinder  <terra@gnome.org>

	* goffice/utils/format.c (go_render_general): Extracted from
	gnumeric.
	(go_fmt_general_float, go_fmt_general_int): Remove.  All callers
	fixed.
	(go_render_number_scientific, go_format_number): Handle
	unicode_minus.

	* goffice/utils/go-format.c (go_format_value_gstring): Add
	unicode_minus flag.  All callers changed.

	* goffice/utils/go-font.c (go_font_metrics_new,
	go_font_metrics_free, go_font_metrics_unit): New, moved from
	Gnumeric.

2006-05-06  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/graph/gog-style.c (text_layout_init): Add border around
	rotation selector widget.

2006-05-06  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/graph/gog-renderer-gnome-print.c
	(gog_renderer_gnome_print_draw_text):
	Use markup when compiled with cairo support.
	(gog_renderer_gnome_print_get_text_OBR): ditto.

2006-05-02  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_pie/gog-pie.c: (gog_pie_view_render): fixed max angle
	for partial ring plots (which are not implemented).

2006-05-01  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_pie/gog-pie.c: (gog_pie_plot_class_init),
	(gog_pie_plot_init), (find_element), (gog_pie_view_render):
	use percentage for span instead of degrees.
	* plugins/plot_pie/plot-types.xml.in: ditto.

2006-05-01  Jean Brefort  <jean.brefort@normalesup.org>
	* pixmaps/Makefile.am: add new pixmaps for half pies.
	* pixmaps/chart_pie_3_1.png: ditto.
	* pixmaps/chart_pie_3_1.svg: ditto.
	* pixmaps/chart_pie_3_2.png: ditto.
	* pixmaps/chart_pie_3_2.svg: ditto.
	* plugins/plot_pie/gog-pie.c: (gog_pie_plot_set_property),
	(gog_pie_plot_get_property), (gog_pie_plot_class_init),
	(gog_pie_plot_init), (find_element), (gog_pie_view_render):
	add support for half pies.
	* plugins/plot_pie/gog-pie.h: ditto.
	* plugins/plot_pie/plot-types.xml.in: ditto.

2006-04-27  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-action-combo-text.c
	(go_action_combo_text_create_menu_item): New function.  Fixes
	#157901.
	(go_action_combo_text_finalize): Plug leak.

2006-04-25  Jody Goldberg <jody@gnome.org>

	* configure.in : post release bump to 0.3.1

2006-04-23  Jody Goldberg <jody@gnome.org>

	* Release 0.3.0

2006-04-22  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-optionmenu.c (cb_select): Send "changed" signal
	here.

2006-04-20  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-optionmenu.c: Simplify.

	* goffice/gtk/go-action-combo-text.c
	(go_tool_combo_text_set_tooltip): Implement.

2006-04-19  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/gtk/go-image-save-dialog-extra.glade: new.
	* goffice/gtk/goffice-gtk.c (go_gtk_select_image): use glade file
	above for widgets in extra area. Displays a spin box for selecting
	output resolution.

2006-04-18  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/goffice-gtk.c (go_gtk_dialog_run): Hold a ref to the
	dialog until we're done with it.  Don't install an [Esc] handler
	since gtk_dialog_run does that now.

2006-04-17  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/utils/format.c (go_render_number_scientific): fix for
	#338554 (1-epsilon was displayed 10.00E-01 instead of 1.00E-00).
	Also fix handling of optional right digits.

2006-04-17  Kjartan Maraas  <kmaraas@gnome.org>

	* configure.in: Remove obsolete entry for no_NO
	* po/no.po: And the translation.

2006-04-16  Jody Goldberg <jody@gnome.org>

	* *.[ch] : Clear the easy bit for --without-gtk
	  Leaving us with a library that lack GdkPixbuf and needs a
	  replacement for GtkAnchorType.  Still not exactly turn-key but it
	  makes the primary elements clear.

2006-04-10  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/graph/gog-axis.c (map_log_baseline): inverted or not,
	baseline is always min.
	* plugins/plot_boxes/gog-histogram.c
	(gog_histogram_plot_view_render): fix in case of log y axis.

2006-04-10  Morten Welinder  <terra@gnome.org>

	* goffice/utils/format.c (format_compile): Fix handling of
	[$curr].  Fixes #337796.
	(format_compile): Fix ABR.

2006-04-08  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-object-xml.c: (gogo_start): use
	gog_trend_line_new_by_name instead of obsolete gog_reg_curve_new_by_name.

2006-04-08  Jean Brefort  <jean.brefort@normalesup.org>

	* configure.in: add new plugin (smoothed curves).
	* goffice/graph/Makefile.am: add new files.
	* goffice/graph/goffice-graph.h: add GogTrendLine and GogSmoothedCurve
	types.
	* goffice/graph/gog-chart.c: fixed typo.
	* goffice/graph/gog-guru.c: replace GogRegCurve by GogTrendLine.
	* goffice/graph/gog-object-xml.c: ditto.
	* goffice/graph/gog-plot-engine.c: ditto.
	* goffice/graph/gog-plot-engine.h: ditto.
	* goffice/graph/gog-reg-curve.c: make GogRegCurve derive from GogTrendLine.
	* goffice/graph/gog-reg-curve.h: ditto.
	* goffice/graph/gog-series-impl.h: replace regression curves by trend lines.
	* goffice/graph/gog-series.c: ditto.
	* goffice/graph/gog-smoothed-curve.c: new smoothed curves:
	* goffice/graph/gog-smoothed-curve.h: ditto.
	* goffice/graph/gog-theme.c: added tredn lines and removed
	regression curves.
	* goffice/graph/gog-trend-line.c: new parent object for regression
	curves and trend lines.
	* goffice/graph/gog-trend-line.h: ditto.
	* plugins/Makefile.am: add smoothing plugin.
	* plugins/plot_barcol/gog-line.c: accept trend lines.
	* plugins/plot_boxes/gog-histogram.c: ditto.
	* plugins/plot_xy/gog-xy.c: ditto.
	* plugins/reg_linear/plugin.xml.in: changed service name.
	* plugins/reg_logfit/plugin.xml.in: ditto.
	* plugins/smoothing/Makefile.am: new moving average curves.
	* plugins/smoothing/gog-exp-smooth.c: ditto.
	* plugins/smoothing/gog-exp-smooth.glade: ditto.
	* plugins/smoothing/gog-exp-smooth.h: ditto.
	* plugins/smoothing/gog-moving-avg.c: ditto.
	* plugins/smoothing/gog-moving-avg.glade: ditto.
	* plugins/smoothing/gog-moving-avg.h: ditto.
	* plugins/smoothing/plugin.c: ditto.
	* plugins/smoothing/plugin.xml.in: ditto.
	* plugins/smoothing/types.xml.in: ditto.

2006-04-06  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/goffice-gtk.c
	(go_dialog_guess_alternative_button_order): New function.

2006-04-06  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/goffice-gtk.c (go_access): Replace by g_access, if
	present, and by access otherwise.

	* goffice/app/go-plugin.c (go_plugin_deactivate): Only unload base
	if it is actually loaded.

	* goffice/utils/format.c (go_format_number): Show 0/x also when
	whole==0, even if we rendered it (blank).

	* goffice/utils/formats.c (go_currency_date_format_init): Match
	more fraction formats.
	(cell_format_is_fraction): Adjust accordingly.

2006-04-05  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_xy/Makefile.am: add new glade file.
	* plugins/plot_xy/gog-xy-series-prefs.glade: new glade file.
	* plugins/plot_xy/gog-xy.c: (gog_xy_view_render),
	(gog_xy_series_set_property), (gog_xy_series_get_property),
	(invalid_toggled_cb), (gog_xy_series_populate_editor),
	(gog_xy_series_class_init): use zero instead of invalid data or
	skip them [#334697].
	* plugins/plot_xy/gog-xy.h: ditto.

2006-04-04  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Fix engineering format: http://bugzilla.gnome.org/show_bug.cgi?id=129706
	Adds a special format using pango markup for superscripted exponents,
	currently only enabled in format selector in graph guru when using
	cairo renderer.

	* goffice/graph/gog-axis.c (gog_axis_populate_editor): enable format
	with markup when using cairo.
	* goffice/gtk/go-format-sel.c (generate_format): handle new format
	settings.
	(go_format_sel_set_style_format): ditto.
	(cb_engineering_toggle): new.
	(cb_superscript_toggle): new.
	(cb_superscript_hide_1_toggle): new.
	(fmt_dialog_enable_widgets): handle new scientific format widgets.
	(nfs_init): ditto.
	(go_format_sel_new_full): new. Provides a way to enable format with
	markup.
	(go_format_sel_new): creates a new format selector with pango markup
	disabled.
	* goffice/gtk/go-format-sel.glade: add new widgets for scientific
	format.
	* goffice/utils/format.c (go_render_number_scientific): new.
	(do_render_number): call go_render_number_scientific when needed.
	(go_format_as_scientific): handle exponent step, use of marlup and
	simplification of mantissa.
	(go_format_number): fix handling of scientific/engineering format.
	* goffice/utils/formats.c (go_currency_date_format_init): expand
	science/percentage format.
	(cell_format_is_number): handle simplification of mantissa, use of
	markup and exponent step for scientific format.

2006-04-04  Morten Welinder  <terra@gnome.org>

	* goffice/app/go-plugin.c (go_plugin_deactivate): Unload the
	plugin so the shutdown hook gets called.
	(go_plugin_read_service_list): Ditto.

2006-03-29  Morten Welinder  <terra@gnome.org>

	* goffice/utils/format.c (append_day): Use go_date_weekday_name.
	(append_month): Use go_date_month_name.  Fix UTF-8 problem.
	(day_short, day_long, month_short, month_long): Remove.
	(format_entry_ctor): Don't setup regexps.
	(format_entry_set_fmt): Ditto.
	(format_entry_dtor): Don't destroy regexps.

	* goffice/utils/Makefile.am (libgoffice_utils_la_HEADERS): Kill
	go-format-match.h

2006-03-29  Eduardo Lima  <eduardo.lima@indt.org.br>

	* configure.in: Fixed check for g_chmod().

2006-03-28  Morten Welinder  <terra@gnome.org>

	* goffice/utils/datetime.c (go_date_weekday_name,
	go_date_month_name): New function.  This should allow for a
	cleaner interface.

2006-03-28  Eduardo Lima  <eduardo.lima@indt.org.br>

	* configure.in: Borrowed code from libgsf to check for g_chmod(),
	avoiding dependency on glib 2.8.
	* goffice/utils/go-file.c (go_set_file_permissions): Call chmod()
	instead of g_chmod() if not defined HAVE_G_CHMOD.

2006-03-23  Morten Welinder  <terra@gnome.org>

	* goffice/utils/datetime.c (datetime_serial_to_g): Don't go beyond
	year 9999.

2006-03-21  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-file.c (go_url_make_relative): New function.

2006-03-20  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-file.c (go_filename_simplify): New function.
	(go_filename_to_uri): Extracted from here.
	(go_url_simplify): New function.
	(go_url_resolve_relative): Extracted from here.
	(go_shell_arg_to_uri): Use go_url_simplify.

2006-03-19  Morten Welinder  <terra@gnome.org>

	* goffice/utils/datetime.c (datetime_g_days_between): Remove.
	glib has g_date_days_between.

2006-03-18  Jody Goldberg <jody@gnome.org>

	* goffice/app/go-doc.c : actually implement some basics

2006-03-18  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-file.c (go_url_resolve_relative): New function.
	(go_url_encode): Take extra argument to determine what needs
	quoting.  All Gnumeric callers changed.

2006-03-16  Morten Welinder  <terra@gnome.org>

	* plugins/plot_surface/gog-surface.c (gog_contour_view_render):
	Use NULL, not 0.

	* plugins/plot_barcol/gog-1.5d.h: Bitfields need to be explicitly
	signed or unsigned.

2006-03-15  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/app/module-plugin-defs.h: add a comment for go_plugin_init
	and go_plugin_shutdown declaration.

2006-03-15  J.H.M. Dassen (Ray) <jdassen@debian.org>

	* goffice/utils/go-file.h: #include <time.h> for time_t.

2006-03-14  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-file.c (go_file_get_owner_name,
	go_file_get_group_name): Ensure that result is UTF-8 encoded.  Let
	the caller free the result.  Handle remote files sanely.  Plug
	leaks.
	(go_file_get_date, go_file_get_date_changed,
	go_file_get_date_modified, go_file_get_date_accessed): return a
	time_t, not a [const] char *.  That makes it possible to localize
	properly.  Plug leak.
	(go_set_file_permissions): Plug leaks and avoid dumping non-UTF8
	error messages.
	(go_get_file_permissions): Plug leak.

2006-03-11  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/app/module-plugin-defs.h: add prototypes for go_plugin_init
	and go_plugin_shutdown.
	* goffice/graph/gog-theme.c: (gog_theme_find_element): initialized
	klass = NULL to avoid a warning.

2006-03-11  Jody Goldberg <jody@gnome.org>

	* goffice/gtk/go-combo-box.c :
	* goffice/gtk/go-color-palette.c :
	* goffice/gtk/go-combo-pixmaps.c : use g_object_ref_sink
	  for newer versions of glib.

	* goffice/cut-n-paste/foocanvas : update
	* plugins/gnome_extensions/egg-recent-* : update

2006-03-06  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/app/io-context-priv.h: added a exec_main_loop flag to IOContext
	* goffice/app/io-context.c: (io_context_init),
	(io_context_set_property), (io_context_get_property),
	(io_context_class_init), (io_progress_update): ditto, and implement it
	as a GObject property.

2006-03-03  Eduardo Lima <eduardo.lima@indt.org.br>

	* goffice/utils/go-file.[ch] (go_file_get_owner_name): new
	(go_file_get_group_name): new
	(go_get_file_permissions): new
	(go_set_file_permissions): new
	(go_file_get_date_accessed): new
	(go_file_get_date_modified): new
	(go_file_get_date_changed): new

2006-03-03  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/graph/gog-renderer-cairo.c (grc_draw_polygon): implement
	stretched image.

2006-03-02  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/graph/gog-axis.c (gog_axis_view_size_allocate): fix axis
	label allocation.

2006-03-01  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-reg-curve.c: (gog_reg_curve_view_render): don't render
	segments outside the bounding box [#332990].

2006-02-28  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/graph/gog-legend.c (cb_size_elements): don't push legend
	style here. Pass GogLegendView pointer directly.
	(cb_render_elements): don't push legend style here. Keep marker size
	to sane values.
	(cb_swatch_scale): calculate maximum and minimum marker size.
	(gog_legend_view_size_request): make swatch size a function of legend
	font size.
	(gog_legend_view_render): ditto. Keep marker size to sane values.

	* goffice/graph/gog-plot.c (gog_tool_move_plot_area_double_click): set
	position to automatic on double click.
	* goffice/graph/gog-object.c (gog_tool_move_object_double_click):
	ditto.

	* goffice/graph/gog-style.c (gog_style_get_marker): new.

2006-02-25  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-file.c: (go_mime_type_get_description): use
	GOFFICE_WITH_GNOME instead of WITH_GNOME.

2006-02-25  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	* goffice/graph/gog-object-prefs.glade: Use a combo_box for
	manual/automatic position selection.
	* goffice/graph/gog-plot-prefs.glade: ditto.
	* goffice/graph/gog-object.c (cb_manuel_position_changed): ditto.
	(gog_object_populate_editor): ditto.
	* goffice/graph/gog-plot.c (cb_manual_position_changed): ditto. Was
	cb_manual_toggle_changed.
	(cb_update_editor): ditto.
	(gog_plot_populate_editor): ditto.

2006-02-21  Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>

	Move plot area property editor to GogPlot.

	* goffice/graph/gog-axis-line.c (gog_tool_select_axis_point),
	(gog_tool_select_axis_render),
	(gog_tool_move_stop_bound_point),
	(gog_tool_move_stop_bound_render): check for axis type.
	* goffice/graph/gog-chart-prefs.glade: move to gog-plot-prefs.glade.
	* goffice/graph/gog-chart.c (chart_pref_state_free),
	(cb_plot_area_changed), (cb_manual_toggle_changed),
	(gog_chart_populate_editor): remove plot area property editor.
	* goffice/graph/gog-plot.c (plot_pref_state_free),
	(cb_plot_area_changed), (cb_manual_toggle_changed): new.
	(cb_axis_changed): axis type stored as object data.
	(cb_update_editor): new.
	(gog_plot_populate_editor): add plot area property editor.
	* plugins/plot_pie/gog-pie.c (gog_pie_plot_populate_editor): show plot
	area editor.
	(gog_pie_view_build_toolkit): and enable edition by mouse.
	* plugins/plot_surface/gog-surface.c
	(gog_contour_plot_populate_editor): show plot area editor.

	* goffice/graph/gog-renderer-cairo.c (grc_pixbuf_to_cairo): probably
	fix pixbuf to cairo data conversion for big endian in a renamed
	grc_invert_pixbuf_RB.

	* goffice/graph/gog-view.c (gog_tool_select_object_render): fix object
	outline.

2006-02-19  Ivan, Wong Yat Cheung <ivanwong@gnome.org>

	* goffice/Makefile.am: use the right library version when making
	.lib file.

2006-02-18  Ivan, Wong Yat Cheung <ivanwong@gnome.org>

	* configure.in:
	* dumpdef.pl: NEW
	* goffice.mk:
	* goffice-win32.mk: NEW
	* goffice/Makefile.am:
	* goffice/app/Makefile.am:
	* goffice/cut-n-paste/foocanvas/Makefile.am:
	* goffice/data/Makefile.am:
	* goffice/drawing/Makefile.am:
	* goffice/graph/Makefile.am:
	* goffice/gtk/Makefile.am:
	* goffice/ms-compat/Makefile.am:
	* goffice/utils/Makefile.am:
	[Win32] 1.) For every source directory of a library, pass all
	the public headers (with all #include removed) to the C preprocessor.
	2.) Pass the result from 1. to a perl script which extracts names of
	all the public functions and variables. 3.) Concat all from step 2. to
	produce a single .def file at the top directory of the library. No
	--export-all-symbols anymore.

	* goffice/gtk/goffice-gtk.c:
	* goffice/utils/Makefile.am:
	* goffice/utils/go-file.c:
	win32-stub is no longer needed.

	* goffice/app/module-plugin-defs.h:
	* goffice/data/go-data.h:
	* goffice/graph/gog-axis-line-impl.h:
	* goffice/graph/gog-object-xml.h:
	* goffice/graph/gog-series-lines.h:
	* goffice/graph/gog-view.h:
	* goffice/gtk/go-combo-color.h:
	* goffice/utils/go-glib-extras.h:
	* goffice/utils/go-marker.h:
	* goffice/utils/regutf8.h:
	Remove non-exist public function declarations.

2006-02-16  Morten Welinder  <terra@gnome.org>

	* goffice/utils/format.c (go_format_number): Fix handling of
	decimals.

2006-02-16  Morten Welinder  <terra@gnome.org>

	* goffice/utils/format.c (go_format_number): Fix handling of
	decimals.

2006-02-13  Morten Welinder  <terra@gnome.org>

	* goffice/utils/format.c (go_number_format_init): Renamed from
	number_format_init.  All callers changed.
	(go_number_format_shutdown): Renamed from number_format_shutdown.
	All callers changed.

	* goffice/utils/formats.c (go_currency_date_format_init): Renamed
	from currency_date_format_init.  All callers changed.
	(go_currency_date_format_shutdown): Renamed from
	currency_date_format_shutdown.  All callers changed.

	* goffice/goffice.c (libgoffice_init): Call
	go_currency_date_format_init.
	(libgoffice_shutdown): Call go_currency_date_format_shutdown.

2006-02-10  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/component/go-component.h: add GOC_PARAM_PERSISTENT flag.

2006-02-08  Morten Welinder  <terra@gnome.org>

	* plugins/reg_linear/gog-polynom-reg.c (append_number): New
	subroutine to get minuses right.

2006-02-06  Morten Welinder  <terra@gnome.org>

	* plugins/reg_linear/gog-polynom-reg.c
	(gog_polynom_reg_curve_get_equation): Simplify.  Handle exponents
	>= 10 again.  Include highest terms.  Drop "1" factors.  Handle
	degenerate case of "y = 0".

2006-02-06  Morten Welinder  <terra@gnome.org>

	* plugins/reg_linear/gog-polynom-reg.c: Constify.

2006-02-06  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-series-impl.h: add get_xy_data to GogSeriesClass
	(needed by regrerssion curves in histograms and line plots.
	* goffice/graph/gog-series.c: (gog_series_get_xy_data): new function.
	* goffice/graph/gog-series.h: ditto.
	* goffice/utils/go-regression.c: (go_power_regression): new regression
	method, (go_non_linear_regression): fix params updates.
	* goffice/utils/go-regression.h: new power regressions.
	* plugins/plot_barcol/gog-1.5d.c: (go_plugin_init): add a view to
	GogLinePlot to support regression curves [#328236].
	* plugins/plot_barcol/gog-line.c: (gog_line_series_view_render),
	(gog_line_series_view_size_allocate),
	(gog_line_series_view_class_init), (gog_line_series_init_style),
	(gog_line_series_update), (gog_line_series_get_xy_data),
	(gog_line_series_finalize), (gog_line_series_class_init),
	(child_added_cb), (gog_line_plot_init), (gog_line_view_render),
	(gog_line_view_size_allocate), (gog_line_view_class_init): ditto.
	* plugins/plot_barcol/gog-line.h: ditto.
	* plugins/plot_boxes/gog-histogram.c: (gog_histogram_plot_update),
	(gog_histogram_plot_view_size_allocate),
	(gog_histogram_plot_view_class_init), (drop_lines_post_add),
	(gog_histogram_plot_series_update),
	(gog_histogram_plot_series_finalize),
	(gog_histogram_plot_series_get_xy_data),
	(gog_histogram_plot_series_class_init),
	(gog_histogram_plot_series_init): support regression curves.
	* plugins/reg_linear/Makefile.am: add new power regression.
	* plugins/reg_linear/gog-exp-reg.c:
	(gog_exp_reg_curve_get_equation): fixed equation [#328236].
	* plugins/reg_linear/gog-lin-reg.c: (gog_lin_reg_curve_update),
	(gog_lin_reg_curve_get_equation),
	(gog_lin_reg_curve_populate_editor), (go_plugin_init):
	* plugins/reg_linear/gog-log-reg.c:
	(gog_log_reg_curve_get_equation): ditto.
	* plugins/reg_linear/gog-polynom-reg.c:
	(gog_polynom_reg_curve_get_equation): ditto.
	* plugins/reg_linear/gog-power.c: new power regression curves.
	* plugins/reg_linear/gog-power.h: ditto.
	* plugins/reg_linear/plugin.xml.in: ditto.
	* plugins/reg_linear/reg-types.xml.in: ditto.
	* plugins/reg_logfit/gog-logfit.c: (gog_log_fit_curve_update),
	(gog_log_fit_curve_get_equation): fixed equation [#328236].

2006-01-29  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-graph.c (gog_graph_view_handle_event): correct use
	of GDK_POINTER_MOTION_HINT_MASK, according to gtk tutorial. There's
	still a problem with foocanvas which seems to eat a GDK_BUTTON_PRESS
	event.

2006-01-26  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-math.c (go_math_init): Prevent compilation with
	-ffast-math.

2006-01-23  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/gtk/go-action-combo-color.c: (make_icon),
	(go_action_combo_color_connect_proxy): fixed warnings when using a
	combo action in a menu.
	* goffice/gtk/go-action-combo-pixmaps.c: (make_icon),
	(go_action_combo_pixmaps_connect_proxy): ditto.

2006-01-21  J.H.M. Dassen (Ray) <jdassen@debian.org>

	* configure.in: Versioned the pixmap files and the translations to make
	complete parallel installability of packages easier.
	* docs/reference/Makefile.am, goffice/goffice.c, tests/Makefile.am:
	follow version change.

2006-01-05  Jody Goldberg <jody@gnome.org>

	* goffice.mk (goffice_include_dir) : version the include files to
	  avoid conflict between stable and unstable.

2006-01-05  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/goffice-graph.h: change GogSeriesLines definition.
	* goffice/graph/gog-series-lines.c: Change the way markers are managed.
	* goffice/graph/gog-series-lines.h: ditto.
	* goffice/utils/go-libxml-extras.c:
	(e_xml_get_child_by_name_by_lang): fix an internaionalization bug.
	* pixmaps/Makefile.am: add new histograms pixmaps.
	* pixmaps/chart_histogram_1_1.png: ditto.
	* pixmaps/chart_histogram_1_1.svg: ditto.
	* pixmaps/hist.xpm: ditto.
	* plugins/plot_barcol/gog-1.5d.c: (lines_post_add): add markers for lines
	in DropBar plots.
	* plugins/plot_boxes/Makefile.am: add histograms.
	* plugins/plot_boxes/gog-boxplot.c: (go_plugin_init): ditto.
	* plugins/plot_boxes/gog-histogram.c: ditto.
	* plugins/plot_boxes/gog-histogram.h: ditto.
	* plugins/plot_boxes/plot-types.xml.in: ditto.
	* plugins/plot_boxes/plugin.xml.in: ditto.

2006-01-01  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_barcol/gog-minmax.c: fixed a marker display problem.

2006-01-03  Stepan Kasal  <kasal@ucw.cz>

	* goffice/graph/gog-error-bar.h: #include <goffice/goffice-features.h>
	* goffice/gtk/go-font-sel.c: #include <string.h> for strcmp()

2006-01-02  Stepan Kasal  <kasal@ucw.cz>

	* Makefile.am: Add DISTCHECK_CONFIGURE_FLAGS = --enable-gtk-doc
	* docs/reference/Makefile.am (EXTRA_DIST): Add version.xml,
	  to work around #314105.

2006-01-01  Stepan Kasal  <kasal@ucw.cz>

	* docs/reference/Makefile.am (INCLUDES): Remove, it's redundant.
	(GTKDOC_CFLAGS): Add -I$(top_builddir).
	* docs/reference/goffice.types:
	  #include <goffice/graph/gog-object-xml.h>

2006-01-01  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-file.c: (go_mime_type_get_description): new gnome-vfs
	wrapper.
	* goffice/utils/go-file.h: ditto.
	* goffice/utils/go-font.c: moved inclusion of pango-context.h to
	header.
	* goffice/utils/go-font.h: ditto, removed unused panfo_fc header.

2005-12-30  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-renderer-cairo.c (grc_free_marker_data): new.
	(gog_renderer_cairo_finalize): call grc_free_marker_data.
	(grc_draw_path): don't draw a line if dash_type = GO_LINE_NONE.
	(grc_get_marker_surface): use cairo_surface_create_similar and draw marker
	here instead of use pixbuf given by go_marker_get_pixbuf.
	(gog_renderer_cairo_draw_marker): don't draw marker here for vector
	case, just paint a similar surface.
	(gog_renderer_cairo_push_style): free marker data.
	(gog_renderer_cairo_pop_style): ditto.

2005-12-30  Stepan Kasal  <kasal@ucw.cz>

	* goffice/.cvsignore: Remove goffice-paths.sh.

2005-12-28  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-renderer-cairo.c (grc_draw_path): invalidate cairo
	dash setting when line is not dashed.
	(grc_draw_polygon): ditto. Fix a typo.
	(gog_renderer_cairo_draw_text): use pango_cairo API instead of toy cairo text API.
	(gog_renderer_cairo_get_text_OBR): ditto.

2005-12-22  Stepan Kasal  <kasal@ucw.cz>

	* docs/reference/goffice-overrides.txt: New file, fixes "make dist".

2005-12-17  J.H.M. Dassen (Ray) <jdassen@debian.org>

	* goffice/graph/gog-style.h:
	  #include <goffice/graph/gog-renderer-pixbuf.h> for GdkPixbuf;
	  #include <goffice/utils/go-font.h> for PangoFontDescription.

2005-12-16  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/goffice-features.h.in: add GOFFICE_WITH_GTK and
	GOFFICE_WITH_GNOME.
	* configure.in: rename WITH_GTK and WITH_GNOME to GOFFICE_WITH_GTK and
	GOFFICE_WITH_GNOME.
	* goffice/graph/gog-error-bar.c: ditto.
	* goffice/graph/gog-error-bar.h: ditto.
	* goffice/gtk/goffice-gtk.c: (go_help_display): ditto.
	* goffice/utils/go-color.c: ditto.
	* goffice/utils/go-color.h: ditto (and include goffice-features.h).
	* goffice/utils/go-file.c: (go_filename_from_uri),
	(go_filename_to_uri), (go_shell_arg_to_uri),
	(go_basename_from_uri), (go_dirname_from_uri), (go_file_open),
	(go_file_create), (go_url_show), (go_get_mime_type),
	(go_get_mime_type_for_data): ditto.
	* goffice/utils/go-gradient.c: ditto.
	* goffice/utils/go-gradient.h: ditto (and include goffice-features.h).
	* goffice/utils/go-image.c: (go_image_format_to_mime),
	(go_image_build_pixbuf_format_infos),
	(go_image_get_formats_with_pixbuf_saver): ditto.
	* goffice/utils/go-line.c: ditto.
	* goffice/utils/go-marker.c: (go_marker_init), (go_marker_assign): ditto.
	* goffice/utils/go-marker.h: ditto (and include goffice-features.h).
	* goffice/utils/go-pattern.c: ditto.
	* goffice/utils/go-pattern.h: ditto (and include goffice-features.h).

2005-12-16  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/component/go-component-factory.c: remove go_components_set_screen_resolution
	* goffice/component/go-component-factory.h: ditto.
	* goffice/component/go-component.c: (go_component_set_size): do not set size if not resizable,
	(go_component_draw): draw to correct size whatever the zoom and the screen resolution.
	* goffice/component/go-component.h: changed signature of go_component_draw.

2005-12-16  Stepan Kasal  <kasal@ucw.cz>

	* configure.in (PKG_PROG_PKG_CONFIG): Add an explanation.
	* autogen.sh: Add an explanation about REQUIRED_PKG_CONFIG_VERSION.

2005-12-13  Morten Welinder  <terra@gnome.org>

	* configure.in: Undo change to PKG_PROG_PKG_CONFIG.

2005-12-13  Stepan Kasal  <kasal@ucw.cz>

	* goffice/gtk/goffice-gtk.h, goffice/gtk/goffice-gtk.c: Move
	  GOImageFormat, GOImageFormatInfo and related functions to ...
	* goffice/utils/go-image.h, goffice/utils/go-image.c: ... a new file.
	* goffice/utils/Makefile.am: Add them.
	* docs/reference/TODO: Update.

2005-12-13  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-file.c (go_filename_to_uri): Resolve some ".."
	cases, namely those where no symlinks are involved.

2005-12-13  Stepan Kasal  <kasal@ucw.cz>

	* goffice/component/go-component.c (go_component_export_to_svg):
	Do not use return without a value.

2005-12-12  Morten Welinder  <terra@gnome.org>

	* goffice/graph/gog-object-xml.c (gog_object_write_xml_sax): Add
	precondition.  See #323608.

2005-12-12  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* configure.in: bump cairo version requisition to 1.0.0.
	* goffice/graph/gog-graph.c (gog_graph_get_supported_image_formats):
	new.
	(gog_graph_export_image): new.
	* goffice/graph/gog-renderer-cairo.c (grc_line_size): handle case of
	vector rendering (for SVG, PDF, PS output).
	(gog_renderer_cairo_clip_push): ditto.
	(gog_renderer_cairo_line_size): ditto.
	(gog_renderer_cairo_sharp_path): ditto.
	(gog_renderer_cairo_draw_marker): ditto.
	(gog_renderer_cairo_draw_text): don't restrict text position to
	positive values.
	(gcr_gsf_gdk_pixbuf_save): new.
	(grc_cairo_write_func): new.
	(grc_cairo_setup): remove and move code...
	(gog_renderer_cairo_update): ...here.
	* goffice/graph/gog-renderer-impl.h (GogRenderer::export_image): new.
	* goffice/graph/gog-renderer-pixbuf.c (grp_gsf_gdk_pixbuf_save): new.
	(gog_renderer_pixbuf_export_image): new.
	* goffice/graph/gog-renderer-svg.c (gog_graph_export_to_svg): removed.
	(gog_graph_export_image): new.
	* goffice/graph/gog-renderer.c (gog_renderer_new_for_format): new.
	(gog_renderer_export_image): new.
	* goffice/gtk/goffice-gtk.c (gui_get_image_save_info): format is an
	enum now.
	(go_image_build_pixbuf_format_infos): new.
	(go_image_get_format_info): new.
	(go_image_get_format_from_name): new.
	(go_image_get_formats_with_pixbuf_saver): new.

2005-12-11  J.H.M. Dassen (Ray) <jdassen@debian.org>

	* configure.in: Require pkg-config version that understands about
	private libraries.
	* libgoffice-1.pc.in: Moved @EXTRA_LIBS@ into Libs.private .

2005-12-07  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-format-sel.c (format_entry_set_text): Constify.
	(cb_format_list_select): Plug leak.

2005-12-06  Christian Neumair  <chris@gnome-de.org>

	* goffice/graph/gog-object.c:
	* goffice/graph/gog-object.h:
	Add gog_object_get_child_by_name API.

2005-12-05  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/gtk/go-combo-box.c: undef GTK_DISABLE_DEPRECATED. [#323171]

2005-12-04  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/data/go-data-simple.c: doc fixes.

2005-12-04  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/goffice-graph.h: declare GogSeriesLines here.
	* goffice/graph/gog-axis-line.h: make gtk-doc happy by creating a
	GogAxisTickTypes struct.
	* goffice/graph/gog-axis-line.c (gog_tool_move_stop_bound_move): don't
	access GogAxisMap::axis directly.
	* goffice/graph/gog-axis.c: make GogAxisMap and GogAxisMapDesc
	private. Doc fixes.
	* goffice/graph/gog-chart.c: make GogChartMap private. Documentation
	of GogChartMap API.
	* goffice/graph/gog-data-allocator.h: doc fixes.
	* goffice/graph/gog-data-allocator.c: ditto.
	* goffice/graph/gog-renderer-cairo.c: ditto.
	* goffice/graph/gog-renderer-pixbuf.c: doc fixes.
	* goffice/graph/gog-renderer-gnome-print.c: don't access GOMarker
	data directly.
	* goffice/graph/gog-renderer-svg.c: ditto.
	* goffice/graph/gog-series-lines.c: ditto.
	* goffice/gtk/go-combo-box.c: doc fixes.
	* goffice/gtk/go-combo-color.c: ditto.
	* goffice/gtk/go-combo-pixmaps.c: ditto.
	* goffice/gtk/go-combo-text.c: ditto.
	* goffice/gtk/go-dock-item.c: ditto.
	* goffice/utils/format.c: ditto.
	* goffice/utils/go-glib-extras: ditto.
	* goffice/utils/go-marker.c: make GOMarker struct private.

2005-12-03  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-axis: doc fixes.
	* goffice/graph/gog-chart.c: ditto.
	* goffice/graph/gog-error-bar.c: ditto.
	* goffice/graph/gog-object.c: ditto.
	* goffice/graph/gog-renderer.c: ditto.
	* goffice/graph/gog-series.c: ditto.
	* goffice/graph/gog-style.c: ditto.
	* goffice/graph/gog-view.c: ditto.
	* goffice/gtk/go-dock-item.c: ditto.
	* goffice/utils/format.c: ditto.
	* goffice/utils/go-geometry.c: ditto.
	* goffice/utils/go-pattern.c: ditto.
	* goffice/utils/go-regression.c: move doc from headers.

2005-12-03  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-styled-object.c: doc fixes.

2005-12-03  J.H.M. Dassen (Ray) <jdassen@debian.org>

	* goffice/Makefile.am: Don't try to use pcre.la from cut-n-paste when
	using the system's pcre library.

2005-12-02  Morten Welinder  <terra@gnome.org>

	* configure.in: Check for a system libpcre that supports UTF-8.
	* goffice/cut-n-paste/Makefile.am: Arrange to use system pcre when
	appropriate.
	* goffice/utils/Makefile.am: Ditto.
	* goffice/utils/regutf8.c: Ditto.

2005-12-02  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* configure.in: build docs/reference/version.xml

2005-12-02  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-file.c (go_shell_arg_to_uri): Be more careful
	with filenames that contain colons.  Fixed #322799.

2005-11-30  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-file.c (go_filename_to_uri): Improve slightly
	for systems with more than one directory separator.

2005-12-01  Jon K Hellan  <hellan@acm.org>

	* goffice/graph/gog-renderer.h: Fix typo.

2005-12-01  J.H.M. Dassen (Ray) <jdassen@debian.org>

	* goffice/app/go-plugin.c, goffice/graph/gog-axis.c,
	goffice/graph/gog-chart.c, goffice/graph/gog-chart.h,
	goffice/graph/gog-data-set.c, goffice/graph/gog-graph.c,
	goffice/graph/gog-object.c, goffice/graph/gog-object.h,
	goffice/graph/gog-renderer.c, goffice/graph/gog-renderer.h,
	goffice/graph/gog-series.c, goffice/graph/gog-theme.c,
	goffice/graph/gog-theme.h, goffice/graph/gog-view.c,
	goffice/graph/gog-view.h, goffice/gtk/go-combo-color.c,
	goffice/gtk/go-combo-text.c, goffice/gtk/goffice-gtk.c,
	goffice/utils/datetime.c, goffice/utils/go-geometry.c,
	goffice/utils/go-libxml-extras.c: Some gtk-doc fixes.

2005-12-01  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	Enable gtk-doc.

	* Makefile.am: add docs to SUBDIRS.
	* configure.in: add GTK_DOC_CHECK. Add docs Makefile to
	AC_CONFIG_FILES.
	* docs/Makefile.am: new.
	* docs/reference/Makefile.am: new.
	* docs/reference/goffice-sections.txt: new. Only include Goffice Graph
	API for now.
	* docs/reference/goffice-docs.sgml: ditto.
	* docs/reference/TODO: new. Contains remaining API sections.
	* goffice/graph/gog-error-bar.c (gog_error_bar_prefs): fix a gtk-doc
	warning.

2005-11-27  Jean Brefort  <jean.brefort@normalesup.org>

	* configure.in: create goffice/component/Makefile.
	* goffice/Makefile.am: add component subdir.
	* goffice/component/Makefile.am: new component API.
	* goffice/component/go-component-factory.c: ditto.
	* goffice/component/go-component-factory.h: ditto.
	* goffice/component/go-component.c: ditto.
	* goffice/component/go-component.h: ditto.
	* goffice/component/goffice-component.h: ditto.
	* goffice/goffice.c: (libgoffice_init), (libgoffice_shutdown):
	init/shutdown component sustem.
	* goffice/utils/go-file.c: (go_get_mime_type_for_data): new function.
	* goffice/utils/go-file.h: ditto.
	* libgoffice-1.pc.in: add GOffice_plugins_dir variable.

2005-11-23  Morten Welinder  <terra@gnome.org>

	* goffice/utils/format.c (go_format_number): Handle the separation
	of numbers into whole and fractional part such that numbers from
	2^31 and up do not invoke undefined behaviour.

	* goffice/utils/go-math.c (go_continued_fraction): Don't go to
	int-space until we have checked the size.

2005-11-20  Emmanuel Pacaud <emanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/Makefile.am: always compile gog-renderer-pixbuf.c.

2005-11-20  Emmanuel Pacaud <emanuel.pacaud@univ-poitiers.fr>

	Fix smoothness of object movements in guru.

	* goffice/graph/gog-graph.c (gog_graph_view_handle_event): force
	update processing, and call gdk_window_get_pointer in order to get
	next motion event.
	* goffice/graph/gog-guru.c (graph_guru_init_format_page): add
	GDK_POINTER_MOTION_HINT_MASK to graph window event mask.

2005-11-18  Emmanuel Pacaud <emanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/Makefile.am: don't build pixbuf renderer when cairo is
	enabled.
	* goffice/graph/gog-control-foocanvas.c
	(gog_control_foocanvas_set_property): don't use conditionnal
	compilation, but helper functions from gog-renderer.c.
	(gog_control_foocanvas_draw): ditto.
	(gog_control_foocanvas_update): ditto.
	(gog_control_foocanvas_class_init): ditto.
	* goffice/graph/gog-renderer-cairo.c (gog_renderer_cairo_clip_push):
	set clip from arbitrary path instead of rectangle region.
	(gog_renderer_cairo_draw_text): use 72 dpi for screen resolution.
	(gog_renderer_cairo_get_text_OBR): ditto.
	* goffice/graph/gog-renderer.c (gog_renderer_new_for_pixbuf): new.
	(gog_renderer_update): new.
	(gog_renderer_get_pixbuf): new.
	* goffice/gtk/go-graph-widget.c (go_graph_widget_size_allocate): use
	new helper functions from gog-renderer instead of requesting
	explicitely a pixbuf renderer.
	(go_graph_widget_expose_event): ditto.
	(idle_handler): ditto.
	(go_graph_widget_init): ditto.

2005-11-17  Emmanuel Pacaud <emanuel.pacaud@univ-poitiers.fr>

	* pixmap/chart_dropbar_1_[12].[svg,png]: fix rendering and bitmap.
	[#321675]

2005-11-16  Morten Welinder  <terra@gnome.org>

	* goffice/graph/gog-object.c (gog_object_add_by_name): Add
	pre-condition.
	* goffice/graph/*.c: Fix preconditions to use IS_ forms.

2005-11-15  Emmanuel Pacaud <emanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-axis-line.c (gog_tool_select_axis_point),
	(gog_tool_select_axis_render),
	(gog_tool_bound_is_valid_axis),
	(gog_tool_move_start_bound_point),
	(gog_tool_move_start_bound_render),
	(gog_tool_move_stop_bound_point),
	(gog_tool_move_stop_bound_render),
	(gog_tool_move_bound_init),
	(gog_tool_move_bound_destroy),
	(gog_tool_move_start_bound_move),
	(gog_tool_move_stop_bound_move): new.
	(x_process): store axis position for use in tools.
	(xy_process): ditto.
	(gog_axis_base_view_info_at_point): renamed to
	gog_axis_base_view_point, for use in tools.
	(gog_axis_base_build_toolkit): new.
	* goffice/graph/gog-axis.c (elem_toggle_data_free): new.
	(cb_update_dim_editor): new.
	(make_dim_editor): don't use closure, since they're not destroyed on
	watched object finalization, just invalidated.
	(cb_axis_fmt_assignment_toggled): removed.
	(gog_axis_populate_editor): remove dead code.
	(gog_axis_set_bounds): new.
	(gog_axis_set_extents): new.
	* goffice/graph/gog-graph.c: new selection-changed signal for
	GogGraphView objects. This signal is emitted when visual selection
	is changed after a mouse action.
	(gog_graph_view_render): new.
	(gog_graph_view_finalize): new.
	(update_cursor), (update_action): new.
	(gog_graph_view_handle_event): new.
	(gog_graph_view_set_selection): new.
	(gog_graph_view_get_selection): new.
	* goffice/graph/gog-grid-line.c (gog_grid_line_info_at_point):
	removed.
	* goffice/graph/gog-guru.c: now also store graph view in guru state.
	(graph_guru_state_destroy): unref graph view.
	(cb_attr_tree_selection_change): update visual selection.
	(cb_canvas_select_item): forward event to gog_graph_view_handle_event.
	(cb_graph_selection_changed): new. Update object tree.
	(graph_guru_init_format_page): store graph view in state.
	* goffice/graph/gog-object.c: new update-editor signal, emitted when
	an object editor needs to be refreshed.
	(cb_update_editor): new.
	(gog_object_populate_editor): connect to update-editor signal.
	(gog_object_request_editor_update): new.
	* goffice/graph/gog-plot.c (gog_tool_move_plot_area_point),
	(gog_tool_move_plot_area_render),
	(gog_tool_move_plot_area_init),
	(gog_tool_move_plot_area_move),
	(gog_tool_resize_plot_area_point),
	(gog_tool_resize_plot_area_render),
	(gog_tool_resize_plot_area_move),
	(gog_plot_view_build_toolkit),
	(gog_plot_view_class_init): new.
	* goffice/graph/gog-renderer.c (gog_renderer_finalize): unref grip
	style.
	(gog_renderer_draw_grip),
	(gog_renderer_push_selection_style): new.
	* goffice/graph/gog-renderer.h (gog_renderer_in_grip): new.
	* goffice/graph/gog-view.c (gog_tool_select_object_point),
	(gog_tool_select_object_render),
	(gog_tool_move_object_point),
	(gog_tool_move_object_init),
	(gog_tool_move_object_move),
	(gog_tool_resize_object_point),
	(gog_tool_resize_object_render),
	(gog_tool_resize_object_move),
	(gog_tool_action_new),
	(gog_tool_action_move),
	(gog_tool_action_double_click),
	(gog_tool_action_free): new.
	(gog_view_finalize): free toolkit.
	(gog_view_build_toolkit): new.
	(gog_view_queue_resize): purge dead code.
	(gog_view_info_at_point): removed.
	(gog_view_find_child_view): don't emit warning if child view is not
	found, since all objects don't have an assciated view.
	(gog_view_render_toolkit),
	(gog_view_get_toolkit),
	(gog_view_get_tool_at_point),
	(gog_view_get_view_at_point): new.
	* plugins/plot_barcol/gog-barcol.c (gog_barcol_view_info_at_point):
	removed.
	* plugins/plot_barcol/gog-dropbar.c (gog_dropbar_view_info_at_point):
	removed.
	* plugins/plot_barcol/gog-line.c (gog_line_view_info_at_point):
	removed.
	* plugins/plot_barcol/gog-minmax.c (gog_minmax_view_info_at_point):
	removed.
	* plugins/plot_pie/gog-pie-prefs.c (pie_pref_state_free): new.
	(cb_update_editor): new.
	(gog_pie_plot_pref): connect to update-editor signal.
	(gog_ring_plot_pref): ditto.
	* plugins/plot_pie/gog-pie.c (gog_pie_plot_set_default_separation):
	new.
	(find_element): new.
	(gog_tool_move_pie_point),
	(gog_tool_move_pie_render),
	(gog_tool_move_pie_init),
	(gog_tool_move_pie_move),
	(gog_tool_move_pie_double_click),
	(gog_pie_view_build_toolkit): new.
	(gog_pie_view_info_at_point): removed.
	* plugins/plot_radar/gog-radar.c (fmin): removed.
	(gog_rt_view_info_at_point): removed.
	* plugins/plot_xy/gog-xy.c (gog_xy_view_info_at_point): ditto.

2005-11-14  Jody Goldberg <jody@gnome.org>

	* configure.in : post BRANCH bump

2005-11-14  Jody Goldberg <jody@gnome.org>

	* Release 0.1.2

2005-11-13  Morten Welinder  <terra@gnome.org>

	* goffice/goffice.c: Call bind_textdomain_codeset.

2005-11-07  Jody Goldberg <jody@gnome.org>

	* configure.in : post release bump

2005-11-06  Jody Goldberg <jody@gnome.org>

	* Release 0.1.1

2005-11-06  Jody Goldberg <jody@gnome.org>

	* goffice/graph/gog-style.c (gog_style_persist_prep_sax) :
	  differentiate between line and outline.
	(gog_style_sax_load_line) : typo s/auto-dash/auto-color/

2005-11-05  Jody Goldberg <jody@gnome.org>

	* goffice/graph/gog-style.c
	(gog_style_line_dom_save) : delete.
	(gog_style_gradient_dom_save) : delete.
	(gog_style_fill_dom_save) : delete.
	(gog_style_marker_dom_save) : delete.
	(gog_style_font_dom_save) : delete.
	(gog_style_text_layout_dom_save) : delete.
	(gog_style_persist_dom_save) : delete.

	(gog_style_sax_load_line) : use the correct state.
	(gog_style_sax_load_fill_pattern) : use the correct state.
	(gog_style_sax_load_fill_gradient) : use the correct state.
	(gog_style_sax_load_fill) : use the correct state.
	(gog_style_sax_load_marker) : use the correct state.
	(gog_style_sax_load_font) : use the correct state.
	(gog_style_sax_load_text_layout) : use the correct state.

	(gog_style_persist_prep_sax) : new.

	* goffice/graph/gog-object-xml.c (gog_persist_dom_save) : delete
	(gog_object_write_property) : delete.
	(gog_dataset_dom_save) : delete.
	(gog_object_write_xml) : delete.
	(gog_persist_prep_sax) : new.
	(gog_dataset_sax_save) : use gsf_xml_out_add_int instead of rolling
	  our own.

	First pass at a sax based importer.
	(gog_xml_read_state_get_obj) : new.
	(gogo_dim_start) : new.
	(gogo_dim_end) : new.
	(gogo_prop_start) : new.
	(gogo_prop_end) : new.
	(gogo_start) : new.
	(gogo_end) : new.
	(go_sax_parser_done) : new.
	(gog_object_sax_push_parser) : new.

	* goffice/graph/gog-error-bar.c (gog_error_bar_persist_prep_sax) : new.
	(gog_error_bar_persist_dom_save) : delete.
	(geb_start) : delete.
	(gog_error_bar_persist_init) : adapt to new sax_prep interface.

	* configure.in : bump gsf req to 1.13.3 to get the updated semantics
	  for the sax extension api.
	* README : ditto.

2005-11-03  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/data/go-data-simple.c: (go_data_vector_val_load_values): do
	not take non finite values into account while calculating maximum.

2005-10-30  Jody Goldberg <jody@gnome.org>

	* goffice/app/go-plugin-loader-module.c
	(go_plugin_loader_module_load_base) : Use G_MODULE_BIND_LAZY as per
	  http://bugzilla.gnome.org/show_bug.cgi?id=319557

2005-11-01  J.H.M. Dassen (Ray) <jdassen@debian.org>

	* README: Updated list archive URL. (Debian #336699)

2005-10-30  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-math.c (go_math_init): Save the right
	old_locale.

	* goffice/graph/gog-chart.c (axis_set_desc): Make static.
	* goffice/ms-compat/go-ms-parser.c (unknown_type): Make static.
	* goffice/utils/go-line.c (line_dashes): Make static.

2005-10-26  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-charmap-sel.c (charset_order, lgroups_order): Use
	precomputed collate key.
	(cs_class_init): Pre-compute collate keys before sorting.

2005-10-26  Stepan Kasal  <kasal@ucw.cz>

	* goffice/graph/gog-object-xml.c: Remove #include glade/glade-build.h
	the code no longer uses glade xml utils.

2005-10-20  Morten Welinder  <terra@gnome.org>

	* goffice/graph/gog-view.c (gog_view_render): Survive NaN
	allocation.  Fixes #319309.

2005-10-17  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-object.c (gog_object_populate_editor): hide manual
	settings when manual position is not allowed.

2005-10-10  Jody Goldberg <jody@gnome.org>

	* configure.in : bump gsf req to avoid the breakage in 1.13.1

2005-10-10  Jody Goldberg <jody@gnome.org>

	* configure.in : post release bump

2005-10-10  Jody Goldberg <jody@gnome.org>

	* Release 0.1.0

2005-10-10  Jody Goldberg <jody@gnome.org>

	* goffice/graph/gog-object-xml.h (GogPersistClass) : Add sax_doc as a
	  hook to support GsfXMLIn sax based import.
	* goffice/graph/gog-style.c (gog_style_persist_init) : whip up a quick
	  dtd but do not implement. (Leak the doc)
	* goffice/graph/gog-error-bar.c (gog_error_bar_persist_init) : whip up
	  a dtd (leak the doc).
	(geb_start) : implement it.

2005-10-09  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-label.c (gog_reg_eqn_view_class_init): default for show-eq
	and show-r2 is TRUE [#318316].

2005-10-07  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/gtk/go-action-combo-pixmaps.c:
	(go_action_combo_pixmaps_create_tool_item): translate non goffice strings
	[#318042].
	* goffice/gtk/goffice-gtk.c: (gui_get_image_save_info): ditto [#318043].

2005-10-07  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-renderer-svg.c (fill_properties): fix gradient
	start / stop colors [#318191].

2005-10-07  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_surface/xl-surface.c: (xl_contour_plot_update):
	do not use num_elements for first series to caculate comlumns number.

2005-10-06  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_surface/plugin.xml.in: add TM mention to Excel name
	and remove the description from the translation strings as it
	never appears in the UI.

2005-10-06  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_surface/xl-surface.c (xl_contour_plot_axis_get_bounds):
	fixed axis bounds.

2005-10-05  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-pattern.c: add /* xgettext:no-c-format */ before
	"75% Grey" and analogs.

2005-10-05  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-plot.c: (gog_plot_class_init): fixed typo.
	* goffice/graph/gog-style-prefs.glade: fixed a duplicate shortcut.
	* goffice/utils/regutf8.c: (go_regerror): fixed typo.

2005-10-05  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-guru-type-selector.glade: remove an unused
	label text.

2005-10-05  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/app/file.c: fixed localization issues [#317925].
	* goffice/app/go-cmd-context.c: (go_cmd_context_get_type): ditto.
	* goffice/app/go-object.c: ditto.
	* goffice/app/go-plugin-loader-module.c: ditto.
	* goffice/app/go-plugin-loader.c: (go_plugin_loader_get_type): ditto.
	* goffice/app/go-plugin-service.c: ditto.
	* goffice/app/go-plugin.c: ditto.
	* goffice/data/go-data-simple.c: ditto.
	* goffice/data/go-data.c: ditto.
	* goffice/drawing/god-default-attributes.c: ditto.
	* goffice/drawing/god-paragraph-attributes.c: ditto.
	* goffice/goffice.c: (libgoffice_init): ditto.
	* goffice/graph/gog-axis-line.c: (gog_axis_base_populate_editor): ditto.
	* goffice/graph/gog-axis.c: (gog_axis_populate_editor): ditto.
	* goffice/graph/gog-chart.c: (gog_chart_populate_editor): ditto.
	* goffice/graph/gog-control-foocanvas.c: ditto.
	* goffice/graph/gog-error-bar.c: (gog_error_bar_prefs): ditto.
	* goffice/graph/gog-graph.c: ditto.
	* goffice/graph/gog-grid-line.c: ditto.
	* goffice/graph/gog-grid.c: ditto.
	* goffice/graph/gog-guru.c: (graph_guru_type_selector_new),
	(graph_guru_init): ditto.
	* goffice/graph/gog-label.c: (gog_reg_eqn_populate_editor): ditto.
	* goffice/graph/gog-legend.c: ditto.
	* goffice/graph/gog-object.c: (gog_object_populate_editor): ditto.
	* goffice/graph/gog-outlined-object.c: ditto.
	* goffice/graph/gog-plot-engine.c: ditto.
	* goffice/graph/gog-plot.c: ditto.
	* goffice/graph/gog-reg-curve.c: (gog_reg_curve_populate_editor): ditto.
	* goffice/graph/gog-series.c: ditto.
	* goffice/graph/gog-style.c: (font_init),
	(gog_style_populate_editor): ditto.
	* goffice/graph/gog-styled-object.c: ditto.
	* goffice/graph/gog-theme.c: ditto.
	* goffice/graph/gog-view.c: ditto.
	* goffice/gtk/go-action-combo-color.c: ditto.
	* goffice/gtk/go-action-combo-pixmaps.c: ditto.
	* goffice/gtk/go-action-combo-stack.c: ditto.
	* goffice/gtk/go-action-combo-text.c: ditto.
	* goffice/gtk/go-charmap-sel.c: ditto.
	* goffice/gtk/go-color-palette.c: ditto.
	* goffice/gtk/go-combo-box.c: ditto.
	* goffice/gtk/go-combo-pixmaps.c: ditto.
	* goffice/gtk/go-dock-band.c: ditto.
	* goffice/gtk/go-dock-item-grip.c: ditto.
	* goffice/gtk/go-dock-item.c: (go_dock_item_get_grip): ditto.
	* goffice/gtk/go-dock-layout.c: ditto.
	* goffice/gtk/go-dock.c: ditto.
	* goffice/gtk/go-font-sel.c: (gfs_init): ditto.
	* goffice/gtk/go-format-sel.c: (nfs_init): ditto.
	* goffice/gtk/go-locale-sel.c: ditto.
	* goffice/gtk/go-optionmenu.c: (go_option_menu_scroll_event): ditto.
	* goffice/gtk/go-rotation-sel.c: (grs_init): ditto.
	* goffice/gtk/goffice-gtk.c: ditto.
	* goffice/utils/format.c: ditto.
	* goffice/utils/formats.c: ditto.
	* goffice/utils/go-format-match.c: (format_match_release): ditto.
	* goffice/utils/go-glib-extras.c: ditto.
	* goffice/utils/go-gradient.c: ditto.
	* goffice/utils/go-line.c: ditto.
	* goffice/utils/go-marker.c: ditto.
	* goffice/utils/go-pattern.c: ditto.
	* goffice/utils/regutf8.c: ditto.
	* plugins/plot_barcol/gog-1.5d.c: ditto.
	* plugins/plot_barcol/gog-barcol-prefs.c: (gog_barcol_plot_pref): ditto.
	* plugins/plot_barcol/gog-barcol.c: ditto.
	* plugins/plot_barcol/gog-dropbar.c: ditto.
	* plugins/plot_barcol/gog-line.c: ditto.
	* plugins/plot_barcol/gog-minmax.c: ditto.
	(gog_minmax_plot_populate_editor): ditto.
	* plugins/plot_boxes/gog-boxplot.c: (gog_box_plot_pref): ditto.
	* plugins/plot_pie/gog-pie-prefs.c: (gog_pie_series_element_pref),
	(gog_pie_plot_pref), (gog_ring_plot_pref), (gog_pie_series_pref): ditto.
	* plugins/plot_pie/gog-pie.c: ditto.
	* plugins/plot_radar/gog-radar.c: ditto.
	* plugins/plot_surface/gog-contour-prefs.c: ditto.
	(gog_contour_plot_pref): ditto.
	* plugins/plot_surface/gog-surface.c: ditto.
	* plugins/plot_surface/xl-surface.c: ditto.
	* plugins/plot_xy/gog-bubble-prefs.c: (gog_bubble_plot_pref): ditto.
	* plugins/plot_xy/gog-xy.c: ditto.
	* plugins/reg_linear/gog-exp-reg.c: ditto.
	* plugins/reg_linear/gog-lin-reg.c: ditto.
	* plugins/reg_linear/gog-log-reg.c: ditto.
	* plugins/reg_linear/gog-polynom-reg.c: ditto.
	* plugins/reg_logfit/gog-logfit.c: ditto.

2005-10-03  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-object-xml.c (gog_object_set_arg_full) : do
	not call g_value_init before gsf_xml_gvalue_from_str.

2005-10-03  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_surface/gog-surface.c:
	(gog_contour_plot_axis_get_bounds),
	(gog_contour_view_render): start discrete axis scale from 1.
	(gog_contour_plot_set_property): update Y axis when transposing (add
	missing line).

2005-10-02  Jody Goldberg <jody@gnome.org>

	* configure.in : bump libgsf req.

	* goffice/graph/gog-object-xml.c (gog_object_set_arg_full) : the
	  general stuff was split out and moved to the libgsf.  Use the new
	  gsf_xml_gvalue_from_str.

2005-10-02  Jody Goldberg <jody@gnome.org>

	* plugins/plot_surface/gog-surface.c (gog_contour_plot_set_property) :
	  Don't signal the axis if they are not set yet.  Don't do anything if
	  things are not changing.

2005-10-01  Stepan Kasal  <kasal@ucw.cz>

	* configure.in (GOFFICE_LIB_VERSION): Rename to ...
	(VERSION_INFO): ... and fix it, adding an explanation.
	* goffice/Makefile.am (GOFFICE_LIB_VERSION, VERSION_INFO): Likewise.

2005-09-30  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-error-bar.c: (cb_destroy), (cb_type_changed): unref
	the error bar when appropriate.

2005-09-26  Jody Goldberg <jody@gnome.org>

	* goffice/utils/format.c (go_format_unref) : merge in format_destroy
	  there was no utility in keeping them distinct.  Do not warn about
	  the final unref of a markup style, they are not kept in the global
	  cache.
	(go_format_new_markup) : do not put markup formats in the global
	  cache.  We do not really want to share them, and the old code would
	  replace existing formats in the rare situation where some rich text
	  formating happened to be used in the same way in two places
	  eg C sub 1  vs C sub 2
	(go_format_parse_markup) : support rise.
	(cb_attrs_as_string) : ditto.

2005-09-28  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-data-set.c: (gog_dataset_dup_to_simple): fixed an
	inverted test.

2005-09-25  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-graph.c (gog_graph_view_class_init): clip to graph
	area.
	* goffice/graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_text):
	fix text clipping.

2005-09-23  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-axis.c (gog_axis_view_padding_request): axis title
	follows axis line now [#317009].
	(gog_axis_view_size_allocate): ditto.

2005-09-22  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-theme.c (gog_themes_init): set regression equation
	fill color to white.

2005-09-21  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-glib-extras.c (go_guess_encoding): Return
	explicit endianness for UTF-16 encodings.

2005-09-21  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-axis.c (gog_axis_view_padding_request): pass
	available to gog_view_size_request.
	(gog_axis_view_size_allocate): ditto.
	* goffice/graph/gog-label.c (gog_text_view_size_request): ditto.
	* goffice/graph/gog-legend.c (gog_legend_view_size_request):
	multicolumn/line and horizontal layout support.
	(cb_render_elements): ditto.
	(gog_legend_view_render): ditto.
	* goffice/graph/gog-view.c (gog_view_size_request_real): use different
	parameters for different meanings.
	(gog_view_size_request): ditto.
	(gog_view_size_allocate_real):  pass available to
	gog_view_size_request.
	(gog_view_render): don't render when allocation is invalid, not
	residual.
	(gog_view_size_child_request): return additionnal requisition and
	minimum child requisition.

2005-09-17  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/utils/go-geometry.c: use hypot and atan2 functions.

2005-09-16  Morten Welinder  <terra@gnome.org>

	* goffice/graph/gog-renderer.c (gog_renderer_get_text_OBR): Always
	set ->alpha.

2005-09-14  Jody Goldberg <jody@gnome.org>

	* goffice/graph/gog-style.c (text_layout_init) : use GORotationSel

2005-09-15  Morten Welinder  <terra@gnome.org>

	* goffice/utils/regutf8.c (go_regcomp): Improve error handling.

2005-09-12  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/reg_logfit/gog-logfit.c:
	(gog_log_fit_curve_get_equation): fixed a sign in displayed equation.

2005-09-12  Jean Brefort  <jean.brefort@normalesup.org>

	* configure.in: add plugins/reg_logfit/Makefile
	* goffice/graph/gog-reg-curve.c: (gog_reg_curve_populate_editor),
	(gog_reg_curve_finalize), (gog_reg_curve_class_init),
	(gog_reg_curve_get_R2): changed api to support more regressions types.
	* goffice/graph/gog-reg-curve.h: ditto.
	* plugins/Makefile.am: added reg_logfit subdir.
	* plugins/reg_linear/Makefile.am: added exp, log and polynom regs.
	* plugins/reg_linear/gog-exp-reg.c: implement exponential regressions.
	* plugins/reg_linear/gog-exp-reg.h: ditto.
	* plugins/reg_linear/gog-lin-reg.c: updated to support other linear
	regression types: log, exp and polynom.
	* plugins/reg_linear/gog-lin-reg.h: ditto.
	* plugins/reg_linear/gog-log-reg.c: implement logarithmic regressions.
	* plugins/reg_linear/gog-log-reg.h: ditto.
	* plugins/reg_linear/gog-polynom-reg.c: implement polynomial regressions.
	* plugins/reg_linear/gog-polynom-reg.h: ditto.
	* plugins/reg_linear/plugin.xml.in: add the new types.
	* plugins/reg_linear/reg-types.xml.in: ditto.
	* plugins/reg_logfit/Makefile.am: new file. Implements log fits analog
	to the gnumeric LOGFIT function.
	* plugins/reg_logfit/gog-logfit.c: ditto.
	* plugins/reg_logfit/gog-logfit.h: ditto.
	* plugins/reg_logfit/plugin.xml.in: ditto.
	* plugins/reg_logfit/reg-types.xml.in: ditto.

2005-09-10  Stepan Kasal  <kasal@ucw.cz>

	* goffice/utils/go-file.h (go_shell_argv_to_glib_encoding): Changed
	  the return value to "gchar const **".
	(go_shell_argv_to_glib_encoding_free): New function, frees the args
	  array created by go_shell_argv_to_glib_encoding.
	* goffice/utils/go-file.h (saved_args, saved_argc): New static
	  variables.
	(go_shell_argv_to_glib_encoding): Store args and argc to saved_args
	  and saved_argc; adapted to the changed type of return value.
	  Moved to the end of the file.
	(go_shell_argv_to_glib_encoding_free): Implement.

2005-09-08  Morten Welinder  <terra@gnome.org>

	* goffice/utils/format.c (split_time): Add precision argument.
	(guess_invprecision): Crude hack to guess precision.

2005-09-08  Jody Goldberg <jody@gnome.org>

	* goffice/utils/format.c (number_format_init) : add an unref when
	  formats are removed from the cache.
	(cb_format_leak) : ignore the ref from the cache.
	(go_format_unref) : warn if final unref and format is still in cache.
	(number_format_shutdown) : work around the warning in _unref.
	(go_format_new_from_XL) : give a ref to the cache and the caller.
	(go_format_new_markup) : ditto.

2005-09-08  Jody Goldberg <jody@gnome.org>

	* configure.in : post release bump.  jump to 0.1.0 in preparation for
	  release

2005-09-08  Jody Goldberg <jody@gnome.org>

	* Release 0.0.4

2005-09-05  Jody Goldberg <jody@gnome.org>

	* goffice/utils/format.c (go_format_number) : Show 0/??? for fractions
	  with no integer component. [#315018]

2005-09-05  Jody Goldberg <jody@gnome.org>

	* goffice/utils/go-format-match.c (format_create_regexp) : match
	  correct number of digits in denominator.

2005-09-05  Stepan Kasal  <kasal@ucw.cz>

	* goffice/graph/gog-reg-curve.c (skip_invalid_toggled_cb): Move this
	function next to gog_reg_curve_populate_editor, where it is used.
	(gog_reg_curve_set_property), (gog_reg_curve_class_init): Fix consts.

2005-09-05  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-reg-curve-prefs.glade: add a check box to allow
	invalid data skipping [#312788].
	* goffice/graph/gog-reg-curve.c: (skip_invalid_toggled_cb),
	(gog_reg_curve_populate_editor), (gog_reg_curve_get_property),
	(gog_reg_curve_set_property), (gog_reg_curve_class_init): ditto.
	* goffice/graph/gog-reg-curve.h: add skip_invalid to GogRegCurve and
	remove obsolete members.
	* plugins/reg_linear/gog-lin-reg.c: (gog_lin_reg_curve_update): use
	GogRegCurve::skip_invalid [#312788] and use code in go-regression.c.

2005-09-04  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-renderer-svg.c (fill_properties): set fill pattern
	opacity.

2005-09-02  Jody Goldberg <jody@gnome.org>

	* goffice/app/io-context.c (gnm_io_context_processing_file) : people
	  do not want to see escaped uri's in the progress bar.

2005-09-02  Jody Goldberg <jody@gnome.org>

	* goffice/utils/format.c : Add GOFormatElement::forces_text.
	(format_entry_ctor) : initialize it to FALSE.
	(format_compile) : '@' sets it to TRUE.

2005-08-31  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/Makefile.am: add go-regression.* and go-rangefuncs.*
	* goffice/utils/go-rangefunc.c: imported various functions from gnumeric
	and build both double and long double versions if long double is available.
	* goffice/utils/go-rangefunc.h: ditto.
	* goffice/utils/go-regression.c: ditto.
	* goffice/utils/go-regression.h: ditto.

2005-08-29  Jody Goldberg <jody@gnome.org>

	* goffice/utils/format-impl.h : s/StyleFormatEntry/GOFormatElement/
	  Move the regexp into here from.
	* goffice/utils/go-format.h : here.
	  s/StyleFormat/GOFormat/

2005-08-26  Jody Goldberg <jody@gnome.org>

	* goffice/graph/gog-plot.c (gog_plot_new_series) : add some safety.
	* goffice/graph/gog-data-set.c (gog_dataset_set_dim) : add some safety
	  for invalid datasets, being careful to avoid leaking the new val.

2005-08-24  Stepan Kasal  <kasal@ucw.cz>

	The roles hash is now inherited by subclasses, with copy-on-write.

	* goffice/graph/gog-object.h (GogObject) <roles_allocated>: New flag,
	indicates whether this function is resposible to free the hash.
	(gog_object_unregister_role): Removed.
	* goffice/graph/gog-object.c (gog_object_unregister_role): Removed.
	(gog_object_base_finalize): Free the hash, if it's ours.
	(gog_object_base_init): Set roles_allocated to FALSE, indicating that
	the inherited hash is read-only.
	(gog_object_register_roles): When first used for a class, call ...
	(gog_object_allocate_roles): ... this new function, which creates
	a new hash and fill is with inherited values, if any, using...
	(cb_copy_hash_table): ... this new helper function.

	* goffice/graph/gog-series.c (gog_series_base_init): Nuke, moving the
	roles registration code ...
	(gog_series_class_init): ... here.
	* plugins/plot_barcol/gog-1.5d.c (gog_series1_5d_base_class_finalize): Nuke.
	* plugins/plot_xy/gog-xy.c (gog_xy_series_base_finalize): Nuke.

2005-08-24  Stepan Kasal  <kasal@ucw.cz>

	* goffice/utils/go-math.c (go_math_init): Fix the bugzilla URL.

2005-08-18  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-reg-curve.c (gog_reg_curve_view_render): clip to
	residual area.
	* plugins/plot_xy/gog-xy.c (gog_xy_view_render): don't clip children,
	we want to be able to show equation outside of plot area.

2005-08-18  Stepan Kasal  <kasal@ucw.cz>

	* goffice/utils/go-pattern.c (go_pattern_get_svg_path): Issue an
	  error if the pattern is not found.
	* plugins/plot_xy/gog-xy.c (gog_xy_view_render): Silence the compiler.

2005-08-18  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	Make GogRegEqn and GogLabel a derived class of GogText.

	* goffice/graph/gog-reg-eqn.[ch]: removed.
	* goffice/graph/Makefile.am: remove references to gog-reg-eqn.[ch].
	* goffice/graph/gog-label.c: rename GogLabel class to GogText.
	Implement GogLabel as a derived class of GogText and a GogDataSet
	interface.
	(gog_text_get_str): new.
	Implement GogRegEqn as a derived class of GogText.
	(gog_reg_eqn_populate_editor): remove code related to position.
	(gog_reg_eqn_class_init): remove position properties.
	rename GogLabelView to GogTextView.
	(gog_text_view_render): get content from gog_text_get_str.
	* goffice/graph/gog-reg-eqn-prefs.glade: fix layout. Remove position
	widgets.
	* goffice/graph/gog-reg-curve-prefs.glade: fix layout.

2005-08-16  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	Fix position constistency between discrete and linear axes. Enable
	user set bounds for discrete axes [#309468].

	* goffice/graph/gog-chart.c (gog_chart_map_new): th1 = maximum now,
	not maximum + 1.
	(calc_polygon_parameters): ditto. take start theta (th0) into
	account.
	* goffice/graph/gog-axis-line.c (axis_circle_render): ditto.
	(radar_process): ditto.
	* goffice/graph/gog-grid-line.c (gog_grid_line_view_render): ditto.
	* goffice/graph/gog-grid.c (gog_grid_view_render): ditto.
	* goffice/utils/go-math.c (go_rint): new.
	* goffice/graph/gog-axis.c (map_discrete_calc_ticks): fix label when
	minimum != 1.
	(gog_axis_populate_editor): enable minimum et maximum editor for
	discrete axes.
	* plugins/plot_barcol/gog-1.5d.c (gog_plot1_5d_axis_get_bounds):
	minimum = 1.0 now.
	* plugins/plot_barcol/gog-barcol.c (gog_barcol_view_render): use GogChartMap
	facilities. minimum = 1.0 now.
	* plugins/plot_barcol/gog-line.c (gog_line_view_render): minimum = 1.0 now.
	* plugins/plot_radar/gog-radar.c (gog_rt_plot_update): ditto.
	(gog_rt_view_render): take start theta (th0) into account.

2005-08-17  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_boxes/gog-boxplot.c: (gog_box_plot_update),
	(gog_box_plot_view_render), (float_compare),
	(gog_box_plot_series_update): use raw data instead of min, max, median
	and quartiles. Fixes #308136.
	* plugins/plot_boxes/plot-types.xml.in: removed obsolete comment.

2005-08-16  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* plugins/plot_xy/gog-xy.c (gog_xy_view_render): use GogChartMap
	facilities.
	* plugins/plot_barcol/gog-line.c (gog_line_view_render): ditto. be
	consistent with GogXYPlot.

2005-08-16  Stepan Kasal  <kasal@ucw.cz>

	* goffice/graph/gog-axis.c (gog_axis_get_grid_line): Fix typo
	  in the comment.

2005-08-15  Morten Welinder <terra@gnome.org>

	* configure.in: Post release bump

2005-08-15  Morten Welinder <terra@gnome.org>

	* Release 0.0.3

2005-08-15  Jean Brefort  <jean.brefort@normalesup.org>
	* goffice/graph/gog-object-xml.c: (gog_object_new_from_xml): return NULL
	if dynamic type is not available.

2005-08-15  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-guru.c (cb_graph_guru_add_plot): call
	gog_plot_guru_helper if plot is added from porerty editor page.

2005-08-15  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-axis.c (map_bounds): minimum or maximum may be
	NULL.
	(map_log_bounds): ditto.
	* goffice/graph/gog-series-lines.c (gog_series_lines_render): draw
	sharp lines.
	* plugins/plot_xy/gog-xy.c (gog_xy_view_render): draw drop lines from
	point to axis start.

2005-08-15  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/goffice-graph.h: new GOG_POSITION_IS_SPECIAL and
	GOG_POSITION_IS_PADDING macros for determining GogPosition type.
	Simple == test doesn't work.
	* goffice/graph/gog-axis.c (gog_axis_view_padding_request): use these
	macros.
	(gog_axis_view_size_allocate): ditto.
	* goffice/graph/gog-chart.c (gog_chart_view_size_allocate): ditto.
	* goffice/graph/gog-graph.c (gog_graph_view_size_allocate): ditto.
	* goffice/graph/gog-view.c (gog_view_padding_request_real): ditto.
	(gog_view_size_allocate_real): ditto.
	(gog_view_size_child_request): ditto.
	* goffice/graph/gog-object.c (gog_object_position_cmp): ditto.
	(gog_object_populate_editor): fix manual_toggle widget handling.
	(cb_anchor_changed): set position to manual if anchor changes.

2005-08-14  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	Fix clipping of polar plots. Renamed all clip_push, clip_pop functions
	to push_clip, pop_clip for consistency with push_style, pop_style.

	* goffice/graph/gog-renderer-gnome-print.c
	(print_make_rectangle_path): removed.
	(gog_renderer_gnome_print_push_clip): clipping region is a path now.
	(gog_renderer_gnome_print_draw_path): clip dashed line to graph bbox.
	(gog_renderer_gnome_print_draw_polygon): ditto.
	(gog_graph_print_to_gnome_print): stire graph bbox.
	* goffice/graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_push_clip):
	handle clipping region as path, assuming nested region is included in
	parent one.
	(gog_renderer_pixbuf_pop_clip): free clip svp.
	(gog_renderer_pixbuf_do_clip): new.
	(gog_renderer_pixbuf_draw_path): call gog_renderer_pixbuf_do_clip.
	clip dashed line to graph bbox.
	(gog_renderer_pixbuf_draw_polygon): ditto.
	* goffice/graph/gog-renderer-svg.c (gog_renderer_svg_push_clip):
	clipping region is a path now.
	* goffice/graph/gog-renderer.c (gog_renderer_push_clip): ditto.
	(gog_renderer_pop_clip): ditto. Free clip_path.
	(gog_renderer_get_rectangle_vpath): new.
	* goffice/graph/gog-view.c (gog_view_render): clipping region is a
	path now.
	* plugins/plot_barcol/gog-line.c (gog_line_view_render): ditto.
	* plugins/plot_radar/gog-radar.c (gog_rt_plot_guru_helper): force
	auto_dash to FALSE.
	(gog_rt_view_render): add correct polar clipping.
	(gog_rt_series_init_style): don't disable marker theming.

2005-08-14  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-series.c: (gog_series_class_init),
	(gog_series_base_init): moved roles registering from class_init to
	base_init.

2005-08-13  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-chart.c: (calc_circle_parameters): fix a dangerous
	comparison and avoid resulting infinite loops.

2005-08-13  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-view.c (gog_view_info_at_point): walk the list in
	reverse order.

2005-08-12  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	Add pattern support for SVG renderer [#310320].

	* goffice/graph/gog-renderer-svg.c (fill_properties): add support for
	patterns.
	* goffice/utils/Makefile.am: install svg-patterns.xml in
	goffice_datadir/patterns.
	* goffice/utils/go-pattern.c: fix thin-rev-diag str in go_patterns.
	(go_pattern_get_svg_path): new.
	* goffice//utils/svg-patterns.xml: new.

2005-08-12  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-grid-line.c: (gog_grid_line_view_render):
	fix a memory leak
	* goffice/graph/gog-plot.c: (gog_plot_finalize): and one more.

2005-08-12  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-object.c: (gog_object_clear_parent),
	(gog_object_set_parent): do not set class before checking object validity.

2005-08-11  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format-match.c (format_create_regexp): Fix
	buffer overrun problem exibited while loading file from #313150.

2005-08-11  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/app/go-plugin-loader-module.c: updated to new
	GSF_CLASS_FULL signature.
	* goffice/app/io-context.c: ditto.
	* goffice/graph/gog-axis-line.c: ditto.
	* goffice/graph/gog-axis.c: ditto.
	* goffice/graph/gog-error-bar.c: ditto.
	* goffice/graph/gog-label.c: ditto.
	* goffice/graph/gog-reg-curve.c: ditto.
	* goffice/graph/gog-series.c: ditto.
	* goffice/graph/gog-style.c: ditto.
	* plugins/plot_barcol/gog-1.5d.c: updated to new
	GSF_DYNAMIC_CLASS_FULL signature.
	* plugins/plot_xy/gog-xy.c: ditto and use base_finalize instead
	of class_finalize.

2005-08-10  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-axis-line.c (axis_circle_render): fix label
	overlap of 0° and 360° ticks.

	GogPlot::guru_helper implementation for automatic addition of objects
	when creating graphs in guru.

	* goffice/graph/gog-axis.c (role_grid_line_can_add): removed.
	(role_grid_line_major_can_add): use new gog_axis_get_grid_line
	function.
	(role_grid_line_minor_post_add): ditto.
	(gog_axis_get_grid_line): new.
	* goffice/graph/gog-chart.c (role_plot_pre_remove): remove
	GogChart::grid if new axis set is not compatible.
	(role_grid_can_add): add GOG_AXIS_SET_RADAR in list of axis sets
	compatible with GogGrid.
	(gog_chart_axis_set_assign): don't handle GogGrid object here.
	* goffice/graph/gog-guru.c (graph_typeselect_minor): remove current
	chart, not only plot. Call GogPlot::guru_helper for additionnal
	objects.
	* goffice/graph/gog-plot.c (gog_plot_set_property): add new guru-hints
	property, which is a semicolon separated list of hints for
	GogPlot::guru_helper.
	(gog_plot_get_property): ditto.
	(gog_plot_class_init): ditto.
	(gog_plot_guru_helper_add_grid_line): new.
	(gog_plot_guru_helper): new.
	* plugins/plot_barcol/plot_types.xml.in: add "backplane" hint for all
	plots.
	* plugins/plot_box_plot/plot_types.xml.in: ditto.
	* plugins/plot_radar/gog-radar.c (gog_rt_plot_guru_helper): new.
	Handle "circular-no-line" guru hint.
	* plugins/plot_radar/plot-types.xml.in: add "circular-no-line" hint to
	radar plots. add "major-grid" and "backplane" to polar plot.
	* plugins/plot_xy/plot-types.xml.in: add "backplane" to all plots.

2005-08-10  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_barcol/gog-1.5d.c:
	(gog_series1_5d_register_type): use base_finalize instead of
	class_finalize since we have derived classes.

2005-08-08  J.H.M. Dassen (Ray) <jdassen@debian.org>

	* *: Updated FSF's address.

2005-08-07  Stepan Kasal  <kasal@ucw.cz>

	* goffice/graph/Makefile.am (goffice_gladedir): Rename to ...
	(gladedir): ..., to prevent conflicts--goffice_gladedir is AC_SUBSTed.
	* goffice/gtk/Makefile.am (goffice_gladedir, gladedir): Likewise.

2005-08-06  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/goffice.c: (libgoffice_init): add call to GOG_SERIES_LINES_TYPE.
	* goffice/graph/Makefile.am: add gog-series-lines.[c,h].
	* goffice/graph/gog-object.c: (gog_object_unregister_role): new function.
	* goffice/graph/gog-object.h: ditto.
	* goffice/graph/gog-series-lines.c: moved from plugins/plot_barcol.
	* goffice/graph/gog-series-lines.h: ditto.
	* plugins/plot_barcol/Makefile.am: remove gog-series-lines.[c,h].
	* plugins/plot_barcol/gog-1.5d.c: (gog_series1_5d_class_finalize),
	(gog_series1_5d_get_type), (gog_series1_5d_register_type),
	(go_plugin_init): unregister roles when class is destroyed.
	* plugins/plot_barcol/gog-barcol.c: update path to gog-series-lines.h.
	* plugins/plot_barcol/gog-dropbar.c: ditto.
	* plugins/plot_barcol/gog-line.c: ditto.
	* plugins/plot_barcol/gog-minmax.c: ditto.
	* plugins/plot_barcol/gog-series-lines.c: moved to goffice/graph/.
	* plugins/plot_barcol/gog-series-lines.h: ditto.
	* plugins/plot_xy/gog-xy.c: add horizontal and vertical droplines.
	* plugins/plot_xy/gog-xy.h: ditto.

2005-08-04  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-line.c (go_line_build_bpath): do not access data
	outside of allocated arrays.

2005-08-04  Stepan Kasal  <kasal@ucw.cz>

	* goffice/utils/go-file.c: #include unistd.h, for dup().

2005-08-04  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	Allow user to delete all plots of a chart and re-add new plots with
	different axis set.

	* goffice/graph/gog-axis-line.c (gog_axis_base_get_crossed_axis_type):
	handle GOG_AXIS_SET_UNKNOW.
	(gog_axis_base_view_info_at_point): ditto. Do nothing.
	(gog_axis_base_view_padding_request): ditto.
	(gog_axis_base_view_render): ditto.
	* goffice/graph/gog-chart.c (role_plot_pre_remove): if there's no plot
	left, reset axis_set to GOG_AXIS_SET_UNKNOW.
	(gog_chart_axis_set_assign): don't touch axes if axis_set ==
	GOG_AXIS_SET_UNKNOW.
	* goffice/graph/gog-guru.c (cb_graph_guru_delete_item): select parent
	row after item is deleted, because if we do this before, parent->add
	submenu is sometimes incorrect.

2005-08-04  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-axis-line.c (gog_axis_base_view_info_at_point):
	handle GOG_AXIS_SET_XY_pseudo_3d.
	* goffice/graph/gog-chart.c (gog_axis_set_from_str): new.
	* goffice/graph/gog-guru.c (cb_plot_family_menu_create): show only
	family with compatible axis set.
	* goffice/graph/gog-label.c (gog_label_init_style): only change text
	orientation if auto flag is TRUE.
	* goffice/graph/gog-plot-engine.c (cb_pending_plot_types_load): load
	axis_set from plot-types.xml.
	(gog_plot_family_register): set axis_set.
	* goffice/graph/gog-plot-impl.h: now store axis_set in GogPlotClass. No
	need for GogPlot::axis_set_pref, GogPlot::axis_set_is_valid and
	GogPlot::axis_set_assign.
	* goffice/graph/gog-plot.c (gog_plot_axis_set_pref): use
	GogPlot::axis_set.
	(gog_plot_axis_set_is_valid): ditto.
	(gog_plot_axis_set_assign): ditto.
	* goffice/graph/gog-style.c (gog_style_assign): assign
	GogStyle::text_layout.auto_angle too.
	(gog_style_force_auto): init GogStyle::text_layout.auto_angle.
	(gog_style_set_text_angle): force auto_angle to FALSE.
	* goffice/gtk/goffice-gtk.c (go_gtk_button_new_with_stock): fix
	compilation warning.
	* plugins/plot_*/gog*.c: remove axis_set_pref, axis_set_is_valid,
	axis_set_assign functions. Set GogPlotClass::axis_set value.
	* plugins/plot_*/plot-types.xml.in: Add axis_set property.

2005-08-04  J.H.M. Dassen (Ray) <jdassen@debian.org>

	* README, configure.in: Bumped libgsf requirements as
	goffice/utils/go-file.c needs gsf_input_stdio_new_FILE which is only in
	libgsf HEAD.

2005-08-03  Jody Goldberg <jody@gnome.org>

	* goffice/gtk/goffice-gtk.c (go_gtk_button_new_with_stock) : Use
	  gtk_button_set_image to avoid the kludgery that broken settings.
	(go_gtk_dialog_add_button) : merged from gnumeric.

2005-08-03  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-file.c (go_file_open): Handle URIs like "fd://0".

2005-08-03  Stepan Kasal  <kasal@ucw.cz>

	* goffice/graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_text):
	  Fix a typo; add an initialization to silence a warning.

2005-08-03  Stepan Kasal  <kasal@ucw.cz>

	In many Makefile.am's, use the "dist_" prefix instead of adding the
	variable to EXTRA_DIST.
	* goffice/graph/Makefile.am (cairo_sources, cairo_headers): Nuke;
	  instead, append to the variables directly.

2005-08-03  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	Cairo renderer build fixes.

	* goffice/graph/gog-renderer-cairo.c (gog_renderer_cairo_draw_text):
	fix size.
	(gog_renderer_cairo_get_text_OBR): ditto.
	(gog_renderer_cairo_update): graph size is a property of GogGraph now.

2005-07-28  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	Who said text angle is not a style property ?

	* goffice/graph/gog-axis-line.c (gog_axis_base_set_property): remove
	label-angle property.
	(gog_axis_base_get_property): ditto.
	(gog_axis_base_class_init): ditto.
	(gog_axis_base_set_label_angle): removed.
	(cb_label_angle_changed): removed.
	(gog_axis_base_populate_editor): remove UI for label angle.
	* goffice/graph/gog-axis-prefs.glade: ditto.
	* goffice/graph/gog-axis.c (role_label_post_add): removed.
	(role_label_can_add): new.
	(gog_axis_init_style): if axis is GOG_AXIS_PSEUDO_3D, no style.
	* goffice/graph/gog-label.c (gog_label_set_angle): removed.
	(gog_label_set_property): remove angle property.
	(gog_label_get_property): ditto.
	(gog_label_class_init): ditto.
	(label_pref_state_free): removed.
	(cb_angle_changed): removed.
	(gog_label_populate_editor): remove UI for angle.
	(gog_label_init_style): set text angle to 90 if parent is an Y axis.
	* goffice/graph/gog-renderer-gnome-print.c
	(gog_renderer_gnome_print_draw_text): text_angle is a style property.
	* goffice/graph/gog-renderer-pixbuf.c
	(gog_renderer_pixbuf_get_pango_layout): ditto.
	* goffice/graph/gog-renderer-svg.c (gog_renderer_svg_draw_text):
	ditto.
	* goffice/graph/gog-renderer.c (gog_renderer_get_text_OBR): ditto.
	(gog_renderer_push_style): no more
	angle property in renderer.
	(gog_renderer_pop_style): ditto.
	(gog_renderer_set_text_angle): removed.
	* goffice/graph/gog-style-prefs.glade: add a new UI for text layout
	group.
	* goffice/graph/gog-style (cb_angle_changed): new.
	(text_layout_init): new.
	(gog_style_assign): handle angle.
	(gog_style_init): ditto.
	(gog_style_text_layout_load): new.
	(gog_style_text_layout_dom_save): new.
	(gog_style_text_layout_sax_save): new.
	(gog_style_persist_dom_load): handle angle.
	(gog_style_persist_dom_save): ditto.
	(gog_style_persist_sax_save): ditto.
	(gog_style_is_different_size): ditto.
	(gog_style_set_text_angle): new.
	* goffice/graph/gog-styled-object.c (styled_object_populate_editor):
	don't display style editor if there isn't any interresting fields.

2005-07-27  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	Code cleanup. Remove bbox parameter of GogRenderer:draw functions.
	It was a previous attempt to do clipping, which is handled by
	gog_renderer_clip_push and gog_renderer_clip_pop for quite a long
	time now.

	Modified Files:

	ChangeLog goffice/graph/gog-axis-line.c
	goffice/graph/gog-error-bar.c goffice/graph/gog-grid-line.c
	goffice/graph/gog-grid.c goffice/graph/gog-label.c
	goffice/graph/gog-legend.c goffice/graph/gog-outlined-object.c
	goffice/graph/gog-reg-curve.c goffice/graph/gog-reg-eqn.c
	goffice/graph/gog-renderer-cairo.c
	goffice/graph/gog-renderer-gnome-print.c
	goffice/graph/gog-renderer-impl.h
	goffice/graph/gog-renderer-pixbuf.c
	goffice/graph/gog-renderer-svg.c goffice/graph/gog-renderer.c
	goffice/graph/gog-renderer.h plugins/plot_barcol/gog-barcol.c
	plugins/plot_barcol/gog-dropbar.c
	plugins/plot_barcol/gog-line.c
	plugins/plot_barcol/gog-minmax.c
	plugins/plot_barcol/gog-series-lines.c
	plugins/plot_boxes/gog-boxplot.c plugins/plot_pie/gog-pie.c
	plugins/plot_radar/gog-radar.c
	plugins/plot_surface/gog-surface.c plugins/plot_xy/gog-xy.c

2005-07-27  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	Text angle is not a font property.
	Set default angle to 90° for y axes (#301582).

	* goffice/graph/gog-axis-line.c (gog_axis_base_class_init): install
	label_angle property.
	(gog_axis_base_set_property): handle label_angle property.
	(gog_axis_base_get_property): ditto.
	(gog_axis_base_set_label_angle): new.
	(cb_label_angle_changed): new.
	(gog_axis_base_populate_editor): init UI for label_angle.
	(gog_axis_base_view_padding_request): set text angle.
	(gog_axis_base_view_render): ditto.
	* goffice/graph/gog-axis-prefs.glade: add UI for label angle.
	* goffice/graph/gog-axis.c (role_label_post_add): new. Sets label
	angle to 90° for y axis.
	(gog_axis_class_init): add role_label_post_add.
	* goffice/graph/gog-label-prefs.glade: new.
	* goffice/graph/gog-label.c (gog_label_set_angle): new.
	(gog_label_class_init): handle angle property.
	(gog_label_set_property): ditto.
	(gog_label_get_property): ditto.
	(label_pref_state_free): new.
	(cb_angle_changed): new.
	(gog_label_populate_editor): add layout page for angle setting.
	(gog_label_init): new.
	(gog_label_view_size_request): set text angle.
	(gog_label_view_render): ditto.
	* goffice/graph/gog-renderer-gnome-print.c
	(gog_renderer_gnome_print_draw_text): text_angle is a property of
	renderer.
	* goffice/graph/gog-renderer-pixbuf.c
	(gog_renderer_pixbuf_get_pango_layout): ditto.
	* goffice/graph/gog-renderer-svg.c (gog_renderer_svg_draw_text):
	ditto.
	* goffice/graph/gog-renderer.c (gog_renderer_push_style): reset text
	angle.
	(gog_renderer_pop_style): ditto.
	(gog_renderer_set_text_angle): new.
	(gog_renderer_get_text_OBR): text_angle is a property of renderer.
	* goffice/graph/gog-style-prefs.glade: remove UI for angle.
	* goffice/graph/gog-style.c (cb_rotation_angle_changed): removed.
	(font_init): remove angle UI.
	(gog_style_font_load): remove rotation_angle setting.
	(gog_style_font_dom_save): ditto.
	(gog_style_font_sax_save): ditto.

2005-07-25  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-object-prefs.glade: remove chart preference
	dialog and move it to gog-chart-prefs.glade.
	* goffice/graph/gog-chart-prefs.glade: new.
	* goffice/graph/gog-chart.c (cb_plot_area_changed): actually use
	signal handlers.
	(gog_chart_populate_editor): ditto.

2005-07-25  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	Implementation of manual position of graph objects.

	* goffice/graph/goffice-graph.h: new modifier flags in
	GogObjectPosition for manual position.
	* goffice/graph/gog-axis.c (gog_axis_class_init): Label can be
	positionned manually.
	(gog_axis_view_padding_request): GOG_POSITION_MANUAL supersedes
	GOG_POSITION_SPECIAL.
	(gog_axis_view_size_allocate): handle GOG_POSITION_MANUAL case.
	* goffice/graph/gog-chart-impl.h: plot_area stores plot area position
	in fraction of chart size. new is_plot_area_manual flag.
	* goffice/graph/gog-chart.c (gog_chart_set_property): new.
	(gog_chart_get_property): handles plot-area and is-plot-area-manual
	properties.
	(chart_pref_state_free): new.
	(cb_plot_area_changed): new.
	(cb_manual_toggle_changed): new.
	(gog_chart_populate_editor): new.
	(gog_chart_class_init): reorder childs. Still need some work for a
	nice display in object tree.  Install plot-area and
	is-plot_area-manual properties.
	(gog_chart_get_plot_area): new.
	(gog_chart_set_plot_area): new.
	(gog_chart_view_get_plot_area): plot area extents are stored in
	GogChartView::plot_area now.
	(gog_chart_view_size_allocate): handle manual case.
	(gog_chart_view_class_init): don't clip to chart area.
	* graph/goffice/gog-control-foocanvas
	(gog_control_foocanvas_set_property): remove logical_width_pts and
	logical_height_pts properties. These are properties of GogGraph now.
	(gog_control_foocanvas_get_property): ditto.
	(gog_control_foocanvas_class_init): ditto.
	* goffice/graph/gog-graph.c (gog_graph_set_property): handle new width-pts
	and height-pts properties.
	(gog_graph_get_property): ditto.
	(gog_graph_class_init): ditto. Chart and Title object can be
	positionned manually.
	(gog_graph_get_size): new.
	(gog_graph_set_size): new.
	* goffice/graph/gog-guru.c (cb_typesel_sample_plot_resize): don't
	change graph logical size.
	(cb_sample_pressed): don't change canvas scale.
	(cb_canvas_select_item): center graph on canvas.
	(cb_sample_plot_resize): calculate graph size to make it fit in canvas
	area.
	(graph_guru_init_format_page): don't change canvas scale.
	* goffice/graph/gog-object.c (gog_object_set_property): handle new
	position, position-is-manual and anchor properties.
	(gog_object_get_property): ditto.
	(gog_object_class_init): ditto.
	(cb_position_changed): new.
	(cb_manual_position_changed): new.
	(cb_anchor_changed): new.
	(gog_object_populate_editor): new UI for manual position setting.
	(gog_role_cmp): test priority first, then compare allowable positions.
	(gog_object_set_position_flags): emit a warning in case of wrong
	flags.
	(gog_object_get_manual_position): new.
	(gog_object_set_manual_position): new.
	(gog_object_get_manual_allocation): new.
	* goffice/graph/gog-plot.c (gog_plot_populate_editor): always call parent
	populate_editor.
	* goffice/graph/gog-renderer-pixbuf.c
	(gog_renderer_pixbuf_get_text_OBR): use pango_layout_get_extents
	instead of pango_layout_get_pixel_extents for more accuracy.
	(gog_renderer_pixbuf_update): logical width and height of graph is a
	property of GogGraph now.
	* goffice/graph/gog-renderer.c (gog_renderer_set_property): remove
	logical_width_pts and logical_height_pts properties.
	(gog_renderer_get_property): ditto.
	(gog_renderer_class_init): ditto.
	* goffice/graph/gog-view.c (gog_view_size_allocate_real): handle
	manual case.

2005-07-22  Chris Lahey  <clahey@our.domain.is.not.set>

	* goffice/drawing/god-drawing-renderer-gdk.c: Remove * .7 hack
	since it's been fixed in parsing code.

2005-07-21  Chris Lahey  <clahey@site>

	* goffice/drawing/god-drawing-renderer-gdk.c,
	goffice/drawing/god-paragraph-attributes.c,
	goffice/drawing/god-paragraph-attributes.h: Add support for
	setting whether the bullet is drawn for a particular paragraph.

2005-07-19  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/grah/gog-axis-line.c (gog_axis_base_get_crossed_axis_type):
	don't complain when axis_set = GOG_AXIS_SET_X.
	(axis_line_get_bbox): scale tick len with gog_renderer_pt2r instead of
	gog_renderer_pt2r_x.
	(axis_line_render): ditto.
	(axis_circle_get_bbox): ditto.
	(axis_circle_render): ditto.
	(x_process): use correct enum for label/tick side, which fixes a
	display bug.

2005-07-15  Dom Lachowicz <cinamod@hotmail.com>

	* goffice/utils/go-file.c (go_get_mime_type): Free 'wuri' if mime lookup failed;
	have function return "application/octet-stream" instead of "octet-string";
	g_strdup() the "application/octet-stream" so that we don't try to free .text data

2005-07-15  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-legend.c (cb_render_elements): fix swatch,
	line/marker position.

2005-07-11  Morten Welinder  <terra@gnome.org>

	* configure.in (set_more_warnings): Check for fdopen.

	* goffice/utils/go-file.c (is_fd_uri): New function.
	(go_file_create): Support URIs like "fd://1".

2005-07-01  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/data/go-data-simple.c: (go_data_vector_str_load_values): set
	vec->len (fixes a crash when pasting charts in abiword).
	* goffice/graph/goffice-graph.h: change GOG_MS_DIM_* enum.
	* goffice/graph/gog-data-set.c: (gog_dataset_dup_to_simple): fix export of
	scalar strings.
	* goffice/graph/gog-plot.c: (gog_plot_finalize),
	(gog_plot_set_property), (gog_plot_get_property),
	(gog_plot_class_init), (gog_plot_init): add "plot_group" property.
	* goffice/graph/gog-plot.h:
	* pixmaps/chart_dropbar_1_1.svg:
	* pixmaps/chart_minmax_2_2.svg:
	* plugins/plot_barcol/Makefile.am:
	* plugins/plot_barcol/gog-1.5d.c: (go_plugin_init):
	* plugins/plot_barcol/gog-dropbar.c: (gog_dropbar_plot_class_init):
	update GOG_MS_DIM_*.
	* plugins/plot_barcol/gog-minmax.c: (gog_minmax_axis_get_bounds):
	set center_on_ticks to FALSE,
	(gog_minmax_plot_class_init): update  GOG_MS_DIM_*.

2005-06-26  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-theme.c: (gog_themes_init): add GogSeriesLines.
	* plugins/plot_barcol/Makefile.am: add gog-series-lines.[c,h].
	* plugins/plot_barcol/gog-1.5d.c: (gog_plot1_5d_init),
	(series_lines_can_add), (series_lines_post_add),
	(series_lines_pre_remove), (drop_lines_can_add),
	(drop_lines_post_add), (drop_lines_pre_remove), (lines_can_add),
	(lines_post_add), (lines_pre_remove), (gog_series1_5d_class_init),
	(gog_series1_5d_init), (go_plugin_init): add support for various lines.
	* plugins/plot_barcol/gog-1.5d.h: ditto.
	* plugins/plot_barcol/gog-barcol.c: (gog_barcol_plot_init),
	(gog_barcol_view_render): added series lines.
	* plugins/plot_barcol/gog-dropbar.c: (gog_dropbar_plot_init),
	(barcol_draw_rect), (gog_dropbar_view_render): added lines.
	* plugins/plot_barcol/gog-line.c: (gog_line_plot_init),
	(gog_area_plot_init), (gog_line_view_render): added drop lines.
	* plugins/plot_barcol/gog-minmax.c: (gog_minmax_plot_init),
	(gog_minmax_view_render): added lines.
	* plugins/plot_barcol/gog-series-lines.c:
	(gog_series_lines_init_style), (gog_series_lines_update),
	(gog_series_lines_changed), (gog_series_lines_class_init),
	(gog_series_lines_render): support for lines in various plots.
	* plugins/plot_barcol/gog-series-lines.h: ditto.

2005-06-24  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-legend.c: (cb_size_elements),
	(gog_legend_view_size_request): use legend style to calculate elements
	height.

2005-06-21  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-renderer-cairo.c (grc_invert_pixbuf_RB): new.
	(grc_draw_polygon): implement repeated image texture.
	(grc_get_marker_surface): use grc_invert_pixbuf_RB.
	(gog_renderer_cairo_update): ditto.

2005-06-21  Jon K Hellan  <hellan@acm.org>

	* goffice/graph/gog-control-foocanvas.c
	(gog_control_foocanvas_update):  Fix typo.

2005-06-21  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	New cairo renderer. Option at compile time (--with-cairo).

	* configure.in: add optional cairo dependency.
	* goffice/graph/gog-control-foocanvas.c
	(gog_control_foocanvas_set_property): use cairo renderer if enabled.
	(gog_control_foocanvas_draw): ditto.
	(gog_control_foocanvas_update): ditto.
	(gog_control_foocanvas_class_init): ditto.
	* goffice/graph/gog-renderer-cairo.[ch]: new files.
	* goffice/utils/go-pattern.c (go_pattern_get_pattern): new.

2005-06-20  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_barcol/gog-1.5d.c: (gog_plot1_5d_update),
	(gog_series1_5d_finalize), (gog_series1_5d_class_init): fixed error bar
	leaks.

2005-06-20  Morten Welinder  <terra@gnome.org>

	* goffice/utils/formats.c (find_currency): Special hack to accept
	a quoted euro character.
	(pattern_account): Remove stray "}".

2005-06-20  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-guru.c: (cb_canvas_select_item): fixed one more leak.

2005-06-20  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-guru.c: (cb_canvas_select_item): add missing
	g_object_unref call.
	* goffice/graph/gog-series.c: (regression_curve_can_add): fixed the test.
	* goffice/graph/gog-style.c: (gog_style_set_image_preview): return if
	pix == NULL (#308307).

2005-06-16  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-axis-line.c (axis_line_render): remove kludge for
	ticks not centered on labels.
	* goffice/graph/gog-axis.c (map_discrete_calc_ticks): separate
	handling of ticks from handling of labels.
	(gog_axis_update): always set GogAxis::center_on_ticks from
	GogBounds.
	* plugins/plot_radar/gog-radar.c (gog_radar_plot_axis_get_bounds):
	set center_on_ticks=TRUE explicitely.

2005-06-13  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	Support for rotated text and text color.

	* goffice/graph/gog-axis-line.c (get_point_to_segment_distance):
	moved to go-geometry.c.
	(update_bbox): ditto.
	(overlap): removed.
	(compute_angles): removed.
	(axis_line_point): use go_geometry_point_to_segment.
	(axis_line_get_bbox): handle rotated text case. Use
	go_geometry_cartesian_to_polar. side is an enum now.
	(axis_line_render): ditto.
	(axis_circle_get_bbox): ditto.
	(axis_circle_render): ditto.
	(xy_process): side is an enum.
	(radar_process): ditto.
	* goffice/graph/gog-label.c (gog_label_view_size_request): use
	gog_renderer_get_text_AABR.
	(gog_label_view_render): ditto.
	* goffice/graph/gog-legend.c (cb_size_elements): ditto.
	* goffice/graph/gog-reg-eqn.c
	(gog_reg_eqn_view_render): ditto.
	* goffice/graph/gog-renderer-gnome-print.c
	(gog_renderer_gnome_print_draw_text): handle rotated text and color.
	(gog_renderer_gnome_print_get_text_OBR): new.
	* goffice/graph/gog-renderer-pixbuf.c (get_rotated_layout_bounds):
	new.
	(gog_renderer_pixbuf_get_pango_layout): handle rotation angle.
	(gog_renderer_pixbuf_draw_text): ditto. Handle special n * pi / 2
	angles separately for performance.
	(gog_renderer_pixbuf_get_text_OBR): new.
	* goffice/graph/gog-renderer-svg.c (gog_renderer_svg_get_text_OBR):
	ditto.
	(gog_renderer_svg_draw_text): handle rotation angle and color.
	* goffice/graph/gog-renderer.c (gog_renderer_get_text_OBR): new.
	(gog_renderer_get_text_AABR): new. Replaces measure_text.
	* goffice/graph/gog-style-prefs.glade: add widgets for text rotation
	angle and text color.
	* goffice/graph/gog-style.c (cb_rotation_angle_changed): new.
	(cb_font_color_changed): new.
	(font_init): load widgets for text rotation and color.
	(gog_style_font_load): load rotation angle.
	(gog_style_font_save): save rotation angle.
	(gog_style_font_sax_save): ditto.
	(gog_style_is_different_size): different angles means different sizes.
	* goffice/utils/go-geometry.[ch]: new files. Collection of geometry
	related functions.

2005-06-12  Jody Goldberg <jody@gnome.org>

	* configure.in : post release bump

2005-06-12  Jody Goldberg <jody@gnome.org>

	* Release 0.0.2

2005-06-11  Ivan, Wong Yat Cheung  <email@ivanwong.info>

	* goffice/gtk/Makefile.am: Fix typos.

2005-06-09  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-libxml-extras.c (xml_node_get_enum,
	xml_node_set_enum): New functions.
	(xml_node_get_int, xml_node_get_double): Improve error handling.

2005-06-08  Ivan, Wong Yat Cheung  <email@ivanwong.info>

	* goffice/gtk/htmlhelp-stub.c:
	* goffice/gtk/htmlhelp-stub.h:
	* goffice/gtk/libhtmlhelp-stub.def: Remove
	* goffice/gtk/Makefile.am: Remove libgoffice-html-help-stub.la
	  it no longer belongs here.

	* goffice/Makefile.am:
	* goffice/gtk/goffice-gtk.c:
	* goffice/utils/Makefile.am: Now stubs for Win32 are placed in
	  libgoffice-win32-stub.la

	* goffice/utils/goffice-win32-stub.def:
	* goffice/utils/win32-stub.c:
	* goffice/utils/win32-stub.h: New

	* goffice/utils/go-file.[ch] (go_get_mime_type): Use
	  FindMimeFromData() on Win32. Fall back to "text/plain" if
	  no mime type is matched. [#304074]

2005-06-06  Jody Goldberg <jody@gnome.org>

	* goffice/app/go-plugin.c : Don't inherit from GTypeModule
	  contain one and use it as long as we are active.

2005-06-06  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-math.c (log1p): Define if needed.

2005-06-05  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-data-set.c: (gog_dataset_dup_to_simple): add a helper
	function to convert data to simple data.
	* goffice/graph/gog-data-set.h: ditto.
	* goffice/graph/gog-object.c: (dataset_dup), (gog_object_dup): add an
	optional data converter to gog_object_dup and define a default one.
	* goffice/graph/gog-object.h: ditto.
	* goffice/graph/gog-graph.c: use new gog_object_dup syntax.

2005-06-05  Jody Goldberg <jody@gnome.org>

	* goffice/app/go-plugin.c (go_plugin_get_type_module) : new in
	  preparation of change to GOPlugin.

2005-06-05  Jody Goldberg <jody@gnome.org>

	* goffice/app/go-plugin.c (go_plugin_activate) : add a
	  g_type_module_use
	(go_plugin_deactivate) : and an unuse.  Things are still broken on
	  exit.

2005-06-04  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-object (gog_object_populate_editor): remove
	g_message call.

2005-06-04  Jody Goldberg <jody@gnome.org>

	* plugins/plot_xy/plot-types.xml.in : XY priority 100
	* plugins/plot_barcol/plot-types.xml.in : COL priority 90
	  BAR priority 80

	* goffice/graph/gog-guru.c (cb_plot_families_init) : select if the
	  current item is a higher priority than anything we've seen.
	(graph_guru_type_selector_new) : don't connect to the signal handler
	  until after we select the default type.  Sort the list of families.
	  We need to prune this list.

	* goffice/graph/gog-plot-engine.c (cb_pending_plot_types_load) : load
	  a priority for each family to allow for a reasonable default.

2005-06-04  Jody Goldberg <jody@gnome.org>

	* goffice/gtk/go-format-sel.c (nfs_init) : suppress warning.
	(generate_preview) : put the args in the right order and remove the
	  debug spew.

2005-06-04  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_surface/gog-surface.c: (gog_contour_view_render):
	fixed appearance, libart warnings and a major bug.

2005-06-03  Stepan Kasal  <kasal@ucw.cz>

	* configure.in: Require libgsf 1.12.1; GSF_DYNAMIC_CLASS has changed.

2005-06-02  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/Makefile.am: add gog-object-prefs.glade
	* goffice/graph/gog-graph.c (gog_graph_class_init): position of chart
	and title can be manual.
	* goffice/graph/gog-object-prefs.glade: new.
	* goffice/graph/gog-object.c (gog_editor_get_notebook): first page
	is the default page.
	(gog_object_set_property): handle compass and alignment properties.
	(gog_object_get_property): ditto.
	(object_pref_state_free): new.
	(cb_compass_changed): new.
	(cb_alignment_changed): new.
	(gog_object_populate_editor): new. It handles only compass and alignment
	flags.
	(gog_object_class_init): install compass and alignment properties.
	(gog_object_get_pos): renamed to gog_object_get_position_flags. Add a
	mask parameter in order to get only a subset of position flags.
	(gog_object_set_pos): renamed to gog_object_set_position_flags. Add a
	mask parameter.
	* goffice/graph/gog-style-prefs.glade: move line widgets to the left.
	It improves consistency of widget position when navigating through
	object tree.
	* goffice/graph/gog-styled-object.c (styled_object_populate_editor):
	call parent method.

2005-06-01  Jody Goldberg <jody@gnome.org>

	* goffice/utils/go-format.c (go_format_value_gstring) : pull over from
	  gnumeric with a simplified structure to handle only ints and
	  doubles.
	(go_style_format_condition) : ditto.

2005-05-30  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_surface/xl-surface.c: (xl_contour_plot_build_matrix):
	set num-elements of the first series, not the last one.

2005-05-29  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-object.c: (gog_object_dup),
	(gog_object_dup_with_values): rewrote to share identical code.

2005-05-28  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-object.h: added missing declaration
	(gog_object_dup_with_values).

2005-05-28  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-object.c: (gog_object_dup_with_values):
	new function aimed at export charts.

2005-05-27  Ivan, Wong Yat Cheung  <email@ivanwong.info>

	* goffice/utils/go-file.c (go_shell_arg_to_uri):
	revert changes made by me in yesterday.
	(go_shell_argv_to_glib_encoding): New. For Win32 we need to
	get argv[] in utf-16 and convert them to utf-8 under NT
	and use g_locale_to_utf() under Win9x.

2005-05-27  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_barcol/gog-dropbar.c: (gog_dropbar_view_render): fixed
	bars width and position.
	* plugins/plot_barcol/plot-types.xml.in: ditto.

2005-05-27  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/gtk/go-format-sel.c: (nfs_init): make the shortcut for currency
	symbol selection work (#305635).

2005-05-27  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/data/go-data-simple.c: (go_data_vector_val_as_str),
	(go_data_vector_val_from_str), (go_data_vector_str_finalize),
	(go_data_vector_str_dup), (go_data_vector_str_as_str),
	(go_data_vector_str_from_str), (go_data_vector_str_load_len),
	(go_data_vector_str_load_values), (go_data_vector_str_get_value),
	(go_data_matrix_val_as_str), (go_data_matrix_val_from_str): fixed various
	concerns related to the abigochart plugin.

2005-05-26  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	[#305010]
	* goffice/graph/gog-error-bar-prefs.glade: remove gnome requirement.
	* plugins/plot_pie/gog-pie-series-prefs.glade: ditto.
	* plugins/plot_pie/gog-ring-prefs.glade: ditto.

2005-05-26  Ivan, Wong Yat Cheung  <email@ivanwong.info>

	* goffice/utils/go-file.c (go_shell_arg_to_uri): Convert
	file name from system codepage to utf8 (glib/win32 now uses
	utf8). [#304874]

2005-05-25  Stepan Kasal  <kasal@ucw.cz>

	* configure.in (PKG_PROG_PKG_CONFIG): Rephrase the explanation.

2005-05-24  Morten Welinder  <terra@gnome.org>

	* goffice/utils/format.c (format_remove_decimal): In the fallback
	code, remove a decimals from all subformats.
	(find_currency): Accept quotes around the currency.  Fixes
	recognition of accounting formats.  [#305314]  [#305313]

2005-05-23  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/goffice-gtk.c (go_gtk_file_sel_dialog,
	go_gtk_select_image): Insist on getting a toplevel.  (It
	determines, for one thing, what screen to use.)
	* goffice/graph/gog-style.c (cb_image_file_select): Provide a
	toplevel.  Fixes #305009.

2005-05-22  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_barcol/gog-1.5d.c: (gog_series1_5d_update): Fix a trivial
	bug.

2005-05-20  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/goffice-gtk.c (go_access): Fix return type to int as
	we return -1 sometimes.

	* configure.in (set_more_warnings): Don't use -Wcrazy.

2005-05-20  Stepan Kasal  <kasal@ucw.cz>

	* plugins/plot_barcol/gog-dropbar.c (gog_dropbar_view_render):
	  Remove unused variables.

2005-05-20  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/goffice-graph.h: change GOG_MS_DIM_TYPES value and
	add new ones.
	* goffice/graph/gog-axis.c: (gog_axis_set_property): remove labels
	and ticks for GOG_AXIS_PSEUDO_3D (enhance export to excel).
	* pixmaps/Makefile.am: add icons for minmax and dropbar plots.
	* plugins/plot_barcol/Makefile.am: add minmx and dropbar support.
	* plugins/plot_barcol/gog-1.5d.c: (gog_plot1_5d_update),
	(gog_series1_5d_update), (gog_series1_5d_populate_editor),
	(go_plugin_init): ditto.
	* plugins/plot_barcol/gog-barcol.c: ditto.
	(gog_barcol_plot_populate_editor): ditto.
	* plugins/plot_barcol/gog-dropbar.c: (gog_dropbar_plot_type_name),
	(gog_dropbar_plot_class_init), (barcol_draw_rect),
	(gog_dropbar_view_render), (gog_dropbar_view_info_at_point),
	(gog_dropbar_view_class_init): ditto.
	* plugins/plot_barcol/gog-dropbar.h: ditto.
	* plugins/plot_barcol/gog-minmax-prefs.glade: ditto.
	* plugins/plot_barcol/gog-minmax.c: (gog_minmax_series_init_style),
	(gog_minmax_series_class_init), (gog_minmax_plot_set_property),
	(gog_minmax_plot_get_property), (gog_minmax_plot_type_name),
	(gog_minmax_axis_get_bounds), (cb_gap_changed),
	(gog_minmax_plot_populate_editor), (gog_minmax_swap_x_and_y),
	(gog_minmax_plot_class_init), (gog_minmax_plot_init),
	(gog_minmax_view_render), (gog_minmax_view_info_at_point),
	(gog_minmax_view_class_init): ditto.
	* plugins/plot_barcol/gog-minmax.h: ditto.
	* plugins/plot_barcol/plot-types.xml.in: ditto.
	* plugins/plot_barcol/plugin.xml.in: ditto.

2005-05-19  Jody Goldberg <jody@gnome.org>

	* goffice/data/go-data-simple.c (go_data_vector_val_as_str) : use
	  format_get_row_sep.

2005-05-19  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-axis.c (map_discrete_calc_ticks): remove kludge by
	using center_on_ticks.
	* goffice/graph/gog-plot.c (gog_plot_get_axis_bounds): defaults
	center_on_ticks to TRUE.
	* plugins/plot_barcol/gog-barcol.c (gog_barcol_axis_get_bounds):
	center_on_ticks = FALSE.

2005-05-18  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-axis.c (map_discrete_init): scale doesn't depend
	on center_on_ticks.
	(map_discrete): ditto.
	(map_discrete_to_view): ditto.
	(map_discrete_from_view): ditto.
	(map_discrete_calc_ticks): tick_nbr doesn't depend on center_on_ticks.
	* goffice/graph/gog-axis-line.c (gog_axis_base_populate_editor): don't
	show layout page for GOG_AXIS_PSEUDO_3D. Call inherited
	populate_editor if gui==NULL.
	* plugins/plot_surface/gog-surface.c
	(gog_contour_plot_axis_get_bounds): maxima = num_elements - 1.0
	* plugins/plot_surface/xl-surface.c
	(xl_contour_plot_axis_get_bounds): ditto.

2005-05-17  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/data/go-data-simple.c: (go_data_vector_val_get_value),
	(go_data_vector_val_get_str): check args to avoid a segfault.

2005-05-16  Stepan Kasal  <kasal@ucw.cz>

	* goffice/graph/gog-reg-curve.c (gog_reg_curve_get_value_at): Make
	  this function static, without any declaration at the top.

	* goffice/utils/go-file.h (go_get_mime_type): Change the return type
	  to `const gchar *'.
	* goffice/utils/go-file.c: ditto.

	* goffice/utils/format.c (beyond_precision, beyond_precisionl):
	  Move the declarations to the top, into an #ifdef DEFINE_COMMON.

	* plugins/plot_surface/xl-surface.c (xl_contour_plot_axis_get_bounds):
	  Make this more readable by moving part of the body ...
	(get_y_vector): ... to this new function.

	* tests/pie-demo.c (main): Adapt to the changed type of arg 1 of
	  go_data_vector_str_new.

2005-05-14  J.H.M. Dassen (Ray) <jdassen@debian.org>

	* configure.in: Supply GOFFICE_PLUGIN_LIBADD on all platforms, not just
	win32, in order to get complete dependency information in the plugins.
	Use -no-undefined in GOFFICE_PLUGIN_LDFLAGS on all platforms to ensure
	complete dependency information at link time.
	Update the BUG-REPORT argument to AC_INIT now that bugzilla.gnome.org
	has a "libgoffice" product.
	Enable a number of additional warnings (when available) for which the
	current code base is already virtually clean.

2005-05-12  Stepan Kasal  <kasal@ucw.cz>

	* goffice/data/go-data-simple.h (go_data_vector_str_new): Change the
	  type of the first parameter from (char**) back to (char const*const*)
	* goffice/data/go-data-simple.c: Do the same and adapt the code.

2005-05-12  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-marker.c (go_marker_selector): Plug leak.
	Avoid const for non-const parameter.

	* goffice/gtk/go-action-combo-pixmaps.c
	(go_action_combo_pixmaps_create_tool_item): Take toolbar settings
	into account.

	* goffice/gtk/go-action-combo-color.c (make_icon): Multihead fix.

	* goffice/gtk/goffice-gtk.c (update_preview_cb): Multihead fix.

	* goffice/gtk/go-action-combo-stack.c
	(go_action_combo_stack_create_tool_item): Take theme into account.

2005-05-12  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/data/go-data-simple.c: (go_data_matrix_val_as_str),
	(go_data_matrix_val_from_str): always use a semicolon as row
	separator.

2005-05-11  Jean Brefort  <jean.brefort@normalesup.org>

	* pixmaps/chart_dropbar_1_1.png: update icon.
	* pixmaps/chart_dropbar_1_1.svg: ditto.
	* pixmaps/chart_dropbar_1_2.png: ditto.
	* pixmaps/chart_dropbar_1_2.svg: ditto.
	* pixmaps/chart_minmax_1_1.png: ditto.
	* pixmaps/chart_minmax_1_1.svg: ditto.
	* pixmaps/chart_minmax_1_2.png: ditto.
	* pixmaps/chart_minmax_1_2.svg: ditto.
	* pixmaps/chart_minmax_2_1.png: new icon.
	* pixmaps/chart_minmax_2_1.svg: ditto.
	* pixmaps/chart_minmax_2_2.png: ditto.
	* pixmaps/chart_minmax_2_2.svg: ditto.

2005-05-11  Jean Brefort  <jean.brefort@normalesup.org>

	* pixmaps/chart_dropbar_1_1.png: New icon.
	* pixmaps/chart_dropbar_1_1.svg: ditto.
	* pixmaps/chart_dropbar_1_2.png: ditto.
	* pixmaps/chart_dropbar_1_2.svg: ditto.
	* pixmaps/chart_minmax_1_1.png: ditto.
	* pixmaps/chart_minmax_1_1.svg: ditto.
	* pixmaps/chart_minmax_1_2.png: ditto.
	* pixmaps/chart_minmax_1_2.svg: ditto.
	* pixmaps/dropbar.xpm: ditto.
	* pixmaps/minmax.xpm: ditto.

2005-05-11  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_surface/gog-surface.c:
	(gog_contour_plot_class_init): limit series number to 1.

2005-05-10  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-chart.c (gog_chart_map_free): unref map::chart.

2005-05-10  Jean Brefort  <jean.brefort@normalesup.org>

	* configure.in: add linear regressions in scatter plots.
	* goffice/goffice.c: (libgoffice_init): ditto.
	* goffice/graph/Makefile.am: ditto.
	* goffice/graph/goffice-graph.h: ditto.
	* goffice/graph/gog-guru.c: (cb_graph_guru_add_reg_curve),
	(cb_reg_curve_type_menu_create), (reg_curve_type_menu_create),
	(cb_attr_tree_selection_change): ditto.
	* goffice/graph/gog-object-xml.c: (gog_object_new_from_xml): ditto.
	* goffice/graph/gog-plot-engine.c: ditto.
	(gog_reg_curve_engine_service_get_description),
	(gog_reg_curve_engine_service_class_init),
	(gog_reg_curve_new_by_name), (cb_pending_reg_curve_types_load),
	(pending_reg_curves_types_load), (gog_reg_curve_service_read_xml),
	(gog_reg_curve_service_get_description),
	(gog_reg_curve_service_init), (gog_reg_curve_service_class_init),
	(gog_plugin_services_init), (gog_reg_curve_type_free),
	(create_reg_curve_types), (gog_reg_curve_types): ditto.
	* goffice/graph/gog-plot-engine.h: ditto.
	* goffice/graph/gog-reg-curve-prefs.glade: ditto.
	* goffice/graph/gog-reg-curve.c: (gog_reg_curve_init_style),
	(gog_reg_curve_populate_editor), (gog_reg_curve_finalize),
	(gog_reg_curve_type_name), (gog_reg_curve_class_init),
	(gog_reg_curve_init), (gog_reg_curve_dataset_dims),
	(gog_reg_curve_dataset_get_elem),
	(gog_reg_curve_dataset_dim_changed), (gog_reg_curve_dataset_init),
	(gog_reg_curve_new_by_type), (gog_reg_curve_get_value_at),
	(gog_reg_curve_get_equation), (gog_reg_curve_get_R2),
	(gog_reg_curve_get_bounds), (gog_reg_curve_view_render),
	(gog_reg_curve_view_size_allocate),
	(gog_reg_curve_view_class_init): ditto.
	* goffice/graph/gog-reg-curve.h: ditto.
	* goffice/graph/gog-reg-eqn-prefs.glade: ditto.
	* goffice/graph/gog-reg-eqn.c: (cb_text_pos_changed),
	(cb_text_visibility_changed), (gog_reg_eqn_set_property),
	(gog_reg_eqn_get_property), (gog_reg_eqn_init_style),
	(gog_reg_eqn_populate_editor), (gog_reg_eqn_type_name),
	(gog_reg_eqn_class_init), (gog_reg_eqn_init),
	(gog_reg_eqn_view_render), (gog_reg_eqn_view_class_init): ditto.
	* goffice/graph/gog-reg-eqn.h: ditto.
	* goffice/graph/gog-series-impl.h: ditto.
	* goffice/graph/gog-series.c: (regression_curve_can_add),
	(regression_curve_post_add), (regression_curve_pre_remove),
	(gog_series_class_init), (gog_series_init): ditto.
	* goffice/graph/gog-theme.c: (gog_themes_init): ditto.
	* plugins/Makefile.am: ditto.
	* plugins/plot_xy/gog-xy.c: (gog_xy_view_render),
	(gog_xy_view_size_allocate), (gog_xy_view_class_init),
	(gog_xy_series_view_render), (gog_xy_series_view_size_allocate),
	(gog_xy_series_view_class_init), (gog_xy_series_update),
	(gog_xy_series_init), (gog_xy_series_class_init): ditto.
	* plugins/reg_linear/Makefile.am: ditto.
	* plugins/reg_linear/gog-lin-reg.c: (gog_lin_reg_curve_update),
	(gog_lin_reg_curve_get_value_at), (gog_lin_reg_curve_get_equation),
	(gog_lin_reg_curve_get_R2), (gog_lin_reg_curve_finalize),
	(gog_lin_reg_curve_class_init), (gog_lin_reg_curve_init),
	(go_plugin_init), (go_plugin_shutdown): ditto.
	* plugins/reg_linear/gog-lin-reg.h: ditto.
	* plugins/reg_linear/plugin.xml.in: ditto.
	* plugins/reg_linear/reg-types.xml.in: ditto.
	* po/POTFILES.in: ditto.
	* plugins/plot_surface/xl-surface.c:
	(xl_contour_plot_axis_get_bounds): fixed a compilation warning.

2005-05-10  Jody Goldberg <jody@gnome.org>

	* configure.in : post release version bump

2005-05-09  Jody Goldberg <jody@gnome.org>

	* Release 0.0.1

2005-05-09  Jody Goldberg <jody@gnome.org>

	* tests/pie-demo.c (main) : update

2005-05-09  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* plugins/plot_radar/gog-radar.c (gog_rt_view_render): warning fix.

2005-05-09  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-axis-line.c (gog_axis_base_get_crossed_axis_type):
	handle GOG_AXIS_SET_XY_pseudo_3d case.
	(axis_line_get_bbox): fix label offset.
	(axis_line_render): ditto.
	(axis_circle_get_bbox): take ticks into account. Use GogChartMap.
	(axis_circle_render): if axis is polar, use bezier paths by calling
	gog_renderer_draw_arc. Draw ticks. Use GogChartMap.
	(x_process): new.
	(xy_process): use GogChartMap.
	(calc_polygon_parameters): removed.
	(radar_process): implement padding_request for radial axes.
	(gog_axis_base_view_info_at_point): handle GOG_AXIS_SET_X.
	(gog_axis_base_view_padding_request): ditto.
	(gog_axis_base_view_render): ditto.
	* goffice/graph/gog-axis.c (map_bounds): new.
	(map_linear_auto_bound): handle auto bounds for non discrete circular
	axis.
	(map_linear_calc_ticks): place major ticks to a multiple of major
	step.
	(map_log_bounds): new.
	(gog_axis_map_get_extents): new.
	(gog_axis_map_get_bounds): new.
	(role_grid_line_major_can_add): can be TRUE for non discrete
	GOG_AXIS_CIRCULAR.
	(role_grid_line_minor_post_add): ditto.
	(role_axis_line_can_add): can be TRUE for GOG_AXIS_RADIAL.
	(gog_axis_set_property): changing invert flag invalidates layout.
	(gog_axis_populate_editor): don't show map type selector for
	GOG_AXIS_CIRCULAR.
	(gog_axis_is_inverted): new.
	* goffice/graph/gog-chart.c (calc_polygon_parameters): new.
	(calc_circle_parameters): new.
	(null_map_2D): new.
	(x_map_2D_to_view): new.
	(xy_map_2D_to_view): new.
	(polar_map_2D_to_view): new.
	(gog_chart_map_get_polar_parms): new.
	(gog_chart_map_new): needs pointers to axes of the axis set now.
	handle GOG_AXIS_SET_X, GOG_AXIS_SET_RADAR and
	GOG_AXIS_SET_XY_pseudo_3d.
	(gog_chart_map_2D): removed.
	(gog_chart_map_2D_to_view): new.
	(gog_chart_map_get_axis_map): new.
	(gog_chart_map_is_valid): new.
	(gog_chart_axis_set_assign): handle GOG_AXIS_SET_RADAR.
	* goffice/graph/gog-grid-line.c (calc_polygon_parameters): removed.
	(gog_grid_line_view_render): handle polar plots.
	* goffice/graph/gog-grid.c (gog_grid_view_render): handle polar and
	radar plots.
	* goffice/graph/gog-renderer-gnome-print.c
	(draw_bezier_path): new.
	(gog_renderer_gnome_print_draw_bezier_path): use draw_bezier_path.
	(gog_renderer_gnome_print_draw_bezier_polygon): new.
	* goffice/graph/gog-renderer-pixbuf.c
	(gog_renderer_pixbuf_draw_polygon): fix transparency rendering. Idea
	stolen from gnome-print.
	(gog_renderer_pixbuf_draw_bezier_polygon): new.
	* goffice/graph/gog-renderer-svg.c (fill_properties): new.
	(gog_renderer_svg_draw_bezier_polygon): new.
	* goffice/graph/gog-renderer.c
	(gog_renderer_get_ring_wedge_vpath): new.
	(gog_renderer_draw_ring_wedge): new.
	(gog_renderer_draw_pie_wedge): new.
	(gog_renderer_draw_arc): new.
	* plugins/plot_radar/gog-radar.c: renamed GogRadarPlot to GogRTPlot,
	as base of GogRadarPlot and GogPolarPlot.
	New GogRadarPlot and GogPolarPlot classes.
	Renamed GogRadarView class to GogRTView class.
	(gog_rt_view_render): handle radar and polar plots.
	Renamed GogRadarSeries class to GogRTSeries.
	* plugins/plot_radar/plot-types.xml.in: add polar plots.
	* plugins/plot_radar/plugin.xml.in: ditto.

2005-05-09  Morten Welinder  <terra@gnome.org>

	* goffice/graph/gog-style.c (cb_font_changed): C99, const, and
	type fixes.

2005-05-09  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/data/go-data-simple.c: (go_data_matrix_val_as_str),
	(go_data_matrix_val_from_str): made things work.
	* plugins/plot_surface/gog-surface.c: (gog_contour_plot_update),
	(gog_contour_view_render): avoid crashes and weird displays
	when there are no data for the axis.
	* plugins/plot_surface/xl-surface.c (xl_contour_plot_build_matrix):
	fix a vector length problem and replace nan by 0. to be xl compatible.

2005-05-08  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/data/go-data-simple.c: (go_data_vector_str_from_str):
	fix an infinite loop condition.
	* plugins/gog-surface.c: fixed several critical bugs.

2005-05-07  Jean Brefort  <jean.brefort@normalesup.org>
	* goffice/graph/gog-legend.c: (cb_render_elements): use style
	for legend font.
	* goffice/graph/gog-style.c: (cb_font_changed): make things work,
	at least for now
	* goffice/gtk/go-font-sel.c: (style_selected): fixed it,
	(go_font_sel_set_style): added a warning.

2005-05-07  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-action-combo-color.c (go_action_combo_color_new):
	Don't set ->icon here, but make it when needed.  Fixes #302880.
	(make_icon): New function.

2005-05-07  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/data/go-data-simple.c: (go_data_vector_val_finalize),
	(go_data_vector_val_dup), (go_data_vector_val_as_str),
	(go_data_vector_val_from_str), (go_data_vector_val_class_init),
	(go_data_vector_val_new), (cb_strings_destroy_notify),
	(go_data_vector_str_finalize), (go_data_vector_str_dup),
	(go_data_vector_str_as_str), (go_data_vector_str_from_str),
	(go_data_vector_str_class_init), (go_data_vector_str_init),
	(go_data_vector_str_new),
	(go_data_vector_str_set_translation_domain),
	(go_data_matrix_val_finalize), (go_data_matrix_val_dup),
	(go_data_matrix_val_eq), (go_data_matrix_val_load_size),
	(go_data_matrix_val_load_values), (go_data_matrix_val_get_value),
	(go_data_matrix_val_get_str), (go_data_matrix_val_as_str),
	(go_data_matrix_val_from_str), (go_data_matrix_val_class_init),
	(go_data_matrix_val_new): add GODataMatrixVal class and add
	serialization to GODataVectorVal and GODataVectorStr.
	* goffice/data/go-data-simple.h: add GODataMatrixVal class and
	enhanced vectors.
	* goffice/data/go-data.c: (go_data_matrix_get_value),
	(go_data_matrix_get_str): check if row and column are valid.
	* goffice/gtk/go-color-palette.c: (create_color_sel): set opacity (see
	#302387).
	* goffice/gtk/go-format-sel.c: use go_setlocale instead of gnm_setlocale.
	* goffice/utils/format.c: (go_setlocale),
	(go_set_untranslated_bools): renamed two gnm functions.
	* goffice/utils/format.h: ditto.
	* plugins/plot_surface/xl-surface.c: updated args to go_data_vector_str_new
	(xl_contour_plot_axis_get_bounds): updated args to go_data_vector_str_new.

2005-05-07  Jody Goldberg <jody@gnome.org>

	* goffice/graph/gog-object-xml.c (gog_dataset_sax_save) : use
	  g_snprintf it is more portable.
	(gog_dataset_dom_save) : ditto.
	* goffice/utils/go-libxml-extras.c (xml_node_set_double) : ditto.

2005-05-06  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-chart.c (plot_render): new.
	(gog_chart_view_render): render plot marked with render_before_axes
	before axes, but after grid and background.
	* goffice/graph/gog-plot.c (gog_plot_init): default render_before_axes
	to FALSE.
	* plugings/plot_barcol/gog-line.c (gog_area_plot_init):
	render_before_axes = TRUE.
	* plugins/plot_radar/gog-radar.c (gog_radar_area_plot_init): ditto.
	* plugins/plot_surface/gog-surface.c (gog_contour_plot_init): ditto.

2005-05-05  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-glib-extras.c (go_object_properties_free,
	go_object_properties_collect, go_object_properties_apply): New
	functions.

2005-05-04  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-combo-box.c (go_combo_box_style_set): New
	function.
	(go_combo_box_class_init): Hook up go_combo_box_style_set and
	define add-tearoffs widget style property.

2005-05-04  Jody Goldberg <jody@gnome.org>

	* goffice/app/go-plugin-service.c (plugin_service_new) : minor leak.

2005-05-01  Jon K Hellan  <hellan@acm.org>

	* goffice/gtk/goffice-gtk.[ch] (go_mime_to_image_format): New. Get
	image format for mime type.
	(go_image_format_to_mime): New. Get mime types for image format.

2005-04-29  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-plot.c: added missing header.

2005-04-29  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-glib-extras.c (go_object_toggle): New function.

2005-04-28  Stepan Kasal  <kasal@ucw.cz>

	* configure.in (WITH_WIN32): Fix the case command for $host_os,
	add the "pw32*" pattern.
	(AC_CANONICAL_HOST): Call explicitly, we use $host_os.
	(WINDRES): Add an AC_ARG_VAR declaration.

2005-04-28  Ivan, Wong Yat Cheung  <email@ivanwong.info>

	* configure.in: Remove OS_WIN32 and combine PLATFORM_WIN32
	and WITH_WIN32.

	* goffice/Makefile.am: Use WITH_WIN32

2005-04-28  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-plot.c: (cb_axis_changed): initialize value.

2005-04-21  Stepan Kasal  <kasal@ucw.cz>

	* configure.in (GOFFICE_LIB_VERSON): Rename to ...
	(GOFFICE_LIB_VERSION): ... and compute statically, by m4_eval.
	* goffice/Makefile.am (goffice-paths.h): Also depends on Makefile.
	* plugins/plot_barcol/Makefile.am, plugins/plot_pie/Makefile.am:
	* plugins/plot_xy/Makefile.am: Don't list glade files in xml_DATA.

2005-04-20  Ivan, Wong Yat Cheung  <email@ivanwong.info>

	* goffice/gtk/go-action-combo-text.c: Add a new property
	"case-sensitive".

2005-04-19  Stepan Kasal  <kasal@ucw.cz>

	* goffice/utils/Makefile.am (SUFFIXES): Remove, Automake deduces it
	  (at least Automake >= 1.7).

2005-04-18  Stepan Kasal  <kasal@ucw.cz>

	* plugins/plot_surface/xl-surface.c (xl_contour_plot_build_matrix):
	Don't initialize `ptr' twice; do initialize `series'.

2005-04-18  Stepan Kasal  <kasal@ucw.cz>

	* goffice/utils/go-gradient.h (GOGradientDirection): Properly terminate
	  with GO_GRADIENT_MAX.
	* goffice/utils/go-gradient.c (grad_dir_names): No need to include the
	  enum number in the structure; code adapted.
	* goffice/utils/go-marker.c: Don't omit libart includes when !WITH_GTK;
	(marker_shape_names): Merge into marker_shapes; adapt code.
	(marker_shapes): Use macros to shorten the definition.
	(marker_update_pixbuf, go_marker_finalize, go_marker_set_shape):
	(go_marker_set_outline_color, go_marker_set_fill_color):
	(go_marker_set_size): Factor out common code ...
	(marker_free_pixbuf): ... to a new static function.
	(SELECTOR_PIXBUF_SIZE, SELECTOR_MARKER_SIZE): Remove unused defines.
	* goffice/utils/go-marker.h (pixbuf): If !WITH_GTK, rename this to ...
	(pixbuf_placeholder): ..., so that noone can actually use it.
	* goffice/utils/go-pattern.c (pattern_names): Merge into go_patterns;
	  adapt code.
	* goffice/utils/go-pattern.h (go_pattern_selector): Omit if !WITH_GTK.

2005-04-18  Stepan Kasal  <kasal@ucw.cz>

	* configure.in: Call PKG_PROG_PKG_CONFIG explicitly.

2005-04-15  Stepan Kasal  <kasal@ucw.cz>

	* configure.in: Fix the appearance of help strings.

2005-04-12  Stepan Kasal  <kasal@ucw.cz>

	* goffice/utils/go-file.c: #include libgnomevfs/gnome-vfs-mime-utils.h;
	  this file comes via gsf-input-gnomevfs.h and gnome-vfs.h in current
	  version, but not in my gnome-vfs 2.4.2.
	* goffice/graph/gog-plot.c (gog_plot_update_3d): Cosmetic fix.

2005-04-10  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/goffice-graph.h: allow use of GOG_AXIS_PSEUDO_3D.
	* goffice/graph/gog-axis-line.c: add pseudo 3d axis support.
	(gog_axis_base_view_padding_request), (gog_axis_base_view_render):
	* goffice/graph/gog-axis.c: (gog_axis_calc_ticks): ditto.
	* goffice/graph/gog-chart.c: (gog_chart_map_new),
	(gog_chart_map_2D), (role_grid_can_add), (pseudo_3d_axis_can_add),
	(pseudo_3d_axis_post_add), (gog_chart_axis_set_assign): ditto.
	* goffice/graph/gog-plot-impl.h: ditto.
	* goffice/graph/gog-plot.c: (gog_plot_class_init),
	(gog_plot_foreach_elem), (gog_plot_get_axis), (gog_plot_update_3d): ditto.
	* goffice/graph/gog-plot.h: ditto.
	* plugins/plot_surface/Makefile.am: ass xl-surface.*.
	* plugins/plot_surface/gog-contour-prefs.c: removed deprecated code and
	added "transposed" property managing.
	* plugins/plot_surface/gog-contour-prefs.glade: ditto.
	* plugins/plot_surface/gog-surface.c: rewrote to use pseudo 3d axis.
	* plugins/plot_surface/gog-surface.h: ditto.
	* plugins/plot_surface/plugin.xml.in: added xl compatibility contours plots
	* plugins/plot_surface/xl-surface.c: ditto.
	* plugins/plot_surface/xl-surface.h: ditto.

2005-04-08  Ivan, Wong Yat Cheung  <email@ivanwong.info>

	* goffice/gtk/Makefile.am: use -export-symbols to link with
	libhtmlhelp-stub.def

2005-04-07  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-renderer-svg.c: avoid use of
	g_string_append_printf.

2005-04-07  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/goffice-gtk.c (go_gtk_url_is_writeable): Use
	go_access.  No need to define G_IS_DIR_SEPARATOR anymore.
	(go_access): Copied from gsf while we're waiting for glib.

2005-04-07  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-renderer-svg.c: Avoid locale changes by using
	g_ascii_dtostr.  Fixes 172726.

2005-04-07  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-guru.c: (cb_attr_tree_selection_change): don't
	scroll to selection if nothing is selected.

2005-04-06  Morten Welinder  <terra@gnome.org>

	* plugins/plot_barcol/gog-1.5d.c (gog_plot1_5d_set_property): Add
	missing "break;"

	* goffice/utils/datetime.c (datetime_isoweeknum): Replace by
	g_date_get_iso8601_week_of_year.
	* configure.in: Require glib 2.6.4.

2005-04-04  Morten Welinder  <terra@gnome.org>

	* goffice/utils/format.c (go_format_number): Do at least a small
	attempt at getting fractional seconds right.

2005-04-02  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/goffice.c: (libgoffice_init), (libgoffice_shutdown): call
	number_format_init/shutdown.

2005-04-01  Jody Goldberg <jody@gnome.org>

	* goffice/utils/regutf8.c : include string.h to suppress warning about
	  implicit decl of strlen

2005-04-01  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-glib-extras.c (go_guess_encoding): Try exotic
	encodings guess by libxml.

	* goffice/drawing/god-property-table.h: Use canonical property
	names.

	* goffice/gtk/goffice-gtk.c (go_gtk_select_image): Moderately
	cheesy way of saving where we were last time.

2005-04-01  Stepan Kasal  <kasal@ucw.cz>

	s/INCLUDES/AM_CPPFLAGS/  "automake -Wall" has told me this.

	* goffice/libgoffice-1.pc.in: Move ...
	* libgoffice-1.pc.in: ... here.
	* Makefile.am, goffice/Makefile.am, configure.in: Adapt to the move.
	* goffice/utils/Makefile.am (non-intermediate): New dummy rule; see
		http://bugzilla.gnome.org/show_bug.cgi?id=172211 and
		http://bugzilla.gnome.org/show_bug.cgi?id=172212
	(.list.c, .list.h): Remove $(GLIB_GENMARSHAL); it didn't work
	  anyway, the prerequisities of an implicit rule are ignored.
	* configure.in (GLIB_GENMARSHAL): Full path is not needed.
	(GOFFICE_CFLAGS): No need to amend this.

2005-03-31  Morten Welinder  <terra@gnome.org>

	* goffice/app/go-plugin-service.c (go_plugin_file_saver_save): If
	we failed to load the plugin, set an error on the output.

2005-03-30  Ivan, Wong Yat Cheung <email@ivanwong.info>

	* configure.in:
	* plugins/plot_*/Makefile.am: modify GOFFICE_PLUGIN_LDFLAGS and
	  add GOFFICE_PLUGIN_LIBADD. They help when
	  host_os == win32.

	* goffice/Makefile.am: -export-all-symbols is not the
	  final solution. Will remove it when we have GO_API or
	  any other solution.

	* goffice/goffice-priv.h:
	* goffice/goffice.c:
	* goffice/app/go-plugin.c: use go_sys_lib_dir ()

	* goffice/gtk/Makefile.am: libgoffice-html-help-stub.la

2005-03-30  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-object.c (gog_editor_free): free editor.

2005-03-30  Morten Welinder  <terra@gnome.org>

	* goffice/utils/regutf8.c: Import Gnumeric's non-gui search stuff.
	Make it a gobject.
	(go_search_replace_set_search_text,
	go_search_replace_set_replace_text): Be paranoid.

2005-03-29  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* pixmaps/chart_polar_1_1.[png,svg]: new.
	* pixmaps/polar.[png,svg]: new.

2005-03-28  Morten Welinder  <terra@gnome.org>

	* .../*.c: Use canonical property names.

	* goffice/utils/go-libxml-extras.c
	(e_xml_get_child_by_name_by_lang): Use g_get_language_names.

	* goffice/utils/Makefile.am (libgoffice_utils_la_HEADERS): Remove
	go-locale.[ch].

2005-03-27  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-combo-box.c (go_combo_box_init): Use canonical
	property names.
	(go_combo_popup_tear_off): Ditto.

	* goffice/gtk/go-action-combo-text.c
	(go_action_combo_create_tool_item): Ditto.

	* goffice/gtk/go-action-combo-stack.c
	(go_action_combo_stack_create_tool_item): Ditto.

	* goffice/gtk/go-action-combo-color.c (go_action_combo_color_new):
	Ditto.

2005-03-27  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/app/error-info.h: add missing G_BEGIN_DECLS and G_END_DECLS.
	* goffice/app/file-priv.h: ditto.
	* goffice/app/file.h: ditto.
	* goffice/app/go-cmd-context-impl.h: ditto.
	* goffice/app/go-cmd-context.h: ditto.
	* goffice/app/go-error-stack.h: ditto.
	* goffice/app/go-object.h: ditto.
	* goffice/app/go-plugin-loader-module.h: ditto.
	* goffice/app/go-plugin-loader.h: ditto.
	* goffice/app/go-plugin-service.h: ditto.
	* goffice/app/go-plugin.h: ditto.
	* goffice/app/go-service.h: ditto.
	* goffice/app/io-context-priv.h: ditto.
	* goffice/app/io-context.h: ditto.
	* goffice/app/module-plugin-defs.h: ditto.
	* goffice/data/go-data-simple.h: ditto.
	* goffice/graph/gog-error-bar.h: ditto.
	* goffice/graph/gog-renderer.h: ditto.
	* goffice/ms-compat/go-ms-parser.h: ditto.
	* goffice/ms-compat/god-drawing-ms.h: ditto.
	* goffice/utils/datetime.h: ditto.
	* goffice/utils/go-math.h: ditto.

2005-03-25  Stepan Kasal  <kasal@ucw.cz>

	* configure.in (GOFFICE_WITHOUT_GTK, GOFFICE_WITH_GNOME): Rename
	  these defines back to WITH_GTK and WITH_GNOME.
	(GOFFICE_WITH_GTK, GOFFICE_WITH_GNOME): Rename the Automake
	  conditionals back to WITH_GTK and WITH_GNOME, too.

2005-03-24  Stepan Kasal  <kasal@ucw.cz>

	* goffice/app/module-plugin-defs.h (GOFFICE_MODULE_PLUGIN_INFO_DECL):
	  Removed, it's not used.

2005-03-24  Stepan Kasal  <kasal@ucw.cz>

	* goffice/Makefile.am (goffice-paths.h): Rewrite the rule,
	  goffice-paths.sh* is no longer used.
	(EXTRA_DIST, noinst_HEADERS): No longer needed.
	* goffice/goffice-paths.sh.in: Removed.
	* configure.in: Don't generate goffice-paths.sh, rearrange the
	  goffice_* AC_SUBSTs.
	* goffice/goffice.c (LIBGOFFICE_VERSION): Renamed to GOFFICE_VERSION.
	(libgoffice_lib_dir): Comment out in the WIN32 block, since the
	  declaration is already commented out.

2005-03-23  Stepan Kasal  <kasal@ucw.cz>

	* configure.in: Generate goffice-features.h as a header file, subset
	  of goffice-config.h.
	* goffice/goffice-config.h.in: Adjust the template.

2005-03-22  Stepan Kasal  <kasal@ucw.cz>

	* autogen.sh: REQUIRED_AUTOCONF_VERSION=2.54  We already required
	  that indirectly, by asking for Automake >= 1.7.2.
	* configure.in: AC_PREREQ(2.54)
	  - don't default to --without-gtk even if the reqs are not met;
	  - don't generate stamp.h; the issue is solved by Automake 1.7.2;
	    see info '(autoconf)Automatic Remaking' for details.
	* stamp.h.in: Nuke.
	* .cvsignore: Remove stamp*.
	* goffice/.cvsignore: Remove depcomp.
	* po/POTFILES.in: Remove goffice/cut-n-paste/pcre/printint.c.

2005-03-23  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* plugins/plot_radar/gog-radar.c (gog_radar_view_render): handle
	inverted circular axis.

2005-03-22  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-axis-line.c (radar_process): fix padding request
	for circular axis.

2005-03-22  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-axis-line.c (gog_axis_base_get_property): handle
	GOG_AXIS_AUTO.
	(gog_axis_base_set_position_auto): removed.
	(gog_axis_base_set_position): handle GOG_AXIS_AUTO.
	(xy_process): ditto.
	* goffice/graph/gog-axis-line.h: add GOG_AXIS_AUTO to GogAxisPosition.

2005-03-22  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	Add support for axis selection.

	* goffice/graph/gog-axis-line.c (get_point_to_segment_distance): new.
	(axis_line_point): new.
	(axis_circle_point): new.
	(axis_cirlce_render): render as polygon if num_radii > 0.0
	cos (x - pi/2) = sin (x)
	sin (x - pi/2) = -cos (x)
	(xy_process): handle point routine now.
	(radar_process) : ditto.
	(gog_axis_base_view_info_at_point): new.
	(gog_axis_base_view_padding_request): pass action parameter to process
	functions.
	(gog_axis_base_view_render): ditto.
	* goffice/graph/gog-grid-line.c (gog_grid_line_info_at_point): new.
	Just return FALSE for now.

2005-03-22  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-graph.c (gog_graph_force_update): replace if
	statement by a while loop, since an object update may trigger a
	update request for an other object.
	* goffice/graph/gog-renderer-gnome-print.c
	(gog_graph_print_to_gnome_print): force model update before rendering.
	* goffice/graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_update):
	ditto.
	* goffice/graph/gog-renderer-svg.c (gog_graph_export_to_svg): ditto.
	* plugins/plot_barcol/gog-line.c (gog_line_view_render): revert
	previous broken fix (2005-03-17).
	* tests/pie-demo.c (main): gog_chart_get_cardinality is not needed
	anymore.

2005-03-21  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* configure.in: change test/Makefile to tests/Makefile

2005-03-21  Christopher James Lahey  <clahey@ximian.com

	* goffice/drawing/Makefile.am, goffice/ms-compat/Makefile.am:
	Export header files.

2005-03-21  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-axis-line.c (gog_axis_base_set_position_auto):
	convenience function that places an axis line in the first free
	position.
	(cb_position_toggled): search all the axes with the same type, not
	just parent one.
	(axis_line_get_bbox): correct placement of axis labels.
	(axis_line_render): ditto.
	(axis_circle_get_bbox): ditto.
	(axis_circle_render): ditto.
	* goffice/graph/gog-axis.c (role_axis_line_post_add): use
	gog_axis_base_set_position_auto.
	(gog_axis_view_padding_request): restore padding hack.
	(gog_axis_view_size_allocate): ditto.
	* goffice/graph/gog-chart.c (axis_post_add): place axis in the first
	free position.

2005-03-21  Stepan Kasal  <kasal@ucw.cz>

	* MAINTAINERS: New file, two beings selected as victims -- one human
	  and one demi-god.
	* Makefile.am (EXTRA_DIST): Add README NEWS BUGS MAINTAINERS AUTHORS.
	* README: In the requirements, state that we require pango 1.8.1, and
	  fix the Debian name of the pango package; delete intltool, it's
	  distributed with the package.
	* configure.in: Delete the requirement for libgnomeprintui.

2005-03-20  Jody Goldberg <jody@gnome.org>

	* goffice/gtk/go-format-sel.c (fmt_dialog_enable_widgets) : make sure
	  the current selection is visible.

	* goffice/goffice.c (libgoffice_init) : look in the right place.

2005-03-19  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/gtk/go-graph-widget.c: (go_graph_widget_size_allocate),
	(go_graph_widget_set_property), (go_graph_widget_get_property),
	(go_graph_widget_class_init), (go_graph_widget_init): add abd use
	aspect-ratio property.
	* test/pie-demo.c: (main): add a title and a lengend.

2005-03-18  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-axis.c (map_discrete): inverted is in
	GogAxisMap::axis->inverted.
	(map_discrete_to_view): ditto.
	(map_discrete_from_view): ditto.
	(map_linear_from_view) :ditto.
	(map_linear_to_view): ditto.
	(map_log_to_view): ditto.
	(map_log_from_view): ditto.
	(gog_axis_map_from_view): ditto.
	(gog_axis_map_to_view): ditto.
	(map_baseline): new.
	(map_log_finite): new.
	(map_log_baseline): new.
	(gog_axis_map_finite): new. Returns TRUE if value means something in
	this map.
	(gog_axis_map_get_baseline): new. Returns the baseline for the given
	map, in view coordinates, clipped to offset and offset+length, where
	offset and length are the parameters of gog_axis_map_new.
 	* goffice/graph/gog-error-bar.c (gog_error_bar_render): do not try to
	render error bar if a part of it is not at a valid coordinate.
	* plugins/plot_barcol/gog-barcol.c (gog_barcol_view_render): replace
	go_finite tests by gog_axis_map_finite.
	* plugins/plot_radar/gog-radar.c (gog_radar_view_render): ditto.
	* plugins/plot_xy/gog-xy.c: ditto.
	* plugins/plot_barcol/gog-line.c (gog_line_view_render): ditto. Use
	gog_axis_map_get_baseline for y_zero.

2005-03-17  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* plugins/plot_barcol/gog-line.c (gog_line_view_render): Don't free
	memory with invalid pointers.

2005-03-16  Stepan Kasal  <kasal@ucw.cz>

	* autogen.sh: Require intltool >= 0.27.2 and explain why;
	  fix IFS handling; cosmetic changes.
	* configure.in: Cosmetics.
	* goffice/libgoffice-1.pc.in: Change the "Name:" to libGOffice,
	  and put a command with a hint for anon cvs.

2005-03-16  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-axis.c (map_discrete_auto_bound): do not set auto
	cross point.

2005-03-16  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/utils/go-line.c (go_line_build_vpath),
	(go_line_build_bpath): fix new point test.

2005-03-16  Jean Brefort  <jean.brefort@normalesup.org>

	* test/pie-demo.c: fix compilation warnings and add some comments.

2005-03-15  Morten Welinder  <terra@gnome.org>

	* goffice/cut-n-paste/pcre/pcre.c (pcre_exec): Backport another
	UMR fix.

2005-03-15  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-axis-line.c (axis_line_get_bbox): remove extra
	gog_axis_map_new.
	(gog_axis_base_view_padding_request): handle GOG_AXIS_SET_X like
	GOG_AXIS_SET_XY.
	(gog_axis_base_view_render): ditto.
	* goffice/graph/gog-chart.c (gog_chart_map_new): ditto.
	(gog_chart_map_2D): ditto.
	* goffice/graph/gog-axis.c (role_axis_line_can_add): adding an axis
	line is only relevant for GOG_AXIS_SET_XY for now.
	(gog_axis_class_init): add role_axis_line_can_add.
	* goffice/graph/gog-plot.c (gog_plot_populate_editor): axis selection
	is only relevant for GOG_AXIS_SET_XY.
	(gog_plot_set_axis_by_id): don't try to find an axis if id = 0,
	GogObject::id starts at 1.
	* plugins/plot_boxes/gog-xy.c (gog_bubble_plot_populate_editor):
	call parent::populate_editor.
	* plugins/plot_boxes/gog-boxplot.c (gog_box_plot_populate_editor):
	ditto.
	(gog_box_plot_view_render): free x_map.

2005-03-15  Stepan Kasal  <kasal@ucw.cz>

	* goffice/graph/Makefile.am: Distribute gog-axis-line-impl.h.

2005-03-15  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis.c: (map_discrete_calc_ticks): limit ticks number
	to GOG_AXIS_MAX_TICK_NBR (fix a crash when importing xl log axis).

2005-03-15  Stepan Kasal  <kasal@ucw.cz>

	Also undo the changes connected with the changes in configure.in, ...

	* plugins/plot_barcol/Makefile.am, plugins/plot_boxes/Makefile.am,
	plugins/plot_pie/Makefile.am, plugins/plot_radar/Makefile.am,
	plugins/plot_surface/Makefile.am, plugins/plot_xy/Makefile.am: ...here.

2005-03-14  Morten Welinder  <terra@gnome.org>

	* configure.in: Undo last change.  Test links with gcc, not $LD.

	* goffice/utils/format.c: Compile plain double version first as
	gdb sets breakpoints only for first copy.
	(go_format_number): Disable strange number scaling for ".".
	[#167274]

2005-03-14  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis.c: (gog_axis_get_entry): fixed test for
	GogAxisElemType arg (GOG_AXIS_ELEM_MAX_ENTRY instead of GOG_AXIS_ELEM_MAX).

2005-03-13  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/goffice.c (libgoffice_init): add GogAxisLine object.
	* goffice/graph/Makefile.am: add gog-axis-line.[ch]
	* goffice/graph/goffice-graph.h: add GogAxisLine object. Add new
	object position GOG_POSITION_PADDING.
	* goffice/graph/gog-axis-prefs.glade: Rework of axis property pages,
	now called Scale and Layout.
	* goffice/graph/gog-axis-line.[ch], gog-axis-line-impl.h: new.
	Contains an implementation of what is needed to actually draw an
	axis on screen, which was previously provided by GogAxis, in
	GogAxisBase and GogAxisBaseView.
	* goffice/graph/gog-axis.c: GogAxis is now derived from GogAxisBase.
	Tick settings and position are now property of GogAxisBase.
	(create_invalid_axis_ticks): always generate tick labels.
	(map_discrete_calc_ticks): ditto.
	(map_linear_calc_ticks): ditto.
	(map_log_calc_ticks): ditto.
	(role_label_post_add): removed.
	(role_axis_line_post_add): new. Set axis line position to an unused
	position.
	(gog_axis_set_property): removed tick and position settings.
	(gog_axis_get_property): ditto.
	(cb_pos_changed): removed.
	(gog_axis_editor): renamed to populate_editor. Use new GogEditor API.
	Removed everything related to tick and position settings.
	(gog_axis_class_init): Change position type of Label childs to
	GOG_POSITION_SPECIAL. Add AxisLine as possible child. Removed tick and
	position properties.
	(gog_axis_init): removed tick and position settings.
	(gog_axis_dataset_get_elem): cross location is a member of
	GogAxisBase.
	(gog_axis_get_pos): removed.
	(gog_axis_is_center_on_ticks): new.
	(gog_axis_view_padding_request): padding is now calculated in
	GogAxisBaseView.
	(gog_axis_view_size_request): removed.
	(gog_axis_view_size_allocate): new. handle axis titles.
	(draw_axis_from_a_to_b): removed.
	(gog_axis_view_render_children): removed.
	(gog_axis_view_render): rendering is now in GogAxisBaseView.
	* goffice/graph/gog-chart.c (gog_chart_map_new),
	(gog_chart_map_2D), (gog_chart_map_free): new.
	(gog_chart_class_init): Axis position type is GOG_POSITION_PADDING
	now.
	(gog_chart_axis_set): renamed to gog_chart_get_axis_set.
	(gog_chart_get_axis): renamed to gog_chart_get_axes.
	(gog_chart_view_get_plot_area): no need to store plot_area. It's in
	GogView::residual.
	(child_request): removed.
	(gog_chart_view_size_allocate): Do not handle axis padding request
	here.
	* goffice/graph/gog-grid-line.c (gog_grid_line_view_render): better
	placement of radar plots.
	* goffice/graph/gog-guru.c (cb_attr_tree_selection_change):
	no need to handle editor type since gog_object_get_editor always
	returns a notebook now.
	* goffice/graph/gog-label.c (gog_label_populate_editor): Use new
	GogEditor API.
	* goffice/graph/gog-legend.c (gog_legend_populate_editor): ditto.
	* goffice/graph/gog-series.c (gog_series_element_populate_editor):
	ditto.
	(gog_series_populate_editor): ditto.
	* goffice/graph/gog-style.c (font_init): ditto.
	(gog_style_populate_editor): ditto.
	(style_editor): ditto.
	(gog_style_editor): renamed to gog_style_get_editor.
	(gog_styled_object_editor): removed.
	(gog_style_handle_notebook): removed.
	* goffice/graph/gog-object.c (gog_editor_new), (gog_editor_add_page),
	(gog_editor_set_store_page), (gog_editor_get_notebook),
	(gog_editor_free): new.
	GogObject::id is an int now. This id is unique for a given object type
	and on the same level in the object tree.
	(gog_object_set_property): persist id now.
	(gog_object_get_property): ditto.
	(gog_object_class_init): ditto.
	(gog_object_is_same_type): new.
	(gog_object_generate_name): store auto_name and don't return anything.
	(gog_object_get_id): new.
	(gog_object_generate_id): new.
	(gog_object_set_id): new.
	(gog_object_get_name): return GogObject::auto_name.
	(gog_object_position_cmp): GOG_POSITION_PADDING and
	GOG_POSITION_SPECIAL are equivalent.
	(gog_object_get_editor): use new GogEditor API.
	(gog_object_set_parent): id is an int now.
	* goffice/graph/gog-plot.c (cb_axis_changed): new.
	(gog_plot_populate_editor): new.
	(gog_plot_set_property): store axis reference now.
	(gog_plot_get_property): ditto.
	(gog_plot_class_init): ditto.
	(gog_plot_set_axis_by_id): new.
	(gog_plot_get_axis_id): new.
	* goffice/graph/gog-styled-object.c (styled_object_populate_editor):
	use new GogEditor API.
	* goffice/graph/gog-theme.c (gog_themes_init): handle GogAxisLine
	objects.
	* goffice/graph/gog-view.c: GogView::padding_request : new.
	(gog_view_padding_request_real): new.
	(gog_view_padding_request): new.
	* plugins/plot_barcol/gog-1_5d.c (gog_series1_5d_populate_editor):
	use GogEditor API.
	* plugins/plot_barcol/gog-barcol.c (gog_barcol_plot_populate_editor):
	ditto.
	* plugins/plot_boxes/gog-boxplot.c (gog_box_plot_populate_editor):
	ditto.
	(gog_box_plot_view_render): draw sharp rectangles.
	* plugins/plot_pie/gog-pie-prefs.glade: layout fixes.
	* plugins/plot_pie/gog-pie-series.glade: ditto.
	* plugins/plot_pie/gog-pie.c (gog_pie_series_element_populate_editor):
	use GogEditor API.
	(gog_pie_plot_populate_editor): ditto.
	(gog_ring_plot_populate_editor): ditto.
	* plugins/plot_radar/gog-radar.c (gog_radar_plot_axis_get_bounds):
	maxima is num_elements - 1.
	(gog_radar_view_render): better radar plot placement.
	* plugins/plot_surface/gog-surface.c
	(gog_contour_plot_populate_editor): use GogEditor API.
	* plugins/plot_xy/gog-xy.c (gog_bubble_plot_populate_editor): ditto.
	(gog_xy_series_populate_editor): ditto.


2005-03-13  J.H.M. Dassen (Ray) <jdassen@debian.org>

	* configure.in: Link -Wl,-O1 if the linker supports it; see
	http://people.redhat.com/drepper/dsohowto.pdf for background.
	* configure.in: Link -Wl,-z,defs if the linker supports it
	* plugins/plot_barcol/Makefile.am, plugins/plot_boxes/Makefile.am,
	plugins/plot_pie/Makefile.am, plugins/plot_radar/Makefile.am,
	plugins/plot_surface/Makefile.am, plugins/plot_xy/Makefile.am: except
	for the plugins.

2005-03-13  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/gtk/Makefile.am: add go-graph-widget.*.
	* goffice/gtk/go-font-sel.c: (canvas_size_changed): display sample
	text centered in the canvas.
	* goffice/gtk/go-graph-widget.c: new GOGraphWidget class.
	* goffice/gtk/go-graph-widget.h: ditto.
	* test/Makefile.am: add pie-demo sample program.
	* test/pie-demo.c: simple sample program.

2005-03-12  Morten Welinder  <terra@gnome.org>

	* goffice/utils/format.c (go_render_number): Add epsilon early and
	permanently.  Fix significant digit check.

2005-03-11  Morten Welinder  <terra@gnome.org>

	* goffice/utils/format.c (go_render_number): Fix two
	trailing-zeros bugs.

	* goffice/utils/Makefile.am (.list.c): Add include of
	goffice/goffice-config.h when building this.

	* goffice/utils/go-libxml-extras.c (xml_node_set_gocolor): Don't
	go via GdkColor which we may not have.

	* goffice/utils/regutf8.c (go_regexp_quote): Renamed from
	gnumeric_regexp_quote.

2005-03-11  Stepan Kasal  <kasal@ucw.cz>

	* configure.in: Propagate ACLOCAL_FLAGS, so that it's available
	  in the Makefile for the aclocal.m4 rule.
	(goffice_reqs): Require pango 1.8.1; it is not good if we
	  _slightly_ differ from gnumeric.

2005-03-09  Morten Welinder  <terra@gnome.org>

	* goffice/utils/datetime.h (WEEKNUM_METHOD_SUNDAY): Define using
	enum.

	* goffice/utils/datetime.c (datetime_weeknum,
	datetime_g_days_between, datetime_g_months_between,
	datetime_g_years_between): Use g_return_val_if_fail, not g_assert.

	* goffice/utils/format.c: Fix long double compilation.

2005-03-08  Jody Goldberg <jody@gnome.org>

	The last of the code dependencies on gnumeric.  Now I just need to
	move the icons.
	* goffice/gtk/go-action-combo-color.c (go_action_combo_color_new) :
	  use gtk_icon_theme_load_icon in place of gnm_app_get_pixbuf.
	* goffice/gtk/goffice-gtk.c (update_preview_cb) : ditto.

2005-03-08  Stepan Kasal  <kasal@ucw.cz>

	* configure.in (AC_OUTPUT, AC_CONFIG_FILES): Use AC_CONFIG_FILES and
	  call AC_OUTPUT with no parameters; this was already available in
	  autoconf 2.52.

2005-03-07  J.H.M. Dassen (Ray) <jdassen@debian.org>

	* goffice/Makefile.am: Fixed inter-library dependencies; fix towards
	  -Wl,-z,defs buildability.
	* goffice/graph/gog-grid-line.h, goffice/gtk/go-action-combo-stack.c,
	  goffice/ms-compat/god-drawing-ms.c: Switch to traditional C comments,
	  to be buildable by gcc -ansi.

2005-03-07  Morten Welinder  <terra@gnome.org>

	* configure.in: Pare down long double support checks to what is
	needed.
	* goffice/goffice-config.h: Don't install this, ...
	* goffice/goffice-features.h: ... install this one instead.

2005-03-07  Stepan Kasal  <kasal@ucw.cz>

	* configure.in: Don't default to --without-gtk if gtk libs are not
	  found; remove checks for gconf, Corba and GNU make, as they are
	  not used in goffice; improve quoting and make use of AC_SUBST/2.
	* goffice/app/Makefile.am (UNUSED): List the unused files lingering
	  in the CVS, ...
	(EXTRA_DIST): ... and distribute them.
	* goffice/gtk/Makefile.am (UNUSED, EXTRA_DIST): Likewise.
	* goffice/cut-n-paste/pcre/Makefile.am: Refresh.

2005-03-07  Morten Welinder  <terra@gnome.org>

	* configure.in: Use largefile apis.

	* goffice/utils/go-libxml-extras.c (go_xml_parse_file):
	New replacement for xmlParseFile.  All users changed.

	* goffice/utils/go-math.c (go_math_init): Verify properties of
	go_nanl, go_pinfl, and go_ninfl.

	* goffice/utils/format.c (number_format_init): Fix initialization
	of beyond_precision and beyond_precisionl.

2005-03-06  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis.c: (map_discrete_to_view),
	(map_discrete_from_view), (map_linear_to_view),
	(map_linear_from_view), (map_log_to_view), (map_log_from_view),
	(gog_axis_map_from_view), (gog_axis_map_to_view),
	(draw_axis_from_a_to_b), (gog_axis_view_render): changed map_to_canvas to
	map_to_view and added gog_axis_map_from_canvas and support.
	* goffice/graph/gog-axis.h: ditto.
	* goffice/graph/gog-error-bar.c: (gog_error_bar_render): ditto.
	* goffice/graph/gog-grid-line.c: (gog_grid_line_view_render): ditto.
	* plugins/plot_barcol/gog-barcol.c: (barcol_draw_rect): ditto.
	* plugins/plot_barcol/gog-line.c: (gog_line_view_render): ditto.
	* plugins/plot_boxes/gog-boxplot.c: (gog_box_plot_view_render): ditto.
	* plugins/plot_radar/gog-radar.c: (gog_radar_view_render): ditto.
	* plugins/plot_surface/gog-surface.c: (gog_contour_view_render): ditto.
	* plugins/plot_xy/gog-xy.c: (gog_xy_view_render): ditto.

2005-03-06  Jon K Hellan  <hellan@acm.org>

	* goffice/utils/go-file.c (go_get_mime_type): New.

2005-03-06  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/app/go-plugin.c (go_plugins_init): append goffice plugin
	directory to plugin_dirs list.
	(go_plugins_get_plugin_dir): new.

2005-03-04  Jody Goldberg <jody@gnome.org>

	* goffice/app/module-plugin-defs.h : remove the ugly go_get_current_plugin
	  and the PLUGIN & PLUGIN_CLASS macras.

2005-03-04  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-math.c (go_finite): Make this a function and
	add a fallback definition.

	* goffice/graph/gog-renderer-pixbuf.c
	(gog_renderer_pixbuf_finalize): No need to call
	go_pango_fc_font_map_cache_clear.
	(gog_renderer_pixbuf_get_pango_context): Use Gimp's leak
	work-around instead.

	* goffice/utils/go-font.c (go_fonts_list_families,
	go_fonts_list_sizes): New function.  Rework all references to
	go_fonts_family_names, go_fonts_font_size_names,
	go_fonts_font_size_pts to use these.  (This gets rid of one more
	direct -- and wrong -- reference to the ft2 pango backend.)
	(go_pango_fc_font_map_cache_clear): Remove.

	* goffice/utils/go-math.c (go_stern_brocot): Use double, not
	float.

	* goffice/utils/go-glib-extras.c (go_mem_chunk_new): Drop
	references to gnm_float.

2005-03-04  Stepan Kasal  <kasal@ucw.cz>

	* goffice/cut-n-paste/foocanvas/foo-canvas.c: Refresh.

2005-03-02  Ivan, Wong Yat Cheung  <email@ivanwong.info>

	* goffice/gtk/goffice-gtk.c: Use gsf_input_textline_utf8_gets()
	to read .hhmap file which stores topic_string-context_id pairs.
	Become more verbose when topic is not found.
	go_gtk_notice_(nonmodal_)dialog/go_gtk_query_yes_no now
	accept va_arg.

2005-03-02  Stepan Kasal  <kasal@ucw.cz>

	* configure.in: Add check for Xrender.
	* goffice-plugins.mk (INCLUDES): Fix.
	* goffice/cut-n-paste/foocanvas/*: Refresh.

2005-02-28  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-glib-extras.c: replaced gnumeric-config.h by
	goffice-config.h
	* goffice/gtk/go-action-combo-pixmaps.h: updated gui-utils to gtk
	for includes paths.
	* goffice/gtk/go-font-sel.c: ditto.
	* goffice/gtk/go-format-sel.c: ditto.
	* goffice/utils/go-glib-extras.c: ditto.
	* goffice/utils/go-gradient.c: ditto.
	* goffice/utils/go-line.c: ditto.
	* goffice/utils/go-marker.c: ditto.
	* goffice/utils/go-pattern.c: ditto.
	* plugins/plot_barcol/gog-barcol-prefs.c: ditto.
	* plugins/plot_boxes/gog-boxplot.c: ditto.
	* plugins/plot_pie/gog-pie-prefs.c: ditto.
	* plugins/plot_surface/gog-contour-prefs.c: ditto.
	* plugins/plot_xy/gog-bubble-prefs.c: ditto.

2005-02-28  Christopher James Lahey  <clahey@clahey.net>

	* configure.in, goffice-plugins.mk: Changed gnumeric to goffice
	here.

2005-02-27  Christopher James Lahey  <clahey@clahey.net>

	* Makefile.am (pkgconfigdir), configure.in (AC_OUTPUT): Create and
	install libgoffice-1.pc.

2005-02-27  Christopher James Lahey  <clahey@clahey.net>

	* libgoffice-1.pc.in: New file.

2005-02-27  Jody Goldberg <jody@gnome.org>

	* configure.in : Quick and dirty subset of gnumeric

2005-02-26  Jody Goldberg <jody@gnome.org>

	* graph/Makefile.am : move the plugins into the root dir
	  so that the plugins can link against libgoffice

2005-02-22  Morten Welinder  <terra@gnome.org>

	* gui-utils/go-gui-utils.c (filter_images): If we have no
	mime-type, fall back to checking the extension against what
	gdk-pixbuf supports.  Adapted from bug #164589.

2005-02-17  Stepan Kasal  <kasal@ucw.cz>

	* Makefile.am (INCLUDES): Remove -I$(top_srcdir)/src/cut-n-paste-code/goffice.
	Fix the remaining includes.
	* goffice.c (go_sys_icon_dir): Fix typo.

2005-02-17  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* gui-utils/go-gui-utils.c: include errno.h
	(go_help_display): link is part of paths.

2005-02-16  Jean Brefort  <jean.brefort@normalesup.org>

	* graph/gog-renderer-pixbuf.c: (gog_renderer_pixbuf_draw_path): rewrite to
	use large paths at once and have better dashes support
	* graph/plugins/plot_xy/gog-xy.c: (gog_xy_view_render): render path at once
	and use ART_PATH_STROKE_CAP_ROUND for better rendering of large lines.
	* utils/go-line.c: (go_line_build_vpath): new function, builds a vpath from
	a set of points.
	* utils/go-line.h: ditto.

2005-02-16  Jody Goldberg <jody@gnome.org>

	* utils/go-file.c (go_url_check_extension) : pull down from gnumeric

	* gui-utils/go-gui-utils.c (go_gtk_button_new_with_stock) : renamed
	  from go_gtk_button_new_with_stock_image.
	(go_libglade_new) : use go_sys_data_dir.
	(go_gtk_widget_disable_focus) : renamed from go_widget_disable_focus.
	(go_pango_measure_string) : renamed from go_measure_string.
	(go_gtk_window_set_transient) : renamed from go_window_set_transient.
	(go_gtk_nonmodal_dialog) : renamed from gnumeric_non_modal_dialog.
	(go_gtk_file_sel_dialog) : renamed from gnumeric_dialog_file_selection.
	(go_gtk_select_image) : renamed from gui_image_file_select.
	(gui_get_image_save_info) : pulled in from gnumeric.
	(go_atk_setup_label) : renamed from gnm_setup_label_atk.
	(go_help_display) : pulled down from gnumeric and made generic.
	(go_gtk_help_button_init) : ditto.
	(go_gtk_url_is_writeable) : ditto.
	(go_gtk_dialog_run) : pulled from gnumeric
	(go_gtk_notice_dialog) : ditto.
	(go_gtk_notice_nonmodal_dialog) : ditto.
	(go_gtk_query_yes_no) : ditto.

	* gui-utils/Makefile.am : Add libhtml_stub

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_init) : init the
	  dpis.
	(gog_renderer_pixbuf_get_pango_context) : use the stored calculated
	  dpi rather than gconf
	(gog_renderer_pixbuf_update) : store the dpi

	* goffice.c (libgoffice_init) : init the paths.  We may want to expand
	  this at some point to allow cmd-line or env-var override.
	(go_sys_data_dir) : new.
	(go_sys_icon_dir) : new.

2005-02-15  Stepan Kasal  <kasal@ucw.cz>

	* gui-utils/go-marshalers.list: Remove, merge with ...
	* utils/go-marshalers.list: ... this one, adjust all callers.
	* gui-utils/Makefile.am: Nuke the rules for go-marshalers.
	* utils/Makefile.am: Typo.
	* goffice.mk (INCLUDES): Add $(builddir)/../cut-n-paste-code,
	  for the generated header goffice/utils/go-marshalers.h.

2005-02-11  Morten Welinder  <terra@gnome.org>

	* gui-utils/go-combo-text.c (cb_list_changed): Plug leak.

	* utils/go-font.c (go_fonts_init): Copy family names instead of
	relying on pango leak.  Destroy fontmap only after we get the
	names out.

	* gui-utils/go-format-sel.c (generate_preview): Avoid crash in
	g_warning.

2005-02-09  Stepan Kasal  <kasal@ucw.cz>

	* app/error-info.h: Change the guard to GO_ERROR_INFO_H.

2005-02-08  Jon K Hellan  <hellan@acm.org>

	* utils/format.h: Include numbers.h.
	(render_number): Make declaration match	definition.

2005-02-08  Morten Welinder  <terra@gnome.org>

	* utils/go-font.c (go_fonts_init): Plug leak.

2005-02-08  Jody Goldberg <jody@gnome.org>

	* Release 1.5.0

2005-02-05  Morten Welinder  <terra@gnome.org>

	* graph/gog-renderer-gnome-print.c (get_font): Return a
	PangoFontDescription, not a GnomeFont.  All callers changed.

2005-02-04  Morten Welinder  <terra@gnome.org>

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_finalize):
	Remove old #ifdef HAVE_foo stuff.
	* graph/gog-renderer-gnome-print.c: Ditto.

2005-02-03  Jean Brefort  <jean.brefort@normalesup.org>

	* graph/gog-axis.c: (map_linear_auto_bound): change < to >, fix #164593.

2005-01-25  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_boxes/gog-boxplot.c (gog_box_plot_pref) : fix
	  signature.

2005-01-24  Jean Brefort  <jean.brefort@normalesup.org>

	* graph/goffice-graph.h: add GOG_AXIS_SET_X.
	* graph/gog-chart.c: (role_grid_can_add),
	(gog_chart_axis_set_assign), (gog_chart_view_size_allocate): add grid
	when we have only an X axis.
	* graph/plugins/Makefile.am: add box-plots plugin
	* graph/plugins/plot_boxes/Makefile.am: new plugin.
	* graph/plugins/plot_boxes/gog-boxplot-prefs.glade:
	* graph/plugins/plot_boxes/gog-boxplot.c: ditto.
	* graph/plugins/plot_boxes/gog-boxplot.h: ditto.
	* graph/plugins/plot_boxes/plot-types.xml.in: ditto.
	* graph/plugins/plot_boxes/plugin.xml.in: ditto.
	* pixmaps/Makefile.am: add box-plots pixmaps.
	* pixmaps/boxplot.xpm: ditto.
	* pixmaps/chart_boxplot_1_1.png: ditto.
	* pixmaps/chart_boxplot_1_1.svg: ditto.

2005-01-22  Jean Brefort  <jean.brefort@normalesup.org>

	* graph/gog-renderer-gnome-print.c:
	(gog_renderer_gnome_print_draw_bezier_path),
	(gog_renderer_gnome_print_class_init): add Bezier paths support.
	* graph/gog-renderer-impl.h: ditto.
	* graph/gog-renderer-pixbuf.c:
	(gog_renderer_pixbuf_draw_bezier_path),
	(gog_renderer_pixbuf_class_init): ditto.
	* graph/gog-renderer-svg.c: (gog_renderer_svg_draw_bezier_path),
	(gog_renderer_svg_class_init): ditto.
	* graph/gog-renderer.c: (gog_renderer_draw_bezier_path): ditto.
	* graph/gog-renderer.h: ditto.
	* graph/plugins/plot_xy/gog-xy.c: (gog_xy_set_property),
	(gog_xy_get_property), (gog_xy_plot_class_init),
	(gog_xy_view_render): add spline interpolation support.
	* graph/plugins/plot_xy/gog-xy.h: ditto.
	* graph/plugins/plot_xy/plot-types.xml.in: ditto.
	* pixmaps/Makefile.am: install chart_scatter_3_3.png.
	* utils/go-line.c: (go_line_build_bpath): new function, builds a Bezier path
	from an array of points.
	* utils/go-line.h: add go_line_build_bpath.

2005-01-17  Jody Goldberg <jody@gnome.org>

	* Release 1.4.2

2005-01-14  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=163939
	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_update) : zero
	  sized views are not relevent, and does not require any redrawing.

2005-01-11  Morten Welinder  <terra@gnome.org>

	* gui-utils/go-combo-text.c (go_combo_text_init): Bind to the
	treeview's cursor_changed signal, not the selection's changed
	signal.  [#163412].

2005-01-06  Morten Welinder  <terra@gnome.org>

	* utils/go-math.c (go_fake_floor, go_fake_ceil): Fix negative
	case.

2005-01-05  Jean Brefort <jean.brefort@normalesup.org>

	* pixmaps/Makefile.am: add chart_contour_1_1.png.
	* pixmaps/chart_contour_1_1.png: new icon by Emmanuel Pacaud.
	* pixmaps/chart_contour_1_1.svg: ditto.
	* pixmaps/chart_contour_1_2.png: ditto.
	* pixmaps/chart_contour_1_2.svg: ditto.
	* pixmaps/chart_scatter_3_3.png: ditto.
	* pixmaps/chart_scatter_3_3.png: ditto.
	* graph/plugins/plot_surface/plot_types.xml.in: use chart_contour_1_1.png.


2005-01-05  Morten Welinder  <terra@gnome.org>

	* graph/gog-series.c (gog_series_get_element): Fix NULL/FALSE
	confusion.

2004-12-17  Jody Goldberg <jody@gnome.org>

	From Ivan Wong :
	http://bugzilla.gnome.org/show_bug.cgi?id=159860
	* utils/go-file.c (go_url_show) : Use ShellExecute on win32

2004-12-17  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/plot-xy/gog-xy.c (gog_xy_series_init_style): don't disable
	theming.

2004-12-17  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-series.c (gog_series_dataset_dim_changed): resize for every
	label change.
	* graph/gog-axis.c (gog_axis_update): no need to force resize for
	discrete axis, it's handled by gog_series_dataset_dim_changed.

2004-12-15  Morten Welinder  <terra@gnome.org>

	* gui-utils/go-action-combo-stack.c (get_key_at_path): Don't crash
	if we don't get an iter.
	(cb_motion_notify_event): Handle empty tree case.

2004-12-09  Jody Goldberg <jody@gnome.org>

	* Release 1.4.1

2004-12-09  Jody Goldberg <jody@gnome.org>

	* utils/go-file.c (go_url_show) : patch the problems morten pointed
	  out and finish the '%1' subsitution.

2004-12-08  Jody Goldberg <jody@gnome.org>

	* utils/go-file.c (go_url_show) : new with a win32 and non-gnome wrapper

2004-12-01  Jody Goldberg <jody@gnome.org>

	* goffice.mk (INCLUDES) : remove GNUMERIC_ICON_DIR

2004-11-28  Jody Goldberg <jody@gnome.org>

	* Release 1.4.0

2004-11-19  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-style.c (gog_style_gradient_load): call
	  gog_style_set_fill_brightness in order to correctly initialize start
	  and end colors.

2004-11-18  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-axis.c (create_invalid_axis_ticks): add a flag to note
	create "##" labels.
	* graph/gog-guru.c (cb_attr_tree_selection_change): scroll to selected
	row.

2004-11-14  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-renderer-pixbuf.c (line_size): width <= 0. is hairline.
	* graph/gog-renderer.c (gog_render_line_size): ditto.
	* graph/gog-style.c (cb_outline_size_changed): round to 2 significant
	digits since sometimes adj->value returns 1E-17 instead of zero.
	(cb_line_size_changed): ditto.
	(gog_style_apply_theme): handle dash_type property.
	(gog_style_gradient_sax_save): fix brightness test to be consistent
	with dom_save.
	(gog_style_gradient_load): start-color and end-coilor were inverted.
	(gog_style_is_outline_visible): line is visible for all width values.
	(gog_style_is_line_visible): ditto.
	(gog_style_force_auto): handle auto_dash.
 	* graph/plugins/plot_xyt/gog-xy.c (gog_xy_series_init_style): handle
	dash_type property.

2004-11-14  Andreas J. Guelzow <aguelzow@taliesin.ca>

	http://bugzilla.gnome.org/show_bug.cgi?id=152514
	* graph/gog-guru.c (graph_guru_init_ok_button): new
	(graph_guru_init): call graph_guru_init_ok_button
	(gog_guru): initialize state->editing

2004-11-07  Jody Goldberg <jody@gnome.org>

	* Release 1.3.93

2004-10-31  Jody Goldberg <jody@gnome.org>

	* Release 1.3.92

2004-11-01  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	http://bugzilla.gnome.org/show_bug.cgi?id=157048
	* graph/plugins/plot_barcol/gog-line.c (gog_line_view_render): fix
	leak.

2004-10-30  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	http://bugzilla.gnome.org/show_bug.cgi?id=152765
	* graph/gog-guru.c (graph_guru_init_format_page): delete_button is
	really a button now, so connect "clicked" signal instead of
	"activate".
	* graph/gog-guru.glade: replace "Delete" menuitem by a button as a
	workaround of gtk+ bug #155336.

2004-10-29  Morten Welinder  <terra@gnome.org>

	* cut-n-paste/pcre/pcre.c (ord2utf8): Fix ABR.  (Fixed in PCRE
	5.0, but I don't want to upgrade right now.)

2004-10-27  Morten Welinder  <terra@gnome.org>

	* utils/go-line.c (go_line_clip_vpath): Make sure "reject" is
	initialized.
	(GOLineDashDesc): Do not rely on C99 features.

2004-10-27  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-style.c (gog_style_gradient_load): fix brightness case.

2004-10-26  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/plugins/plot_barcol/gog-line.c (gog_line_view_render): fix
	marker for missing data.

2004-10-26  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	http://bugzilla.gnome.org/show_bug.cgi?id=152585
	* grah/gog-axis.c (gog_axis_update): always emit changed signal for
	discrete axis, since labels may have changed.
	* plugins/plot_barcol/gog-1.5d.c (gog_plot1_5d_update): call
	gog_axis_bound_changed if GogSeries1_5D->index_changed == TRUE.
	(gog_series1_5d_dim_changed): new. Used to set index_changed to TRUE
	when vector dim_i == 0 changed.

2004-10-25  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-axis.c (draw_axis_from_a_to_b): use
	gog_style_is_line_visible instead of checking line width.
	(gog_axis_view_render): ditto.
	* graph/gog-label.c (gog_label_view_render): draw sharp rectangle
	around label.
	* graph/gog-legend.c (cb_render_elements): draw sharp sample line and
	sharp rectangle around elements.
	(gog_legend_class_init): set clip to TRUE in order to avoid sample
	lines to extend beyond legend area.
	* graph/gog-outlined-object.c (gog_outlined_view_size_request): use
	gog_style_is_line_visible instead of checking for positive line width.
	(gog_outlined_view_size_allocate): ditto.
	(gog_outlined_view_render): draw sharp rectangle.
	* graph/gog-renderer-gnome-print.c (set_dash): new.
	(gog_renderer_gnome_print_draw_path): honor dash setting. Clip dashed path
	in order to avoid huge memory allocation and crash for very long
	lines.
	(gog_renderer_gnome_print_draw_polygon): ditto.
	* graph/gog-renderer-impl.h: add GogRenderer::line_dash and
	GogRenderer::outline_dash members.
	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_clip_push): fix
	clip area rounding.
	(line_size): new. Same as gog_renderer_line_size, but don't round
	width < 1.0 .
	(gog_renderer_pixbuf_line_size): use line_size.
	(gog_renderer_pixbuf_sharp_path): fix rounding.
	(gog_renderer_pixbuf_draw_path): honor dash setting.
	(gog_renderer_pixbuf_draw_polygon): ditto.
	* graph/gog-renderer-svg.c (gog_renderer_svg_clip_push): use C locale
	for double to string conversion.
	(stroke_dasharray): new.
	(gog_renderer_svg_draw_path): honor dash setting.
	(gog_renderer_svg_draw_polygon): ditto.
	* graph/gog-renderer.c: define a hair line width and set it to 0.24pt.
	(gog_renderer_finalize): free line_dash and outline_dash.
	(update_dash): new.
	(gog_renderer_push_style): call update_dash.
	(gog_renderer_pop_style): ditto.
	(gog_renderer_clip_push): keep a pointer to the current clip.
	(gog_renderer_clip_pop): ditto.
	(draw_rectangle): new.
	(gog_renderer_draw_sharp_rectangle): new.
	(gog_renderer_line_size): return GOG_RENDERER_HAIR_LINE_WIDTH instead
	of 1.0 for style->line.width == 0.0 .
	* graph/gog-style-prefs.glade: add dash type combos.
	* graph/gog-style.c (cb_outline_dash_type_changed): new.
	(cb_line_dash_type_changed): new.
	(outline_init): add dash selector.
	(line_init): ditto.
	(gog_style_line_load): load dash settings.
	(gog_style_line_dom_save): save dash settings.
	(gog_style_line_sax_save): ditto.
	(gog_style_is_different_size): check dash_type.
	(gog_style_is_outline_visible): new.
	(gog_style_is_line_visible): check dash_type.
	* graph/gog-theme.c (gog_themes_init): use dash_type.
	* graph/plugins/plot_barcol/gog-line.c (gog_line_view_render): don't
	draw sharp path.
	* utils/go-line.[ch]: new.

2004-10-13  Jean Brefort <jean.brefort@normalesup.org>

	* graph/gog-axis.c: add center_on_ticks boolean to force centering labels
	on ticks for discree mapped axis.
	* graph/gog-plot.h: ditto.
	* graph/gog-plot.c: ditto.

2004-10-19  Morten Welinder  <terra@gnome.org>

	* utils/go-file.c (go_dirname_from_uri): New function.

2004-10-13  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-axis.c (gog_axis_dim_changed): call gog_axis_update in
	order to refresh labels and ticks.

2004-10-13  Morten Welinder  <terra@gnome.org>

	* graph/gog-axis.c (gog_axis_get_entry): Remove band-aid no longer
	needed.  (Although files created in the past few days will have
	the vector type in the file.)

2004-10-13  Jean Brefort <jean.brefort@normalesup.org>

	* graph/gog-axis.c: (make_dim_editor): replace TRUE by GO_DATA_SCALAR in the
	call to gog_data_allocator_editor.
	* graph/gog-label.c: (gog_label_editor): ditto.
	* graph/gog-series.c: (gog_series_editor): ditto.

2004-10-13  Jean Brefort <jean.brefort@normalesup.org>

	* graph/gog-plot-impl.h: added a foreach_elem member in GogPlotClass
	* graph/gog-plot.c: (gog_plot_foreach_elem): calls Klass->foreach_elem
	when not NULL to override default legends management.
	* graph/gog-renderer-gnome-print.c: (draw_path): add ART_MOVETO_OPEN case,
	(gog_renderer_gnome_print_measure_text): fix a bad sign.
	* graph/gog-renderer-svg.c: (draw_path): add ART_MOVETO_OPEN case.

2004-10-12  Morten Welinder  <terra@gnome.org>

	* graph/gog-axis.h (GogAxisTickTypes): Fix namespace.

	* graph/gog-axis.c (GogAxisElemType): Name this type.
	(gog_axis_get_entry): Use GogAxisElemType, not unsigned int, for
	the index argument.

2004-10-12  Morten Welinder  <terra@gnome.org>

	* graph/gog-axis.c (map_linear_auto_bound): Fix gnm_float/double
	confusion.
	(gog_axis_get_entry): Temporary fix for user-defined axis limits.

2004-10-11  Morten Welinder  <terra@gnome.org>

	* graph/gog-series.c (gog_series_finalize): Plug leak.

2004-10-11  Jody Goldberg <jody@gnome.org>

	* gui-utils/Makefile.am : drop the dock code we're not going to be
	  using it before 1.4

2004-10-02  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	http://bugzilla.gnome.org/show_bug.cgi?id=154664
	* graph/gog-guru.glade: set width and height request for sample area
	and object list.

2004-10-09  Jean Brefort <jean.brefort@normalesup.org>

	* graph/go-data.c: (go_data_matrix_emit_changed),
	(go_data_matrix_class_init), (go_data_matrix_get_size),
	(go_data_matrix_get_values), (go_data_matrix_get_value),
	(go_data_matrix_get_str), (go_data_matrix_get_minmax): new GOMatix class.
	* graph/go-data.h: ditto.
	* graph/go-data-impl.h: ditto.
	* graph/goffice-graph.h: ditto. Added GODataType enumerated type.
	* graph/gog-data-allocator.c: (gog_data_allocator_editor): Replaced
	"gboolean prefers_scalar" by "GODataType data_type".
	* graph/gog-data-allocator.h: ditto.
	* graph/gog-error-bar.c: (cb_type_changed), (gog_error_bar_prefs):
	* graph/gog-series.c: (gog_series_editor): ditto.
	* graph/plugins/plot_surface/Makefile.am: new contour plots.
	* graph/plugins/plot_surface/gog-contour-prefs.c: ditto.
	* graph/plugins/plot_surface/gog-contour-prefs.glade: ditto.
	* graph/plugins/plot_surface/gog-surface.c: ditto.
	* graph/plugins/plot_surface/gog-surface.h: ditto.
	* graph/plugins/plot_surface/plot-types.xml.in: ditto.
	* graph/plugins/plot_surface/plugin.xml.in: ditto.

2004-10-08  Jody Goldberg <jody@gnome.org>

	* graph/gog-object.c (gog_object_dup) : copy the position.

2004-10-06  Jody Goldberg <jody@gnome.org>

	* graph/gog-control-foocanvas.c (gog_control_foocanvas_update) : Fix
	  redraw.  There were two bugs.
	  1) foocanvas_group_update was wiping tbe bounds (things always look
	     like they move)
	  2) We were not requesting a redraw for the old position before
	     moving.

2004-10-05  Jody Goldberg <jody@gnome.org>

	* Release 1.3.91

2004-10-03  Jody Goldberg <jody@gnome.org>

	* graph/gog-control-foocanvas.c :  Make the class definition public to
	  make it easier to graft on an additional interface in the app.  We
	  may not need this later if SheetObject moves down into goffice

2004-10-02  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	http://bugzilla.gnome.org/show_bug.cgi?id=152672
	* graph/gog-theme.c (gog_themes_init): set pattern background to
	white, even when automatic pattern style is NONE.
	* graph/gog-label.c (gog_label_editor): fix layout.
	(gog_label_view_render): add padding
	when outline > 0. or pattern != NONE.
	* graph/gog-outlined-object.c (gog_outlined_view_size_request): ditto.
	(gog_outlined_view_size_allocate): ditto.
	* graph/gog-style.c (gog_style_is_different_size): changing pattern
	type can change object size.

2004-09-29  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-guru-type-selector.glade: new.
	* graph/Makefile.am: add gog-guru-type-selector.glade.
	* graph/gog-axis-prefs.glade: fix layout.
	* graph/gog-axis.c (make_dim_editor): ditto.
	(gog_axis_editor): ditto.
	* graph/gog-guru.c (cb_attr_tree_selection_change): always use a
	notebook, but hide tabs when there's only one page.
	(graph_guru_type_selector_new): load layout from glade file.
	* graph/gog-guru-glade: remove scrollbar around property notebook.
	Make object menu unshrinkable. Fix layout.
	* graph/gog-series.c (gog_series_element_editor): fix layout.
	* graph/gog-style.c (font_int): ditto.
	* graph/plugins/plot_barcol/gog-barcol-prefs.glade: ditto.
	* graph/plugins/plot_pie/gog-pie-series.glade: ditto.
	* graph/plugins/plot_pie/gog-ring-prefs.glade: ditto.
	* graph/plugins/plot_xye/gog-xy-prefs.glade: ditto.

2004-09-29  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	http://bugzilla.gnome.org/show_bug.cgi?id=153402
	* graph/plugins/gog-radar-prefs.c: removed.
	* graph/plugins/gog-radar-prefs.glade: removed.
	* graph/plugins/gog-radar.c: removed reference to plot editor.
	* graph/plugins/Makefile.am: removed reference to
	gog-radar-prefs.[c,glade].

2004-09-29  Morten Welinder  <terra@gnome.org>

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_finalize):
	Conditionalise the use of pango_context_get_font_map.

2004-09-28  Morten Welinder  <terra@gnome.org>

	* utils/go-font.c (go_pango_fc_font_map_cache_clear): New
	function, wrapping pango_fc_font_map_cache_clear (which isn't
	public).

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_finalize): Call
	go_pango_fc_font_map_cache_clear.

	* utils/go-color.c (go_color_to_pango): Add is_fore argument and
	export.

2004-09-28  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/plugins/plot_pie/gog-pie.c (gog_pie_view_info_at_point):
	disable automatic point creation for ring plot, since it
	doesn't work. For pie plot, don't create new point when it already
	exists, but select it.

2004-09-28  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	http://bugzilla.gnome.org/show_bug.cgi?id=153401
	* graph/plugins/plot_pie/gog-pie.c (gog_pie_view_render): fix special
	inner arc handling test (has_hole :) ).

2004-09-27  Morten Welinder  <terra@gnome.org>

	* utils/go-math.c (go_fake_ceil): New function.

	* utils/go-file.c (go_url_encode): Make this half-way decent.
	(go_url_decode): Make this O(n) too.

	* libpresent/ppt-parsing-helper.h: Add header guard.

2004-09-27  Jon K Hellan  <hellan@acm.org>

	* graph/gog-renderer-gnome-print.c
	(gog_graph_print_to_gnome_print): Conditionalize call to
	gnome_print_pango_create_layout.

2004-09-26  Jody Goldberg <jody@gnome.org>

	From : Yukihiro Nakai  <nakai@gnome.gr.jp>
	http://bugzilla.gnome.org/show_bug.cgi?id=148550
	* utils/go-file.c (go_url_decode) : new
	(go_url_encode) : new.  I'm not sure these belong in go vs gsf
	  but lets keep them here for now until they get fleshed out.

2004-09-25  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-error-bar-prefs.glade: 12 px between label and control.
	* graph/gog-style-prefs.glade: 12 px padding. Use GtkAlignment for
	group layout.
	* graph/gog-style.c: use new layout.

2004-09-25  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-error-bar-prefs.glade: layout rework.
	* graph/gog-error-bar.c (cb_type_changed): use new layout. Hide styles
	when category is none.
	(gog_error_bar_prefs): ditto.

2004-09-23  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-axis.c (gog_axis_view_render): draw_minor and draw_major
	only if line_width > 0.
	* grapg/gog-theme.c (gog_themes_init): initialize GogGrid outline.

2004-09-23  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-axis.c (gog_axis_view_render): Calculate major_out even if
	line_width <= 0, because it's needed for label positionning.

2004-09-23  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-axis.c: make GogGridLine as child of GogAxis.
	(role_grid_line_can_add): new.
	(role_grid_line_major_can_add): new.
	(role_grid_line_minor_can_add): new.
	(role_grid_line_major_post_add): new.
	(role_grid_line_minor_post_add): new.
	(gog_axis_view_class_init): add grid line roles.
	(gog_axis_view_render_children): new. Don't render grid lines here.
	(gog_axis_view_render): call gog_axis_view_render_children. Free
	axis_list.
	* graph/gog-chart.c
	(gog_chart_view_class_init): set call_parent_render to FALSE.
	(grid_line_render): new. Render minor grid, then major.
	(gog_chart_view_render): new. Kludge for grid lines rendering before
	axis.
	* graph/gog-grid-line.c: add new is_minor property and remove type
	property.
	(gog_grid_line_is_minor): new.
	(gog_grid_line_view_render): implement radar grid.
	* graph/gog-grid.c: Remove grid line roles.
	(role_grid_line_can_add): removed.
	(role_grid_x_major_can_add): removed.
	(role_grid_x_minor_can_add): removed.
	(role_grid_y_major_can_add): removed.
	(role_grid_y_minor_can_add): removed.
	(role_grid_x_major_post_add): removed.
	(role_grid_x_minor_post_add): removed.
	(role_grid_y_major_post_add): removed.
	(role_grid_y_minor_post_add): removed.
	(gog_grid_view_render): sharpen polygon.
	(gog_grid_init_style): add OUTLINE property.
	* graph/gog-outlined-object.c: add a call_parent_render class
	property. Deafult to TRUE.
	* graph/gog-theme.c (gog_themes_init): add MajorGrid and MinorGrid
	themes. Remove X-MajorGrid, Y-MajorGrid, X-MinorGrid, Y-MinorGrid
	themes.

2004-09-23  Morten Welinder  <terra@gnome.org>

	* graph/gog-renderer-gnome-print.c
	(gog_renderer_gnome_print_draw_text): Get the right kind of size.
	(gog_renderer_gnome_print_measure_text): Use layout method here
	too.

2004-09-22  Morten Welinder  <terra@gnome.org>

	* graph/gog-renderer-gnome-print.c
	(gog_renderer_gnome_print_draw_text): Print using pango layouts.
	Adapted from code by Yaacov Zamir <kzamir@walla.co.il>.

2004-09-21  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	http://bugzilla.gnome.org/show_bug.cgi?id=153289
	* graph/gog-axis.c (gog_axis_editor): hide minor tick properties when
	editing discrete axis properties.
	* grah/gog-axis-prefs.glade: name minor tick frame.

2004-09-20  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* pixmaps: make color order consistent and rerender png from svg with
	inkscape instead of rsvg.

2004-09-20  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice.c: new GogGridLine type.
	* graph/gog-axis.c (map_discrete_calc_ticks): always calc major and
	minor ticks.
	(map_linear_calc_ticks): ditto.
	(map_log_calc_ticks): ditto.
	(gog_axis_get_ticks): return tick list and tick number now.
	(gog_axis_view_render): since all ticks are in cache, only draw them
	if they are visibles.
	* graph/gog-grid-line.[ch]: new.
	* graph/gog-grid.c (gog_grid_init_style): use only fill property.
	(role_grid_line_can_add): new.
	(role_grid_x_major_can_add): new.
	(role_grid_x_minor_can_add): new.
	(role_grid_y_major_can_add): new.
	(role_grid_y_minor_can_add): new.
	(role_grid_x_major_post_add): new.
	(role_grid_x_minor_post_add): new.
	(role_grid_y_major_post_add): new.
	(role_grid_y_minor_post_add): new.
	(gog_grid_class_init): register new grid line roles.
	* graph/gog-theme.c: register theme for new grid line objects.

2004-09-20  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	http://bugzilla.gnome.org/show_bug.cgi?id=153146
	* graph/plugins/plot_radar/gog-radar.c (gog_radar_view_render): Check
	if series is valid before trying to render it.

2004-09-19  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	http://bugzilla.gnome.org/show_bug.cgi?id=152615
	* pixmaps: new consistent charting icon set (based on a Jimmac work).

2004-09-16  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-error-bar.c (gog_error_bar_get_min_max): get values from
	outside of loop.
	(gog_error_bar_get_bounds): add assertions. Use
	go_data_vector_get_value.

2004-09-15  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	http://bugzilla.gnome.org/show_bug.cgi?id=152499
	* graph/gog-error-bar.c (gog_error_bar_get_minmax): check whether
	associated GogSeries is valid.

2004-09-15  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-error-bar.c (gog_error_bar_get_minmax): add assertions.

2004-09-14  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-axis.c (gog_axis_map_is_valid): add assertion.

2004-09-09  Jody Goldberg <jody@gnome.org>

	* graph/gog-series.c (gog_series_element_set_index) : new to handle
	  theming properly.
	(gog_series_element_set_property) : use it here.
	(gog_series_element_init_style) : and here.
	(role_series_element_allocate) : and here.

2004-09-10  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-renderer-pixbuf.c (gog_renderer_draw_text): remove
	remaining unref.

2004-09-10  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	http://bugzilla.gnome.org/show_bug.cgi?id=152201
	* graph/gog-axis.c (map_discrete_auto_bound): Set automatic maximum
	number of major and lables to 100.
	(gog_axis_view_render): don't draw axis + ticks in one path.
	* graph/gog-renderer-pixbuf.c: cache pango layout.
	(gog_renderer_pixbuf_get_pango_layout): new.
	(gog_renderer_pixbuf_get_pango_context): new.
	(gog_renderer_pixbuf_push_style): new. unref pango_layout.
	(gog_renderer_pixbuf_push_style): ditto.

2004-09-08  Jody Goldberg <jody@gnome.org>

	* Release 1.3.90

2004-09-07  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	http://bugzilla.gnome.org/show_bug.cgi?id=151530
	tick label truncated by chart outline
	http://bugzilla.gnome.org/show_bug.cgi?id=151527
	pb when exporting to svg a chart without outline
	http://bugzilla.gnome.org/show_bug.cgi?id=127203
	X axis labels centre on chart, not on axis

	* graph/goffice-graph.h: new GogViewPadding type.
	* graph/gog-axis.c (map_log_to_canvas): DBL_MIN is not -DBL_MAX.
	(gog_axis_view_padding_request): new.
	(gog_axis_view_size_request): just call gog_view_size_child_request.
	(gog_axis_view_size_allocate): remove.
	(gog_axis_view_render): stop libart path to third element in case of
	  line_width <= 0. Fix label dropping. Use Chart->plot_area for axis
	  drawing.
	* graph/gog-chart.c (gog_chart_view_get_plot_area): new.
	(child_request): new.
	(gog_chart_view_size_allocate): axis now request space around
	  residual. Store residual in Chart->plot_area.
	* graph/gog-label.c (gog_label_view_render): draw rectangle here,
	  since in gog_outlined_object, rectangle around label is clipped to
	  view->allocation.
	* graph/gog-renderer-pixbuf.c (draw_text): don't clip text, to be
	  consistent with svg and gnome-print renderer.

2004-09-06  Jody Goldberg <jody@gnome.org>

	* gui-utils/go-color-palette.c (go_color_palette_setup) : warning
	  suppression

2004-09-05  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=151628
	* graph/gog-guru.c (cb_typesel_sample_plot_resize) : hard code the
	  zoom when recalculating the size.  The sample graph is only zoomed
	  when visible.

2004-09-05  Jody Goldberg <jody@gnome.org>

	* graph/gog-guru.c (graph_guru_type_selector_new) : Add a light bulb
	  to the 'show sample' button to make it stand out a bit more

	* graph/gog-guru.c (graph_guru_type_selector_new) : Make the sample
	  canvas the main resizeable element in the type selector.

2004-09-01  Jody Goldberg <jody@gnome.org>

	* utils/go-gradient.c : conditionalize selector on WITH_GTK
	* utils/go-pattern.c : ditto
	* utils/go-marker.c : conditionalize selector and the use of GdkPixbuf

	* utils/go-color.c : Remove unnecessary include of color-combo
	  and conditionalize the gdk support routines in case we do not have
	  gtk.

2004-09-03  Morten Welinder  <terra@gnome.org>

	* graph/plugins/plot_barcol/gog-1.5d.c
	(gog_series1_5d_populate_editor): Terminate g_object_get call by
	NULL, not 0.

2004-09-02  Morten Welinder  <terra@gnome.org>

	* graph/plugins/plot_radar/gog-radar-prefs.glade: Someone
	accidentally cut the guts of this.  Add vary-style button that the
	code appears to want.

2004-08-31  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	http://bugzilla.gnome.org/show_bug.cgi?id=151529
	* graph/plugins/plot_xy/gog-xy.c (gog_xy_view_render): set series to to
	right value for marker drawing.
	* graph/plugins/plot_barcol/gog-line.c (gog_line_view_render): use
	right index when walking through path for marker drawing.

2004-08-30  Morten Welinder  <terra@gnome.org>

	* graph/gog-plot-engine.c (gog_plot_new_by_name): Ick.  We need to
	keep a GObject ref in addition to the GnmPlugin ref.

2004-08-29  Jody Goldberg <jody@gnome.org>

	* Release 1.3.2

2004-08-26  Morten Welinder  <terra@gnome.org>

	* goffice.c (libgoffice_shutdown): Showdown plugin services.

	* graph/gog-plot-engine.c (gog_plot_new_by_name): Handle inactive
	plugins.  Mark plugins as used.
	(gog_plugin_services_shutdown): New function.

2004-08-25  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (gog_axis_view_render) : don't leak an axis map for
	  discrete axes

2004-08-24  Morten Welinder  <terra@gnome.org>

	* utils/go-file.c (go_file_split_uris): New function for
	text/uri-list parsing.

2004-08-23  Morten Welinder  <terra@gnome.org>

	* graph/gog-plot-engine.c (create_plot_families): New function.
	(gog_plot_family_by_name, gog_plot_families): Ensure we have
	families.

2004-08-20  Morten Welinder  <terra@gnome.org>

	* graph/gog-error-bar.c (gog_error_bar_prefs): Arrange for gui to
	be unref'd.

2004-08-18  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-axis.c (map_linear_calc_ticks): fix tick number
	calculation.
	(overlap): use already defined MAX / MIN.

2004-08-17  Morten Welinder  <terra@gnome.org>

	* goffice.c (libgoffice_init): Call gsf_init.

2004-08-17  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/plugins/plot_barcol/gog-line.c (gog_line_view_render):
	don't clip markers to plot area.

2004-08-17  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-axis.c (create_invalid_axis_ticks): new.
	(map_[log,discrete,linear]_init): when axis is not valid, init data
	for special invalid axis rendering.
	(map_[log,discrete,linear]_calc_ticks): when axis is not valid, return
	a special set of ticks/labels.
	(gog_axis_map_is_valid): new.
	(gog_axis_map_new): set the map->is_valid flag. Default to FALSE if
	there's no init function.
	* graph/plugins/plot_barcol/gog-barcol.c (gog_barcol_view_render): use
	gog_axis_map_is_valid.
	* graph/plugins/plot_barcol/gog-line.c (gog_line_view_render): idem.
	* graph/plugins/plot_radar/gog-radar.c (gog_radar_view_render): idem.
	Add support for mapping.
	* graph/plugins/plot_xy/gog-xy.c (gog_xy_view_render): don't clip
	markers to plot area, but to chart area.

2004-08-17  Jon K Hellan  <hellan@acm.org>

	* graph/gog-stisyle.c (cb_image_file_select): is_save parameter to
	gui_image_file_select no longer needed.

2004-08-13  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-axis.c (gog_axis_editor): don't show preferences for
	circular axis.
	(overlap): new.
	(draw_axis_from_a_to_b): use gog_axis_map and draw labels.
	(gog_axis_view_render): at least width of the '0' char between two
	labels for GOG_AXIS_X.
	* graph/gog-view.h: remove call_parent_render and add a clip flag.
	* graph/gog-chart.c (gog_chart_view_render): removed.
	(gog_chart_view_class_init): set clip to TRUE.
	* graph/gog-outlined-object.c: always call parent render.
	* graph/gog-renderer-gnome-print.c: change start/stop_clipping to
	clip_push/pop.
	* graph/gog-renderer-svg.c: change start/stop_clipping to
	clip_push/pop.
	(gog_renderer_draw_text): add xml child in current node instead of
	first doc child.
	* graph/gog-renderer-pixbuf: change start/stop_clipping to
	clip_push/pop.
	(gog_renderer_pixbuf_clip_push): add multilevel clipping capability.
	(gog_renderer_pixbuf_print_clip_pop): idem.
	* graph/gog-renderer.c: change start/stop_clipping to clip_push/pop
	and add a clip stack to handle mutilevel clipping.
	* graph/gog-view.c (gog_view_class_init): set default clip flag to
	FALSE.
	(gog_view_render): if klass->clip is TRUE, call to clip_push/pop
	functions.
	* graph/plugins/plot_barcol/gog-barcol.c: set klass->clip to TRUE.
	* graph/plugins/plot_barcol/gog-line.c: idem.
	* graph/plugins/plot_xy/gog-xy.c: idem.
	* graph/plugins/plot_radar/gog-radar.c: idem.

2004-08-09  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-axis.c (map_[log,linear,discrete]_init) : add arguments
	for direct mapping to canvas coordinates.
	(gog_axis_map_new) : idem.
	(map_[log,linear,discrete]_to_canvas : new.
	(gog_axis_map_to_canvas) : new.
	(map_discrete) : handle barcol / area,line correctly.
	(map_log_auto_bounds): be smarter in case of min <= 0.
	(gog_axis_render) : draw axis/ticks in one call. Drop labels when they
	overlap.
	* graph/gog-error-bar.c (gog_error_bar_get_bounds) : return relative
	values of errors instead of absolute values.
	(gog_error_bar_get_min_max) : adapt to new gog_error_bar_get_bounds.
	(gog_error_bar_render) : use gog_axis_map functions.
	* graph/gog-grid.c (gog_grid_render) : remove kludge.
	* grapg/gog-renderer-gnome-print.c (gog_graph_print_to_gnome_print) :
	add a workaround for a bug in libgnomeprint.
	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_start_clipping) :
	rendering fix.
	(gog_renderer_pixbuf_line_size) : new.
	(gog_renderer_pixbuf_sharp_path) : new. Tweak a path for sharp
	rendering with libart.
	(gog_renderer_pixbuf_draw_marker) : zoom support for markers. Fix
	marker position.
	* graph/gog-renderer.c (gog_renderer_draw_sharp_path) : new.
	(gog_renderer_draw_sharp_polygon) : new.
	(gog_renderer_line_size) : remove kludge.
	* graph/plugins/plot_barcol/gog-1.5d.c (gog_plot1_5d_axis_get_bounds)
	: maxima = num_elements - 1.
	* graph/plugins/plot_barcol/gog-barcol.c
	(gog_barcol_update_stacked_and_percentage) : adapt
	to new gog_error_bar_get_bounds.
	(gog_barcol_axis_get_bounds) : new.
	(barcol_draw_rest) : remove kludge.
	(gog_barcol_view_render) : use gog_axis_map functions.
	* graph/plugins/plot_barcol/gog-line.c
	(gog_line_update_stacked_and_percentage) : adapt
	to new gog_error_bar_get_bounds.
	(gog_line_view_render) : use gog_axis_map functions.
	* graph/plugins/plot_xy/gog-xy.c (gog_xy_plot_render) : use
	gog_axis_map_to_canvas and new gog_error_bar_get_bounds.
	* utils/go-marker.c (go_marker_get_pixbuf) : add a scale argument.

2004-07-29  Morten Welinder  <terra@gnome.org>

	* gui-utils/go-action-combo-pixmaps.c
	(go_action_combo_pixmaps_create_menu_item): Let's initialize item
	before we use it.

2004-07-28  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-axis-prefs.glade: HIGification.
	* graph/gog-axis.c (get_adjusted_tick_array): new.
	(map_[discrete,linear,log]_init): new. Init for map functions.
	(map_[discrete,linear,log]): new. Map data to visible plot area.
	(map_[discrete,linear,log]_auto_bound): new. Calculate auto bounds and
	tick spacing.
	(map_[discrete,linear,log]_calc_ticks): new. Calculate position of
	major ticks,minor ticks and labels.
	(gog_axis_map_new),
	(gog_axis_map),
	(gog_axis_map_free): new. For use in plot view rendering functions.
	(gog_axis_set_ticks): new. Put tick and label positions in axis->ticks.
	(gog_axis_auto_bound),
	(gog_axis_calc_ticks): new.
	(gog_axis_set_property): check if update or calc_ticks is needed.
	(gog_axis_update): makes use of gog_axis_set_ticks and
	gog_axis_auto_bound.
	(gog_axis_editor): hide map combobox if axis is discrete.
	(gog_axis_view_render): use axis->ticks for rendering.
	* graph/plugins/plot_xy/gog-xy.c (gog_xy_view_render): use new map
	functions.

2004-07-22  Christopher James Lahey  <clahey@ximian.com>

	* libpresent/Makefile.am (libgoffice_libpresent_la_SOURCES): Added
	ppt-parsing-helper.c and ppt-parsing-helper.h.

	* libpresent/god-drawing-ms-client-handler-ppt.c: Handle
	TextBytesAtom and StyleTextPropAtom.

	* libpresent/god-drawing-ms-client-handler-ppt.h: Added parameter
	fonts.

	* libpresent/load-ppt.c: Moved StyleTextPropAtom parsing to
	ppt-parsing-helper.c.

	* libpresent/ppt-parsing-helper.c,
	libpresent/ppt-parsing-helper.h: Moved StyleTextPropAtom parsing
	here.  Improved StyleTextPropAtom parsing.

	* test/dump-ppt-records.c: Improved StyleTextPropAtom parsing.

2004-07-20  Christopher James Lahey  <clahey@ximian.com>

	* libpresent/load-ppt.c (handle_atom), test/dump-ppt-records.c
	(handle_atom): Improved StyleTextPropAtom parsing.

2004-07-20  Christopher James Lahey  <clahey@ximian.com>

	* libpresent/load-ppt.c (handle_atom): Missing NULL.

2004-07-20  Christopher James Lahey  <clahey@ximian.com>

	* drawing/god-drawing-renderer-gdk.c (draw_text),
	drawing/god-paragraph-attributes.c,
	drawing/god-paragraph-attributes.h, libpresent/load-ppt.c: Support
	default paragraph attributes and support bullets and alignment.

	* libpresent/present-view.c: Added space and backspace bindings
	(these don't work since the widget doesn't get focus.)

	* test/dump-ppt-records.c (handle_atom): Handle TxMasterStyleAtom
	better.

	* test/test-view-ppt.c: Added q and escape bindings.

2004-07-19  Jody Goldberg <jody@gnome.org>

	* Release 1.3.1

2004-07-19  Jody Goldberg <jody@gnome.org>

	* gui-utils/go-action-combo-pixmaps.c : switch from inline pixbufs to
	  stock ids.

	* gui-utils/go-action-combo-color.c
	(go_action_combo_color_set_color):  implement

2004-07-13  Christopher James Lahey  <clahey@ximian.com>

	* libpresent/load-ppt.c (handle_atom): Parse fonts.

	* test/dump-ppt-records.c (handle_atom): Print a bunch of info
	about default attributes.

2004-07-12  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_pie/gog-pie.c (gog_pie_view_info_at_point) :
	  expand this to offer name and override creation.

	* graph/gog-view.c (gog_view_info_at_point) :  expand this interface a
	  bit. I'm still not happy with it.

	* graph/gog-series.c :  keep a sorted list of overrides in place

	* graph/gog-plot.c (gog_plot_foreach_elem) :  handle point overrides

	* graph/gog-object.c (gog_object_emit_changed) :  handle updates for
	  objects not yet connected to parents.

2004-07-11  Christopher James Lahey  <clahey@ximian.com>

	* drawing/Makefile.am (libgoffice_drawing_la_SOURCES): Added
	god-default-attributes.c and god-default-attributes.h.

	* drawing/god-default-attributes.c,
	drawing/god-default-attributes.h: Default pango and paragraph
	attributes per indent level.

	* drawing/god-drawing-renderer-gdk.c: Handle default attributes.
	Rework character attributes.

	* drawing/god-text-model.c, drawing/god-text-model.h: Added indent
	and default attributes concepts.

	* libpresent/load-ppt.c (handle_atom): Parse TxMasterStyleAtom.

	* libpresent/present-presentation.c,
	libpresent/present-presentation.h: Added a default default
	attributes object per text type.

	* libpresent/present-text.c: Added a property to store a pointer
	to the main presentation object.

	* test/dump-ppt-records.c: Parse TxMasterStyleAtom.

2004-07-08  Jody Goldberg <jody@gnome.org>

	* graph/gog-guru.c (cb_canvas_select_item) : handle the zoom

	* graph/gog-theme.c (gog_themes_init) : Add a global alias for
	  GogSeriesElement -> GogSeries
	(gog_theme_find_element) : Look up theme local and global aliases for
	  classes.
	(gog_theme_add_alias) : new.

2004-07-08  Jody Goldberg <jody@gnome.org>

	* goffice.c (libgoffice_init) : Add SeriesElement to be pedantic

2004-07-06  Jody Goldberg <jody@gnome.org>

	* graph/gog-graph.c (gog_graph_init) : apply theme style for graphs
	  to do a full init.

2004-07-04  Jody Goldberg <jody@gnome.org>

	* graph/gog-styled-object.c (gog_styled_object_parent_changed) :
	    initialize the style completely using the theme when we have a
	    theme.

2004-07-04  Christopher James Lahey  <clahey@ximian.com>

	* drawing/god-drawing-renderer-gdk.c (draw_text): Handle
	char_attributes.

	* drawing/god-text-model.c, drawing/god-text-model.h
	(real_god_text_model_set_paragraph_attributes): Fixed up this
	function a bit.
	(real_god_text_model_set_pango_attributes): Implemented this
	function.  Changed it to take GList instead of PangoAttrList.

	* libpresent/load-ppt.c (handle_atom): Implemented parsing
	character attributes.

2004-07-02  Jody Goldberg <jody@gnome.org>

	* graph/gog-theme.c (map_area_series_solid_default) : simplify now
	  that we're just filling in the color no need to twiddle types

	* graph/gog-style.c : rework GogStyle::fill share pattern:fore/back
	and gradient:start/end.
	merge all the different auto flags.
	initialize the gradient brightness to -1 to avoid starting with black
	Change fill from union to struct to simplify changing fill types
	Allow themed gradient fills

2004-06-30  Christopher James Lahey  <clahey@ximian.com>

	* drawing/god-text-model.c
	(real_god_text_model_set_paragraph_attributes): Oh yeah, the
	character count should increase as you iterate through the
	paragraph.

	* libpresent/load-ppt.c (handle_atom): Pass in the position in the
	text instead of the position in the file.  That might be a good
	idea.

2004-06-29  Christopher James Lahey  <clahey@ximian.com>

	* drawing/Makefile.am (libgoffice_drawing_la_SOURCES): Added
	god-paragraph-attributes.c and god-paragraph-attributes.h.

	* drawing/god-drawing-renderer-gdk.c (draw_text): Draw each
	paragraph separately with some paragraph formatting.

	* drawing/god-paragraph-attributes.c,
	drawing/god-paragraph-attributes.h: New file to handle attributes
	of a paragraph.

	* drawing/god-text-model.c, drawing/god-text-model.h: Store as a
	list of paragraphs.  Store some formatting information.

	* libpresent/load-ppt.c: Load some of the paragraph formatting
	from ppt.

	* test/dump-ppt-records: Attempted to parse BaseTextPropAtom.

	* test/test-view-ppt.c (main): Fullscreen the window.

2004-06-23  Jean Brefort  <jean.brefort@ac-dijon.fr>

	* Makefile.am: Added cut-n-paste subdir.
	* cut-n-paste/Makefile.am: New file.
	* cut-n-paste/pcre/Makefile.am: pcre tree moved from gnumeric.
	* cut-n-paste/pcre/get.c: (pcre_get_stringnumber),
	(pcre_copy_substring), (pcre_copy_named_substring),
	(pcre_get_substring_list), (pcre_free_substring_list),
	(pcre_get_substring), (pcre_get_named_substring),
	(pcre_free_substring): ditto, changed gnumeric_* to go_*
	* cut-n-paste/pcre/internal.h: ditto.
	* cut-n-paste/pcre/maketables.c: (pcre_maketables): ditto.
	* cut-n-paste/pcre/pcre.c: (make_pcre_default_tables), (ord2utf8),
	(pcre_version), (pcre_info), (pcre_fullinfo), (pcre_config),
	(pchars), (check_escape), (is_counted_repeat),
	(read_repeat_counts), (first_significant_code), (find_fixedlength),
	(find_bracket), (find_recurse), (could_be_empty_branch),
	(could_be_empty), (check_posix_syntax), (check_posix_name),
	(adjust_recurse), (compile_branch), (compile_regex), (is_anchored),
	(is_startline), (find_firstassertedchar), (valid_utf8),
	(pcre_compile), (match_ref), (match_xclass), (match), (pcre_exec):
	* cut-n-paste/pcre/pcre.h: ditto.
	* cut-n-paste/pcre/pcreposix.c: (pcre_posix_error_code),
	(go_regerror), (go_regfree), (go_regcomp), (go_regexec):
	* cut-n-paste/pcre/pcreposix.h: ditto.
	* cut-n-paste/pcre/printint.c: (print_char), (print_internals): ditto.
	* cut-n-paste/pcre/study.c: (set_bit), (set_start_bits),
	(pcre_study): ditto.
	* goffice.c: (libgoffice_init): Added call to go_math_init.
	* graph/go-data-simple.c: (go_data_scalar_str_get_value),
	(go_data_vector_str_get_value),
	(go_data_vector_str_set_translation_domain): use new go_nan and functions in utils/go-math.*
	* graph/go-data.c: (go_data_vector_get_value): ditto.
	* graph/gog-axis.c: (gog_axis_get_entry), (gog_axis_update),
	(cb_enable_dim), (cb_axis_bound_changed), (gog_axis_get_bounds),
	(gog_axis_num_markers), (gog_axis_view_render): ditto.
	* graph/gog-error-bar.c: (gog_error_bar_get_bounds): ditto.
	* graph/gog-plot.c: (gog_plot_get_axis_bounds): ditto.
	* graph/plugins/plot_barcol/gog-1.5d.c:
	(gog_plot1_5d_axis_get_bounds): ditto.
	* graph/plugins/plot_barcol/gog-barcol.c:
	(gog_barcol_update_stacked_and_percentage),
	(gog_barcol_view_render): ditto.
	* graph/plugins/plot_barcol/gog-line.c:
	(gog_line_update_stacked_and_percentage), (gog_line_view_render): ditto.
	* graph/plugins/plot_pie/gog-pie.c: (gog_pie_view_render),
	(gog_pie_series_update): ditto.
	* graph/plugins/plot_radar/gog-radar.c:
	(gog_radar_plot_axis_get_bounds), (gog_radar_view_render):
	* graph/plugins/plot_xy/gog-xy.c: (gog_2d_plot_update),
	(gog_2d_plot_axis_get_bounds), (gog_xy_view_render): ditto.
	* utils/go-marker.c: ditto.
	* utils/Makefile.am: Added go_math.[c,h]
	* utils/go-math.c: (go_math_init), (go_add_epsilon),
	(go_sub_epsilon), (go_fake_floor), (go_fake_trunc): imported from gnumeric.
	* utils/go-math.h: ditto.

2004-06-20  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (gog_axis_view_render) : Ensure that the line
	  extends out far enough for the first and last tick.

	* graph/gog-theme.c (map_area_series_solid_default) : honour the new
	  disable_theming flag.
	* graph/gog-style.c (gog_style_is_completely_auto) : new.

2004-06-16  Morten Welinder  <terra@gnome.org>

	* utils/go-file.c (go_filename_to_uri): Handle "//" and "/./"
	parts in filenames.

	* graph/gog-style.c (cb_image_file_select): Handle change in
	gui_image_file_select's signature.  (Barely.)

	* utils/go-file.c (go_file_create): New function.

2004-06-15  Morten Welinder  <terra@gnome.org>

	* utils/go-file.c (go_basename_from_uri): Better WITH_GNOME
	implementation that handles fragments and methods.

2004-06-13  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_barcol/gog-1.5d.c : tack on a placeholder 'in_3d'
	  attribute to simplify roundtripping for xls.

2004-06-11  Morten Welinder  <terra@gnome.org>

	* utils/go-file.c: New file.

2004-06-11  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-axis-prefs.glade : add a combobox for map selection.
	* graph/gog-axis.c : add a map description structure. remove log_scale
	boolean property of GogAxis, and add a new named map property.
	(map_init_linear),
	(map_linear),
	(map_init_log),
	(map_log),
	(gog_axis_map_set_by_num),
	(gog_axis_map_populate_combo),
	(gog_axis_map_set),
	(gog_axis_map_init),
	(gog_axis_map),
	(gog_axis_map_destroy) : new.
	(gog_axis_editor) : handle map combobox.
	* graph/plugins/plot_xy/gog-xy.c (gog_xy_view_render) : use map
	functions.

2004-06-05  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (gog_axis_get_entry) : add some protection now that
	  this is public.
	  (gog_axis_is_discrete) : ditto.

	* graph/gog-style.c : add sax exporters
	* graph/gog-error-bar.c : ditto

	* graph/gog-object-xml.h : s/GogPersistDOM/GogPersist
	* graph/gog-object-xml.c : add sax exporters
	  (go_xml_out_add_color) : new.

	* utils/go-font.c : Added some conditional leak debug tools

2004-06-01  Morten Welinder  <terra@gnome.org>

	* gui-utils/go-combo-text.c (go_combo_text_set_text): Plug leak.

2004-05-31  Jody Goldberg <jody@gnome.org>

	* graph/gog-view.c (gog_view_find_child_view) : new

2004-05-31  Jody Goldberg <jody@gnome.org>

	* graph/gog-series.c (gog_series_get_plot) : new.

	* graph/gog-axis.c (gog_axis_get_entry) : rename from axis_get_entry
	  and make public.

2004-05-24  Jody Goldberg <jody@gnome.org>

	* graph/go-data-simple.c (go_data_vector_str_get_str) : enable the
	  translation mechanism

2004-05-26  Jean Brefort  <jean.brefort@ac-dijon.fr>

	* gui-utils/Makefile.am: added go-combo-text.h
	* gui-utils/go-action-combo-text.c: (cb_entry_changed),
	(go_action_combo_create_tool_item),
	(go_action_combo_text_set_entry):
	* gui-utils/go-combo-text.h: was gnumeric-combo-text.h
	* gui-utils/go-combo-text.c: was gnumeric-combo-text.c,
	replaced GtkList by GtkTreeView
	* gui-utils/go-marshalers.list: added BOOLEAN:POINTER

2004-05-23  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-chart.c (gog_chart_view_class_init) : set call_parent_render
	to FALSE.
	* graph/gog-outlined-object.c (gog_outlined_view_render) : call parent
	render method only if call_parent_render is TRUE;
	(gog_outlined_view_class_init) : set call_parent_render to TRUE;
	* graph/gog-outlined-object.h : add a call_parent_render boolean.

2004-05-20  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	http://bugzilla.gnome.org/show_bug.cgi?id=142212
	* graph/plugins/plot-barcol/gog-line.c (gog_line_view_render) : don't
	use '0' if Y value is missing.

2004-05-13  Jody Goldberg <jody@gnome.org>

	* graph/gog-renderer-svg.c (gog_renderer_svg_measure_text) : use
	  logical rather than ink extents.
	(gog_renderer_pixbuf_draw_text) : ditto.
	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_text) : ditto.
	(gog_renderer_pixbuf_draw_text) : ditto.

	* graph/gog-axis.c (gog_axis_view_size_request) : tick labels for
	  discrete axes are below the line not the major tick marks.
	(gog_axis_view_render) : ditto

	* graph/gog-renderer-svg.c (make_layout) : cache the context.
	(gog_renderer_pixbuf_finalize) : unref cached contexts.
	(gog_renderer_pixbuf_class_init) : connect the new finalize.

	* graph/gog-style.c (gog_style_is_different_size) : line width change
	  for axis changes size.

	* graph/gog-axis.c (gog_axis_view_render) : don't allocate size for
	  ticks if the lines are invisible.

	* graph/gog-plot.c (gog_plot_get_axis_bounds) : add some safety.
          This will be called for things like a pie when adding one while
	  something with an still exists.

	* graph/gog-guru.c (cb_attr_tree_selection_change) : be more forgiving
	  about when a user can go back to select a plot.  If there is only
	  one chart, or one plot things are unambiguous.

	* drawing/god-property-table.h : sync with the extensions in the xls
	  importer to handle gradients and richtext.

	* drawing/god-property-table.c (god_property_table_get_markup) : new.
	(god_property_table_set_markup) : ditto.

2004-05-11  Jean Brefort  <jean.brefort@ac-dijon.fr>

	* graph/gog-renderer-pixbuf.c: (make_layout),
	(gog_renderer_pixbuf_update): replaced deprecated pango_ft2_get_context.
	* graph/gog-renderer-svg.c: (make_layout): ditto.
	* graph/gog-style-prefs.glade: replaced GtkOptionMenu by GtkComboBox.
	* graph/gog-style.c: (cb_gradient_style_changed),
	(fill_gradient_init), (cb_image_style_changed), (fill_image_init),
	(cb_fill_type_changed), (fill_init): ditto.

2004-05-10  Jody Goldberg <jody@gnome.org>

	* graph/gog-plot.c (gog_plot_foreach_elem) : pass the index of the
	  iteration, not the absolute for has-legend situations

	* graph/gog-series.c (gog_series_set_property) : update cardinality if
	  has-legend changes.
	(gog_series_editor) : Add a quick 'show in legend' toggle

2004-05-07  Jody Goldberg <jody@gnome.org>

	* graph/gog-theme.c (gog_themes_init) : sync the default theme with
	  XL's notion of things so that we do not theme away auto settings on
	  import.  Specificly Give chart's the background and make graph
	  empty.

	*  */Makefile.am : use goffice.mk for include paths

2004-05-03  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=136363
	* graph/gog-style.c (gog_style_apply_theme) : Do not theme the fonts
	  it over rides the user selection because there is no 'auto' flag.

2004-05-06  Morten Welinder  <terra@gnome.org>

	* utils/go-gradient.c (go_gradient_dir_from_str,
	go_gradient_dir_as_str): Use G_N_ELEMENTS.
	(grad_dir_names[]): Constify.
	(go_gradient_selector): Eliminate elements table.

2004-04-29  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=141405
	* drawing/god-drawing-renderer-gdk.c
	(god_drawing_renderer_gdk_render_shape) : explicitly set alignment for
	  now.  Set layout bounds so that we wrap.

2004-04-19  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=127411
	* graph/gog-chart.c (gog_chart_view_render) : render the style.

2004-04-17  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_xy/gog-xy.c (gog_bubble_plot_class_init) : Do not
	  replicate ms dim types.  That breaks xls import.
	(gog_xy_plot_class_init) : ditto.
	* graph/plugins/plot_barcol/gog-1.5d.c (gog_plot1_5d_class_init) : ditto

2004-04-15  Morten Welinder  <terra@gnome.org>

	* graph/gog-error-bar.c (gog_error_bar_prefs): Look for pixmaps in
	the right directory.

2004-04-08  Jean Brefort  <jean.brefort@ac-dijon.fr>

	* graph/plugins/plot_barcol/gog-1.5d.c: (gog_plot1_5d_update),
	(gog_plot1_5d_axis_get_bounds), (gog_plot1_5d_class_init),
	(gog_series1_5d_set_property), (gog_series1_5d_get_property),
	(gog_series1_5d_populate_editor), (gog_series1_5d_class_init),
	(gog_series1_5d_init): Add error bars support.
	* graph/plugins/plot_barcol/gog-1.5d.h: ditto.
	* graph/plugins/plot_barcol/gog-barcol.c: ditto.
	(gog_barcol_update_stacked_and_percentage),
	(gog_barcol_view_render): ditto.
	* graph/plugins/plot_barcol/gog-line.c: ditto.
	(gog_line_update_stacked_and_percentage), (gog_line_view_render): ditto.
	* graph/plugins/plot_xy/gog-xy.c: (gog_2d_plot_update): use gog_error_bar_is_visible instead
	of detailed tests.

2004-04-05  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=139205
	* gui-utils/go-action-combo-stack.c
	(go_action_combo_stack_create_menu_item) : There's no reason to set a
	  default label not only was it ugly, but it disabled the nice utility
	  code in GtkAction::connect_proxy that would set 'use_underline' for us

2004-03-30  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=138532
	* graph/plugins/plot_radar/gog-radar.c (gog_radar_plot_update) : don't
	  use an invalid series for anything.

2004-03-28  Jody Goldberg <jody@gnome.org>

	* Release 1.3.0

2004-03-26  Christopher James Lahey  <clahey@ximian.com>

	* drawing/Makefile.am (libgoffice_drawing_la_SOURCES): Added
	god-drawing-renderer-gdk.c, god-drawing-renderer-gdk.h,
	god-drawing-view.c, and god-drawing-view.h.

	* drawing/god-drawing-renderer-gdk.c,
	drawing/god-drawing-renderer-gdk.h: New class.  Renders a drawing
	to a gdk drawable.

	* drawing/god-drawing-view.c, god-drawing-view.h: New class.
	Widget to display a drawing.

	* drawing/god-drawing.c, drawing/god-drawing.h: Added a background
	shape.

	* drawing/god-image.c: Call gdk_pixbuf_loader_close.

	* drawing/god-property-table.c, drawing/god-property-table.h:
	Added length type and fixed up flag type.  Added a bunch of types.

	* drawing/god-shape.c: Allow a NULL anchor.

	* libpresent/Makefile.am (libgoffice_libpresent_la_SOURCES): Added
	present-view.c and present-view.h.

	* libpresent/load-ppt.c: Handle the DocumentAtom.

	* libpresent/present-presentation.c,
	libpresent/present-presentation.h: Added extents and notes_extents
	fields.

	* libpresent/present-view.c, libpresent/present-view.h: New class.
	Widget to display a presentation.

	* ms-compat/god-image-ms.c: Added a bunch of EscherOPT fields.
	Handle the patriarch and background shapes more cleanly.

	* test/.cvsignore: Added test-view-ppt.

	* test/Makefile.am (test_view_ppt_SOURCES): Added test-view-ppt.c.

	* test/test-ppt.c: Handle the separate patriarch and background
	shapes.

	* test/test-view-ppt.c: New Class.  Tests present-view.c.

	* utils/go-units.h: Added new unit EMU.  (360000 EMUs per
	centimeter, 914400 EMUs per inch, 12700 EMUs per point.)

2004-03-22  Christopher James Lahey  <clahey@ximian.com>

	* drawing/Makefile.am (libgoffice_drawing_la_SOURCES): Added
	god-image.c, god-image.h, god-image-store.c, and
	god-image-store.h.

	* drawing/god-drawing-group.c, drawing/god-drawing-group.h: Added
	an image store to the drawing group.  Implemented
	god_drawing_group_new.

	* drawing/god-drawing.c, drawing/god-drawing.h: Gave each drawing
	a link to its drawing group.

	* drawing/god-image-store.c, drawing/god-image-store.h: New class.
	An array of images.

	* drawing/god-image.c, drawing/god-image.h: An image or a
	placeholder for an image.  Includes the original data as well as a
	loaded pixbuf.

	* libpresent/load-ppt.c: Actually store the drawings in the slides
	and the drawing groups in the presentations.  Load the pictures
	into the drawing group.

	* libpresent/present-presentation.c,
	libpresent/present-presentation.h: Added a drawing group here.

	* libpresent/present-slide.c, libpresent/present-slide.h: Added a
	drawing here.

	* ms-compat/Makefile.am (libgoffice_ms_compat_la_SOURCES): Added
	god-image-ms.c and god-image-ms.h.

	* ms-compat/god-drawing-ms.c, ms-compat/god-drawing-ms.h: Actually
	do drawing group loads and load up the image store as we go.
	Added a function to handle parsing of images not in the main
	Escher stream.

	* ms-compat/god-image-ms.c, ms-compat/god-image-ms.h: New class.
	Just a god_image with a hash that's used at load time.

	* test/test-ppt.c: Moved dumping the Drawings here since they're
	included in the slides now so it makes more sense to dump them
	here than in load-ppt.c.

2004-03-22  Morten Welinder  <terra@gnome.org>

	* libpresent/load-ppt.c (handle_atom): The usual fix.

2004-03-21  Christopher James Lahey  <clahey@ximian.com>

	* ms-compat/god-drawing-ms.c (handle_atom),
	test/dump-ppt-records.c (handle_atom): Moved some of the debugging
	stuff from god-drawing-ms to dump-ppt-records.

2004-03-20  Christopher James Lahey  <clahey@ximian.com>

	* drawing/god-anchor.c (god_anchor_finalize),
	ms-compat/god-drawing-ms-client-handler.c
	(god_drawing_ms_client_handler_finalize): Chain the finalize
	function.

	* libpresent/Makefile.am (libgoffice_libpresent_la_SOURCES): Added
	present-presentation.c, present-presentation.h, present-slide.c,
	present-slide.h, present-text.c, present-text.h.

	* libpresent/god-drawing-ms-client-handler-ppt.c,
	libpresent/god-drawing-ms-client-handler-ppt.h: Add a PresentSlide
	so that we can parse OutlineTextRefAtom and link it up to the
	outline.

	* libpresent/load-ppt.c, libpresent/load-ppt.h: Changed it to use
	PresentPresentation.  Pass a PresentSlide into the client_handler
	if the PPDrawing is a child of a Slide.

	* libpresent/present-presentation.c,
	libpresent/present-presentation.h, libpresent/present-slide.c,
	libpresent/present-slide.h, libpresent/present-text.c,
	libpresent/present-text.h: New classes.  A presentation, a slide,
	and a piece of text on a slide.

	* test/test-ppt.c: Changed this to use PresentPresentation.

2004-03-19  Christopher James Lahey  <clahey@ximian.com>

	* libpresent/god-drawing-ms-client-handler-ppt.c
	(god_drawing_ms_client_handler_ppt_handle_client_text): Handles
	simple cases with text inside of a shape in Escher.

	* libpresent/load-ppt.c (dump_shape): Print text if there is any.

	* ms-compat/go-ms-parser.c (go_ms_parser_read): Only read the data
	if there's a handler.

	* ms-compat/god-drawing-ms-client-handler.c,
	ms-compat/god-drawing-ms-client-handler.h: Make it so subclasses
	can specify whether they want the super class to read the data
	from the input stream.

	* ms-compat/god-drawing-ms.c (handle_atom): Handle
	EscherClientTextbox by calling the client handler.

2004-03-18  Christopher James Lahey  <clahey@ximian.com>

	* ms-compat/go-ms-parser.c, ms-compat/go-ms-parser.h
	(go_ms_parser_read): Included the record type as a field in the
	record structure.

	* test/.cvsignore, test/Makefile.am: Added dump-ppt-records.

	* test/dump-ppt-records.c: New test app to list all the records in
	a ppt file.

2004-03-18  Christopher James Lahey  <clahey@ximian.com>

	* drawing/god-shape.c, drawing/god-shape.h: Each shape has an
	anchor.  Added functions to get the children of a shape.

	* graph/gog-legend.c (gog_legend_init),
	graph/gog-outlined-object.c (gog_outlined_object_init),
	graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_update),
	graph/gog-renderer-svg.c (make_layout), graph/gog-renderer.c
	(gog_renderer_init): Cast to double before calling
	GO_.._TO_.. unit conversion functions.

	* libpresent/Makefile.am (libgoffice_libpresent_la_SOURCES): Added
	god-drawing-ms-client-handler-ppt.c and
	god-drawing-ms-client-handler-ppt.h.

	* libpresent/god-drawing-ms-client-handler-ppt.c,
	libpresent/god-drawing-ms-client-handler-ppt.h: New class.
	Handles client functions for PPT.

	* libpresent/load-ppt.c: Added #include <gnumeric-config.h>.
	Created a GodDrawingMsClientHandlerPpt for use in parsing.  Added
	code to dump the Escher drawing for testing purposes.

	* ms-compat/Makefile.am (libgoffice_ms_compat_la_SOURCES): Added
	god-drawing-ms-client-handler.c and
	god-drawing-ms-client-handler.h.

	* ms-compat/god-drawing-ms-client-handler.c,
	ms-compat/god-drawing-ms-client-handler.h: New class.  Allows
	Escher parser to let the host application handle Client records.

	* ms-compat/god-drawing-ms.c, ms-compat/god-drawing-ms.h: Use
	GodDrawingMsClientHandler to parse EscherClientAnchor records.

	* test/.cvsignore: Ignore test-ppt.

	* test/test-ppt.c: Fixed include here.  Added #include
	<gnumeric-config.h>

	* utils/go-unit.h: Changed these to use the math in whatever type
	the input is.  If you pass a double, it uses double math.  If you
	pass an integer type, it uses integer math.

2004-03-18  Morten Welinder  <terra@gnome.org>

	* libpresent/*.h: Add header guards.

2004-03-16  Christopher James Lahey  <clahey@ximian.com>

	* Makefile.am (SUBDIRS): Added libpresent and test.

	* drawing/Makefile.am (libgoffice_drawing_la_SOURCES): Added
	god-anchor.c and god-anchor.h.

	* drawing/Makefile.am, drawing/god-drawing-group.c,
	drawing/god-drawing.c, drawing/god-drawing.h,
	drawing/god-property-table.c, drawing/god-shape.c,
	drawing/god-shape.h, drawing/god-text-model.c,
	ms-compat/Makefile.am, ms-compat/go-ms-parser.c,
	ms-compat/god-drawing-ms.c, ms-compat/god-drawing-ms.h:
	Standardized #include lines.

	* utils/go-units.h: Added an underlying unit and added a type for
	storing lengths.  Added point and rect types.

2004-03-16  Morten Welinder  <terra@gnome.org>

	* graph/gog-error-bar-prefs.glade: Don't start visible.

2004-03-16  Morten Welinder  <terra@gnome.org>

	* graph/gog-error-bar.c (gog_error_bar_persist_dom_save): Constify
	and avoid errors.

	* graph/gog-graph.c (gog_graph_validate_chart_layout): Initialize
	graph.

	* drawing/god-property-table.c (god_property_table_finalize): Chain up.
	* drawing/god-shape.c (god_shape_dispose): Chain up.
	* drawing/god-text-model.c (god_text_model_finalize): Chain up.
	* drawing/god-drawing-group.c (god_drawing_group_finalize): Chain
	up.

	* gui-utils/go-action-combo-text.c
	(go_tool_combo_text_finalize): Add dummy chain.

	* graph/plugins/plot_xy/gog-xy.c (gog_2d_plot_update): Initialize
	series.
	(gog_xy_series_finalize, gog_2d_finalize): Skip pointless tests.

2004-03-16  Jean Brefort  <jean.brefort@ac-dijon.fr>

	* Makefile.am: restore data subdir
	* data/Makefile.am: add error bars icons
	*data/bar-*.png: new icons for error bars editor.
	* goffice.c: (libgoffice_init): add GOD_ERROR_BAR_TYPE
	* graph/Makefile.am: add gog-error-bar.*
	* graph/goffice-graph.h: add GogErrorBar struct
	* graph/gog-object-xml.c: (gog_object_write_property):
	set success to FLASE when the object does not exist.
	* graph/gog-series-impl.h: add populate_editor in GogSeriesClass
	* graph/gog-series.c: (gog_series_editor): add pages for error bars.
	* graph/gog-error-bar-prefs.glade:
	* graph/gog-error-bar.[c,h]: new files.
	* graph/plugins/plot_xy/gog-xy.c: (gog_2d_plot_update),
	(gog_xy_plot_class_init), (gog_bubble_plot_class_init),
	(gog_xy_view_render), (gog_xy_series_init),
	(gog_xy_series_finalize), (gog_xy_series_set_property),
	(gog_xy_series_get_property), (gog_xy_series_populate_editor),
	(gog_xy_series_class_init): add support for error bars.

2004-03-15  Morten Welinder  <terra@gnome.org>

	* gui-utils/go-combo-box.c (go_combo_box_destroy): Plug leaks.

2004-03-15  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	http://bugzilla.gnome.org/show_bug.cgi?id=135621
	* graph/gog-axis.c (gog_axis_render) : fix rounding issue.

2004-03-07  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_radar/gog-radar.c (gog_radar_plot_type_name) :
	  remove the starting angle pref.  That is better handled by the axis.

2004-03-13  Jean Brefort  <jean.brefort@ac-dijon.fr>

	* graph/plugins/plot_xy/gog-xy.c: (gog_xy_view_render),
	(gog_xy_series_update), (gog_xy_series_init_style): fixed tests about bubble plots.

2004-03-13  Christopher James Lahey  <clahey@ximian.com>

	* Makefile.am (SUBDIRS): Added drawing and ms-compat.
	(libgoffice_la_LIBADD): Added drawing/libgoffice-drawing.la and
	ms-compat/libgoffice/ms-compat.la.

2004-03-12  Morten Welinder  <terra@gnome.org>

	* graph/gog-series.c (gog_series_element_class_init): Apply the
	usual fix.

2004-03-11  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/plugins/plot_xy/gog-xy.c : draw markers when they are in plot
	area and a margin half marker size wide (partly fix 135621).

2004-03-09  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-object.c : make use_parent_as_proxy a class property
	instead of an instance one.
	* graph/gog-style.c : defines a new GogStyledObject derived
	GogSeriesElement object for storing of single element style overrides.
	(gog_series_class_init) : declares a new GogObjectRole for use of
	GogSeriesElement objects. Set use_parent_as_proxy as true.
	(gog_series_get_elements) : returns the GList of GogSeriesElement
	children of GogSeries.
	(gog_series_get_valid_element_index) : returns the next or previous
	index which is not already used by a GogSeriesElement children of
	GogSeries.
	* graph/gog-style.c : remove unused implementation of
	GogStyleExtension and old gog_series_element_style code.
	(gog_style_editor) : remove code related to GogStyleExtension.
	(gog_style_assing) : idem.
	(gog_style_persist_dom_load) : idem.
	(gog_style_persist_dom_save) : idem.
	* graph/gog-syled-object.c (gog_styled_object_set_property) : use of
	gog_styled_object_set_style.
	(gog_styled_object_set_style)  : new.
	* graph/plugins/plot_pie/gog-pie-series-element-prefs.glade : new.
	* graph/plugins/plot_pie/gog-pie-prefs.c (gog_pie_series_element_pref)
	: new.
	* graph/plugins/plot_pie/gog-pie.c : define a new GogSeriesElement
	derived GogPieSeriesElement object for storage of separation and style
	of single elements.
	(gog_pie_view_render) : handle single element style overrides.
	* graph/plugins/plot_pie/gog-ring-prefs.glade : fix climb_rate, digits
	and adjustment properties of the separation spin_button.

2004-03-03  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=136088
	* graph/gog-object-xml.c (gog_object_write_property) : Add a
	  GOG_PARAM_FORCE_SAVE to save a parameter even if the value is the
	  same as the default.
	* graph/gog-plot.c (gog_plot_class_init) : Use it here to always store
	  the vary_style_by_element property.

2004-02-27  Jody Goldberg <jody@gnome.org>

	* graph/gog-theme.c (map_area_series_solid_default) : don't set colors
	  for image fills.
	(map_area_series_solid_guppi) : ditto.

2004-02-23  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_radar/gog-radar.c : use
	  'default-style-has-markers' rather than 'markers' to be consistent.
	(gog_radar_plot_update) : store the minima and maxima from all the
	  series.
	(gog_radar_plot_axis_get_bounds) : renamed from gog_radar_plot_axis_bounds
	  for consistency.  Set the bounds for a radial axis more generally.
	  We want the outbound to be hard (unscaled) and the inner rounded.

2004-02-22  Jody Goldberg <jody@gnome.org>

	* graph/gog-chart.c (gog_chart_view_size_allocate) : only position th
	  axis, not all the children.

	* graph/plugins/plot_radar/gog-radar.c
	(gog_radar_view_render_series) : Just alloca the max numbr of points
	  aka model::num_elements, and don't free alloca-ed memory.

2004-02-22  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/plugins/plot_radar/gog-radar.c
	(gog_plot_radar_render_series) : use g_new instead of g_alloca for
	allocation of path.

2004-02-21  Jody Goldberg <jody@gnome.org>

	* utils/go-locale.c : Some cut-n-paste for the without_gnome case

	* gui-utils/go-action-combo-text.c : some initial implementation

	* graph/plugins/plot_pie/gog-pie.c (gog_pie_plot_foreach_elem) :
	  handle mismatched numbers of elements and labels.
	(gog_pie_view_render) : take the outline into account when sizing.

	* graph/gog-style.h : add weak notion of centered image.  This needs
	  to be stronger to specify alignement.

	* graph/gog-style.c (gog_style_set_fill_image_filename) : new.
	(cb_image_file_select) : Use it.

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_polygon) :
	supported centered images.

	* graph/gog-renderer-gnome-print.c
	(gog_renderer_gnome_print_draw_polygon) : support centered images.

	* graph/gog-object.c (gog_object_get_children) : add a filter parm.
	(gog_object_get_child_by_role) : new utility routine.

	* graph/gog-legend.c (gog_legend_update) : set up the editor properly
	  for fonts.

	* graph/gog-graph.c (gog_graph_view_size_allocate) : typo.  Only
	  effected manually created plots

	* graph/gog-control-foocanvas.c (gog_control_foocanvas_draw) : make
	  more resistent to out of memory situations.

	* graph/go-data-simple.c : Add some quick and dirty constant vectors
	  for double [], and char const *[].  These could certainly be more
	  robust.

	From Michael Devine <mdevine@cs.stanford.edu> :
	* graph/goffice-graph.h : Add a first pass at 'radar' plots
	* graph/gog-axis.c : ditto.
	* goffice/graph/gog-chart.c : ditto

2004-02-13  Morten Welinder  <terra@gnome.org>

	* graph/gog-style.c (gog_style_extension_editor): Fix declaration
	and check order.

2004-02-13  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-style.[ch] : new GogStyleExtension object.
	(gog_style_assign) : handle extension.
	(gog_style_editor) : shows extension editor if it exists.
	(gog_style_get_extension) : new.
	(gog_style_set_extension) : new.
	* graph/gog-series : add a new style_extension_type field in
	GogSeriesDesc, and use it in gog_series_init_style.

2004-02-09  Morten Welinder  <terra@gnome.org>

	* graph/plugins/plot_xy/gog-bubble-prefs.glade: Do not start
	visible.

2004-02-09  Jean Brefort  <jean.brefort@ac-dijon.fr>

	* graph/plugins/plot_xy/gog-xy.c: (gog_xy_view_render): replaced
	test series.num_dim == 3 by GOG_IS_BUBBLE_PLOT
	* graph/plugins/plot_xy/gog-xy.h: fixed GOG_IS_BUBBLE_PLOT

2004-02-04  Jody Goldberg <jody@gnome.org>

	* gui-utils/go-color-palette.c (cb_menu_custom_activate) : don't show
	  until after the signal in case a handler is marking the dialog as a
	  transient.
	(cb_combo_custom_clicked) : ditto.

2004-02-02  Jean Brefort  <jean.brefort@ac-dijon.fr>

	* graph/plugins/plot_xy/gog-xy.c: fixed several warnings

2004-02-02  Jody Goldberg <jody@gnome.org>

	* gui-utils/go-combo-color.c (cb_preview_clicked) : return the real
	  is_custom state.

	* gui-utils/go-color-palette.c (handle_color_sel) : simplify and just
	  return the color caller can emit the signal, and store the new
	  colour.
	(cb_combo_custom_response) : store results.
	(cb_menu_default_activate) : ditto.
	(cb_menu_color_activate) : ditto.
	(cb_menu_custom_response) : ditto.
	(set_color) : store when something is a custom of default.
	(go_color_palette_get_current_color) : return a flag indicating if
	  this is custom.

2004-02-01  Jody Goldberg <jody@gnome.org>

	* gui-utils/go-color-palette.c (handle_color_sel) : destroy before we
	  emit in case the custom dialog handler played with the wrapper
	  actions (eg desensitized them)

	* gui-utils/go-combo-color.c (cb_proxy_custom_dialog) : pop the combo
	  down when the custom dialog goes up.

2004-01-29  Jody Goldberg <jody@gnome.org>

	* graph/gog-style.c (cb_gradient_type_changed) : store the last
	  selected type.
	(populate_gradient_combo) : default to that when changing fill type to
	  gradient.

	* graph/gog-style-prefs.glade : fix mnemonics to not clash.

	* gui-utils/go-action-combo-stack.c
	(go_action_combo_stack_create_tool_item) : patch leak

	* utils/go-marker.c (go_marker_selector) :
	  go_combo_pixmaps_add_element absorbs a ref to the pixbuf, don't lose
	  control of it.  Handle shape=none nicely too.

2004-01-29  Morten Welinder  <terra@gnome.org>

	* graph/plugins/plot_xy/gog-xy.c (gog_xy_view_render): Attempt
	fix.

2004-01-28  Andreas J. Guelzow <aguelzow@taliesin.ca>

	* graph/plugins/plot_xy/gog-xy.c: fix 2 syntax errors to make it
	  compile

2004-01-28  Jean Brefort  <jean.brefort@ac-dijon.fr>

	* graph/plugins/plot_xy/Makefile.am:
	* graph/plugins/plot_xy/gog-bubble-prefs.glade:
	* graph/plugins/plot_xy/gog-bubble-prefs.c:
	* graph/plugins/plot_xy/gog-xy.c:
	* graph/plugins/plot_xy/gog-xy.h:
		added support for bubble plots options

2004-01-24  Jon K Hellan  <hellan@acm.org>

	* gui-utils/go-dock.c (go_dock_class_init): Initialize parent_class.

	* gui-utils/go-dock-item.c (go_dock_item_class_init): Ditto.

	* gui-utils/go-dock-band.c (go_dock_band_class_init): Ditto.

2004-01-24  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_xy/gog-xy.c : suppress warning

	* gui-utils/go-action-combo-text.c (go_action_combo_text_set_entry) :
	  implement.

	* gui-utils/go-action-combo-stack.c
	(go_action_combo_stack_create_tool_item) : set the relief here too.
	  We're close to having a GOActionCombo base for this.

2004-01-23  Jody Goldberg <jody@gnome.org>

	* gui-utils/go-action-combo-stack.c : tweak to make it sorta work.
	  I do not like the kludgy approach required by our not supporting
	  arguments to GtkAction::activate

2004-01-22  Jody Goldberg <jody@gnome.org>

	* gui-utils/go-action-combo-pixmaps.c : rewrite.

2004-01-17  Jody Goldberg <jody@gnome.org>

	* gui-utils/go-action-combo-color.c (cb_color_changed) : Use the
	  supplied color directly.
	(go_action_combo_color_create_menu_item) : connect up the activate signal.

2004-01-22 Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>
	* graph/gog-style.c (gog_style_editor) : edit a GogStyle, not
	GogStyledObject.
	(gog_styled_object_editor) : new.
	* graph/gog-axis.c : use gog_styled_object_editor instead of
	gog_style_editor.
	* graph/gog-label.c : ditto.
	* graph/gog-series.c : ditto.
	* graph/gog-styled-object.c : ditto. rename gog_styled_object_editor
	to styled_object_editor.

2004-01-17 Jean Brefort <jean.brefort@ac-dijon.fr>
	* graph/plugins/plot_xy/* : add initial support for bubble plots

2004-01-16  Jody Goldberg <jody@gnome.org>

	* gui-utils/go-action-combo-stack.c (go_action_combo_stack_push) :
	  operate on the combo, not the toolitem wrapper.
	(go_action_combo_stack_pop) : ditto.
	(go_action_combo_stack_truncate) : ditto.

2004-01-16  Jon K Hellan  <hellan@acm.org>

	* gui-utils/go-action-combo-stack.c (go_action_combo_stack_push)
	(go_action_combo_stack_pop): Fix typos.

2004-01-14  Jody Goldberg <jody@gnome.org>

	* gui-utils/go-action-combo-color.c
	(go_action_combo_color_create_menu_item) : some initial work on
	  producing a menu.  Its not bad, but the combo needs alot of cleanup
	  before it can migrate.

2003-12-23  Jody Goldberg <jody@gnome.org>

	* Release 1.2.3

2003-12-22  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (gog_axis_editor) : set the current format.

2003-12-19  Jody Goldberg <jody@gnome.org>

	* utils/go-format.c (go_format_eq) : new.
	(go_format_as_XL) : new
	(go_format_new_from_XL) : new

	* graph/gog-axis.c (gog_axis_editor) : add a format selection page for
	  non-discrete axis.

2003-12-18  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=129445
	* graph/gog-style.c (gog_style_assign) : transfer the
	  needs_obj_defaults field.
	(gog_style_init) : init needs_obj_defaults field to TRUE.
	(gog_style_persist_dom_load) : persisted styles do not need object
	  defaults.
	* graph/plugins/plot_barcol/gog-line.c (gog_line_series_init_style) :
	  respect the needs_obj_defaults.
	* graph/plugins/plot_xy/gog-xy.c (gog_xy_series_init_style) : ditto.

	* graph/gog-axis.c (gog_axis_get_marker) : Use go_format to handle the
	  markers.

	* utils/go-format.c : A quick cheesy wrapper to GnmFormat in
	  preparation for sucking it down here.

2003-12-14  Jody Goldberg <jody@gnome.org>

	* utils/go-pattern.c (go_pattern_selector) : fix leak.
	* utils/go-gradient.c (go_gradient_selector) : fix leak.
	* utils/go-marker.c (go_marker_selector) : fix leak.

2003-12-14  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=128874
	* graph/gog-axis.c (gog_axis_finalize) : unref labels.
	(gog_axis_update) : ref them here.

2003-11-26  Jody Goldberg <jody@gnome.org>

	* Release 1.2.2

2003-11-18  Jody Goldberg <jody@gnome.org>

	* graph/gog-styled-object.c (gog_styled_object_set_property) : dup the
	  style to avoid themes stomping on shared styles.  refcounting is not
	  an ideal semantic for GogStyle.

2003-11-17  Morten Welinder  <terra@gnome.org>

	* graph/gog-object-xml.c (gog_object_write_property): Plug leak.

2003-11-15  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (gog_axis_view_render) : support minor ticks and
	  tune placement to work around anti-aliasing blur.

	* graph/gog-grid.c (gog_grid_view_render) : tune the cheat to work
	  around anti-aliasing blur.

2003-11-14  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=126775
	* graph/gog-axis.c (gog_axis_update) : be smarter when min == max.

2003-11-13  Jody Goldberg <jody@gnome.org>

	* graph/gog-guru.c (cb_obj_children_reordered) : implement.
	(cb_reordered_find) : new.

	* graph/gog-object.c (gog_object_can_reorder) : implement.

2003-11-13  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_barcol/gog-barcol.c (gog_barcol_view_render) :
	  avoid the potential for trouble for a series with only zeros.

2003-11-12  Jody Goldberg <jody@gnome.org>

	* graph/gog-guru.c (graph_guru_init_format_page) : store the
	  precedence widgets.
	(cb_attr_tree_selection_change) : adjust sensitivity of the precedence
	  elements.

2003-11-11  Jody Goldberg <jody@gnome.org>

	* graph/gog-style.c (marker_init) : fix leak.

	* graph/gog-guru.c (cb_attr_tree_selection_change) : work around a
	  probable bug in GtkViewport by adding an extra GtkFrame inside the
	  viewport and using that.

2003-11-11  Morten Welinder  <terra@gnome.org>

	* graph/plugins/plot_xy/gog-xy.c (gog_xy_view_render): Use finite
	consistently.

2003-11-11  Jody Goldberg <jody@gnome.org>

	* utils/go-pattern.c (go_pattern_selector) : add auto support.

	* utils/go-marker.c : move the default handling where it belongs.

	* utils/go-color.c (go_color_to_gdk) : new.

	* graph/plugins/plot_barcol/plot-types.xml.in : include non-marker
	  variants.
	* graph/plugins/plot_xy/plot-types.xml.in : include non-marker, and
	 barcol non-line variants.

	* graph/gog-theme.c : respect the auto flags here.

	* graph/gog-styled-object.c (gog_styled_object_apply_theme) : new.
	(gog_styled_object_set_property) : Use it here.
	(gog_styled_object_parent_changed) : and here.
	(gog_styled_object_editor) : provide a default impl.
	(gog_styled_object_get_auto_style) : new.

	* graph/gog-style.c :
	    - Add support for auto* flags for the marker here, not GoMarker.
	    - Support restoring auto for shapes and colours

	* graph/gog-series.c (gog_series_init_style) : new.  Gives us finer
	  control of what is themable.

	* graph/gog-guru.c : Simplify our lives and only have 1 prop sheet at
	  any given time.  No need to worry about updating when something
	  changes externally (styles or dimensions)

	* graph/gog-chart.c : Use the default editor and init_style
	* graph/gog-graph.c : ditto

	* graph/gog-axis.c : convert from ::interesting_fields -> ::init_style
	* graph/gog-grid.c : ditto.
	* graph/gog-label.c : ditto.
	* graph/gog-legend.c : ditto.

2003-11-05  Jody Goldberg <jody@gnome.org>

	* utils/go-marker.h : I don't want GtkWidget in these headers

2003-11-04  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=125986
	* graph/gog-style.c (gog_style_merge) : A cheesy solution to the
	  current lack of clarity on the theming.  We only have a
	  colour.is_auto flag, so only assign the colour.  This means that
	  lines and outlines can only theme the colour, not the width or the
	  pattern.  Which seems reasonably until we have a plan for defining
	  'autoness' for those attributes.

2003-11-03  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=126056
	* graph/plugins/plot_xy/gog-xy.c (gog_xy_view_render) : differentiate
	  between missing and bad strings.  X axis strings are indicies, Y
	  axis strings are 0.

2003-11-02  Jody Goldberg <jody@gnome.org>

	* graph/gog-style.c (gog_style_editor) : Add a weakref so that we can
	  disconnect the signal if the object is destroyed.

	* graph/gog-axis.c (make_dim_editor) : Use closures to avoid having a
	  callback after a widget has been destroyed.

2003-11-02  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

  	http://bugzilla.gnome.org/show_bug.cgi?id=125419
	* graph/gog-renderer.[ch] (gog_renderer_start_clipping),
	(gog_renderer_stop_clipping) : new. Implement clipping of drawing.
  	Only one level of clipping is allowed.
	* graph/gog-renderer[svg, pixbuf, gnome-print]
	(gog_renderer_.._start_clipping),
	(gog_renderer_.._stop_clipping) : new.
	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_path),
	(gog_renderer_pixbuf_draw_polygon),
	(gog_renderer_pixbuf_draw_text) : handle offset for drawing when
	clipping.
	* graph/gog-rendere-gnome-print.c (make_rectangle_path) : new;
	* graph/gog-chart.c (gog_chart_render) : new. Use the same clipping
 	region for all plots.

2003-11-01 Jean Brefort <jean.brefort@ac-dijon.fr>

	* graph/gog-renderer-svg.c: added scale parameter to gog_graph_export_to_svg.
	* graph/gog-renderer-svg.c: implement gog_renderer_svg_measure_text and
	gog_renderer_svg_draw_text.

2003-11-01  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_barcol/gog-barcol.c
	(gog_barcol_plot_class_init) : set the default to match the real
	  default so that things persist properly.

2003-10-30  Jody Goldberg <jody@gnome.org>

	* graph/gog-plot.c (gog_plot_get_cardinality) : Set the index even if
	  the series is invald.  This makes like easier when adding a series.

	* graph/gog-style.c (gog_object_set_style) : block style change
	  signals.
	(gog_style_pref_state_free) : disconnect the style change handler.
	(gog_style_editor) : monitor style changed signals.
	(cb_style_changed) : new.

	* graph/gog-series.c (gog_series_set_index) : signal when the style
	  changes.

	* graph/gog-object.c (gog_object_get_editor) : force an update before
	  creating an editor to avoid flicker later.
	* graph/gog-graph.c (gog_graph_force_update) : new.

2003-10-29  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (cb_axis_bound_changed) : update all the auto
	  bounds when anything changes.

2003-10-28  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_xy/gog-xy.c (gog_xy_view_render) : be lazy and
	  do the clipping in the renderer rather than here.  It will make
	  life easier when we add splines.

2003-10-27  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=125619
	* graph/gog-axis.c (gog_axis_editor) : init the high/low button

	* graph/plugins/plot_barcol/gog-line.c (gog_line_view_render) : clip
	  markers and lines.

	* graph/gog-renderer-pixbuf.c (clip_path) : new.
	(gog_renderer_pixbuf_draw_path) : support the new clipping argument.
	(gog_renderer_pixbuf_draw_polygon) : ditto.

2003-10-23  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=125045
	* graph/gog-axis.c (gog_axis_view_render) : clip correctly and space
	  the ticks based on the actual tick values, not just their index.
	(gog_axis_num_markers) : return a step fraction too.

2003-10-21  Jody Goldberg <jody@gnome.org>

	* graph/gog-renderer.c (gog_renderer_init) : init zoom to 1.
	* graph/gog-renderer-gnome-print.c (gog_graph_print_to_gnome_print) :
	  ditto.

2003-10-14  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-axis.c (axis_get_entry) : Add a user_defined parameter in
	order to know if the returned value is defined by user or computed.
	(gog_axis_update) : Use user defined bound for the tick spacing
	calculation.
	(gog_axis_num_markers) : round to nearest value instead of the
	automatic double to int cast that removes the fractionnal part.

2003-10-18  Jody Goldberg <jody@gnome.org>

	* graph/gog-chart-impl.h : Inherit from GogOutlinedObject and use the
	  padding there.
	* graph/gog-graph-impl.h : ditto.
	* graph/gog-label.c : ditto.
	* graph/gog-legend.c : ditto.

	* graph/gog-chart.c (gog_chart_get_property) : padding is in outlined
	  object now.
	(gog_chart_set_property) : delete.
	(gog_chart_class_init) : delete set_prop method and padding_pts prop
	(gog_chart_init) : delete padding_pts.
	(gog_chart_view_size_allocate) : use outlined view.
	(gog_chart_view_render) : ditto.
	(gog_chart_view_class_init) : just use render in outlined view.

	* graph/gog-graph.c (gog_graph_set_property) : remove PADDING
	(gog_graph_get_property) : ditto.
	(gog_graph_class_init) : ditto.
	(gog_graph_init) : we don't inherit directly from StyledObject anymore
	(gog_graph_view_size_allocate) : use OutlinedView.
	(gog_graph_view_render) : ditto.
	(gog_graph_view_class_init) : ditto.

	* graph/Makefile.am : Add gog-outlined-object.[ch]

2003-10-13  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=122546
	* graph/plugins/plot_barcol/gog-1.5d.c (gog_plot1_5d_update) : Update
	  the index axis if our labels change.  This problem does not apply to
	  XY plots because their x bounds will change when a dim is set or
	  cleared.

2003-10-08  Jody Goldberg <jody@gnome.org>

	* Release 1.2.1

2003-10-06 Jean Brefort <jean.brefort@ac-dijon.fr>

 	* graph/gog-renderer-svg.c (gog_renderer_svg_draw_polygon) : use go_pattern_is_solid.
 	(gog_renderer_svg_draw_marker) : implemented.

2003-10-08  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (role_label_post_add) : put y axis labels to the
	  left or right not at the top.
	(gog_axis_class_init) : enable y axis labels

2003-10-07  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (gog_axis_dataset_dims) : enable setting the cross
	  point.

2003-10-07  Morten Welinder  <terra@gnome.org>

	* graph/gog-axis.c (gog_axis_update): Fake floor, not fake trunc.

2003-10-06  Morten Welinder  <terra@gnome.org>

	* graph/gog-plot.c (gog_plot_get_axis_bounds): Return NULL, not
	FALSE.
	* graph/plugins/plot_xy/gog-xy.c (gog_xy_view_point): Ditto.

2003-10-05  Jon K Hellan  <hellan@acm.org>

	* utils/go-pattern.c (go_pattern_selector): gtk_combo_box renamed
	to gnm_combo_box.

	* utils/go-marker.c (go_marker_selector): Ditto.

	* utils/go-gradient.c (go_gradient_selector): Ditto.

	* graph/gog-style.c (create_color_combo): Ditto.

2003-10-05  J.H.M. Dassen (Ray) <jdassen@debian.org>

	* graph/gog-guru.c: #include gtkliststore.h to fix build.

2003-09-30  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_barcol/gog-line.c (gog_line_view_render) : we
	  already winnowed out the invalid series, no need to flag them.
	* graph/plugins/plot_barcol/gog-barcol.c (gog_barcol_view_render) :
	  ditto.

2003-09-28  Jody Goldberg <jody@gnome.org>

	* graph/gog-style.c (gog_style_is_marker_visible) : Use the
	  interesting field too.
	(gog_style_assign) : Assign the interesting flags too.

	* graph/gog-legend.c (cb_size_elements) : see if anything has a marker
	(gog_legend_view_size_request) : if any of the elements has a marker
	  rather than a swatch we need 3x swatch width.
	(cb_render_elements) : If entry has a marker draw the line and marker
	(gog_legend_view_render) : Prep for drawing markers if any exist.

2003-09-29  Morten Welinder  <terra@gnome.org>

	* graph/plugins/plot_barcol/gog-line.c (gog_line_view_render):
	Survive getting a NULL vals, even though that might be a symptom
	of something else.

	* graph/gog-object.c (gog_object_dup): Plug leak.

	* graph/gog-object-xml.c (gog_object_new_from_xml): Plug leaks.

2003-09-23  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.h : delete unused enum GogAxisTickLevel.
	  Publicize the data elements.
	(gog_axis_update) : Manually handle the epsilon shifts so that we can
	  ignore sign.

2003-09-22  Jody Goldberg <jody@gnome.org>

	* graph/gog-view.c (cb_remove_child) : doh!

2003-09-21  Jody Goldberg <jody@gnome.org>

	* graph/gog-renderer-pixbuf.c (make_layout) : scale the font size
	  manually to work around.
	    http://bugzilla.gnome.org/show_bug.cgi?id=121543

2003-09-15 Jean Brefort <jean.brefort@ac-dijon.fr>

	* graph/gog-renderer-svg.c : added gradient support.

	* utils/go-gradient.c (go_gradient_setup): changed vector for oblique gradients.

2003-09-20  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_barcol/gog-1.5d.c (gog_plot1_5d_axis_bounds) :
	  only valid series can contribute to an index dimension.
	* graph/plugins/plot_xy/gog-xy.c (gog_xy_plot_axis_bounds) : ditto.

	* graph/gog-renderer-gnome-print.c (get_font) : respect zoom.

	* graph/gog-style.c (font_init) : set the font _before_ connecting the
	  signal. doh!

2003-09-16  Jody Goldberg <jody@gnome.org>

	* graph/gog-theme.c (gog_themes_init) : change the default theme for
	Adrian.

2003-09-16  Morten Welinder  <terra@gnome.org>

	* graph/gog-renderer-pixbuf.c (make_layout): Change to way font
	description is set so that it will work both before and after the
	fix to http://bugzilla.gnome.org/show_bug.cgi?id=121543.

2003-09-15  Jody Goldberg <jody@gnome.org>

	* graph/gog-label.c (gog_label_view_size_request) : empty labels are
	  of size 0,0 not 1,1

	* graph/gog-view.c (gog_view_size_allocate_real) : don't pad if the
	  child is 0 sized.
	(gog_view_size_child_request) : ditto.

	* graph/gog-axis.c (gog_axis_num_markers) : we can't use the max_val
	  as a fallback if there is no data defining it.

2003-09-15  Morten Welinder  <terra@gnome.org>

	* utils/go-marker.c (go_marker_selector): Terminate the array as
	it is shorter than we tell the pixbuf combo.

2003-09-15  Jody Goldberg <jody@gnome.org>

	* Release 1.2.0

2003-09-15  Jody Goldberg <jody@gnome.org>

	* graph/gog-renderer.c (gog_renderer_measure_text) : pango does not
	  like measuring ""
	(gog_renderer_draw_text) : ditto.

2003-09-15  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (gog_axis_view_render) : clipping the label text in
	  the iterating dimension is a bad idea, we want to clip whole labels,
	  not the individual lines.

	* graph/plugins/plot_pie/gog-pie.c (gog_pie_view_render) : only draw
	  the first series for a pie.  Things can sneak in.

	* utils/go-font.c (go_font_init) : make default font smaller

	* graph/gog-object.c (gog_object_get_pos) : new.
	(gog_object_set_pos) : new.

2003-09-14  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (gog_axis_editor) : We ignore the bounds for a
	  discrete axis.
	(gog_axis_update) : store information pertaining to axes with discrete
	  enumerations.
	(gog_axis_editor) : discrete enumerations do not allow for manual boun
	  changes.
	(gog_axis_num_markers) : handle discrete enumerations.
	(gog_axis_get_marker) : ditto.
	(gog_axis_view_size_request) : ditto.
	(gog_axis_view_render) : rework to support in and out ticks.
	  Support discrete enumerations.
	(gog_axis_is_discrete) : new.
	(gog_axis_get_ticks) : new.

	* graph/gog-renderer.c (gog_renderer_draw_text) : revamp the interface
	  yet again to make parameters clearer.
	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_text) : adjsut
	  to the new interface and imrpve clipping support.
	* graph/gog-renderer-gnome-print.c (gog_renderer_gnome_print_draw_text) :
	  adjust to the new interface, add support for anchors.

2003-09-14  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* gog-style-prefs.glade: `colour' should be `color'

2003-09-14  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/gog-renderer-gnome-print.c: replace calls of
	  gnome_font_find_closest_from_weight_slant with
	  gnm_font_find_closest_from_weight_slant

2003-09-14  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (axis_get_entry) : new utility.
	(gog_axis_get_bounds) : use it here.
	(gog_axis_num_markers) : here.
	(gog_axis_get_marker) : and here.
	(role_label_can_add) : new.
	(gog_axis_class_init) : use it here to disable labels on the Y axis
	  until we can get a smarter layout engine.

2003-09-14  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (gog_axis_update) : yet another layer of heuristic
	  to handle -1 .. 1 better.
	(gog_axis_get_marker) : force to 0.

	* graph/plugins/plot_barcol/gog-barcol.c (gog_barcol_view_render) :
	  Get the bounds from the value axis. (fixes bar plots)

2003-09-13  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (cb_enable_dim) : get smarter and handle
	  transitions to from auto state.

2003-09-13  Jon K Hellan  <hellan@acm.org>

	* graph/gog-style.c (cb_fg_color_changed, cb_bg_color_changed,
	cb_fill_gradient_start_color, cb_fill_gradient_end_color): Update
	is_auto and pattern_fore_auto, pattern_back_auto,
	gradient_start_auto, gradient_end_auto flags.
	(gog_style_merge): Only merge color attributes for fill.
	(gog_style_init): Initialize attern_fore_auto, pattern_back_auto,
	gradient_start_auto, gradient_end_auto flags

	* graph/gog-style.h: Add non-persistent auto flags for each color
	element in fill.

2003-09-13  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (role_label_post_add) : be smarter about
	  positioning.

	* graph/gog-view.c (gog_view_size_child_request) : hard code some
	  inter-child padding.  We can be more elegant in the future.
	(gog_view_size_allocate_real) : ditto.

	* graph/gog-axis.c (gog_axis_view_size_request) : request space for
	  children too.

2003-09-13  Jon K Hellan  <hellan@acm.org>

	* graph/gog-legend.c (cb_render_elements): Allow for floating
	point inaccuracies when deciding if there is room for an element.

2003-09-13  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_xy/gog-xy.c (gog_xy_view_render) : support index
	  axis for X.
	(gog_xy_series_update) : ditto.

	* graph/gog-axis.c (gog_axis_editor) : we want font too.
	  Align the Auto header nicely.
	(make_dim_editor) : some initial work to give the Auto button's some
	  feedback.

	* graph/gog-style.c (cb_line_color_changed) : set auto_color.
	(cb_outline_color_changed) : ditto.

2003-09-13  Jody Goldberg <jody@gnome.org>

	* graph/gog-chart.c (gog_chart_axis_set_assign) : clear_parent clears
	  ::grid, store the pointer for a moment so that we can free it.

	* utils/go-color.c (color_combo_get_gocolor) : cheap hack to support
	  alpha channel despite interface limitations.  It only works for
	  custom colours, but thats the most important case.
	(color_combo_set_gocolor) : init the custom picker too to ensure that
	  alpha gets set correctly.

	* utils/go-gradient.c (go_gradient_selector) : no need to free images,
	  have the combo absorb them.
	* utils/go-pattern.c (go_pattern_selector) : ditto.
	  fix cut-n-paste-o the first
	  'Thin Diagonal Crosshatch' was actually
	  'Thin Diagonal Stripe'

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_text) : leak.

2003-09-12  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (gog_axis_set_property) : fix typos.
	(gog_axis_view_render) : actually support some of the tick options.
	(gog_axis_editor) : hook up some of the controls.

	* graph/gog-chart.c (gog_chart_axis_set_assign) : add or remove a grid
	  depending on the axis set.

2003-09-11  Jody Goldberg <jody@gnome.org>

	* graph/gog-object-xml.c (gog_object_write_property) : don't bother
	  saving parameters with default values.

	* graph/plugins/plot_barcol/gog-line.c (gog_line_view_render) :
	  respect axis bounds.

	* graph/gog-axis.c (gog_axis_view_render) : invert alignment of text
	  and support tick marks.
	(gog_axis_view_size_request) : Make axis labels optional, and allocate
	  size for major and minor ticks.
	(gog_axis_class_init) : Lots of new options.
	(gog_axis_get_property) : ditto, not all of them are supported yet.
	(gog_axis_set_property) : ditto, not all of them are supported yet.
	(gog_axis_update) : Add pull to 0, and step doubling heuristics.

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_text) : Clip
	  text trying to draw out of the physical bounds.

	* graph/plugins/plot_barcol/gog-1.5d.c (gog_plot1_5d_axis_bounds) :
	  fix cut-n-paste-o.

2003-09-10  Jody Goldberg <jody@gnome.org>

	* Release 1.1.90

2003-09-09  Jody Goldberg <jody@gnome.org>

	* graph/gog-styled-object.c (gog_styled_object_parent_changed) : set
	  the interesting fields when all the parents are in place.

	* graph/gog-renderer.h : Add an anchor parm to draw_text and clean up
	  the semantics of size.

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_text) : handle
	  the various anchor types.

	* graph/gog-axis.c : Some initial work at generating bounds, and
	  drawing axis values.

	* graph/gog-view.c (gog_view_render) : filter objects with invalid
	  size.  eg a user makes the plot too small to be useful.

2003-09-09  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_barcol/gog-1.5d.c (gog_plot1_5d_update) :
	  percentage charts logicly limit -1 .. 1

	* graph/plugins/plot_xy/gog-xy.c (gog_xy_plot_update) : no logical min
	  or max.

2003-09-08  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_barcol/plot-types.xml.in : fix icons to match
	  reality.  All lines currently have markers by default.

	* graph/plugins/plot_barcol/gog-line.c
	(gog_line_update_stacked_and_percentage) : Generate the correct bounds.

	* graph/plugins/plot_barcol/gog-barcol.c
	(gog_barcol_update_stacked_and_percentage) : Why special case 0..1
	(gog_barcol_view_render) : handle bound clipping.

2003-09-08  Jon K Hellan  <hellan@acm.org>

	* graph/gog-renderer-svg.c (gog_renderer_svg_draw_marker): New
	dummy implementation.
	(gog_renderer_svg_class_init): Use it.

2003-09-08  Jody Goldberg <jody@gnome.org>

	* graph/gog-style.c (cb_fill_gradient_end_color) : throw the update
	  into a timer to decrease flicker.
	  Works around a bug in older libarts.
	(gog_style_set_fill_brightness) : new.
	(cb_gradient_brightness_value_changed) : actually hide the brightness.
	(cb_gradient_style_changed) : ditto.
	(fill_gradient_init) : ditto.

	* graph/gog-renderer-svg.c (gog_graph_export_to_svg) : convert
	  interface to use libgsf.

2003-09-07 Jean Brefort <jean.brefort@ac-dijon.fr>

	* utils/go-gradient.c (go_gradient_setup): added a small value to gradient->c for
	  vertical gradients to avoid a line whith the bad color at the top of the area.
	* graph/gog-style.c: handle brightness in gradients.
	* graph/gog-renderer-svg.[c,h]: new files to handle svg export (not
	fully implemented).
	* graph/Makefile.am: added gog-renderer-svg.[c,h].

2003-09-07  Jody Goldberg <jody@gnome.org>

	* utils/go-marker.c (go_marker_selector) : Add marker names.

2003-09-07  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* utils/go-marker.c : removed unused property and signal stuff.
	(go_marker_selector) : new.
	* graph/gog-style.c (populate_marker_combo) : new.
	(marker_init) : use the marker combo.
	* graph/gog-style-prefs.glade : removed marker option menu.
	* graph/gog-renderer-gnome-print.c
	(gog_renderer_gnome_print_draw_marker): returns when one of the path
	is NULL (fix a crash).

2003-09-07  Jody Goldberg <jody@gnome.org>

	* graph/gog-styled-object.c (gog_styled_object_set_property) : set the
	  interesting field for a style.
	(gog_styled_object_init) : ditto.
	(gog_styled_object_interesting_fields) : default to outline & fill.

	* graph/gog-style.c (gog_style_persist_dom_save) : only save
	  interesting fields.

	* graph/gog-series.c (gog_series_interesting_fields) : new.
	(gog_series_class_init) : hook it up.
	* graph/gog-legend.c (gog_legend_interesting_fields) : new.
	(gog_legend_class_init) : hook it up.
	* graph/gog-label.c (gog_label_interesting_fields) : new.
	(gog_label_class_init) : hook it up.
	* graph/gog-axis.c (gog_axis_interesting_fields) : new.
	(gog_axis_class_init) : hook it up.

2003-09-07  Jody Goldberg <jody@gnome.org>

	* graph/gog-style.c (gog_style_line_load) : support auto_color flags.
	(gog_style_line_save) : ditto.
	(gog_style_fill_load) : handle is_auto.
	(gog_style_fill_save) : ditto.

	* graph/gog-legend.c (gog_legend_view_render) : tune the padding.
	(cb_render_elements) : ditto.

2003-09-06  Jon K Hellan  <hellan@acm.org>

	* graph/gog-theme.c (gog_theme_init_style): Merge styles instead
	of assigning style from theme.
	(map_area_series_solid_default): Only change elements which hold
	auto values.

	* utils/go-marker.[ch] (go_marker_shape_from_str,
	go_marker_shape_as_str): Move from gog-style.c and rename.
	(go_marker_is_auto): New. Tests if marker is different from
	default. Should really test if user has chosen the marker
	explicitly.

	* graph/gog-style.c (gog_style_merge): Implement.
	(str_as_marker_shape, marker_shape_as_str):Move to utils/go-marker
	and rename.
	(gog_style_marker_load, gog_style_marker_save): Use renamed
	version of above functions.
	(gog_style_persist_dom_load): Mark style elements read from file
	as non-auto (for now).

2003-09-06  Jon K Hellan  <hellan@acm.org>

	* utils/go-pattern.[ch] (go_pattern_as_str, go_pattern_as_str): Move
	from gog-style.c and rename.

	* utils/go-gradient.[ch] (go_gradient_dir_from_str)
	(go_gradient_dir_as_str): Ditto.

	* graph/gog-style.c (str_as_pattern, pattern_as_str,
	str_as_grad_dir, grad_dir_as_str): Move to utils/go-pattern /
	go-gradient and rename.
	(gog_style_gradient_load, gog_style_gradient_save,
	gog_style_fill_load, gog_style_fill_save): Use renamed version of
	above functions.

2003-09-05  Jon K Hellan  <hellan@acm.org>

	* utils/go-color.[ch] (go_color_from_str, go_color_as_str):
	New. Convert color to/from string.

	* graph/gog-style.c (str_as_fill_style, fill_style_as_str):
	New. Convert fill style to/from string.
	(str_as_pattern, pattern_as_str): New. Convert pattern to/from
	string.
	(str_as_grad_dir, grad_dir_as_str): New. Convert gradient
	direction to/from string.
	(str_as_marker_shape, marker_shape_as_str): New. Convert marker
	shape to/from string.
	(gog_style_line_load, gog_style_line_save): New. Load/save a
	line/outline style.
	(gog_style_gradient_load, gog_style_gradient_save): New. Load/save
	a gradient.
	(gog_style_fill_load, gog_style_fill_save): New. Load/save a fill.
	(gog_style_marker_load, gog_style_marker_save): New. Load/save a
	marker.
	(gog_style_font_load, gog_style_font_save): New. Load/save a font.
	(gog_style_persist_dom_load, gog_style_persist_dom_save):
	Implement.

	* graph/gog-object-xml.c (gog_object_set_arg_full) : Don't expect
	GObject type name as entity content.
	(gog_object_write_property): Don't save GObject type name as
	entity content.

2003-09-04  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_barcol/gog-1.5d.c (gog_plot1_5d_update) : don't
	  force 0.  That will be handled at the axis level.

	* graph/gog-style.c : move the marker editor back into the main style
	  editor rather than being distinct.

2003-09-03  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* utils/go-marker.[ch] : new.
	* graph/gog-pixbuf-renderer.c : add draw_marker method.
	* graph/gog-gnome-print-renderer.c : idem.
	* graph/gog-renderer.c : idem.
	* graph/gog-style-prefs.glade : update marker editor
	* graph/gog-style.c (cb_marker_changed) : new.
	(marker_init) : use editor in gog-marker.c.
	(gog_style_pref_state_free) : free marker pointer.
	(gog_style_assign) : handle marker pointer.
	(gog_style_finalize) : idem.
	(gog_style_init) : init marker pointer.
	* graph/gog-theme.c (map_area_series_solid_default)
	(map_area_series_solid_guppi) : initialize marker properties.
	* graph/plugins/plot_barcol/gog-line.c
	(gog_line_view_render) : draw markers.

2003-09-03  Jody Goldberg <jody@gnome.org>

	* graph/gog-legend.c (cb_render_elements) : clip before things
	  overflow.

2003-09-03  Jody Goldberg <jody@gnome.org>

	* graph/gog-style.h : add GogStyle::font::color
	* graph/gog-style.c (gog_style_init) : init font::color

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_text) :
	  composite manually cause libart was dog slow when using the approach
	  in librsvg.

2003-09-03  Jody Goldberg <jody@gnome.org>

	* graph/gog-label.c (gog_label_view_size_request) : take outline
	  into account.

	* graph/gog-legend.c (gog_legend_view_render) : don't over draw space
	  allocated to children, and actually measure the text.
	(gog_legend_editor) : add.

	* graph/gog-view.c (gog_view_size_child_request) : new utility to
	  build up a size requestfor the children around the request for the
	  parent.

	* graph/plugins/plot_pie/gog-pie.c (gog_pie_plot_foreach_elem) :
	  handle case with no series.

2003-09-03  Morten Welinder  <terra@gnome.org>

	* graph/gog-object-xml.c (gog_object_set_arg_full): Plug leak.

2003-09-01  Jody Goldberg <jody@gnome.org>

	* graph/gog-renderer-pixbuf.c (make_layout) : kludge a patch for font
	  scaling.

2003-09-01  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_xy/gog-xy.c : An initial skeleton, because I
	  accidentally deleted the last one.  Useless.

	* graph/gog-style.c (gog_object_get_style) : fix leak.
	(fill_init) : do not assign the style as part of the initialization.

	* graph/gog-renderer-pixbuf.c (make_layout) : another failing attempt
	  to get font sizes to change.

	* graph/gog-renderer-gnome-print.c : An initial pass at font support.
	  Untested, and unlikely to work out of the box.

2003-08-29  Morten Welinder  <terra@gnome.org>

	* graph/gog-axis.c (gog_axis_class_init): Plug leak.

	* utils/go-pattern.c (go_pattern_selector): Free the pixel data.

	* graph/gog-guru.c (graph_typeselect_minor): Handle ->plot
	changing underneath us.

	* utils/go-font.c (go_font_init): Since the key is a pango font
	description, not a go-font, use proper hash and equal functions.

2003-08-29  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_pie/gog-pie.c (gog_pie_view_render) : go
	  clockwise to avoid having ArtRender think the figure is inside out.

2003-08-28  Jody Goldberg <jody@gnome.org>

	* graph/gog-renderer-impl.h : Add font_removed.

2003-08-28  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_pie/gog-pie.c (gog_pie_plot_class_init) : pie
	  series need outlines and fills.

	* graph/gog-theme.c (gog_theme_element_free) : new.
	(gog_theme_element_hash) : ditto.
	(gog_theme_element_eq) : ditto.
	(gog_themes_shutdown) : new to avoid leaking.
	(gog_theme_finalize) : handle lookup by role.
	(gog_theme_init) : ditto.
	(gog_theme_add_element) : ditto.
	(gog_theme_init_style) : rework to clarify precedence.
	    1) <parent_type>::<role>
	    2) ::<role>
	    3) object_type

	* graph/gog-style.c (gog_style_assign) : Use GOFont.
	(gog_style_finalize) : ditto.
	(gog_style_init) : ditto.
	(gog_style_set_font) : new,

	* goffice.c (libgoffice_init) : init fonts.
	(libgoffice_shutdown) : shutdown fonts and themes.

	* utils/go-font.c : new utility class to ref count fonts.

2003-08-28  Morten Welinder  <terra@gnome.org>

	* utils/go-gradient.c (go_gradient_selector): Clean a bit.

	* graph/gog-style.c (gog_style_pref_state_free): Don't unref NULL
	images.
	(gog_style_set_image_preview): Handle setting the same picture,
	just in case.

2003-08-27  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/gog-style.c (gog_style_set_image_preview): add
	  argument to gnm_pixbuf_intelligent_scale call
	(cb_image_file_select) use preview_file_selection_set_filename
	  rather than gtk_file_selection_set_filename
	(fill_image_init): set minimum preview size

2003-08-27  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/gog-style.c (gog_style_set_image_preview): new
	(cb_image_file_select): use gtk_image_set_from_pixbuf
	(fill_image_init): initialize state->fill.image.image
	(cb_fill_type_changed): store original size image
	(gog_style_pref_state_free): free state->fill.image.image
	* graph/gog-style-prefs.glade: add size label to image-fill
	  preview

2003-08-26  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/gog-style.c (cb_image_file_select): use
	  preview_file_selection_new and not
	  gnumeric_dialog_image_file_selection

2003-08-26  Morten Welinder  <terra@gnome.org>

	* utils/go-pattern.c (go_pattern_selector): Get the args to
	gdk_pixbuf_new right.  Plug leak.

	* utils/go-gradient.c (go_gradient_setup): New function.
	(go_gradient_selector): Use go_gradient_setup.  Make return type
	sane.

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_polygon):
	Use go_gradient_setup.

	* graph/gog-renderer-gnome-print.c
	(gog_renderer_gnome_print_draw_polygon): Use go_gradient_setup.

2003-08-25  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/gog-style.c (cb_image_file_select): use
	  gnumeric_dialog_image_file_selection

2003-08-25  Jody Goldberg <jody@gnome.org>

	* graph/gog-renderer-gnome-print.c
	(gog_renderer_gnome_print_draw_polygon) : remove double
	  gonme_print_grestore

2003-08-24  Jody Goldberg <jody@gnome.org>

	* graph/gog-guru.c (cb_graph_guru_clicked) :clear the tmp value that
	  was refing the graph.

2003-08-24  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/gog-guru.c (gog_guru): store and ref gclosure
	(graph_guru_state_destroy): unref closure
	(cb_graph_guru_clicked): invoke gclosure
	* graph/gog-guru.h (gog_guru): use gclosure

2003-08-23  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_barcol/gog-1.5d.c (gog_plot1_5d_update) : doh!

2003-08-22  Jody Goldberg <jody@gnome.org>

	* graph/gog-object.c (gog_role_cmp) : use the new priority field to
	  be smarter.
	(gog_object_dup) : Use the new go_data_dup.
	(gog_object_set_parent) : use gog_role_cmp instead of just using the
	  position.

2003-08-21  Jody Goldberg <jody@gnome.org>

	* graph/gog-guru.c (gog_guru) : use gog_graph_dup now that styles
	  work.

	* graph/gog-object.c (gog_object_dup) : doh! dst = src works better
	  than src = src.

2003-08-21  Jody Goldberg <jody@gnome.org>

	* Release 1.1.20

2003-08-21  Jody Goldberg <jody@gnome.org>

	* graph/gog-object-xml.c (gog_object_new_from_xml) : don't mark newly
	  reconstituted objects as explicitly typed unless they really were.
	(gog_dataset_save) : patch leak.

	* graph/gog-object.c (gog_object_dup) : new.

2003-08-21  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis-prefs.glade : Remove the ticks menu.  I'll handle it
	  via roles later.

	* graph/gog-axis.c (gog_axis_editor) : we're only interested in the
	  line characteristics.

	* utils/go-units.h : fix arg names

	* graph/gog-chart.c (gog_chart_class_init) : add padding_pts.
	* graph/gog-graph.c (gog_graph_class_init) : typo.

2003-08-19  Jody Goldberg <jody@gnome.org>

	* graph/gog-renderer.c (gog_renderer_draw_rectangle) : handle outlines
	  properly.

2003-08-14  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/gog-style-prefs.glade: shuffle fill-image widgets again

2003-08-14  Morten Welinder  <terra@gnome.org>

	* graph/gog-style.c (cb_fill_type_changed): Don't unref the old
	image if it is NULL.

2003-08-14  Jody Goldberg <jody@gnome.org>

	* graph/gog-chart.c (role_plot_post_add) : don't set the axis twice
	  for the first plot.  Add a post condition to keep us honest.

2003-08-12  Jody Goldberg <jody@gnome.org>

	* graph/gog-style.c (fill_image_init) : store the filename
	(cb_image_file_select) : ditto.
	(cb_fill_type_changed) : use it here to support restoring the image
	  filaname even though all we have is the image.

2003-08-13  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/gog-style-prefs.glade: shuffle fill-image widgets
	* graph/gog-guru.glade: increase default size and increase
	  default style portion

2003-08-13  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/gog-style-prefs.glade: align fill-image widgets

2003-08-12  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/gog-style-prefs.glade: improve spacing, add scoll window

2003-08-12  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/gog-style-prefs.glade: add some missed label names

2003-08-10  Jody Goldberg <jody@gnome.org>

	* graph/gog-style.c : re-enable image handling and cache the pixbuf.

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_polygon) : The
	  style stores the pixbuf now, no need to reload the damn thing from
	  disk every time we use it.

	* graph/gog-renderer-gnome-print.c
	(gog_renderer_gnome_print_draw_polygon) : Use a convenience routine
	(print_image) : new convenience routine.

2003-08-11  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/plugins/plot_pie/gog-pie-prefs.c (cb_center_size_changed):
	  scale between display and storage
	(gog_ring_plot_pref): ditto
	* graph/plugins/plot_pie/gog-ring-prefs.glade: center_size spin
	  button should range from 0 to 95 in steps of 5

2003-08-09  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/gog-guru.c: add correct helpfile address

2003-08-01  Morten Welinder  <terra@gnome.org>

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_finalize): Plug
	leak.

	* graph/gog-style.c (gog_style_class_init): Plug leaks.

2003-08-01  Jody Goldberg <jody@gnome.org>

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_path) : use
	  the line characteristics, not outline.
	* graph/gog-renderer-gnome-print.c
	(gog_renderer_gnome_print_draw_path) : ditto.

	* graph/gog-theme.c (gog_themes_init) : set the line width.
	(map_area_series_solid_default) : line colour seems to start at an
	  offset to area colours.
	(map_area_series_solid_guppi) : set the line colour too.

2003-07-31  Jody Goldberg <jody@gnome.org>

	* graph/gog-series.c (gog_series_set_index) : always init the style,
	  don't be cheap.  When loading index is initialized to 0, so the
	  first series would not get styled because it did not look like
	  anything changed.

	* graph/plugins/plot_pie/gog-pie.c (gog_pie_view_render) : fix
	  interpretation of the center_size parameter.  Thanks tino.

	* graph/gog-plot.c (gog_plot_init) : copy the plot descriptor from the
	  class to the plot here for use cases that use g_object_new.
	* graph/gog-plot-engine.c (gog_plot_new_by_name) : rather than here
	  where it gets missed.

	* graph/gog-legend.c (gog_legend_parent_changed) : catch object name
	  changes in the chart and trigger an update.

	* graph/gog-graph.c (cb_graph_idle) : clear the handler before doing
	  the update so that a handler can queue an update for another object.

2003-07-30  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/plugins/plot_barcol/gog-line.[ch]: new. Line and Area support.
	* graph/plugins/plot_barcol/gog-1.d.[ch]: new. Defines base class for
	gog-line and gog-barcol.
	* graph/plugins/plot_barcol/plot-types.xml.in: add support for are and
	line plots.
	* graph/plugins/plot_barcol/plugin.xml.in: add are and line engines.

2003-07-19  Jody Goldberg <jody@gnome.org>

	* graph/gog-chart.c (gog_chart_get_axis) : new.

2003-07-19  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_barcol/plot-types.xml.in : for stacked and
	  percentage set the overlap to 100.

2003-07-17  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_barcol/gog-barcol.c : Request XY axis set.

	* graph/gog-data-set.c (gog_dataset_set_dim_internal) : always fire an
	  update.

2003-07-09  Jody Goldberg <jody@gnome.org>

	* graph/gog-object-xml.h : fix guards

2003-07-07  Jody Goldberg <jody@gnome.org>

	* graph/gog-legend.c (gog_legend_parent_changed) : chain upwards.
	* graph/gog-series.c (gog_series_parent_changed) : ditto.

2003-07-06  Andreas J. Guelzow <aguelzow@taliesin.ca>

	* graph/plugins/plot_pie/gog-ring-prefs.glade: colour -> color

2003-07-06  Andreas J. Guelzow <aguelzow@taliesin.ca>

	* graph/plugins/plot_pie/gog-pie-prefs.glade: colour -> color

2003-07-03  Jon K Hellan  <hellan@acm.org>

	* graph/gog-style.c (init_solid_page, init_gradient_page)
	(init_gradient_page, gog_style_editor): Turn off color combo
	tearoff behaviour in dialogs.

2003-07-02  Jody Goldberg <jody@gnome.org>

	* graph/gog-renderer.c (gog_renderer_init) : tweak the default size to
	  produce a better proportion.

	* graph/plugins/plot_pie/gog-pie.c (gog_pie_view_render) : some minor
	  cleanup.

	* graph/plugins/plot_pie/gog-pie-prefs.glade : fix units of separation
	  spinner.

2003-06-29  Jody Goldberg <jody@gnome.org>

	For Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>
	* graph/plugins/plot_pie/gog-pie.c : Handle rings

2003-06-27  Jody Goldberg <jody@gnome.org>

	* graph/gog-plot.c (gog_plot_set_property) : don't allow setting
	  vary_style_by_element if the plot does not permit it in the current
	  state.
	(gog_plot_get_property) : be anal.

	* graph/plugins/plot_barcol/gog-barcol.c
	(gog_barcol_supports_vary_style_by_element) : new.

2003-06-27  Jody Goldberg <jody@gnome.org>

	* graph/gog-plot-impl.h : Add GogPlotClass::supports_vary_by_element

2003-06-26  Morten Welinder  <terra@gnome.org>

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_polygon):
	Fix gradients.

2003-06-25  Jody Goldberg <jody@gnome.org>

	* graph/gog-plot-engine.c (gog_plot_type_service_finalize) : still
	  incomplete, but the lists definitely need to be freed.

2003-06-25  Jody Goldberg <jody@gnome.org>

	* graph/gog-data-allocator.c (gog_dataset_get_type) : fix
	  cut-n-paste-o.

2003-06-25 Jean Brefort <jean.brefort@ac-dijon.fr>

	* graph/gog-renderer-gnome-print.c: use alpha channel when
	  printing gradients

2003-06-20    Jean Brefort <jean.brefort@ac-dijon.fr>

	* graph/gog-renderer-gnome-print.c (gog_renderer_gnome_print_draw_polygon):
	  unref the pixmaps

2003-06-22  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_pie/gog-pie.c (gog_pie_plot_set_property) : vary
	  style by element handled in plot now.
	(gog_pie_plot_get_property) : ditto.
	(gog_pie_plot_cardinality) : deleted.
	(gog_pie_plot_foreach_elem) : doh!  USe the label we just calculated.
	(gog_pie_view_render) : implement general extracted slices.

	* graph/gog-theme.c (gog_theme_get_name) : new util.

	* graph/gog-style.c : Implement the hooks for serialization but have
	  not actually written them yet.

	* graph/gog-series.c (gog_series_editor) : add a notebook wrapper to
	  allow changing style and data.
	(gog_series_init) : set GogObject::use_parent_as_proxy flag.
	(gog_series_dataset_dims) new.

	* graph/gog-plot.c (gog_plot_set_property) : handle the
	  'vary_style_by_element' at this level.
	(gog_plot_get_cardinality) : ditto.

	* graph/gog-object.c (gog_object_emit_changed) : Add
	  'use_parent_as_proxy' utility to make life easier for things like
	  series that will not have individual views.  This will fire a
	  changed signal from their plots.

	* graph/gog-legend.c (gog_legend_parent_changed) : new.  ensure we get
	  updated when chart cardinality changes.
	(gog_legend_update) : new.

	* graph/gog-label.c (gog_label_editor) : fix.
	(gog_label_class_init) : fix.
	(gog_label_dims) : added to handle the extension to dataset interface.

	* graph/gog-guru.glade : remove frame wrapping the prop notebook.

	* graph/gog-guru.c (prop_notebook_set_current_page) : new util.
	  to cleanup the handling of prop pages.  Only show the border if the
	  prop page is not a notebook.  This keeps the layout visually
	  similar in both cases.
	(cb_select_prop_page) : use it here.
	(cb_attr_tree_selection_change) : and here.
	(graph_guru_type_selector_new) : remove the useless notebook wrapping
	  the type selector.  It gives us more space and forces an initial
	  selection.

	* graph/gog-graph.c (gog_graph_set_property) : add a 'theme-name'
	  property to facilitate serialization.

	* graph/gog-data-allocator.c (gog_dataset_dims) : extension to the
	  dataset interface to facilitate serialization.

	* graph/gog-chart.c (gog_chart_get_property) : new.  Needed a way to
	  signal that the cardinality had changed, and a read only property
	  with a notify handler seemed cleaner than a stand alone signal.
	  Looking back at that decision, it seems ugly.  Might revisit this
	  later.

	* graph/gog-axis.c : hook up the dataset interface to prepare for
	 serializing all the flags.

	* graph/go-data-impl.h (GOData) : extend interface to require a
	  'from_str' operation to allow serialization to xml.
	* graph/go-data.c (go_data_from_str) : wrapper.

	* graph/Makefile.am : Add gog-object-xml.[ch]

2003-06-14    Jean Brefort <jean.brefort@ac-dijon.fr>

	* graph/gog-style.c (gog_style_editor): move a bad placed g_signal_connect
	* graph/gog-style.c (gog_style_copy): duplicate filename if useful
	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_polygon):
	  added missing white spaces (purely cosmetic)
	* graph/gog-renderer-pixbuf.c (go_color_to_artpix): removed static
	* graph/gog-renderer-gnome-print.c (gog_renderer_gnome_print_draw_polygon):
	  added image and gradient support

2003-06-13  Jon K Hellan  <hellan@acm.org>

	* graph/gog-style.c (gog_style_editor) : Use the new
	color_combo_set_instant_apply flag.

2003-06-12  Jody Goldberg <jody@gnome.org>

	* graph/goffice-graph.h : remove POSITION_FILL
	  It does no good to have random thought experiments floating around.

2003-06-12  Jody Goldberg <jody@gnome.org>

	* graph/gog-guru.c (graph_guru_type_selector_new) : add an accelerator
	  for the plot family selector.

2003-06-10  Jody Goldberg <jody@gnome.org>

	* graph/gog-view.c (gog_view_size_allocate) : Use the new debug macro.
	(cb_model_changed) : ditto.
	* graph/gog-object.c (gog_object_update) : and here.

	* graph/goffice-graph.h : Add trivial d() debugging macro so that
	  normal folk don't get deluged with debug spew.
	* graph/lib.c : store goffice_graph_debug_level here.

	* graph/gog-renderer-gnome-print.c * (gog_renderer_gnome_print_draw_text) :
	  implement trivial version.  Need to decide how to handle fonts.

2003-06-10  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_pie/gog-pie.c (gog_pie_series_update) :
	  handle series before they are valid.
	* graph/plugins/plot_barcol/gog-barcol.c (gog_barcol_series_update) : ditto.

	* graph/gog-object.c (gog_object_set_parent) : call the role's
	  post_add routine then objects parent_changed before signaling its
	  addition.
	(gog_object_add_by_role) : set_parent calls the role functions, not us.

2003-06-07    Jean Brefort <jean.brefort@ac-dijon.fr>

	* graph/gog-style.c (gog_style_editor) :
	* graph/gog-style.h (struct _GogStyle) :
	* graph/gog-style-prefs.glade :
	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_polygon) : Start work on image

2003-06-07  Jody Goldberg <jody@gnome.org>

	* Release 1.1.19

2003-06-07  Jody Goldberg <jody@gnome.org>

	* Release 1.1.18

2003-06-07  Jody Goldberg <jody@gnome.org>

	* graph/gog-view.c (gog_view_queue_resize) : invalidate the allocation
	  too if there is no parent.

2003-06-06  Jody Goldberg <jody@gnome.org>

	* graph/gog-chart.c (gog_chart_set_position) : simplify.
	* graph/gog-graph.c (gog_graph_validate_chart_layout) : new.

	* graph/gog-guru.c (cb_sample_pressed) : set the zoom here.
	(cb_sample_released) : and unset it here so that the icons don't get
	  shrunk.

2003-06-04  J.H.M. Dassen (Ray) <jdassen@debian.org>

	* graph/gog-style.h: Fixed include of command-context.h to make it work
	for builds outside the source dir.

2003-06-04  Jody Goldberg <jody@gnome.org>

	* graph/gog-object.c (gog_object_generate_name) : return NULL, not FALSE

2003-06-03  J.H.M. Dassen (Ray) <jdassen@debian.org>

	* graph/gog-guru.h: Fixed include of command-context.h to make it work
	for builds outside the source dir.

2003-06-02  Jody Goldberg <jody@gnome.org>

	* graph/gog-legend.c (cb_render_elements) : quick and dirty draw the
	  text.  Still lots of work needed to measure things properly and do a
	  more dynamic layout.

	* graph/gog-guru.c (cb_typesel_sample_plot_resize) : use the canvas zoom
	(cb_sample_plot_resize) : ditto.
	(graph_guru_init_format_page) : ditto.
	(graph_guru_type_selector_new) : ditto.

	* graph/gog-renderer-pixbuf.c (make_layout) : new.
	(gog_renderer_pixbuf_draw_text) : new. simple handler no rotation yet.
	(gog_renderer_pixbuf_measure_text) : new.
	(gog_art_renderer_new) : new utility.
	(gog_renderer_pixbuf_draw_polygon) : used here.

	* graph/gog-control-foocanvas.c (gog_control_foocanvas_draw) : another
	  speed up by using regions rather tha nthe bounding rect of the expose.
	  Thanks to AlexL for pointing out that this will help us when
	  multiple exposes are compressed into 1 event and we do better to
	  clip against the distinct sub regions, than the bounding box of all
	  of them.
	(gog_control_foocanvas_update) : make life easier and pass the zoom to
	  the renderer.

2003-06-02  Jody Goldberg <jody@gnome.org>

	* graph/gog-style.c : minor warning suppression and format style
	  tidying.

2003-06-01  Jean Brefort <jean.brefort@ac-dijon.fr>
	* graph/gog-style.h : new gradient styles,
		fill type accessible only if GOG_STYLE_FILL is used
	* graph/gog-style.c : Enhanced gradient selector
	* graph/gog-renderer-pixbuf.c : Support for new gradient types
	* graph/gog-themes.c : Top to bottom gradient in Guppi theme

2003-05-31  Jody Goldberg <jody@gnome.org>

	For Jean Brefort <jean.brefort@ac-dijon.fr>
	* graph/gog-style.c (gog_style_editor) : Start work on gradient
	  selector.

2003-05-31  Jody Goldberg <jody@gnome.org>

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_update) : fix
	  canvas warnings about tryingto queue an update from an update
	  handler.

2003-05-30  Jody Goldberg <jody@gnome.org>

	* graph/gog-theme.c (gog_themes_init) : make default them fill legend
	  with white.

	* graph/plugins/plot_barcol/gog-barcol.c (barcol_draw_rect) : smooth
	  the anti-aliasing fuzziness in the libart backend for hairline
	  outlines.

	* graph/gog-chart.c (gog_chart_view_size_allocate) : support
	  positions of NE, NW, SE, SW so that we can handle XL's 'corner'
	  legends.

	* graph/gog-control-foocanvas.c (gog_control_foocanvas_draw) : big
	  speed win.  Only draw the piece of the chart that was exposed.

	* graph/gog-plot.c (gog_plot_request_cardinality_update) : we may add
	  a series before assigning to a chart.

	* graph/gog-theme.c (gog_themes_init) : default and guppi themes were
	  inverted for legends.

	* graph/gog-chart.c (gog_chart_class_init) : default to centering
	  legends.

2003-05-30  Jody Goldberg <jody@gnome.org>

	* graph/gog-chart.c (gog_chart_view_render) : re-enable.

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_update) :
	  When the scale changes size requests are invalidated.

	* graph/gog-renderer.c (gog_renderer_invalidate_size_requests) : new.
	* graph/gog-view.c (gog_view_invalidate_sizes) : new.

	* graph/gog-legend.c (gog_legend_view_render) : typo.  pad is in Y
	  coordinates.

	* graph/gog-plot.c (role_series_post_add) : adding a series changes
	  the cardinality.
	(role_series_pre_remove) : ditto.
	(gog_plot_update) : delete.  Already handled at the chart level.
	(gog_plot_init) : Make sure cardinailty is initially valid so that we
	  queue an update request as necessary when it really
	  does change.

	* graph/gog-chart.c (gog_chart_view_size_allocate) : support the
	  alignment flags and enforce clipping.
	(role_plot_post_add) : adding a plot changes the cardinality.
	(role_plot_pre_remove) : ditto.
	(gog_chart_init) : Make sure cardinailty is initially valid so that we
	  queue an update request as necessary when it really
	  does change.

2003-05-29  Jody Goldberg <jody@gnome.org>

	* graph/gog-renderer.c (gog_renderer_outline_size) : keep widths >= 1

	* graph/plugins/plot_barcol/gog-barcol.c (barcol_draw_rect) : clip to
	  integer sizes to decrease amount of bleed through due to antialiasing.

2003-05-27  Jody Goldberg <jody@gnome.org>

	* graph/gog-legend.c : make the swatch sizes properties.

	* graph/gog-guru.c (cb_typesel_sample_plot_resize) : fix sizing.
	(cb_sample_plot_resize) : ditto.

	* graph/gog-renderer.c (gog_renderer_set_property) : doh!
	  set the values if they are _different_ not the same.

2003-05-26  Jody Goldberg <jody@gnome.org>

	* graph/gog-guru.c (graph_guru_set_page) : we can't run the
	  typeselector without a chart selected.
	(cb_graph_guru_add_plot) : the child_added handler already populates
	  things.
	(cb_find_child_added) : It may happen that something else will add an
	  item while we're editing, and the change of focus may not be
	  welcome,  However, it is far more likely that we just added it.

	* graph/gog-object.c (gog_object_is_deletable) : don't let the guru
	  delete the top level graph.

	* graph/gog-guru.glade : Add border to the menu bar to align it with
	  the scrolled window.
	Add a 'Precedence' menu.

2003-05-25  Jody Goldberg <jody@gnome.org>

	The code is in CVS time to start keeping a changelog.
